/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[4],[function(t,e,n){"use strict";n.d(e,"u",(function(){return r})),n.d(e,"p",(function(){return o})),n.d(e,"j",(function(){return c})),n.d(e,"s",(function(){return l})),n.d(e,"k",(function(){return h})),n.d(e,"t",(function(){return d})),n.d(e,"n",(function(){return f})),n.d(e,"r",(function(){return m})),n.d(e,"l",(function(){return v})),n.d(e,"m",(function(){return y})),n.d(e,"h",(function(){return x})),n.d(e,"v",(function(){return _})),n.d(e,"i",(function(){return w})),n.d(e,"q",(function(){return M})),n.d(e,"f",(function(){return S})),n.d(e,"b",(function(){return T})),n.d(e,"e",(function(){return E})),n.d(e,"c",(function(){return A})),n.d(e,"d",(function(){return L})),n.d(e,"g",(function(){return C})),n.d(e,"a",(function(){return R})),n.d(e,"o",(function(){return P}));var r={},o=[{name:"French",code:"fr",iso:"fr-FR",file:"fr-FR.js"},{name:"English",code:"en",iso:"en-US",file:"en-US.js"},{name:"Japanese",code:"ja",iso:"ja-JP",file:"ja-JP.js"}],c="en",l="___",h="default",d="prefix_except_default",f=!0,m=null,v={useCookie:!0,cookieDomain:null,cookieKey:"i18n_redirected",alwaysRedirect:!1,fallbackLocale:""},y=!1,x="",_={moduleName:"i18n",syncLocale:!1,syncMessages:!1,syncRouteParams:!0},w=function(){return null},M=function(){return null},S="nuxt-i18n",T="code",E="iso",A="domain",L="file",C={PREFIX:"prefix",PREFIX_EXCEPT_DEFAULT:"prefix_except_default",PREFIX_AND_DEFAULT:"prefix_and_default",NO_PREFIX:"no_prefix"},R="nuxtI18n",P=["fr","en","ja"]},function(t,e,n){"use strict";n.d(e,"a",(function(){return component}));n(75),n(79),n(38),n(99),n(53),n(222),n(24),n(39);var r=n(160),o=n(161),c=new(function(){function t(){Object(r.a)(this,t),this.data={},this.listeners={},this.fireAtStart={},this.instances=[]}return Object(o.a)(t,[{key:"on",value:function(t,e){this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(e)}},{key:"off",value:function(t,e){t in this.listeners!=!1&&this.listeners[t].splice(this.listeners[t].indexOf(e),1)}},{key:"register",value:function(t){for(var e in this.instances.push(t),this.fireAtStart)this.fireMethod(t,e)}},{key:"getInstance",value:function(t){return this.instances.find((function(e){return e.constructor.name==t}))}},{key:"unregister",value:function(t){var e=this.instances.indexOf(t);e>-1&&this.instances.splice(e,1)}},{key:"nameToMethod",value:function(t){return"on".concat(t.charAt(0).toUpperCase()+t.slice(1))}},{key:"fireMethod",value:function(t,e){var n=t[this.nameToMethod(e)];"function"==typeof n&&n.call(t,this.data[e])}},{key:"trigger",value:function(t){var e=this,n=t.name,r=t.fireAtStart,o=void 0!==r&&r,c=t.log,l=void 0!==c&&c,data=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.data[n]=data,o&&(this.fireAtStart[n]=!0),l&&console.log("üë®‚Äçüè´ ".concat(n," ‚Äì ").concat(data)),n in this.listeners)for(var i=0;i<this.listeners[n].length;i++)this.listeners[n][i].call(this,data);this.instances.forEach((function(t){return e.fireMethod(t,n)}))}}]),t}()),component=function(t){return c.register(t),t.scope=c,c};e.b=c},,function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"d",(function(){return c})),n.d(e,"b",(function(){return l})),n.d(e,"e",(function(){return h})),n.d(e,"f",(function(){return d})),n.d(e,"c",(function(){return f})),n.d(e,"g",(function(){return m}));var r=n(18),o=[],c={name:"You",id:1,character:"",type:"player",pattern:null},l={nickname:null,uid:null,mailed:!1,mail:"",labID:null,session:{level1:[],level2:[],level3:[]}},h=[[0,0],[3,2],[6,0],[9,7],[12,2],[15,9],[18,3],[21,9],[24,1],[27,7],[30,0]],d=[[0,new r.Vector3(2,0,1)],[1,new r.Vector3(-1.4,0,2)],[3,new r.Vector3(1,0,-2.3)],[5,new r.Vector3(-2.6,0,-2)],[6,new r.Vector3(2.4,0,2)],[7,new r.Vector3(-2.6,0,-2)],[9,new r.Vector3(-1.6,0,2.1)],[12,new r.Vector3(-1.4,0,2)],[13,new r.Vector3(-2.6,0,2)],[15,new r.Vector3(2,0,-2.6)],[18,new r.Vector3(-2.6,0,-2)],[21,new r.Vector3(-2,0,2.6)],[22,new r.Vector3(1,0,-2.3)],[23,new r.Vector3(2,0,1)],[24,new r.Vector3(-2.6,0,-2)],[27,new r.Vector3(2,0,-2.6)],[30,new r.Vector3(-2.6,0,2)]],f={id:null},m={sound:null}},function(t,e,n){"use strict";n.d(e,"k",(function(){return y})),n.d(e,"m",(function(){return x})),n.d(e,"l",(function(){return _})),n.d(e,"e",(function(){return w})),n.d(e,"b",(function(){return M})),n.d(e,"s",(function(){return S})),n.d(e,"g",(function(){return T})),n.d(e,"h",(function(){return E})),n.d(e,"d",(function(){return A})),n.d(e,"r",(function(){return L})),n.d(e,"j",(function(){return C})),n.d(e,"t",(function(){return P})),n.d(e,"o",(function(){return I})),n.d(e,"q",(function(){return k})),n.d(e,"f",(function(){return N})),n.d(e,"c",(function(){return D})),n.d(e,"i",(function(){return z})),n.d(e,"p",(function(){return B})),n.d(e,"a",(function(){return W})),n.d(e,"n",(function(){return $}));n(41),n(60),n(61),n(75),n(56),n(38),n(62),n(58),n(99),n(163),n(59),n(221),n(53),n(24),n(92),n(93),n(70),n(19),n(193),n(47),n(45),n(241),n(71),n(40),n(219),n(100),n(243),n(72),n(245),n(39),n(46);var r=n(36),o=n(35),c=(n(27),n(8)),l=n(44),h=n(2);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function m(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function y(t){h.a.config.errorHandler&&h.a.config.errorHandler(t)}function x(t){return t.then((function(t){return t.default||t}))}function _(t){return t.$options&&"function"==typeof t.$options.fetch&&!t.$options.fetch.length}function w(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=t.$children||[],o=m(r);try{for(o.s();!(e=o.n()).done;){var c=e.value;c.$fetch?n.push(c):c.$children&&w(c,n)}}catch(t){o.e(t)}finally{o.f()}return n}function M(t,e){if(e||!t.options.__hasNuxtData){var n=t.options._originDataFn||t.options.data||function(){return{}};t.options._originDataFn=n,t.options.data=function(){var data=n.call(this,this);return this.$ssrContext&&(e=this.$ssrContext.asyncData[t.cid]),f(f({},data),e)},t.options.__hasNuxtData=!0,t._Ctor&&t._Ctor.options&&(t._Ctor.options.data=t.options.data)}}function S(t){return t.options&&t._Ctor===t||(t.options?(t._Ctor=t,t.extendOptions=t.options):(t=h.a.extend(t))._Ctor=t,!t.options.name&&t.options.__file&&(t.options.name=t.options.__file)),t}function T(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"components";return Array.prototype.concat.apply([],t.matched.map((function(t,r){return Object.keys(t[n]).map((function(o){return e&&e.push(r),t[n][o]}))})))}function E(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return T(t,e,"instances")}function A(t,e){return Array.prototype.concat.apply([],t.matched.map((function(t,n){return Object.keys(t.components).reduce((function(r,o){return t.components[o]?r.push(e(t.components[o],t.instances[o],t,o,n)):delete t.components[o],r}),[])})))}function L(t,e){return Promise.all(A(t,function(){var t=Object(c.a)(regeneratorRuntime.mark((function t(n,r,o,c){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("function"!=typeof n||n.options){t.next=4;break}return t.next=3,n();case 3:n=t.sent;case 4:return o.components[c]=n=S(n),t.abrupt("return","function"==typeof e?e(n,r,o,c):n);case 6:case"end":return t.stop()}}),t)})));return function(e,n,r,o){return t.apply(this,arguments)}}()))}function C(t){return R.apply(this,arguments)}function R(){return(R=Object(c.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,L(e);case 4:return t.abrupt("return",f(f({},e),{},{meta:T(e).map((function(t,n){return f(f({},t.options.meta),(e.matched[n]||{}).meta)}))}));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function P(t,e){return O.apply(this,arguments)}function O(){return(O=Object(c.a)(regeneratorRuntime.mark((function t(e,n){var c,l,h,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.context||(e.context={isStatic:!1,isDev:!1,isHMR:!1,app:e,store:e.store,payload:n.payload,error:n.error,base:"/",env:{}},n.req&&(e.context.req=n.req),n.res&&(e.context.res=n.res),n.ssrContext&&(e.context.ssrContext=n.ssrContext),e.context.redirect=function(t,path,n){if(t){e.context._redirected=!0;var r=Object(o.a)(path);if("number"==typeof t||"undefined"!==r&&"object"!==r||(n=path||{},path=t,r=Object(o.a)(path),t=302),"object"===r&&(path=e.router.resolve(path).route.fullPath),!/(^[.]{1,2}\/)|(^\/(?!\/))/.test(path))throw path=V(path,n),window.location.replace(path),new Error("ERR_REDIRECT");e.context.next({path:path,query:n,status:t})}},e.context.nuxtState=window.__NUXT__),t.next=3,Promise.all([C(n.route),C(n.from)]);case 3:c=t.sent,l=Object(r.a)(c,2),h=l[0],d=l[1],n.route&&(e.context.route=h),n.from&&(e.context.from=d),e.context.next=n.next,e.context._redirected=!1,e.context._errored=!1,e.context.isHMR=!1,e.context.params=e.context.route.params||{},e.context.query=e.context.route.query||{};case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function I(t,e){return!t.length||e._redirected||e._errored?Promise.resolve():k(t[0],e).then((function(){return I(t.slice(1),e)}))}function k(t,e){var n;return(n=2===t.length?new Promise((function(n){t(e,(function(t,data){t&&e.error(t),n(data=data||{})}))})):t(e))&&n instanceof Promise&&"function"==typeof n.then?n:Promise.resolve(n)}function N(base,t){var path=decodeURI(window.location.pathname);return"hash"===t?window.location.hash.replace(/^#\//,""):(base&&(path.endsWith("/")?path:path+"/").startsWith(base)&&(path=path.slice(base.length)),(path||"/")+window.location.search+window.location.hash)}function D(t,e){return function(t,e){for(var n=new Array(t.length),i=0;i<t.length;i++)"object"===Object(o.a)(t[i])&&(n[i]=new RegExp("^(?:"+t[i].pattern+")$",H(e)));return function(e,r){for(var path="",data=e||{},o=(r||{}).pretty?j:encodeURIComponent,c=0;c<t.length;c++){var l=t[c];if("string"!=typeof l){var h=data[l.name||"pathMatch"],d=void 0;if(null==h){if(l.optional){l.partial&&(path+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(Array.isArray(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var f=0;f<h.length;f++){if(d=o(h[f]),!n[c].test(d))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(d)+"`");path+=(0===f?l.prefix:l.delimiter)+d}}else{if(d=l.asterisk?j(h,!0):o(h),!n[c].test(d))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+d+'"');path+=l.prefix+d}}else path+=l}return path}}(function(t,e){var n,r=[],o=0,c=0,path="",l=e&&e.delimiter||"/";for(;null!=(n=F.exec(t));){var h=n[0],d=n[1],f=n.index;if(path+=t.slice(c,f),c=f+h.length,d)path+=d[1];else{var m=t[c],v=n[2],y=n[3],x=n[4],_=n[5],w=n[6],M=n[7];path&&(r.push(path),path="");var S=null!=v&&null!=m&&m!==v,T="+"===w||"*"===w,E="?"===w||"*"===w,A=n[2]||l,pattern=x||_;r.push({name:y||o++,prefix:v||"",delimiter:A,optional:E,repeat:T,partial:S,asterisk:Boolean(M),pattern:pattern?G(pattern):M?".*":"[^"+U(A)+"]+?"})}}c<t.length&&(path+=t.substr(c));path&&r.push(path);return r}(t,e),e)}function z(t,e){var n={},r=f(f({},t),e);for(var o in r)String(t[o])!==String(e[o])&&(n[o]=!0);return n}function B(t){var e;if(t.message||"string"==typeof t)e=t.message||t;else try{e=JSON.stringify(t,null,2)}catch(n){e="[".concat(t.constructor.name,"]")}return f(f({},t),{},{message:e,statusCode:t.statusCode||t.status||t.response&&t.response.status||500})}window.onNuxtReadyCbs=[],window.onNuxtReady=function(t){window.onNuxtReadyCbs.push(t)};var F=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function j(t,e){var n=e?/[?#]/g:/[/?#]/g;return encodeURI(t).replace(n,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function U(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function G(t){return t.replace(/([=!:$/()])/g,"\\$1")}function H(t){return t&&t.sensitive?"":"i"}function V(t,e){var n,o=t.indexOf("://");-1!==o?(n=t.substring(0,o),t=t.substring(o+3)):t.startsWith("//")&&(t=t.substring(2));var c,l=t.split("/"),h=(n?n+"://":"//")+l.shift(),path=l.join("/");if(""===path&&1===l.length&&(h+="/"),2===(l=path.split("#")).length){var d=l,f=Object(r.a)(d,2);path=f[0],c=f[1]}return h+=path?"/"+path:"",e&&"{}"!==JSON.stringify(e)&&(h+=(2===t.split("?").length?"&":"?")+function(t){return Object.keys(t).sort().map((function(e){var n=t[e];return null==n?"":Array.isArray(n)?n.slice().map((function(t){return[e,"=",t].join("")})).join("&"):e+"="+n})).filter(Boolean).join("&")}(e)),h+=c?"#"+c:""}function W(t,e,n){t.$options[e]||(t.$options[e]=[]),t.$options[e].includes(n)||t.$options[e].push(n)}function Z(path){return path.replace(/\/+$/,"")||"/"}function $(t,e){return Z(t)===Z(e)}},,function(t,e,n){"use strict";var r={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},o={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},c=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],l={CSS:{},springs:{}};function h(t,e,n){return Math.min(Math.max(t,e),n)}function d(t,text){return t.indexOf(text)>-1}function f(t,e){return t.apply(null,e)}var m={arr:function(a){return Array.isArray(a)},obj:function(a){return d(Object.prototype.toString.call(a),"Object")},pth:function(a){return m.obj(a)&&a.hasOwnProperty("totalLength")},svg:function(a){return a instanceof SVGElement},inp:function(a){return a instanceof HTMLInputElement},dom:function(a){return a.nodeType||m.svg(a)},str:function(a){return"string"==typeof a},fnc:function(a){return"function"==typeof a},und:function(a){return void 0===a},hex:function(a){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(a)},rgb:function(a){return/^rgb/.test(a)},hsl:function(a){return/^hsl/.test(a)},col:function(a){return m.hex(a)||m.rgb(a)||m.hsl(a)},key:function(a){return!r.hasOwnProperty(a)&&!o.hasOwnProperty(a)&&"targets"!==a&&"keyframes"!==a}};function v(t){var e=/\(([^)]+)\)/.exec(t);return e?e[1].split(",").map((function(p){return parseFloat(p)})):[]}function y(t,e){var n=v(t),r=h(m.und(n[0])?1:n[0],.1,100),o=h(m.und(n[1])?100:n[1],.1,100),c=h(m.und(n[2])?10:n[2],.1,100),d=h(m.und(n[3])?0:n[3],.1,100),f=Math.sqrt(o/r),y=c/(2*Math.sqrt(o*r)),x=y<1?f*Math.sqrt(1-y*y):0,b=y<1?(y*f-d)/x:-d+f;function _(t){var progress=e?e*t/1e3:t;return progress=y<1?Math.exp(-progress*y*f)*(1*Math.cos(x*progress)+b*Math.sin(x*progress)):(1+b*progress)*Math.exp(-progress*f),0===t||1===t?t:1-progress}return e?_:function(){var e=l.springs[t];if(e)return e;for(var n=0,r=0;;)if(1===_(n+=1/6)){if(++r>=16)break}else r=0;var o=n*(1/6)*1e3;return l.springs[t]=o,o}}function x(t){return void 0===t&&(t=10),function(e){return Math.round(e*t)*(1/t)}}var _,w,M=function(){function t(t,e){return 1-3*e+3*t}function e(t,e){return 3*e-6*t}function n(t){return 3*t}function r(r,o,c){return((t(o,c)*r+e(o,c))*r+n(o))*r}function o(r,o,c){return 3*t(o,c)*r*r+2*e(o,c)*r+n(o)}return function(t,e,n,c){if(0<=t&&t<=1&&0<=n&&n<=1){var l=new Float32Array(11);if(t!==e||n!==c)for(var i=0;i<11;++i)l[i]=r(.1*i,t,n);return function(o){return t===e&&n===c||0===o||1===o?o:r(h(o),e,c)}}function h(e){for(var c=0,h=1;10!==h&&l[h]<=e;++h)c+=.1;--h;var d=c+.1*((e-l[h])/(l[h+1]-l[h])),f=o(d,t,n);return f>=.001?function(t,e,n,c){for(var i=0;i<4;++i){var l=o(e,n,c);if(0===l)return e;e-=(r(e,n,c)-t)/l}return e}(e,d,t,n):0===f?d:function(t,e,n,o,c){var l,h,i=0;do{(l=r(h=e+(n-e)/2,o,c)-t)>0?n=h:e=h}while(Math.abs(l)>1e-7&&++i<10);return h}(e,c,c+.1,t,n)}}}(),S=(_={linear:function(){return function(t){return t}}},w={Sine:function(){return function(t){return 1-Math.cos(t*Math.PI/2)}},Circ:function(){return function(t){return 1-Math.sqrt(1-t*t)}},Back:function(){return function(t){return t*t*(3*t-2)}},Bounce:function(){return function(t){for(var e,b=4;t<((e=Math.pow(2,--b))-1)/11;);return 1/Math.pow(4,3-b)-7.5625*Math.pow((3*e-2)/22-t,2)}},Elastic:function(t,e){void 0===t&&(t=1),void 0===e&&(e=.5);var a=h(t,1,10),p=h(e,.1,2);return function(t){return 0===t||1===t?t:-a*Math.pow(2,10*(t-1))*Math.sin((t-1-p/(2*Math.PI)*Math.asin(1/a))*(2*Math.PI)/p)}}},["Quad","Cubic","Quart","Quint","Expo"].forEach((function(t,i){w[t]=function(){return function(t){return Math.pow(t,i+2)}}})),Object.keys(w).forEach((function(t){var e=w[t];_["easeIn"+t]=e,_["easeOut"+t]=function(a,b){return function(t){return 1-e(a,b)(1-t)}},_["easeInOut"+t]=function(a,b){return function(t){return t<.5?e(a,b)(2*t)/2:1-e(a,b)(-2*t+2)/2}}})),_);function T(t,e){if(m.fnc(t))return t;var n=t.split("(")[0],r=S[n],o=v(t);switch(n){case"spring":return y(t,e);case"cubicBezier":return f(M,o);case"steps":return f(x,o);default:return f(r,o)}}function E(t){try{return document.querySelectorAll(t)}catch(t){return}}function A(t,e){for(var n=t.length,r=arguments.length>=2?arguments[1]:void 0,o=[],i=0;i<n;i++)if(i in t){var c=t[i];e.call(r,c,i,t)&&o.push(c)}return o}function L(t){return t.reduce((function(a,b){return a.concat(m.arr(b)?L(b):b)}),[])}function C(t){return m.arr(t)?t:(m.str(t)&&(t=E(t)||t),t instanceof NodeList||t instanceof HTMLCollection?[].slice.call(t):[t])}function R(t,e){return t.some((function(a){return a===e}))}function P(t){var e={};for(var p in t)e[p]=t[p];return e}function O(t,e){var n=P(t);for(var p in t)n[p]=e.hasOwnProperty(p)?e[p]:t[p];return n}function I(t,e){var n=P(t);for(var p in e)n[p]=m.und(t[p])?e[p]:t[p];return n}function k(t){return m.rgb(t)?(n=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e=t))?"rgba("+n[1]+",1)":e:m.hex(t)?function(t){var e=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,g,b){return e+e+g+g+b+b})),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return"rgba("+parseInt(n[1],16)+","+parseInt(n[2],16)+","+parseInt(n[3],16)+",1)"}(t):m.hsl(t)?function(t){var e,g,b,n=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(t),r=parseInt(n[1],10)/360,s=parseInt(n[2],10)/100,o=parseInt(n[3],10)/100,a=n[4]||1;function c(p,q,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?p+6*(q-p)*t:t<.5?q:t<2/3?p+(q-p)*(2/3-t)*6:p}if(0==s)e=g=b=o;else{var q=o<.5?o*(1+s):o+s-o*s,p=2*o-q;e=c(p,q,r+1/3),g=c(p,q,r),b=c(p,q,r-1/3)}return"rgba("+255*e+","+255*g+","+255*b+","+a+")"}(t):void 0;var e,n}function N(t){var e=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(t);if(e)return e[1]}function D(t,e){return m.fnc(t)?t(e.target,e.id,e.total):t}function z(t,e){return t.getAttribute(e)}function B(t,e,n){if(R([n,"deg","rad","turn"],N(e)))return e;var r=l.CSS[e+n];if(!m.und(r))return r;var o=document.createElement(t.tagName),c=t.parentNode&&t.parentNode!==document?t.parentNode:document.body;c.appendChild(o),o.style.position="absolute",o.style.width=100+n;var h=100/o.offsetWidth;c.removeChild(o);var d=h*parseFloat(e);return l.CSS[e+n]=d,d}function F(t,e,n){if(e in t.style){var r=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),o=t.style[e]||getComputedStyle(t).getPropertyValue(r)||"0";return n?B(t,o,n):o}}function j(t,e){return m.dom(t)&&!m.inp(t)&&(z(t,e)||m.svg(t)&&t[e])?"attribute":m.dom(t)&&R(c,e)?"transform":m.dom(t)&&"transform"!==e&&F(t,e)?"css":null!=t[e]?"object":void 0}function U(t){if(m.dom(t)){for(var e,n=t.style.transform||"",r=/(\w+)\(([^)]*)\)/g,o=new Map;e=r.exec(n);)o.set(e[1],e[2]);return o}}function G(t,e,n,r){var o=d(e,"scale")?1:0+function(t){return d(t,"translate")||"perspective"===t?"px":d(t,"rotate")||d(t,"skew")?"deg":void 0}(e),c=U(t).get(e)||o;return n&&(n.transforms.list.set(e,c),n.transforms.last=e),r?B(t,c,r):c}function H(t,e,n,r){switch(j(t,e)){case"transform":return G(t,e,r,n);case"css":return F(t,e,n);case"attribute":return z(t,e);default:return t[e]||0}}function V(t,e){var n=/^(\*=|\+=|-=)/.exec(t);if(!n)return t;var u=N(t)||0,r=parseFloat(e),o=parseFloat(t.replace(n[0],""));switch(n[0][0]){case"+":return r+o+u;case"-":return r-o+u;case"*":return r*o+u}}function W(t,e){if(m.col(t))return k(t);if(/\s/g.test(t))return t;var n=N(t),r=n?t.substr(0,t.length-n.length):t;return e?r+e:r}function Z(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function $(t){for(var e,n=t.points,r=0,i=0;i<n.numberOfItems;i++){var o=n.getItem(i);i>0&&(r+=Z(e,o)),e=o}return r}function Y(t){if(t.getTotalLength)return t.getTotalLength();switch(t.tagName.toLowerCase()){case"circle":return function(t){return 2*Math.PI*z(t,"r")}(t);case"rect":return function(t){return 2*z(t,"width")+2*z(t,"height")}(t);case"line":return function(t){return Z({x:z(t,"x1"),y:z(t,"y1")},{x:z(t,"x2"),y:z(t,"y2")})}(t);case"polyline":return $(t);case"polygon":return function(t){var e=t.points;return $(t)+Z(e.getItem(e.numberOfItems-1),e.getItem(0))}(t)}}function X(t,e){var svg=e||{},n=svg.el||function(t){for(var e=t.parentNode;m.svg(e)&&m.svg(e.parentNode);)e=e.parentNode;return e}(t),rect=n.getBoundingClientRect(),r=z(n,"viewBox"),o=rect.width,c=rect.height,l=svg.viewBox||(r?r.split(" "):[0,0,o,c]);return{el:n,viewBox:l,x:l[0]/1,y:l[1]/1,w:o/l[2],h:c/l[3]}}function J(path,progress){function t(t){void 0===t&&(t=0);var e=progress+t>=1?progress+t:0;return path.el.getPointAtLength(e)}var svg=X(path.el,path.svg),p=t(),e=t(-1),n=t(1);switch(path.property){case"x":return(p.x-svg.x)*svg.w;case"y":return(p.y-svg.y)*svg.h;case"angle":return 180*Math.atan2(n.y-e.y,n.x-e.x)/Math.PI}}function Q(t,e){var n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=W(m.pth(t)?t.totalLength:t,e)+"";return{original:r,numbers:r.match(n)?r.match(n).map(Number):[0],strings:m.str(t)||e?r.split(n):[]}}function K(t){return A(t?L(m.arr(t)?t.map(C):C(t)):[],(function(t,e,n){return n.indexOf(t)===e}))}function tt(t){var e=K(t);return e.map((function(t,i){return{target:t,id:i,total:e.length,transforms:{list:U(t)}}}))}function et(t,e){var n=P(e);if(/^spring/.test(n.easing)&&(n.duration=y(n.easing)),m.arr(t)){var r=t.length;2===r&&!m.obj(t[0])?t={value:t}:m.fnc(e.duration)||(n.duration=e.duration/r)}var o=m.arr(t)?t:[t];return o.map((function(t,i){var n=m.obj(t)&&!m.pth(t)?t:{value:t};return m.und(n.delay)&&(n.delay=i?0:e.delay),m.und(n.endDelay)&&(n.endDelay=i===o.length-1?e.endDelay:0),n})).map((function(t){return I(t,n)}))}function nt(t,e){var n=[],r=e.keyframes;for(var p in r&&(e=I(function(t){for(var e=A(L(t.map((function(t){return Object.keys(t)}))),(function(p){return m.key(p)})).reduce((function(a,b){return a.indexOf(b)<0&&a.push(b),a}),[]),n={},r=function(i){var r=e[i];n[r]=t.map((function(t){var e={};for(var p in t)m.key(p)?p==r&&(e.value=t[p]):e[p]=t[p];return e}))},i=0;i<e.length;i++)r(i);return n}(r),e)),e)m.key(p)&&n.push({name:p,tweens:et(e[p],t)});return n}function it(t,e){var n;return t.tweens.map((function(r){var o=function(t,e){var n={};for(var p in t){var r=D(t[p],e);m.arr(r)&&1===(r=r.map((function(t){return D(t,e)}))).length&&(r=r[0]),n[p]=r}return n.duration=parseFloat(n.duration),n.delay=parseFloat(n.delay),n}(r,e),c=o.value,l=m.arr(c)?c[1]:c,h=N(l),d=H(e.target,t.name,h,e),f=n?n.to.original:d,v=m.arr(c)?c[0]:f,y=N(v)||N(d),x=h||y;return m.und(l)&&(l=f),o.from=Q(v,x),o.to=Q(V(l,v),x),o.start=n?n.end:0,o.end=o.start+o.delay+o.duration+o.endDelay,o.easing=T(o.easing,o.duration),o.isPath=m.pth(c),o.isColor=m.col(o.from.original),o.isColor&&(o.round=1),n=o,o}))}var ot={css:function(t,p,e){return t.style[p]=e},attribute:function(t,p,e){return t.setAttribute(p,e)},object:function(t,p,e){return t[p]=e},transform:function(t,p,e,n,r){if(n.list.set(p,e),p===n.last||r){var o="";n.list.forEach((function(t,e){o+=e+"("+t+") "})),t.style.transform=o}}};function at(t,e){tt(t).forEach((function(t){for(var n in e){var r=D(e[n],t),o=t.target,c=N(r),l=H(o,n,c,t),h=V(W(r,c||N(l)),l),d=j(o,n);ot[d](o,n,h,t.transforms,!0)}}))}function st(t,e){return A(L(t.map((function(t){return e.map((function(e){return function(t,e){var n=j(t.target,e.name);if(n){var r=it(e,t),o=r[r.length-1];return{type:n,property:e.name,animatable:t,tweens:r,duration:o.end,delay:r[0].delay,endDelay:o.endDelay}}}(t,e)}))}))),(function(a){return!m.und(a)}))}function ct(t,e){var n=t.length,r=function(t){return t.timelineOffset?t.timelineOffset:0},o={};return o.duration=n?Math.max.apply(Math,t.map((function(t){return r(t)+t.duration}))):e.duration,o.delay=n?Math.min.apply(Math,t.map((function(t){return r(t)+t.delay}))):e.delay,o.endDelay=n?o.duration-Math.max.apply(Math,t.map((function(t){return r(t)+t.duration-t.endDelay}))):e.endDelay,o}var lt=0;var ut,ht=[],pt=[],ft=function(){function t(){ut=requestAnimationFrame(e)}function e(e){var n=ht.length;if(n){for(var i=0;i<n;){var r=ht[i];if(r.paused){var o=ht.indexOf(r);o>-1&&(ht.splice(o,1),n=ht.length)}else r.tick(e);i++}t()}else ut=cancelAnimationFrame(ut)}return t}();function mt(t){void 0===t&&(t={});var e,n=0,c=0,l=0,d=0,f=null;function m(t){var e=window.Promise&&new Promise((function(t){return f=t}));return t.finished=e,e}var v=function(t){var e=O(r,t),n=O(o,t),c=nt(n,t),l=tt(t.targets),h=st(l,c),d=ct(h,n),f=lt;return lt++,I(e,{id:f,children:[],animatables:l,animations:h,duration:d.duration,delay:d.delay,endDelay:d.endDelay})}(t);m(v);function y(){var t=v.direction;"alternate"!==t&&(v.direction="normal"!==t?"normal":"reverse"),v.reversed=!v.reversed,e.forEach((function(t){return t.reversed=v.reversed}))}function x(time){return v.reversed?v.duration-time:time}function _(){n=0,c=x(v.currentTime)*(1/mt.speed)}function w(time,t){t&&t.seek(time-t.timelineOffset)}function M(t){for(var i=0,e=v.animations,n=e.length;i<n;){var r=e[i],o=r.animatable,c=r.tweens,l=c.length-1,d=c[l];l&&(d=A(c,(function(e){return t<e.end}))[0]||d);for(var f=h(t-d.start-d.delay,0,d.duration)/d.duration,m=isNaN(f)?1:d.easing(f),y=d.to.strings,x=d.round,_=[],w=d.to.numbers.length,progress=void 0,M=0;M<w;M++){var S=void 0,T=d.to.numbers[M],E=d.from.numbers[M]||0;S=d.isPath?J(d.value,m*T):E+m*(T-E),x&&(d.isColor&&M>2||(S=Math.round(S*x)/x)),_.push(S)}var L=y.length;if(L){progress=y[0];for(var s=0;s<L;s++){y[s];var b=y[s+1],C=_[s];isNaN(C)||(progress+=b?C+b:C+" ")}}else progress=_[0];ot[r.type](o.target,r.property,progress,o.transforms),r.currentValue=progress,i++}}function S(t){v[t]&&!v.passThrough&&v[t](v)}function T(t){var r=v.duration,o=v.delay,_=r-v.endDelay,T=x(t);v.progress=h(T/r*100,0,100),v.reversePlayback=T<v.currentTime,e&&function(time){if(v.reversePlayback)for(var t=d;t--;)w(time,e[t]);else for(var i=0;i<d;i++)w(time,e[i])}(T),!v.began&&v.currentTime>0&&(v.began=!0,S("begin")),!v.loopBegan&&v.currentTime>0&&(v.loopBegan=!0,S("loopBegin")),T<=o&&0!==v.currentTime&&M(0),(T>=_&&v.currentTime!==r||!r)&&M(r),T>o&&T<_?(v.changeBegan||(v.changeBegan=!0,v.changeCompleted=!1,S("changeBegin")),S("change"),M(T)):v.changeBegan&&(v.changeCompleted=!0,v.changeBegan=!1,S("changeComplete")),v.currentTime=h(T,0,r),v.began&&S("update"),t>=r&&(c=0,v.remaining&&!0!==v.remaining&&v.remaining--,v.remaining?(n=l,S("loopComplete"),v.loopBegan=!1,"alternate"===v.direction&&y()):(v.paused=!0,v.completed||(v.completed=!0,S("loopComplete"),S("complete"),!v.passThrough&&"Promise"in window&&(f(),m(v)))))}return v.reset=function(){var t=v.direction;v.passThrough=!1,v.currentTime=0,v.progress=0,v.paused=!0,v.began=!1,v.loopBegan=!1,v.changeBegan=!1,v.completed=!1,v.changeCompleted=!1,v.reversePlayback=!1,v.reversed="reverse"===t,v.remaining=v.loop,e=v.children;for(var i=d=e.length;i--;)v.children[i].reset();(v.reversed&&!0!==v.loop||"alternate"===t&&1===v.loop)&&v.remaining++,M(v.reversed?v.duration:0)},v.set=function(t,e){return at(t,e),v},v.tick=function(t){l=t,n||(n=l),T((l+(c-n))*mt.speed)},v.seek=function(time){T(x(time))},v.pause=function(){v.paused=!0,_()},v.play=function(){v.paused&&(v.completed&&v.reset(),v.paused=!1,ht.push(v),_(),ut||ft())},v.reverse=function(){y(),_()},v.restart=function(){v.reset(),v.play()},v.reset(),v.autoplay&&v.play(),v}function gt(t,e){for(var a=e.length;a--;)R(t,e[a].animatable.target)&&e.splice(a,1)}"undefined"!=typeof document&&document.addEventListener("visibilitychange",(function(){document.hidden?(ht.forEach((function(ins){return ins.pause()})),pt=ht.slice(0),mt.running=ht=[]):pt.forEach((function(ins){return ins.play()}))})),mt.version="3.1.0",mt.speed=1,mt.running=ht,mt.remove=function(t){for(var e=K(t),i=ht.length;i--;){var n=ht[i],r=n.animations,o=n.children;gt(e,r);for(var c=o.length;c--;){var l=o[c],h=l.animations;gt(e,h),h.length||l.children.length||o.splice(c,1)}r.length||o.length||n.pause()}},mt.get=H,mt.set=at,mt.convertPx=B,mt.path=function(path,t){var e=m.str(path)?E(path)[0]:path,p=t||100;return function(t){return{property:t,el:e,svg:X(e),totalLength:Y(e)*(p/100)}}},mt.setDashoffset=function(t){var e=Y(t);return t.setAttribute("stroke-dasharray",e),e},mt.stagger=function(t,e){void 0===e&&(e={});var n=e.direction||"normal",r=e.easing?T(e.easing):null,o=e.grid,c=e.axis,l=e.from||0,h="first"===l,d="center"===l,f="last"===l,v=m.arr(t),y=v?parseFloat(t[0]):parseFloat(t),x=v?parseFloat(t[1]):0,_=N(v?t[1]:t)||0,w=e.start||0+(v?y:0),M=[],S=0;return function(t,i,e){if(h&&(l=0),d&&(l=(e-1)/2),f&&(l=e-1),!M.length){for(var m=0;m<e;m++){if(o){var T=d?(o[0]-1)/2:l%o[0],E=d?(o[1]-1)/2:Math.floor(l/o[0]),A=T-m%o[0],L=E-Math.floor(m/o[0]),C=Math.sqrt(A*A+L*L);"x"===c&&(C=-A),"y"===c&&(C=-L),M.push(C)}else M.push(Math.abs(l-m));S=Math.max.apply(Math,M)}r&&(M=M.map((function(t){return r(t/S)*S}))),"reverse"===n&&(M=M.map((function(t){return c?t<0?-1*t:-t:Math.abs(S-t)})))}return w+(v?(x-y)/S:y)*(Math.round(100*M[i])/100)+_}},mt.timeline=function(t){void 0===t&&(t={});var e=mt(t);return e.duration=0,e.add=function(n,r){var c=ht.indexOf(e),l=e.children;function h(ins){ins.passThrough=!0}c>-1&&ht.splice(c,1);for(var i=0;i<l.length;i++)h(l[i]);var d=I(n,O(o,t));d.targets=d.targets||t.targets;var f=e.duration;d.autoplay=!1,d.direction=e.direction,d.timelineOffset=m.und(r)?f:V(r,f),h(e),e.seek(d.timelineOffset);var ins=mt(d);h(ins),l.push(ins);var v=ct(l,t);return e.delay=v.delay,e.endDelay=v.endDelay,e.duration=v.duration,e.seek(0),e.reset(),e.autoplay&&e.play(),e},e},mt.easing=T,mt.penner=S,mt.random=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},e.a=mt},,,,,,,,,,,,function(t,e,n){"use strict";n.r(e),n.d(e,"ACESFilmicToneMapping",(function(){return ht})),n.d(e,"AddEquation",(function(){return O})),n.d(e,"AddOperation",(function(){return at})),n.d(e,"AdditiveAnimationBlendMode",(function(){return nn})),n.d(e,"AdditiveBlending",(function(){return L})),n.d(e,"AlphaFormat",(function(){return qt})),n.d(e,"AlwaysDepth",(function(){return X})),n.d(e,"AlwaysStencilFunc",(function(){return kn})),n.d(e,"AmbientLight",(function(){return Fh})),n.d(e,"AmbientLightProbe",(function(){return ld})),n.d(e,"AnimationClip",(function(){return Wu})),n.d(e,"AnimationLoader",(function(){return Ku})),n.d(e,"AnimationMixer",(function(){return jd})),n.d(e,"AnimationObjectGroup",(function(){return Bd})),n.d(e,"AnimationUtils",(function(){return Ou})),n.d(e,"ArcCurve",(function(){return ch})),n.d(e,"ArrayCamera",(function(){return Zs})),n.d(e,"ArrowHelper",(function(){return Rp})),n.d(e,"Audio",(function(){return bd})),n.d(e,"AudioAnalyser",(function(){return Ed})),n.d(e,"AudioContext",(function(){return ad})),n.d(e,"AudioListener",(function(){return xd})),n.d(e,"AudioLoader",(function(){return sd})),n.d(e,"AxesHelper",(function(){return Pp})),n.d(e,"AxisHelper",(function(){return Af})),n.d(e,"BackSide",(function(){return w})),n.d(e,"BasicDepthPacking",(function(){return mn})),n.d(e,"BasicShadowMap",(function(){return m})),n.d(e,"BinaryTextureLoader",(function(){return Of})),n.d(e,"Bone",(function(){return Cc})),n.d(e,"BooleanKeyframeTrack",(function(){return Bu})),n.d(e,"BoundingBoxHelper",(function(){return Lf})),n.d(e,"Box2",(function(){return Xd})),n.d(e,"Box3",(function(){return ur})),n.d(e,"Box3Helper",(function(){return Tp})),n.d(e,"BoxBufferGeometry",(function(){return Po})),n.d(e,"BoxGeometry",(function(){return Ro})),n.d(e,"BoxHelper",(function(){return Sp})),n.d(e,"BufferAttribute",(function(){return Bi})),n.d(e,"BufferGeometry",(function(){return ro})),n.d(e,"BufferGeometryLoader",(function(){return Zh})),n.d(e,"ByteType",(function(){return Nt})),n.d(e,"Cache",(function(){return Zu})),n.d(e,"Camera",(function(){return Do})),n.d(e,"CameraHelper",(function(){return _p})),n.d(e,"CanvasRenderer",(function(){return Nf})),n.d(e,"CanvasTexture",(function(){return el})),n.d(e,"CatmullRomCurve3",(function(){return fh})),n.d(e,"CineonToneMapping",(function(){return ut})),n.d(e,"CircleBufferGeometry",(function(){return xu})),n.d(e,"CircleGeometry",(function(){return yu})),n.d(e,"ClampToEdgeWrapping",(function(){return wt})),n.d(e,"Clock",(function(){return fd})),n.d(e,"ClosedSplineCurve3",(function(){return Sf})),n.d(e,"Color",(function(){return Pi})),n.d(e,"ColorKeyframeTrack",(function(){return Fu})),n.d(e,"CompressedTexture",(function(){return tl})),n.d(e,"CompressedTextureLoader",(function(){return eh})),n.d(e,"ConeBufferGeometry",(function(){return vu})),n.d(e,"ConeGeometry",(function(){return gu})),n.d(e,"CubeCamera",(function(){return Bo})),n.d(e,"CubeGeometry",(function(){return Ro})),n.d(e,"CubeReflectionMapping",(function(){return mt})),n.d(e,"CubeRefractionMapping",(function(){return gt})),n.d(e,"CubeTexture",(function(){return ha})),n.d(e,"CubeTextureLoader",(function(){return rh})),n.d(e,"CubeUVReflectionMapping",(function(){return xt})),n.d(e,"CubeUVRefractionMapping",(function(){return bt})),n.d(e,"CubicBezierCurve",(function(){return yh})),n.d(e,"CubicBezierCurve3",(function(){return xh})),n.d(e,"CubicInterpolant",(function(){return ku})),n.d(e,"CullFaceBack",(function(){return h})),n.d(e,"CullFaceFront",(function(){return d})),n.d(e,"CullFaceFrontBack",(function(){return f})),n.d(e,"CullFaceNone",(function(){return l})),n.d(e,"Curve",(function(){return ah})),n.d(e,"CurvePath",(function(){return Eh})),n.d(e,"CustomBlending",(function(){return P})),n.d(e,"CustomToneMapping",(function(){return pt})),n.d(e,"CylinderBufferGeometry",(function(){return mu})),n.d(e,"CylinderGeometry",(function(){return fu})),n.d(e,"Cylindrical",(function(){return $d})),n.d(e,"DataTexture",(function(){return jo})),n.d(e,"DataTexture2DArray",(function(){return da})),n.d(e,"DataTexture3D",(function(){return pa})),n.d(e,"DataTextureLoader",(function(){return ih})),n.d(e,"DecrementStencilOp",(function(){return Mn})),n.d(e,"DecrementWrapStencilOp",(function(){return Tn})),n.d(e,"DefaultLoadingManager",(function(){return Yu})),n.d(e,"DepthFormat",(function(){return Qt})),n.d(e,"DepthStencilFormat",(function(){return Kt})),n.d(e,"DepthTexture",(function(){return nl})),n.d(e,"DirectionalLight",(function(){return Bh})),n.d(e,"DirectionalLightHelper",(function(){return yp})),n.d(e,"DiscreteInterpolant",(function(){return Du})),n.d(e,"DodecahedronBufferGeometry",(function(){return yl})),n.d(e,"DodecahedronGeometry",(function(){return vl})),n.d(e,"DoubleSide",(function(){return M})),n.d(e,"DstAlphaFactor",(function(){return H})),n.d(e,"DstColorFactor",(function(){return W})),n.d(e,"DynamicBufferAttribute",(function(){return ff})),n.d(e,"DynamicCopyUsage",(function(){return Gn})),n.d(e,"DynamicDrawUsage",(function(){return Dn})),n.d(e,"DynamicReadUsage",(function(){return Fn})),n.d(e,"EdgesGeometry",(function(){return pu})),n.d(e,"EdgesHelper",(function(){return Cf})),n.d(e,"EllipseCurve",(function(){return sh})),n.d(e,"EqualDepth",(function(){return K})),n.d(e,"EqualStencilFunc",(function(){return Cn})),n.d(e,"EquirectangularReflectionMapping",(function(){return vt})),n.d(e,"EquirectangularRefractionMapping",(function(){return yt})),n.d(e,"Euler",(function(){return Wr})),n.d(e,"EventDispatcher",(function(){return qn})),n.d(e,"ExtrudeBufferGeometry",(function(){return Kl})),n.d(e,"ExtrudeGeometry",(function(){return Ql})),n.d(e,"Face3",(function(){return Oi})),n.d(e,"Face4",(function(){return Qp})),n.d(e,"FaceColors",(function(){return nf})),n.d(e,"FileLoader",(function(){return Qu})),n.d(e,"FlatShading",(function(){return S})),n.d(e,"Float32Attribute",(function(){return wf})),n.d(e,"Float32BufferAttribute",(function(){return qi})),n.d(e,"Float64Attribute",(function(){return Mf})),n.d(e,"Float64BufferAttribute",(function(){return Zi})),n.d(e,"FloatType",(function(){return jt})),n.d(e,"Fog",(function(){return ec})),n.d(e,"FogExp2",(function(){return tc})),n.d(e,"Font",(function(){return nd})),n.d(e,"FontLoader",(function(){return id})),n.d(e,"FrontSide",(function(){return _})),n.d(e,"Frustum",(function(){return Ho})),n.d(e,"GLBufferAttribute",(function(){return Hd})),n.d(e,"GLSL1",(function(){return Vn})),n.d(e,"GLSL3",(function(){return Wn})),n.d(e,"GammaEncoding",(function(){return ln})),n.d(e,"Geometry",(function(){return Co})),n.d(e,"GeometryUtils",(function(){return kf})),n.d(e,"GreaterDepth",(function(){return et})),n.d(e,"GreaterEqualDepth",(function(){return tt})),n.d(e,"GreaterEqualStencilFunc",(function(){return In})),n.d(e,"GreaterStencilFunc",(function(){return Pn})),n.d(e,"GridHelper",(function(){return pp})),n.d(e,"Group",(function(){return $s})),n.d(e,"HalfFloatType",(function(){return Ut})),n.d(e,"HemisphereLight",(function(){return Rh})),n.d(e,"HemisphereLightHelper",(function(){return dp})),n.d(e,"HemisphereLightProbe",(function(){return cd})),n.d(e,"IcosahedronBufferGeometry",(function(){return gl})),n.d(e,"IcosahedronGeometry",(function(){return ml})),n.d(e,"ImageBitmapLoader",(function(){return Kh})),n.d(e,"ImageLoader",(function(){return nh})),n.d(e,"ImageUtils",(function(){return Kn})),n.d(e,"ImmediateRenderObject",(function(){return tp})),n.d(e,"IncrementStencilOp",(function(){return wn})),n.d(e,"IncrementWrapStencilOp",(function(){return Sn})),n.d(e,"InstancedBufferAttribute",(function(){return qh})),n.d(e,"InstancedBufferGeometry",(function(){return Wh})),n.d(e,"InstancedInterleavedBuffer",(function(){return Gd})),n.d(e,"InstancedMesh",(function(){return kc})),n.d(e,"Int16Attribute",(function(){return yf})),n.d(e,"Int16BufferAttribute",(function(){return Gi})),n.d(e,"Int32Attribute",(function(){return bf})),n.d(e,"Int32BufferAttribute",(function(){return Vi})),n.d(e,"Int8Attribute",(function(){return mf})),n.d(e,"Int8BufferAttribute",(function(){return Fi})),n.d(e,"IntType",(function(){return Bt})),n.d(e,"InterleavedBuffer",(function(){return rc})),n.d(e,"InterleavedBufferAttribute",(function(){return oc})),n.d(e,"Interpolant",(function(){return Iu})),n.d(e,"InterpolateDiscrete",(function(){return Ye})),n.d(e,"InterpolateLinear",(function(){return Xe})),n.d(e,"InterpolateSmooth",(function(){return Je})),n.d(e,"InvertStencilOp",(function(){return En})),n.d(e,"JSONLoader",(function(){return Df})),n.d(e,"KeepStencilOp",(function(){return bn})),n.d(e,"KeyframeTrack",(function(){return zu})),n.d(e,"LOD",(function(){return Sc})),n.d(e,"LatheBufferGeometry",(function(){return lu})),n.d(e,"LatheGeometry",(function(){return cu})),n.d(e,"Layers",(function(){return $r})),n.d(e,"LensFlare",(function(){return Bf})),n.d(e,"LessDepth",(function(){return J})),n.d(e,"LessEqualDepth",(function(){return Q})),n.d(e,"LessEqualStencilFunc",(function(){return Rn})),n.d(e,"LessStencilFunc",(function(){return Ln})),n.d(e,"Light",(function(){return Ch})),n.d(e,"LightProbe",(function(){return Gh})),n.d(e,"LightShadow",(function(){return Ph})),n.d(e,"Line",(function(){return Uc})),n.d(e,"Line3",(function(){return Kd})),n.d(e,"LineBasicMaterial",(function(){return Nc})),n.d(e,"LineCurve",(function(){return bh})),n.d(e,"LineCurve3",(function(){return _h})),n.d(e,"LineDashedMaterial",(function(){return Ru})),n.d(e,"LineLoop",(function(){return Wc})),n.d(e,"LinePieces",(function(){return tf})),n.d(e,"LineSegments",(function(){return Vc})),n.d(e,"LineStrip",(function(){return Kp})),n.d(e,"LinearEncoding",(function(){return sn})),n.d(e,"LinearFilter",(function(){return Ct})),n.d(e,"LinearInterpolant",(function(){return Nu})),n.d(e,"LinearMipMapLinearFilter",(function(){return It})),n.d(e,"LinearMipMapNearestFilter",(function(){return Pt})),n.d(e,"LinearMipmapLinearFilter",(function(){return Ot})),n.d(e,"LinearMipmapNearestFilter",(function(){return Rt})),n.d(e,"LinearToneMapping",(function(){return ct})),n.d(e,"Loader",(function(){return Xu})),n.d(e,"LoaderUtils",(function(){return Vh})),n.d(e,"LoadingManager",(function(){return $u})),n.d(e,"LogLuvEncoding",(function(){return hn})),n.d(e,"LoopOnce",(function(){return qe})),n.d(e,"LoopPingPong",(function(){return $e})),n.d(e,"LoopRepeat",(function(){return Ze})),n.d(e,"LuminanceAlphaFormat",(function(){return Xt})),n.d(e,"LuminanceFormat",(function(){return Yt})),n.d(e,"MOUSE",(function(){return o})),n.d(e,"Material",(function(){return ki})),n.d(e,"MaterialLoader",(function(){return Hh})),n.d(e,"Math",(function(){return Yn})),n.d(e,"MathUtils",(function(){return Yn})),n.d(e,"Matrix3",(function(){return Jn})),n.d(e,"Matrix4",(function(){return zr})),n.d(e,"MaxEquation",(function(){return D})),n.d(e,"Mesh",(function(){return wo})),n.d(e,"MeshBasicMaterial",(function(){return Ni})),n.d(e,"MeshDepthMaterial",(function(){return Us})),n.d(e,"MeshDistanceMaterial",(function(){return Gs})),n.d(e,"MeshFaceMaterial",(function(){return of})),n.d(e,"MeshLambertMaterial",(function(){return Lu})),n.d(e,"MeshMatcapMaterial",(function(){return Cu})),n.d(e,"MeshNormalMaterial",(function(){return Au})),n.d(e,"MeshPhongMaterial",(function(){return Tu})),n.d(e,"MeshPhysicalMaterial",(function(){return Su})),n.d(e,"MeshStandardMaterial",(function(){return Mu})),n.d(e,"MeshToonMaterial",(function(){return Eu})),n.d(e,"MinEquation",(function(){return N})),n.d(e,"MirroredRepeatWrapping",(function(){return Mt})),n.d(e,"MixOperation",(function(){return ot})),n.d(e,"MultiMaterial",(function(){return af})),n.d(e,"MultiplyBlending",(function(){return R})),n.d(e,"MultiplyOperation",(function(){return it})),n.d(e,"NearestFilter",(function(){return St})),n.d(e,"NearestMipMapLinearFilter",(function(){return Lt})),n.d(e,"NearestMipMapNearestFilter",(function(){return Et})),n.d(e,"NearestMipmapLinearFilter",(function(){return At})),n.d(e,"NearestMipmapNearestFilter",(function(){return Tt})),n.d(e,"NeverDepth",(function(){return Y})),n.d(e,"NeverStencilFunc",(function(){return An})),n.d(e,"NoBlending",(function(){return E})),n.d(e,"NoColors",(function(){return ef})),n.d(e,"NoToneMapping",(function(){return st})),n.d(e,"NormalAnimationBlendMode",(function(){return en})),n.d(e,"NormalBlending",(function(){return A})),n.d(e,"NotEqualDepth",(function(){return nt})),n.d(e,"NotEqualStencilFunc",(function(){return On})),n.d(e,"NumberKeyframeTrack",(function(){return ju})),n.d(e,"Object3D",(function(){return ci})),n.d(e,"ObjectLoader",(function(){return Yh})),n.d(e,"ObjectSpaceNormalMap",(function(){return yn})),n.d(e,"OctahedronBufferGeometry",(function(){return fl})),n.d(e,"OctahedronGeometry",(function(){return pl})),n.d(e,"OneFactor",(function(){return B})),n.d(e,"OneMinusDstAlphaFactor",(function(){return V})),n.d(e,"OneMinusDstColorFactor",(function(){return Z})),n.d(e,"OneMinusSrcAlphaFactor",(function(){return G})),n.d(e,"OneMinusSrcColorFactor",(function(){return j})),n.d(e,"OrthographicCamera",(function(){return Dh})),n.d(e,"PCFShadowMap",(function(){return v})),n.d(e,"PCFSoftShadowMap",(function(){return y})),n.d(e,"PMREMGenerator",(function(){return Vp})),n.d(e,"ParametricBufferGeometry",(function(){return al})),n.d(e,"ParametricGeometry",(function(){return il})),n.d(e,"Particle",(function(){return cf})),n.d(e,"ParticleBasicMaterial",(function(){return hf})),n.d(e,"ParticleSystem",(function(){return lf})),n.d(e,"ParticleSystemMaterial",(function(){return df})),n.d(e,"Path",(function(){return Ah})),n.d(e,"PerspectiveCamera",(function(){return zo})),n.d(e,"Plane",(function(){return pi})),n.d(e,"PlaneBufferGeometry",(function(){return Zo})),n.d(e,"PlaneGeometry",(function(){return qo})),n.d(e,"PlaneHelper",(function(){return Ep})),n.d(e,"PointCloud",(function(){return sf})),n.d(e,"PointCloudMaterial",(function(){return uf})),n.d(e,"PointLight",(function(){return Nh})),n.d(e,"PointLightHelper",(function(){return cp})),n.d(e,"Points",(function(){return Jc})),n.d(e,"PointsMaterial",(function(){return qc})),n.d(e,"PolarGridHelper",(function(){return fp})),n.d(e,"PolyhedronBufferGeometry",(function(){return cl})),n.d(e,"PolyhedronGeometry",(function(){return sl})),n.d(e,"PositionalAudio",(function(){return Td})),n.d(e,"PropertyBinding",(function(){return zd})),n.d(e,"PropertyMixer",(function(){return Ad})),n.d(e,"QuadraticBezierCurve",(function(){return wh})),n.d(e,"QuadraticBezierCurve3",(function(){return Mh})),n.d(e,"Quaternion",(function(){return ar})),n.d(e,"QuaternionKeyframeTrack",(function(){return Gu})),n.d(e,"QuaternionLinearInterpolant",(function(){return Uu})),n.d(e,"REVISION",(function(){return r})),n.d(e,"RGBADepthPacking",(function(){return gn})),n.d(e,"RGBAFormat",(function(){return $t})),n.d(e,"RGBAIntegerFormat",(function(){return oe})),n.d(e,"RGBA_ASTC_10x10_Format",(function(){return Le})),n.d(e,"RGBA_ASTC_10x5_Format",(function(){return Te})),n.d(e,"RGBA_ASTC_10x6_Format",(function(){return Ee})),n.d(e,"RGBA_ASTC_10x8_Format",(function(){return Ae})),n.d(e,"RGBA_ASTC_12x10_Format",(function(){return Ce})),n.d(e,"RGBA_ASTC_12x12_Format",(function(){return Re})),n.d(e,"RGBA_ASTC_4x4_Format",(function(){return ve})),n.d(e,"RGBA_ASTC_5x4_Format",(function(){return ye})),n.d(e,"RGBA_ASTC_5x5_Format",(function(){return xe})),n.d(e,"RGBA_ASTC_6x5_Format",(function(){return be})),n.d(e,"RGBA_ASTC_6x6_Format",(function(){return _e})),n.d(e,"RGBA_ASTC_8x5_Format",(function(){return we})),n.d(e,"RGBA_ASTC_8x6_Format",(function(){return Me})),n.d(e,"RGBA_ASTC_8x8_Format",(function(){return Se})),n.d(e,"RGBA_BPTC_Format",(function(){return Pe})),n.d(e,"RGBA_ETC2_EAC_Format",(function(){return ge})),n.d(e,"RGBA_PVRTC_2BPPV1_Format",(function(){return pe})),n.d(e,"RGBA_PVRTC_4BPPV1_Format",(function(){return de})),n.d(e,"RGBA_S3TC_DXT1_Format",(function(){return se})),n.d(e,"RGBA_S3TC_DXT3_Format",(function(){return ce})),n.d(e,"RGBA_S3TC_DXT5_Format",(function(){return le})),n.d(e,"RGBDEncoding",(function(){return fn})),n.d(e,"RGBEEncoding",(function(){return un})),n.d(e,"RGBEFormat",(function(){return Jt})),n.d(e,"RGBFormat",(function(){return Zt})),n.d(e,"RGBIntegerFormat",(function(){return ie})),n.d(e,"RGBM16Encoding",(function(){return pn})),n.d(e,"RGBM7Encoding",(function(){return dn})),n.d(e,"RGB_ETC1_Format",(function(){return fe})),n.d(e,"RGB_ETC2_Format",(function(){return me})),n.d(e,"RGB_PVRTC_2BPPV1_Format",(function(){return he})),n.d(e,"RGB_PVRTC_4BPPV1_Format",(function(){return ue})),n.d(e,"RGB_S3TC_DXT1_Format",(function(){return ae})),n.d(e,"RGFormat",(function(){return ne})),n.d(e,"RGIntegerFormat",(function(){return re})),n.d(e,"RawShaderMaterial",(function(){return wu})),n.d(e,"Ray",(function(){return Dr})),n.d(e,"Raycaster",(function(){return Vd})),n.d(e,"RectAreaLight",(function(){return jh})),n.d(e,"RedFormat",(function(){return te})),n.d(e,"RedIntegerFormat",(function(){return ee})),n.d(e,"ReinhardToneMapping",(function(){return lt})),n.d(e,"RepeatWrapping",(function(){return _t})),n.d(e,"ReplaceStencilOp",(function(){return _n})),n.d(e,"ReverseSubtractEquation",(function(){return k})),n.d(e,"RingBufferGeometry",(function(){return su})),n.d(e,"RingGeometry",(function(){return au})),n.d(e,"SRGB8_ALPHA8_ASTC_10x10_Format",(function(){return He})),n.d(e,"SRGB8_ALPHA8_ASTC_10x5_Format",(function(){return je})),n.d(e,"SRGB8_ALPHA8_ASTC_10x6_Format",(function(){return Ue})),n.d(e,"SRGB8_ALPHA8_ASTC_10x8_Format",(function(){return Ge})),n.d(e,"SRGB8_ALPHA8_ASTC_12x10_Format",(function(){return Ve})),n.d(e,"SRGB8_ALPHA8_ASTC_12x12_Format",(function(){return We})),n.d(e,"SRGB8_ALPHA8_ASTC_4x4_Format",(function(){return Oe})),n.d(e,"SRGB8_ALPHA8_ASTC_5x4_Format",(function(){return Ie})),n.d(e,"SRGB8_ALPHA8_ASTC_5x5_Format",(function(){return ke})),n.d(e,"SRGB8_ALPHA8_ASTC_6x5_Format",(function(){return Ne})),n.d(e,"SRGB8_ALPHA8_ASTC_6x6_Format",(function(){return De})),n.d(e,"SRGB8_ALPHA8_ASTC_8x5_Format",(function(){return ze})),n.d(e,"SRGB8_ALPHA8_ASTC_8x6_Format",(function(){return Be})),n.d(e,"SRGB8_ALPHA8_ASTC_8x8_Format",(function(){return Fe})),n.d(e,"Scene",(function(){return nc})),n.d(e,"SceneUtils",(function(){return zf})),n.d(e,"ShaderChunk",(function(){return $o})),n.d(e,"ShaderLib",(function(){return Xo})),n.d(e,"ShaderMaterial",(function(){return No})),n.d(e,"ShadowMaterial",(function(){return _u})),n.d(e,"Shape",(function(){return Lh})),n.d(e,"ShapeBufferGeometry",(function(){return hu})),n.d(e,"ShapeGeometry",(function(){return uu})),n.d(e,"ShapePath",(function(){return ed})),n.d(e,"ShapeUtils",(function(){return Yl})),n.d(e,"ShortType",(function(){return Dt})),n.d(e,"Skeleton",(function(){return Lc})),n.d(e,"SkeletonHelper",(function(){return sp})),n.d(e,"SkinnedMesh",(function(){return Tc})),n.d(e,"SmoothShading",(function(){return T})),n.d(e,"Sphere",(function(){return Lr})),n.d(e,"SphereBufferGeometry",(function(){return ou})),n.d(e,"SphereGeometry",(function(){return iu})),n.d(e,"Spherical",(function(){return Zd})),n.d(e,"SphericalHarmonics3",(function(){return Uh})),n.d(e,"Spline",(function(){return Ef})),n.d(e,"SplineCurve",(function(){return Sh})),n.d(e,"SplineCurve3",(function(){return Tf})),n.d(e,"SpotLight",(function(){return Ih})),n.d(e,"SpotLightHelper",(function(){return np})),n.d(e,"Sprite",(function(){return bc})),n.d(e,"SpriteMaterial",(function(){return ac})),n.d(e,"SrcAlphaFactor",(function(){return U})),n.d(e,"SrcAlphaSaturateFactor",(function(){return $})),n.d(e,"SrcColorFactor",(function(){return F})),n.d(e,"StaticCopyUsage",(function(){return Un})),n.d(e,"StaticDrawUsage",(function(){return Nn})),n.d(e,"StaticReadUsage",(function(){return Bn})),n.d(e,"StereoCamera",(function(){return pd})),n.d(e,"StreamCopyUsage",(function(){return Hn})),n.d(e,"StreamDrawUsage",(function(){return zn})),n.d(e,"StreamReadUsage",(function(){return jn})),n.d(e,"StringKeyframeTrack",(function(){return Hu})),n.d(e,"SubtractEquation",(function(){return I})),n.d(e,"SubtractiveBlending",(function(){return C})),n.d(e,"TOUCH",(function(){return c})),n.d(e,"TangentSpaceNormalMap",(function(){return vn})),n.d(e,"TetrahedronBufferGeometry",(function(){return hl})),n.d(e,"TetrahedronGeometry",(function(){return ll})),n.d(e,"TextBufferGeometry",(function(){return ru})),n.d(e,"TextGeometry",(function(){return nu})),n.d(e,"Texture",(function(){return nr})),n.d(e,"TextureLoader",(function(){return oh})),n.d(e,"TorusBufferGeometry",(function(){return Sl})),n.d(e,"TorusGeometry",(function(){return Ml})),n.d(e,"TorusKnotBufferGeometry",(function(){return wl})),n.d(e,"TorusKnotGeometry",(function(){return _l})),n.d(e,"Triangle",(function(){return Si})),n.d(e,"TriangleFanDrawMode",(function(){return an})),n.d(e,"TriangleStripDrawMode",(function(){return on})),n.d(e,"TrianglesDrawMode",(function(){return rn})),n.d(e,"TubeBufferGeometry",(function(){return bl})),n.d(e,"TubeGeometry",(function(){return xl})),n.d(e,"UVMapping",(function(){return ft})),n.d(e,"Uint16Attribute",(function(){return xf})),n.d(e,"Uint16BufferAttribute",(function(){return Hi})),n.d(e,"Uint32Attribute",(function(){return _f})),n.d(e,"Uint32BufferAttribute",(function(){return Wi})),n.d(e,"Uint8Attribute",(function(){return gf})),n.d(e,"Uint8BufferAttribute",(function(){return ji})),n.d(e,"Uint8ClampedAttribute",(function(){return vf})),n.d(e,"Uint8ClampedBufferAttribute",(function(){return Ui})),n.d(e,"Uniform",(function(){return Ud})),n.d(e,"UniformsLib",(function(){return Yo})),n.d(e,"UniformsUtils",(function(){return ko})),n.d(e,"UnsignedByteType",(function(){return kt})),n.d(e,"UnsignedInt248Type",(function(){return Wt})),n.d(e,"UnsignedIntType",(function(){return Ft})),n.d(e,"UnsignedShort4444Type",(function(){return Gt})),n.d(e,"UnsignedShort5551Type",(function(){return Ht})),n.d(e,"UnsignedShort565Type",(function(){return Vt})),n.d(e,"UnsignedShortType",(function(){return zt})),n.d(e,"VSMShadowMap",(function(){return x})),n.d(e,"Vector2",(function(){return Xn})),n.d(e,"Vector3",(function(){return sr})),n.d(e,"Vector4",(function(){return rr})),n.d(e,"VectorKeyframeTrack",(function(){return Vu})),n.d(e,"Vertex",(function(){return pf})),n.d(e,"VertexColors",(function(){return rf})),n.d(e,"VideoTexture",(function(){return Kc})),n.d(e,"WebGL1Renderer",(function(){return Ks})),n.d(e,"WebGLCubeRenderTarget",(function(){return Fo})),n.d(e,"WebGLMultisampleRenderTarget",(function(){return or})),n.d(e,"WebGLRenderTarget",(function(){return ir})),n.d(e,"WebGLRenderTargetCube",(function(){return If})),n.d(e,"WebGLRenderer",(function(){return Qs})),n.d(e,"WebGLUtils",(function(){return qs})),n.d(e,"WireframeGeometry",(function(){return rl})),n.d(e,"WireframeHelper",(function(){return Rf})),n.d(e,"WrapAroundEnding",(function(){return tn})),n.d(e,"XHRLoader",(function(){return Pf})),n.d(e,"ZeroCurvatureEnding",(function(){return Qe})),n.d(e,"ZeroFactor",(function(){return z})),n.d(e,"ZeroSlopeEnding",(function(){return Ke})),n.d(e,"ZeroStencilOp",(function(){return xn})),n.d(e,"sRGBEncoding",(function(){return cn})),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");const output=Object(t);for(let t=1;t<arguments.length;t++){const source=arguments[t];if(null!=source)for(const t in source)Object.prototype.hasOwnProperty.call(source,t)&&(output[t]=source[t])}return output});const r="120",o={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},c={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},l=0,h=1,d=2,f=3,m=0,v=1,y=2,x=3,_=0,w=1,M=2,S=1,T=2,E=0,A=1,L=2,C=3,R=4,P=5,O=100,I=101,k=102,N=103,D=104,z=200,B=201,F=202,j=203,U=204,G=205,H=206,V=207,W=208,Z=209,$=210,Y=0,X=1,J=2,Q=3,K=4,tt=5,et=6,nt=7,it=0,ot=1,at=2,st=0,ct=1,lt=2,ut=3,ht=4,pt=5,ft=300,mt=301,gt=302,vt=303,yt=304,xt=306,bt=307,_t=1e3,wt=1001,Mt=1002,St=1003,Tt=1004,Et=1004,At=1005,Lt=1005,Ct=1006,Rt=1007,Pt=1007,Ot=1008,It=1008,kt=1009,Nt=1010,Dt=1011,zt=1012,Bt=1013,Ft=1014,jt=1015,Ut=1016,Gt=1017,Ht=1018,Vt=1019,Wt=1020,qt=1021,Zt=1022,$t=1023,Yt=1024,Xt=1025,Jt=$t,Qt=1026,Kt=1027,te=1028,ee=1029,ne=1030,re=1031,ie=1032,oe=1033,ae=33776,se=33777,ce=33778,le=33779,ue=35840,he=35841,de=35842,pe=35843,fe=36196,me=37492,ge=37496,ve=37808,ye=37809,xe=37810,be=37811,_e=37812,we=37813,Me=37814,Se=37815,Te=37816,Ee=37817,Ae=37818,Le=37819,Ce=37820,Re=37821,Pe=36492,Oe=37840,Ie=37841,ke=37842,Ne=37843,De=37844,ze=37845,Be=37846,Fe=37847,je=37848,Ue=37849,Ge=37850,He=37851,Ve=37852,We=37853,qe=2200,Ze=2201,$e=2202,Ye=2300,Xe=2301,Je=2302,Qe=2400,Ke=2401,tn=2402,en=2500,nn=2501,rn=0,on=1,an=2,sn=3e3,cn=3001,ln=3007,un=3002,hn=3003,dn=3004,pn=3005,fn=3006,mn=3200,gn=3201,vn=0,yn=1,xn=0,bn=7680,_n=7681,wn=7682,Mn=7683,Sn=34055,Tn=34056,En=5386,An=512,Ln=513,Cn=514,Rn=515,Pn=516,On=517,In=518,kn=519,Nn=35044,Dn=35048,zn=35040,Bn=35045,Fn=35049,jn=35041,Un=35046,Gn=35050,Hn=35042,Vn="100",Wn="300 es";function qn(){}Object.assign(qn.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}},dispatchEvent:function(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let i=0,e=n.length;i<e;i++)n[i].call(this,t)}}});const Zn=[];for(let i=0;i<256;i++)Zn[i]=(i<16?"0":"")+i.toString(16);let $n=1234567;const Yn={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Zn[255&t]+Zn[t>>8&255]+Zn[t>>16&255]+Zn[t>>24&255]+"-"+Zn[255&e]+Zn[e>>8&255]+"-"+Zn[e>>16&15|64]+Zn[e>>24&255]+"-"+Zn[63&n|128]+Zn[n>>8&255]+"-"+Zn[n>>16&255]+Zn[n>>24&255]+Zn[255&r]+Zn[r>>8&255]+Zn[r>>16&255]+Zn[r>>24&255]).toUpperCase()},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,r,o){return r+(t-e)*(o-r)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(s){return void 0!==s&&($n=s%2147483647),$n=16807*$n%2147483647,($n-1)/2147483646},degToRad:function(t){return t*Yn.DEG2RAD},radToDeg:function(t){return t*Yn.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(q,a,b,t,e){const n=Math.cos,r=Math.sin,o=n(b/2),c=r(b/2),l=n((a+t)/2),h=r((a+t)/2),d=n((a-t)/2),f=r((a-t)/2),m=n((t-a)/2),v=r((t-a)/2);switch(e){case"XYX":q.set(o*h,c*d,c*f,o*l);break;case"YZY":q.set(c*f,o*h,c*d,o*l);break;case"ZXZ":q.set(c*d,c*f,o*h,o*l);break;case"XZX":q.set(o*h,c*v,c*m,o*l);break;case"YXY":q.set(c*m,o*h,c*v,o*l);break;case"ZYZ":q.set(c*v,c*m,o*h,o*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+e)}}};class Xn{constructor(t=0,e=0){Object.defineProperty(this,"isVector2",{value:!0}),this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(s){return this.x+=s,this.y+=s,this}addVectors(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this}addScaledVector(t,s){return this.x+=t.x*s,this.y+=t.y*s,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(s){return this.x-=s,this.y-=s,this}subVectors(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this}toArray(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),s=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*n-o*s+t.x,this.y=r*s+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}class Jn{constructor(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,r,o,c,l,h,d){const f=this.elements;return f[0]=t,f[1]=r,f[2]=l,f[3]=e,f[4]=o,f[5]=h,f[6]=n,f[7]=c,f[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}clone(){return(new this.constructor).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(a,b){const t=a.elements,e=b.elements,n=this.elements,r=t[0],o=t[3],c=t[6],l=t[1],h=t[4],d=t[7],f=t[2],m=t[5],v=t[8],y=e[0],x=e[3],_=e[6],w=e[1],M=e[4],S=e[7],T=e[2],E=e[5],A=e[8];return n[0]=r*y+o*w+c*T,n[3]=r*x+o*M+c*E,n[6]=r*_+o*S+c*A,n[1]=l*y+h*w+d*T,n[4]=l*x+h*M+d*E,n[7]=l*_+h*S+d*A,n[2]=f*y+m*w+v*T,n[5]=f*x+m*M+v*E,n[8]=f*_+m*S+v*A,this}multiplyScalar(s){const t=this.elements;return t[0]*=s,t[3]*=s,t[6]*=s,t[1]*=s,t[4]*=s,t[7]*=s,t[2]*=s,t[5]*=s,t[8]*=s,this}determinant(){const t=this.elements,a=t[0],b=t[1],e=t[2],n=t[3],r=t[4],o=t[5],g=t[6],c=t[7],i=t[8];return a*r*i-a*o*c-b*n*i+b*o*g+e*n*c-e*r*g}getInverse(t,e){void 0!==e&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");const n=t.elements,r=this.elements,o=n[0],c=n[1],l=n[2],h=n[3],d=n[4],f=n[5],m=n[6],v=n[7],y=n[8],x=y*d-f*v,_=f*m-y*h,w=v*h-d*m,M=o*x+c*_+l*w;if(0===M)return this.set(0,0,0,0,0,0,0,0,0);const S=1/M;return r[0]=x*S,r[1]=(l*v-y*c)*S,r[2]=(f*c-l*d)*S,r[3]=_*S,r[4]=(y*o-l*m)*S,r[5]=(l*h-f*o)*S,r[6]=w*S,r[7]=(c*m-v*o)*S,r[8]=(d*o-c*h)*S,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).getInverse(this).transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,o,c,l){const h=Math.cos(o),s=Math.sin(o);this.set(n*h,n*s,-n*(h*c+s*l)+c+t,-r*s,r*h,-r*(-s*c+h*l)+l+e,0,0,1)}scale(t,e){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}rotate(t){const e=Math.cos(t),s=Math.sin(t),n=this.elements,r=n[0],o=n[3],c=n[6],l=n[1],h=n[4],d=n[7];return n[0]=e*r+s*l,n[3]=e*o+s*h,n[6]=e*c+s*d,n[1]=-s*r+e*l,n[4]=-s*o+e*h,n[7]=-s*c+e*d,this}translate(t,e){const n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}equals(t){const e=this.elements,n=t.elements;for(let i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t,e){void 0===e&&(e=0);for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}}let Qn;const Kn={getDataURL:function(image){if(/^data:/i.test(image.src))return image.src;if("undefined"==typeof HTMLCanvasElement)return image.src;let canvas;if(image instanceof HTMLCanvasElement)canvas=image;else{void 0===Qn&&(Qn=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Qn.width=image.width,Qn.height=image.height;const t=Qn.getContext("2d");image instanceof ImageData?t.putImageData(image,0,0):t.drawImage(image,0,0,image.width,image.height),canvas=Qn}return canvas.width>2048||canvas.height>2048?canvas.toDataURL("image/jpeg",.6):canvas.toDataURL("image/png")}};let er=0;function nr(image,t,e,n,r,o,c,l,h,d){Object.defineProperty(this,"id",{value:er++}),this.uuid=Yn.generateUUID(),this.name="",this.image=void 0!==image?image:nr.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:nr.DEFAULT_MAPPING,this.wrapS=void 0!==e?e:wt,this.wrapT=void 0!==n?n:wt,this.magFilter=void 0!==r?r:Ct,this.minFilter=void 0!==o?o:Ot,this.anisotropy=void 0!==h?h:1,this.format=void 0!==c?c:$t,this.internalFormat=null,this.type=void 0!==l?l:kt,this.offset=new Xn(0,0),this.repeat=new Xn(1,1),this.center=new Xn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Jn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==d?d:sn,this.version=0,this.onUpdate=null}nr.DEFAULT_IMAGE=void 0,nr.DEFAULT_MAPPING=ft,nr.prototype=Object.assign(Object.create(qn.prototype),{constructor:nr,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(source){return this.name=source.name,this.image=source.image,this.mipmaps=source.mipmaps.slice(0),this.mapping=source.mapping,this.wrapS=source.wrapS,this.wrapT=source.wrapT,this.magFilter=source.magFilter,this.minFilter=source.minFilter,this.anisotropy=source.anisotropy,this.format=source.format,this.internalFormat=source.internalFormat,this.type=source.type,this.offset.copy(source.offset),this.repeat.copy(source.repeat),this.center.copy(source.center),this.rotation=source.rotation,this.matrixAutoUpdate=source.matrixAutoUpdate,this.matrix.copy(source.matrix),this.generateMipmaps=source.generateMipmaps,this.premultiplyAlpha=source.premultiplyAlpha,this.flipY=source.flipY,this.unpackAlignment=source.unpackAlignment,this.encoding=source.encoding,this},toJSON:function(meta){const t=void 0===meta||"string"==typeof meta;if(!t&&void 0!==meta.textures[this.uuid])return meta.textures[this.uuid];const output={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const image=this.image;if(void 0===image.uuid&&(image.uuid=Yn.generateUUID()),!t&&void 0===meta.images[image.uuid]){let t;if(Array.isArray(image)){t=[];for(let i=0,e=image.length;i<e;i++)t.push(Kn.getDataURL(image[i]))}else t=Kn.getDataURL(image);meta.images[image.uuid]={uuid:image.uuid,url:t}}output.image=image.uuid}return t||(meta.textures[this.uuid]=output),output},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==ft)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case _t:t.x=t.x-Math.floor(t.x);break;case wt:t.x=t.x<0?0:1;break;case Mt:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case _t:t.y=t.y-Math.floor(t.y);break;case wt:t.y=t.y<0?0:1;break;case Mt:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(nr.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}});class rr{constructor(t=0,e=0,n=0,r=1){Object.defineProperty(this,"isVector4",{value:!0}),this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(s){return this.x+=s,this.y+=s,this.z+=s,this.w+=s,this}addVectors(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this.w=a.w+b.w,this}addScaledVector(t,s){return this.x+=t.x*s,this.y+=t.y*s,this.z+=t.z*s,this.w+=t.w*s,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(s){return this.x-=s,this.y-=s,this.z-=s,this.w-=s,this}subVectors(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this.w=a.w-b.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,o=this.w,c=t.elements;return this.x=c[0]*e+c[4]*n+c[8]*r+c[12]*o,this.y=c[1]*e+c[5]*n+c[9]*r+c[13]*o,this.z=c[2]*e+c[6]*n+c[10]*r+c[14]*o,this.w=c[3]*e+c[7]*n+c[11]*r+c[15]*o,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(q){this.w=2*Math.acos(q.w);const s=Math.sqrt(1-q.w*q.w);return s<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=q.x/s,this.y=q.y/s,this.z=q.z/s),this}setAxisAngleFromRotationMatrix(t){let e,n,r,o;const c=t.elements,l=c[0],h=c[4],d=c[8],f=c[1],m=c[5],v=c[9],y=c[2],x=c[6],_=c[10];if(Math.abs(h-f)<.01&&Math.abs(d-y)<.01&&Math.abs(v-x)<.01){if(Math.abs(h+f)<.1&&Math.abs(d+y)<.1&&Math.abs(v+x)<.1&&Math.abs(l+m+_-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const t=(l+1)/2,c=(m+1)/2,w=(_+1)/2,M=(h+f)/4,S=(d+y)/4,T=(v+x)/4;return t>c&&t>w?t<.01?(n=0,r=.707106781,o=.707106781):(n=Math.sqrt(t),r=M/n,o=S/n):c>w?c<.01?(n=.707106781,r=0,o=.707106781):(r=Math.sqrt(c),n=M/r,o=T/r):w<.01?(n=.707106781,r=.707106781,o=0):(o=Math.sqrt(w),n=S/o,r=T/o),this.set(n,r,o,e),this}let s=Math.sqrt((x-v)*(x-v)+(d-y)*(d-y)+(f-h)*(f-h));return Math.abs(s)<.001&&(s=1),this.x=(x-v)/s,this.y=(d-y)/s,this.z=(f-h)/s,this.w=Math.acos((l+m+_-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}function ir(t,e,n){this.width=t,this.height=e,this.scissor=new rr(0,0,t,e),this.scissorTest=!1,this.viewport=new rr(0,0,t,e),n=n||{},this.texture=new nr(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Ct,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function or(t,e,n){ir.call(this,t,e,n),this.samples=4}ir.prototype=Object.assign(Object.create(qn.prototype),{constructor:ir,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(source){return this.width=source.width,this.height=source.height,this.viewport.copy(source.viewport),this.texture=source.texture.clone(),this.depthBuffer=source.depthBuffer,this.stencilBuffer=source.stencilBuffer,this.depthTexture=source.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),or.prototype=Object.assign(Object.create(ir.prototype),{constructor:or,isWebGLMultisampleRenderTarget:!0,copy:function(source){return ir.prototype.copy.call(this,source),this.samples=source.samples,this}});class ar{constructor(t=0,e=0,n=0,r=1){Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=t,this._y=e,this._z=n,this._w=r}static slerp(t,e,n,r){return n.copy(t).slerp(e,r)}static slerpFlat(t,e,n,r,o,c,l){let h=n[r+0],d=n[r+1],f=n[r+2],m=n[r+3];const v=o[c+0],y=o[c+1],x=o[c+2],_=o[c+3];if(m!==_||h!==v||d!==y||f!==x){let s=1-l;const t=h*v+d*y+f*x+m*_,e=t>=0?1:-1,n=1-t*t;if(n>Number.EPSILON){const r=Math.sqrt(n),o=Math.atan2(r,t*e);s=Math.sin(s*o)/r,l=Math.sin(l*o)/r}const r=l*e;if(h=h*s+v*r,d=d*s+y*r,f=f*s+x*r,m=m*s+_*r,s===1-l){const t=1/Math.sqrt(h*h+d*d+f*f+m*m);h*=t,d*=t,f*=t,m*=t}}t[e]=h,t[e+1]=d,t[e+2]=f,t[e+3]=m}static multiplyQuaternionsFlat(t,e,n,r,o,c){const l=n[r],h=n[r+1],d=n[r+2],f=n[r+3],m=o[c],v=o[c+1],y=o[c+2],x=o[c+3];return t[e]=l*x+f*m+h*y-d*v,t[e+1]=h*x+f*v+d*m-l*y,t[e+2]=d*x+f*y+l*v-h*m,t[e+3]=f*x-l*m-h*v-d*y,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=t._x,r=t._y,o=t._z,c=t._order,l=Math.cos,h=Math.sin,d=l(n/2),f=l(r/2),m=l(o/2),v=h(n/2),y=h(r/2),x=h(o/2);switch(c){case"XYZ":this._x=v*f*m+d*y*x,this._y=d*y*m-v*f*x,this._z=d*f*x+v*y*m,this._w=d*f*m-v*y*x;break;case"YXZ":this._x=v*f*m+d*y*x,this._y=d*y*m-v*f*x,this._z=d*f*x-v*y*m,this._w=d*f*m+v*y*x;break;case"ZXY":this._x=v*f*m-d*y*x,this._y=d*y*m+v*f*x,this._z=d*f*x+v*y*m,this._w=d*f*m-v*y*x;break;case"ZYX":this._x=v*f*m-d*y*x,this._y=d*y*m+v*f*x,this._z=d*f*x-v*y*m,this._w=d*f*m+v*y*x;break;case"YZX":this._x=v*f*m+d*y*x,this._y=d*y*m+v*f*x,this._z=d*f*x-v*y*m,this._w=d*f*m-v*y*x;break;case"XZY":this._x=v*f*m-d*y*x,this._y=d*y*m-v*f*x,this._z=d*f*x+v*y*m,this._w=d*f*m+v*y*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+c)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,s=Math.sin(n);return this._x=t.x*s,this._y=t.y*s,this._z=t.z*s,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],o=e[8],c=e[1],l=e[5],h=e[9],d=e[2],f=e[6],m=e[10],v=n+l+m;if(v>0){const s=.5/Math.sqrt(v+1);this._w=.25/s,this._x=(f-h)*s,this._y=(o-d)*s,this._z=(c-r)*s}else if(n>l&&n>m){const s=2*Math.sqrt(1+n-l-m);this._w=(f-h)/s,this._x=.25*s,this._y=(r+c)/s,this._z=(o+d)/s}else if(l>m){const s=2*Math.sqrt(1+l-n-m);this._w=(o-d)/s,this._x=(r+c)/s,this._y=.25*s,this._z=(h+f)/s}else{const s=2*Math.sqrt(1+m-n-l);this._w=(c-r)/s,this._x=(o+d)/s,this._y=(h+f)/s,this._z=.25*s}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<1e-6?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(q){return 2*Math.acos(Math.abs(Yn.clamp(this.dot(q),-1,1)))}rotateTowards(q,t){const e=this.angleTo(q);if(0===e)return this;const n=Math.min(1,t/e);return this.slerp(q,n),this}identity(){return this.set(0,0,0,1)}inverse(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(q,p){return void 0!==p?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(q,p)):this.multiplyQuaternions(this,q)}premultiply(q){return this.multiplyQuaternions(q,this)}multiplyQuaternions(a,b){const t=a._x,e=a._y,n=a._z,r=a._w,o=b._x,c=b._y,l=b._z,h=b._w;return this._x=t*h+r*o+e*l-n*c,this._y=e*h+r*c+n*o-t*l,this._z=n*h+r*l+t*c-e*o,this._w=r*h-t*o-e*c-n*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,o=this._z,c=this._w;let l=c*t._w+n*t._x+r*t._y+o*t._z;if(l<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,l=-l):this.copy(t),l>=1)return this._w=c,this._x=n,this._y=r,this._z=o,this;const h=1-l*l;if(h<=Number.EPSILON){const s=1-e;return this._w=s*c+e*this._w,this._x=s*n+e*this._x,this._y=s*r+e*this._y,this._z=s*o+e*this._z,this.normalize(),this._onChangeCallback(),this}const d=Math.sqrt(h),f=Math.atan2(d,l),m=Math.sin((1-e)*f)/d,v=Math.sin(e*f)/d;return this._w=c*m+this._w*v,this._x=n*m+this._x*v,this._y=r*m+this._y*v,this._z=o*m+this._z*v,this._onChangeCallback(),this}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}class sr{constructor(t=0,e=0,n=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(s){return this.x+=s,this.y+=s,this.z+=s,this}addVectors(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this}addScaledVector(t,s){return this.x+=t.x*s,this.y+=t.y*s,this.z+=t.z*s,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(s){return this.x-=s,this.y-=s,this.z-=s,this}subVectors(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(a,b){return this.x=a.x*b.x,this.y=a.y*b.y,this.z=a.z*b.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(lr.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(lr.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,o=t.elements;return this.x=o[0]*e+o[3]*n+o[6]*r,this.y=o[1]*e+o[4]*n+o[7]*r,this.z=o[2]*e+o[5]*n+o[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,o=t.elements,c=1/(o[3]*e+o[7]*n+o[11]*r+o[15]);return this.x=(o[0]*e+o[4]*n+o[8]*r+o[12])*c,this.y=(o[1]*e+o[5]*n+o[9]*r+o[13])*c,this.z=(o[2]*e+o[6]*n+o[10]*r+o[14])*c,this}applyQuaternion(q){const t=this.x,e=this.y,n=this.z,r=q.x,o=q.y,c=q.z,l=q.w,h=l*t+o*n-c*e,d=l*e+c*t-r*n,f=l*n+r*e-o*t,m=-r*t-o*e-c*n;return this.x=h*l+m*-r+d*-c-f*-o,this.y=d*l+m*-o+f*-r-h*-c,this.z=f*l+m*-c+h*-o-d*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r,this.y=o[1]*e+o[5]*n+o[9]*r,this.z=o[2]*e+o[6]*n+o[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(a,b){const t=a.x,e=a.y,n=a.z,r=b.x,o=b.y,c=b.z;return this.x=e*c-n*o,this.y=n*r-t*c,this.z=t*o-e*r,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return cr.copy(this).projectOnVector(t),this.sub(cr)}reflect(t){return this.sub(cr.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Yn.clamp(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(s){return this.setFromSphericalCoords(s.radius,s.phi,s.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}const cr=new sr,lr=new ar;class ur{constructor(t,e){Object.defineProperty(this,"isBox3",{value:!0}),this.min=void 0!==t?t:new sr(1/0,1/0,1/0),this.max=void 0!==e?e:new sr(-1/0,-1/0,-1/0)}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,r=1/0,o=-1/0,c=-1/0,l=-1/0;for(let i=0,h=t.length;i<h;i+=3){const h=t[i],d=t[i+1],f=t[i+2];h<e&&(e=h),d<n&&(n=d),f<r&&(r=f),h>o&&(o=h),d>c&&(c=d),f>l&&(l=f)}return this.min.set(e,n,r),this.max.set(o,c,l),this}setFromBufferAttribute(t){let e=1/0,n=1/0,r=1/0,o=-1/0,c=-1/0,l=-1/0;for(let i=0,h=t.count;i<h;i++){const h=t.getX(i),d=t.getY(i),f=t.getZ(i);h<e&&(e=h),d<n&&(n=d),f<r&&(r=f),h>o&&(o=h),d>c&&(c=d),f>l&&(l=f)}return this.min.set(e,n,r),this.max.set(o,c,l),this}setFromPoints(t){this.makeEmpty();for(let i=0,e=t.length;i<e;i++)this.expandByPoint(t[i]);return this}setFromCenterAndSize(t,e){const n=fr.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(object){return this.makeEmpty(),this.expandByObject(object)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new sr),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new sr),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(object){object.updateWorldMatrix(!1,!1);const t=object.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),mr.copy(t.boundingBox),mr.applyMatrix4(object.matrixWorld),this.union(mr));const e=object.children;for(let i=0,t=e.length;i<t;i++)this.expandByObject(e[i]);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new sr),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,fr),fr.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Mr),Sr.subVectors(this.max,Mr),gr.subVectors(t.a,Mr),vr.subVectors(t.b,Mr),yr.subVectors(t.c,Mr),xr.subVectors(vr,gr),_r.subVectors(yr,vr),wr.subVectors(gr,yr);let e=[0,-xr.z,xr.y,0,-_r.z,_r.y,0,-wr.z,wr.y,xr.z,0,-xr.x,_r.z,0,-_r.x,wr.z,0,-wr.x,-xr.y,xr.x,0,-_r.y,_r.x,0,-wr.y,wr.x,0];return!!dr(e,gr,vr,yr,Sr)&&(e=[1,0,0,0,1,0,0,0,1],!!dr(e,gr,vr,yr,Sr)&&(Tr.crossVectors(xr,_r),e=[Tr.x,Tr.y,Tr.z],dr(e,gr,vr,yr,Sr)))}clampPoint(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new sr),e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return fr.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(fr).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(pr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),pr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),pr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),pr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),pr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),pr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),pr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),pr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(pr)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}function dr(t,e,n,r,o){for(let i=0,c=t.length-3;i<=c;i+=3){Er.fromArray(t,i);const c=o.x*Math.abs(Er.x)+o.y*Math.abs(Er.y)+o.z*Math.abs(Er.z),l=e.dot(Er),h=n.dot(Er),d=r.dot(Er);if(Math.max(-Math.max(l,h,d),Math.min(l,h,d))>c)return!1}return!0}const pr=[new sr,new sr,new sr,new sr,new sr,new sr,new sr,new sr],fr=new sr,mr=new ur,gr=new sr,vr=new sr,yr=new sr,xr=new sr,_r=new sr,wr=new sr,Mr=new sr,Sr=new sr,Tr=new sr,Er=new sr,Ar=new ur;class Lr{constructor(t,e){this.center=void 0!==t?t:new sr,this.radius=void 0!==e?e:-1}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):Ar.setFromPoints(t).getCenter(n);let r=0;for(let i=0,e=t.length;i<e;i++)r=Math.max(r,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new sr),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new ur),this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}}const Cr=new sr,Rr=new sr,Pr=new sr,Or=new sr,Ir=new sr,kr=new sr,Nr=new sr;class Dr{constructor(t,e){this.origin=void 0!==t?t:new sr,this.direction=void 0!==e?e:new sr(0,0,-1)}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new sr),e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Cr)),this}closestPointToPoint(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new sr),e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=Cr.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Cr.copy(this.direction).multiplyScalar(e).add(this.origin),Cr.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){Rr.copy(t).add(e).multiplyScalar(.5),Pr.copy(e).sub(t).normalize(),Or.copy(this.origin).sub(Rr);const o=.5*t.distanceTo(e),c=-this.direction.dot(Pr),l=Or.dot(this.direction),h=-Or.dot(Pr),d=Or.lengthSq(),f=Math.abs(1-c*c);let m,v,y,x;if(f>0)if(m=c*h-l,v=c*l-h,x=o*f,m>=0)if(v>=-x)if(v<=x){const t=1/f;m*=t,v*=t,y=m*(m+c*v+2*l)+v*(c*m+v+2*h)+d}else v=o,m=Math.max(0,-(c*v+l)),y=-m*m+v*(v+2*h)+d;else v=-o,m=Math.max(0,-(c*v+l)),y=-m*m+v*(v+2*h)+d;else v<=-x?(m=Math.max(0,-(-c*o+l)),v=m>0?-o:Math.min(Math.max(-o,-h),o),y=-m*m+v*(v+2*h)+d):v<=x?(m=0,v=Math.min(Math.max(-o,-h),o),y=v*(v+2*h)+d):(m=Math.max(0,-(c*o+l)),v=m>0?o:Math.min(Math.max(-o,-h),o),y=-m*m+v*(v+2*h)+d);else v=c>0?-o:o,m=Math.max(0,-(c*v+l)),y=-m*m+v*(v+2*h)+d;return n&&n.copy(this.direction).multiplyScalar(m).add(this.origin),r&&r.copy(Pr).multiplyScalar(v).add(Rr),y}intersectSphere(t,e){Cr.subVectors(t.center,this.origin);const n=Cr.dot(this.direction),r=Cr.dot(Cr)-n*n,o=t.radius*t.radius;if(r>o)return null;const c=Math.sqrt(o-r),l=n-c,h=n+c;return l<0&&h<0?null:l<0?this.at(h,e):this.at(l,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,o,c,l,h;const d=1/this.direction.x,f=1/this.direction.y,m=1/this.direction.z,v=this.origin;return d>=0?(n=(t.min.x-v.x)*d,r=(t.max.x-v.x)*d):(n=(t.max.x-v.x)*d,r=(t.min.x-v.x)*d),f>=0?(o=(t.min.y-v.y)*f,c=(t.max.y-v.y)*f):(o=(t.max.y-v.y)*f,c=(t.min.y-v.y)*f),n>c||o>r?null:((o>n||n!=n)&&(n=o),(c<r||r!=r)&&(r=c),m>=0?(l=(t.min.z-v.z)*m,h=(t.max.z-v.z)*m):(l=(t.max.z-v.z)*m,h=(t.min.z-v.z)*m),n>h||l>r?null:((l>n||n!=n)&&(n=l),(h<r||r!=r)&&(r=h),r<0?null:this.at(n>=0?n:r,e)))}intersectsBox(t){return null!==this.intersectBox(t,Cr)}intersectTriangle(a,b,t,e,n){Ir.subVectors(b,a),kr.subVectors(t,a),Nr.crossVectors(Ir,kr);let r,o=this.direction.dot(Nr);if(o>0){if(e)return null;r=1}else{if(!(o<0))return null;r=-1,o=-o}Or.subVectors(this.origin,a);const c=r*this.direction.dot(kr.crossVectors(Or,kr));if(c<0)return null;const l=r*this.direction.dot(Ir.cross(Or));if(l<0)return null;if(c+l>o)return null;const h=-r*Or.dot(Nr);return h<0?null:this.at(h/o,n)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}class zr{constructor(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,r,o,c,l,h,d,f,m,v,y,x,_,w){const M=this.elements;return M[0]=t,M[4]=e,M[8]=n,M[12]=r,M[1]=o,M[5]=c,M[9]=l,M[13]=h,M[2]=d,M[6]=f,M[10]=m,M[14]=v,M[3]=y,M[7]=x,M[11]=_,M[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new zr).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/Br.setFromMatrixColumn(t,0).length(),o=1/Br.setFromMatrixColumn(t,1).length(),c=1/Br.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*o,e[5]=n[5]*o,e[6]=n[6]*o,e[7]=0,e[8]=n[8]*c,e[9]=n[9]*c,e[10]=n[10]*c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const e=this.elements,n=t.x,r=t.y,o=t.z,a=Math.cos(n),b=Math.sin(n),c=Math.cos(r),l=Math.sin(r),h=Math.cos(o),d=Math.sin(o);if("XYZ"===t.order){const t=a*h,n=a*d,r=b*h,o=b*d;e[0]=c*h,e[4]=-c*d,e[8]=l,e[1]=n+r*l,e[5]=t-o*l,e[9]=-b*c,e[2]=o-t*l,e[6]=r+n*l,e[10]=a*c}else if("YXZ"===t.order){const t=c*h,n=c*d,r=l*h,o=l*d;e[0]=t+o*b,e[4]=r*b-n,e[8]=a*l,e[1]=a*d,e[5]=a*h,e[9]=-b,e[2]=n*b-r,e[6]=o+t*b,e[10]=a*c}else if("ZXY"===t.order){const t=c*h,n=c*d,r=l*h,o=l*d;e[0]=t-o*b,e[4]=-a*d,e[8]=r+n*b,e[1]=n+r*b,e[5]=a*h,e[9]=o-t*b,e[2]=-a*l,e[6]=b,e[10]=a*c}else if("ZYX"===t.order){const t=a*h,n=a*d,r=b*h,o=b*d;e[0]=c*h,e[4]=r*l-n,e[8]=t*l+o,e[1]=c*d,e[5]=o*l+t,e[9]=n*l-r,e[2]=-l,e[6]=b*c,e[10]=a*c}else if("YZX"===t.order){const t=a*c,n=a*l,r=b*c,o=b*l;e[0]=c*h,e[4]=o-t*d,e[8]=r*d+n,e[1]=d,e[5]=a*h,e[9]=-b*h,e[2]=-l*h,e[6]=n*d+r,e[10]=t-o*d}else if("XZY"===t.order){const t=a*c,n=a*l,r=b*c,o=b*l;e[0]=c*h,e[4]=-d,e[8]=l*h,e[1]=t*d+o,e[5]=a*h,e[9]=n*d-r,e[2]=r*d-n,e[6]=b*h,e[10]=o*d+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(q){return this.compose(jr,q,Ur)}lookAt(t,e,n){const r=this.elements;return Vr.subVectors(t,e),0===Vr.lengthSq()&&(Vr.z=1),Vr.normalize(),Gr.crossVectors(n,Vr),0===Gr.lengthSq()&&(1===Math.abs(n.z)?Vr.x+=1e-4:Vr.z+=1e-4,Vr.normalize(),Gr.crossVectors(n,Vr)),Gr.normalize(),Hr.crossVectors(Vr,Gr),r[0]=Gr.x,r[4]=Hr.x,r[8]=Vr.x,r[1]=Gr.y,r[5]=Hr.y,r[9]=Vr.y,r[2]=Gr.z,r[6]=Hr.z,r[10]=Vr.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(a,b){const t=a.elements,e=b.elements,n=this.elements,r=t[0],o=t[4],c=t[8],l=t[12],h=t[1],d=t[5],f=t[9],m=t[13],v=t[2],y=t[6],x=t[10],_=t[14],w=t[3],M=t[7],S=t[11],T=t[15],E=e[0],A=e[4],L=e[8],C=e[12],R=e[1],P=e[5],O=e[9],I=e[13],k=e[2],N=e[6],D=e[10],z=e[14],B=e[3],F=e[7],j=e[11],U=e[15];return n[0]=r*E+o*R+c*k+l*B,n[4]=r*A+o*P+c*N+l*F,n[8]=r*L+o*O+c*D+l*j,n[12]=r*C+o*I+c*z+l*U,n[1]=h*E+d*R+f*k+m*B,n[5]=h*A+d*P+f*N+m*F,n[9]=h*L+d*O+f*D+m*j,n[13]=h*C+d*I+f*z+m*U,n[2]=v*E+y*R+x*k+_*B,n[6]=v*A+y*P+x*N+_*F,n[10]=v*L+y*O+x*D+_*j,n[14]=v*C+y*I+x*z+_*U,n[3]=w*E+M*R+S*k+T*B,n[7]=w*A+M*P+S*N+T*F,n[11]=w*L+M*O+S*D+T*j,n[15]=w*C+M*I+S*z+T*U,this}multiplyScalar(s){const t=this.elements;return t[0]*=s,t[4]*=s,t[8]*=s,t[12]*=s,t[1]*=s,t[5]*=s,t[9]*=s,t[13]*=s,t[2]*=s,t[6]*=s,t[10]*=s,t[14]*=s,t[3]*=s,t[7]*=s,t[11]*=s,t[15]*=s,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],o=t[12],c=t[1],l=t[5],h=t[9],d=t[13],f=t[2],m=t[6],v=t[10],y=t[14];return t[3]*(+o*h*m-r*d*m-o*l*v+n*d*v+r*l*y-n*h*y)+t[7]*(+e*h*y-e*d*v+o*c*v-r*c*y+r*d*f-o*h*f)+t[11]*(+e*d*m-e*l*y-o*c*m+n*c*y+o*l*f-n*d*f)+t[15]*(-r*l*f-e*h*m+e*l*v+r*c*m-n*c*v+n*h*f)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}getInverse(t,e){void 0!==e&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");const n=this.elements,r=t.elements,o=r[0],c=r[1],l=r[2],h=r[3],d=r[4],f=r[5],m=r[6],v=r[7],y=r[8],x=r[9],_=r[10],w=r[11],M=r[12],S=r[13],T=r[14],E=r[15],A=x*T*v-S*_*v+S*m*w-f*T*w-x*m*E+f*_*E,L=M*_*v-y*T*v-M*m*w+d*T*w+y*m*E-d*_*E,C=y*S*v-M*x*v+M*f*w-d*S*w-y*f*E+d*x*E,R=M*x*m-y*S*m-M*f*_+d*S*_+y*f*T-d*x*T,P=o*A+c*L+l*C+h*R;if(0===P)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const O=1/P;return n[0]=A*O,n[1]=(S*_*h-x*T*h-S*l*w+c*T*w+x*l*E-c*_*E)*O,n[2]=(f*T*h-S*m*h+S*l*v-c*T*v-f*l*E+c*m*E)*O,n[3]=(x*m*h-f*_*h-x*l*v+c*_*v+f*l*w-c*m*w)*O,n[4]=L*O,n[5]=(y*T*h-M*_*h+M*l*w-o*T*w-y*l*E+o*_*E)*O,n[6]=(M*m*h-d*T*h-M*l*v+o*T*v+d*l*E-o*m*E)*O,n[7]=(d*_*h-y*m*h+y*l*v-o*_*v-d*l*w+o*m*w)*O,n[8]=C*O,n[9]=(M*x*h-y*S*h-M*c*w+o*S*w+y*c*E-o*x*E)*O,n[10]=(d*S*h-M*f*h+M*c*v-o*S*v-d*c*E+o*f*E)*O,n[11]=(y*f*h-d*x*h-y*c*v+o*x*v+d*c*w-o*f*w)*O,n[12]=R*O,n[13]=(y*S*l-M*x*l+M*c*_-o*S*_-y*c*T+o*x*T)*O,n[14]=(M*f*l-d*S*l-M*c*m+o*S*m+d*c*T-o*f*T)*O,n[15]=(d*x*l-y*f*l+y*c*m-o*x*m-d*c*_+o*f*_)*O,this}scale(t){const e=this.elements,n=t.x,r=t.y,o=t.z;return e[0]*=n,e[4]*=r,e[8]*=o,e[1]*=n,e[5]*=r,e[9]*=o,e[2]*=n,e[6]*=r,e[10]*=o,e[3]*=n,e[7]*=r,e[11]*=o,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),s=Math.sin(t);return this.set(1,0,0,0,0,e,-s,0,0,s,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),s=Math.sin(t);return this.set(e,0,s,0,0,1,0,0,-s,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),s=Math.sin(t);return this.set(e,-s,0,0,s,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),s=Math.sin(e),r=1-n,o=t.x,c=t.y,l=t.z,h=r*o,d=r*c;return this.set(h*o+n,h*c-s*l,h*l+s*c,0,h*c+s*l,d*c+n,d*l-s*o,0,h*l-s*c,d*l+s*o,r*l*l+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,o=e._x,c=e._y,l=e._z,h=e._w,d=o+o,f=c+c,m=l+l,v=o*d,y=o*f,x=o*m,_=c*f,w=c*m,M=l*m,S=h*d,T=h*f,E=h*m,A=n.x,L=n.y,C=n.z;return r[0]=(1-(_+M))*A,r[1]=(y+E)*A,r[2]=(x-T)*A,r[3]=0,r[4]=(y-E)*L,r[5]=(1-(v+M))*L,r[6]=(w+S)*L,r[7]=0,r[8]=(x+T)*C,r[9]=(w-S)*C,r[10]=(1-(v+_))*C,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let o=Br.set(r[0],r[1],r[2]).length();const c=Br.set(r[4],r[5],r[6]).length(),l=Br.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),t.x=r[12],t.y=r[13],t.z=r[14],Fr.copy(this);const h=1/o,d=1/c,f=1/l;return Fr.elements[0]*=h,Fr.elements[1]*=h,Fr.elements[2]*=h,Fr.elements[4]*=d,Fr.elements[5]*=d,Fr.elements[6]*=d,Fr.elements[8]*=f,Fr.elements[9]*=f,Fr.elements[10]*=f,e.setFromRotationMatrix(Fr),n.x=o,n.y=c,n.z=l,this}makePerspective(t,e,n,r,o,c){void 0===c&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const l=this.elements,h=2*o/(e-t),d=2*o/(n-r),a=(e+t)/(e-t),b=(n+r)/(n-r),f=-(c+o)/(c-o),m=-2*c*o/(c-o);return l[0]=h,l[4]=0,l[8]=a,l[12]=0,l[1]=0,l[5]=d,l[9]=b,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(t,e,n,r,o,c){const l=this.elements,h=1/(e-t),d=1/(n-r),p=1/(c-o),f=(e+t)*h,m=(n+r)*d,v=(c+o)*p;return l[0]=2*h,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*d,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=-2*p,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t,e){void 0===e&&(e=0);for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const Br=new sr,Fr=new zr,jr=new sr(0,0,0),Ur=new sr(1,1,1),Gr=new sr,Hr=new sr,Vr=new sr;class Wr{constructor(t=0,e=0,n=0,r=Wr.DefaultOrder){Object.defineProperty(this,"isEuler",{value:!0}),this._x=t,this._y=e,this._z=n,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._order=r||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e,n){const r=Yn.clamp,o=t.elements,c=o[0],l=o[4],h=o[8],d=o[1],f=o[5],m=o[9],v=o[2],y=o[6],x=o[10];switch(e=e||this._order){case"XYZ":this._y=Math.asin(r(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-m,x),this._z=Math.atan2(-l,c)):(this._x=Math.atan2(y,f),this._z=0);break;case"YXZ":this._x=Math.asin(-r(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(h,x),this._z=Math.atan2(d,f)):(this._y=Math.atan2(-v,c),this._z=0);break;case"ZXY":this._x=Math.asin(r(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-v,x),this._z=Math.atan2(-l,f)):(this._y=0,this._z=Math.atan2(d,c));break;case"ZYX":this._y=Math.asin(-r(v,-1,1)),Math.abs(v)<.9999999?(this._x=Math.atan2(y,x),this._z=Math.atan2(d,c)):(this._x=0,this._z=Math.atan2(-l,f));break;case"YZX":this._z=Math.asin(r(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-m,f),this._y=Math.atan2(-v,c)):(this._x=0,this._y=Math.atan2(h,x));break;case"XZY":this._z=Math.asin(-r(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(y,f),this._y=Math.atan2(h,c)):(this._x=Math.atan2(-m,x),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!1!==n&&this._onChangeCallback(),this}setFromQuaternion(q,t,e){return qr.makeRotationFromQuaternion(q),this.setFromRotationMatrix(qr,t,e)}setFromVector3(t,e){return this.set(t.x,t.y,t.z,e||this._order)}reorder(t){return Zr.setFromEuler(this),this.setFromQuaternion(Zr,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}toVector3(t){return t?t.set(this._x,this._y,this._z):new sr(this._x,this._y,this._z)}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}Wr.DefaultOrder="XYZ",Wr.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];const qr=new zr,Zr=new ar;class $r{constructor(){this.mask=1}set(t){this.mask=1<<t|0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}}let Yr=0;const Xr=new sr,Jr=new ar,Qr=new zr,Kr=new sr,ti=new sr,ei=new sr,ni=new ar,ri=new sr(1,0,0),ii=new sr(0,1,0),oi=new sr(0,0,1),ai={type:"added"},si={type:"removed"};function ci(){Object.defineProperty(this,"id",{value:Yr++}),this.uuid=Yn.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ci.DefaultUp.clone();const t=new sr,e=new Wr,n=new ar,r=new sr(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new zr},normalMatrix:{value:new Jn}}),this.matrix=new zr,this.matrixWorld=new zr,this.matrixAutoUpdate=ci.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new $r,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}ci.DefaultUp=new sr(0,1,0),ci.DefaultMatrixAutoUpdate=!0,ci.prototype=Object.assign(Object.create(qn.prototype),{constructor:ci,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(q){return this.quaternion.premultiply(q),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(q){this.quaternion.copy(q)},rotateOnAxis:function(t,e){return Jr.setFromAxisAngle(t,e),this.quaternion.multiply(Jr),this},rotateOnWorldAxis:function(t,e){return Jr.setFromAxisAngle(t,e),this.quaternion.premultiply(Jr),this},rotateX:function(t){return this.rotateOnAxis(ri,t)},rotateY:function(t){return this.rotateOnAxis(ii,t)},rotateZ:function(t){return this.rotateOnAxis(oi,t)},translateOnAxis:function(t,e){return Xr.copy(t).applyQuaternion(this.quaternion),this.position.add(Xr.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(ri,t)},translateY:function(t){return this.translateOnAxis(ii,t)},translateZ:function(t){return this.translateOnAxis(oi,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(Qr.getInverse(this.matrixWorld))},lookAt:function(t,e,n){t.isVector3?Kr.copy(t):Kr.set(t,e,n);const r=this.parent;this.updateWorldMatrix(!0,!1),ti.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Qr.lookAt(ti,Kr,this.up):Qr.lookAt(Kr,ti,this.up),this.quaternion.setFromRotationMatrix(Qr),r&&(Qr.extractRotation(r.matrixWorld),Jr.setFromRotationMatrix(Qr),this.quaternion.premultiply(Jr.inverse()))},add:function(object){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return object===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",object),this):(object&&object.isObject3D?(null!==object.parent&&object.parent.remove(object),object.parent=this,this.children.push(object),object.dispatchEvent(ai)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",object),this)},remove:function(object){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(object);return-1!==t&&(object.parent=null,this.children.splice(t,1),object.dispatchEvent(si)),this},attach:function(object){return this.updateWorldMatrix(!0,!1),Qr.getInverse(this.matrixWorld),null!==object.parent&&(object.parent.updateWorldMatrix(!0,!1),Qr.multiply(object.parent.matrixWorld)),object.applyMatrix4(Qr),object.updateWorldMatrix(!1,!1),this.add(object),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(let i=0,n=this.children.length;i<n;i++){const object=this.children[i].getObjectByProperty(t,e);if(void 0!==object)return object}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new sr),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new ar),this.updateMatrixWorld(!0),this.matrixWorld.decompose(ti,t,ei),t},getWorldScale:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new sr),this.updateMatrixWorld(!0),this.matrixWorld.decompose(ti,ni,t),t},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new sr),this.updateMatrixWorld(!0);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);const e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].traverse(t)},traverseVisible:function(t){if(!1===this.visible)return;t(this);const e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].traverseVisible(t)},traverseAncestors:function(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){const n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let i=0,e=t.length;i<e;i++)t[i].updateWorldMatrix(!1,!0)}},toJSON:function(meta){const t=void 0===meta||"string"==typeof meta,output={};t&&(meta={geometries:{},materials:{},textures:{},images:{},shapes:{}},output.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const object={};function e(t,element){return void 0===t[element.uuid]&&(t[element.uuid]=element.toJSON(meta)),element.uuid}if(object.uuid=this.uuid,object.type=this.type,""!==this.name&&(object.name=this.name),!0===this.castShadow&&(object.castShadow=!0),!0===this.receiveShadow&&(object.receiveShadow=!0),!1===this.visible&&(object.visible=!1),!1===this.frustumCulled&&(object.frustumCulled=!1),0!==this.renderOrder&&(object.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(object.userData=this.userData),object.layers=this.layers.mask,object.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(object.matrixAutoUpdate=!1),this.isInstancedMesh&&(object.type="InstancedMesh",object.count=this.count,object.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){object.geometry=e(meta.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let i=0,t=n.length;i<t;i++){const t=n[i];e(meta.shapes,t)}else e(meta.shapes,n)}}if(void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let i=0,n=this.material.length;i<n;i++)t.push(e(meta.materials,this.material[i]));object.material=t}else object.material=e(meta.materials,this.material);if(this.children.length>0){object.children=[];for(let i=0;i<this.children.length;i++)object.children.push(this.children[i].toJSON(meta).object)}if(t){const t=n(meta.geometries),e=n(meta.materials),r=n(meta.textures),o=n(meta.images),c=n(meta.shapes);t.length>0&&(output.geometries=t),e.length>0&&(output.materials=e),r.length>0&&(output.textures=r),o.length>0&&(output.images=o),c.length>0&&(output.shapes=c)}return output.object=object,output;function n(t){const e=[];for(const n in t){const data=t[n];delete data.metadata,e.push(data)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(source,t){if(void 0===t&&(t=!0),this.name=source.name,this.up.copy(source.up),this.position.copy(source.position),this.rotation.order=source.rotation.order,this.quaternion.copy(source.quaternion),this.scale.copy(source.scale),this.matrix.copy(source.matrix),this.matrixWorld.copy(source.matrixWorld),this.matrixAutoUpdate=source.matrixAutoUpdate,this.matrixWorldNeedsUpdate=source.matrixWorldNeedsUpdate,this.layers.mask=source.layers.mask,this.visible=source.visible,this.castShadow=source.castShadow,this.receiveShadow=source.receiveShadow,this.frustumCulled=source.frustumCulled,this.renderOrder=source.renderOrder,this.userData=JSON.parse(JSON.stringify(source.userData)),!0===t)for(let i=0;i<source.children.length;i++){const t=source.children[i];this.add(t.clone())}return this}});const ui=new sr,hi=new sr,di=new Jn;class pi{constructor(t,e){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=void 0!==t?t:new sr(1,0,0),this.constant=void 0!==e?e:0}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(a,b,t){const e=ui.subVectors(t,b).cross(hi.subVectors(a,b)).normalize();return this.setFromNormalAndCoplanarPoint(e,a),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new sr),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(line,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new sr);const e=line.delta(ui),n=this.normal.dot(e);if(0===n)return 0===this.distanceToPoint(line.start)?t.copy(line.start):void 0;const r=-(line.start.dot(this.normal)+this.constant)/n;return r<0||r>1?void 0:t.copy(e).multiplyScalar(r).add(line.start)}intersectsLine(line){const t=this.distanceToPoint(line.start),e=this.distanceToPoint(line.end);return t<0&&e>0||e<0&&t>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new sr),t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||di.getNormalMatrix(t),r=this.coplanarPoint(ui).applyMatrix4(t),o=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(o),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}const fi=new sr,mi=new sr,gi=new sr,vi=new sr,yi=new sr,xi=new sr,bi=new sr,_i=new sr,wi=new sr,Mi=new sr;class Si{constructor(a,b,t){this.a=void 0!==a?a:new sr,this.b=void 0!==b?b:new sr,this.c=void 0!==t?t:new sr}static getNormal(a,b,t,e){void 0===e&&(console.warn("THREE.Triangle: .getNormal() target is now required"),e=new sr),e.subVectors(t,b),fi.subVectors(a,b),e.cross(fi);const n=e.lengthSq();return n>0?e.multiplyScalar(1/Math.sqrt(n)):e.set(0,0,0)}static getBarycoord(t,a,b,e,n){fi.subVectors(e,a),mi.subVectors(b,a),gi.subVectors(t,a);const r=fi.dot(fi),o=fi.dot(mi),c=fi.dot(gi),l=mi.dot(mi),h=mi.dot(gi),d=r*l-o*o;if(void 0===n&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),n=new sr),0===d)return n.set(-2,-1,-1);const f=1/d,u=(l*c-o*h)*f,m=(r*h-o*c)*f;return n.set(1-u-m,m,u)}static containsPoint(t,a,b,e){return this.getBarycoord(t,a,b,e,vi),vi.x>=0&&vi.y>=0&&vi.x+vi.y<=1}static getUV(t,e,n,r,o,c,l,h){return this.getBarycoord(t,e,n,r,vi),h.set(0,0),h.addScaledVector(o,vi.x),h.addScaledVector(c,vi.y),h.addScaledVector(l,vi.z),h}static isFrontFacing(a,b,t,e){return fi.subVectors(t,b),mi.subVectors(a,b),fi.cross(mi).dot(e)<0}set(a,b,t){return this.a.copy(a),this.b.copy(b),this.c.copy(t),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return fi.subVectors(this.c,this.b),mi.subVectors(this.a,this.b),.5*fi.cross(mi).length()}getMidpoint(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new sr),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Si.getNormal(this.a,this.b,this.c,t)}getPlane(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new pi),t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Si.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,r,o){return Si.getUV(t,this.a,this.b,this.c,e,n,r,o)}containsPoint(t){return Si.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Si.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(p,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new sr);const a=this.a,b=this.b,e=this.c;let n,r;yi.subVectors(b,a),xi.subVectors(e,a),_i.subVectors(p,a);const o=yi.dot(_i),c=xi.dot(_i);if(o<=0&&c<=0)return t.copy(a);wi.subVectors(p,b);const l=yi.dot(wi),h=xi.dot(wi);if(l>=0&&h<=l)return t.copy(b);const d=o*h-l*c;if(d<=0&&o>=0&&l<=0)return n=o/(o-l),t.copy(a).addScaledVector(yi,n);Mi.subVectors(p,e);const f=yi.dot(Mi),m=xi.dot(Mi);if(m>=0&&f<=m)return t.copy(e);const v=f*c-o*m;if(v<=0&&c>=0&&m<=0)return r=c/(c-m),t.copy(a).addScaledVector(xi,r);const y=l*m-f*h;if(y<=0&&h-l>=0&&f-m>=0)return bi.subVectors(e,b),r=(h-l)/(h-l+(f-m)),t.copy(b).addScaledVector(bi,r);const x=1/(y+v+d);return n=v*x,r=d*x,t.copy(a).addScaledVector(yi,n).addScaledVector(xi,r)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const Ti={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ei={h:0,s:0,l:0},Ai={h:0,s:0,l:0};function Li(p,q,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?p+6*(q-p)*t:t<.5?q:t<2/3?p+6*(q-p)*(2/3-t):p}function Ci(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function Ri(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}class Pi{constructor(t,g,b){return Object.defineProperty(this,"isColor",{value:!0}),void 0===g&&void 0===b?this.set(t):this.setRGB(t,g,b)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,g,b){return this.r=t,this.g=g,this.b=b,this}setHSL(t,s,e){if(t=Yn.euclideanModulo(t,1),s=Yn.clamp(s,0,1),e=Yn.clamp(e,0,1),0===s)this.r=this.g=this.b=e;else{const p=e<=.5?e*(1+s):e+s-e*s,q=2*e-p;this.r=Li(q,p,t+1/3),this.g=Li(q,p,t),this.b=Li(q,p,t-1/3)}return this}setStyle(style){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+style+" will be ignored.")}let e;if(e=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(style)){let n;const r=e[1],o=e[2];switch(r){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,t(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,t(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){const e=parseFloat(n[1])/360,s=parseInt(n[2],10)/100,r=parseInt(n[3],10)/100;return t(n[5]),this.setHSL(e,s,r)}}}else if(e=/^\#([A-Fa-f0-9]+)$/.exec(style)){const t=e[1],n=t.length;if(3===n)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,this;if(6===n)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,this}return style&&style.length>0?this.setColorName(style):this}setColorName(style){const t=Ti[style];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+style),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this}copyLinearToGamma(t,e){void 0===e&&(e=2);const n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=Ci(t.r),this.g=Ci(t.g),this.b=Ci(t.b),this}copyLinearToSRGB(t){return this.r=Ri(t.r),this.g=Ri(t.g),this.b=Ri(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});const e=this.r,g=this.g,b=this.b,n=Math.max(e,g,b),r=Math.min(e,g,b);let o,c;const l=(r+n)/2;if(r===n)o=0,c=0;else{const t=n-r;switch(c=l<=.5?t/(n+r):t/(2-n-r),n){case e:o=(g-b)/t+(g<b?6:0);break;case g:o=(b-e)/t+2;break;case b:o=(e-g)/t+4}o/=6}return t.h=o,t.s=c,t.l=l,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,s,e){return this.getHSL(Ei),Ei.h+=t,Ei.s+=s,Ei.l+=e,this.setHSL(Ei.h,Ei.s,Ei.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(s){return this.r+=s,this.g+=s,this.b+=s,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(s){return this.r*=s,this.g*=s,this.b*=s,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpHSL(t,e){this.getHSL(Ei),t.getHSL(Ai);const n=Yn.lerp(Ei.h,Ai.h,e),s=Yn.lerp(Ei.s,Ai.s,e),r=Yn.lerp(Ei.l,Ai.l,e);return this.setHSL(n,s,r),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Pi.NAMES=Ti,Pi.prototype.r=1,Pi.prototype.g=1,Pi.prototype.b=1;class Oi{constructor(a,b,t,e,n,r){this.a=a,this.b=b,this.c=t,this.normal=e&&e.isVector3?e:new sr,this.vertexNormals=Array.isArray(e)?e:[],this.color=n&&n.isColor?n:new Pi,this.vertexColors=Array.isArray(n)?n:[],this.materialIndex=void 0!==r?r:0}clone(){return(new this.constructor).copy(this)}copy(source){this.a=source.a,this.b=source.b,this.c=source.c,this.normal.copy(source.normal),this.color.copy(source.color),this.materialIndex=source.materialIndex;for(let i=0,t=source.vertexNormals.length;i<t;i++)this.vertexNormals[i]=source.vertexNormals[i].clone();for(let i=0,t=source.vertexColors.length;i<t;i++)this.vertexColors[i]=source.vertexColors[i].clone();return this}}let Ii=0;function ki(){Object.defineProperty(this,"id",{value:Ii++}),this.uuid=Yn.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=A,this.side=_,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=U,this.blendDst=G,this.blendEquation=O,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Q,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=kn,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=bn,this.stencilZFail=bn,this.stencilZPass=bn,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function Ni(t){ki.call(this),this.type="MeshBasicMaterial",this.color=new Pi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=it,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(t)}ki.prototype=Object.assign(Object.create(qn.prototype),{constructor:ki,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if("shading"===e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===S;continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}},toJSON:function(meta){const t=void 0===meta||"string"==typeof meta;t&&(meta={textures:{},images:{}});const data={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function e(t){const e=[];for(const n in t){const data=t[n];delete data.metadata,e.push(data)}return e}if(data.uuid=this.uuid,data.type=this.type,""!==this.name&&(data.name=this.name),this.color&&this.color.isColor&&(data.color=this.color.getHex()),void 0!==this.roughness&&(data.roughness=this.roughness),void 0!==this.metalness&&(data.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(data.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(data.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(data.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(data.specular=this.specular.getHex()),void 0!==this.shininess&&(data.shininess=this.shininess),void 0!==this.clearcoat&&(data.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(data.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(data.clearcoatMap=this.clearcoatMap.toJSON(meta).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(data.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(meta).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(data.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(meta).uuid,data.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(data.map=this.map.toJSON(meta).uuid),this.matcap&&this.matcap.isTexture&&(data.matcap=this.matcap.toJSON(meta).uuid),this.alphaMap&&this.alphaMap.isTexture&&(data.alphaMap=this.alphaMap.toJSON(meta).uuid),this.lightMap&&this.lightMap.isTexture&&(data.lightMap=this.lightMap.toJSON(meta).uuid),this.aoMap&&this.aoMap.isTexture&&(data.aoMap=this.aoMap.toJSON(meta).uuid,data.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(data.bumpMap=this.bumpMap.toJSON(meta).uuid,data.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(data.normalMap=this.normalMap.toJSON(meta).uuid,data.normalMapType=this.normalMapType,data.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(data.displacementMap=this.displacementMap.toJSON(meta).uuid,data.displacementScale=this.displacementScale,data.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(data.roughnessMap=this.roughnessMap.toJSON(meta).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(data.metalnessMap=this.metalnessMap.toJSON(meta).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(data.emissiveMap=this.emissiveMap.toJSON(meta).uuid),this.specularMap&&this.specularMap.isTexture&&(data.specularMap=this.specularMap.toJSON(meta).uuid),this.envMap&&this.envMap.isTexture&&(data.envMap=this.envMap.toJSON(meta).uuid,data.reflectivity=this.reflectivity,data.refractionRatio=this.refractionRatio,void 0!==this.combine&&(data.combine=this.combine),void 0!==this.envMapIntensity&&(data.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(data.gradientMap=this.gradientMap.toJSON(meta).uuid),void 0!==this.size&&(data.size=this.size),void 0!==this.sizeAttenuation&&(data.sizeAttenuation=this.sizeAttenuation),this.blending!==A&&(data.blending=this.blending),!0===this.flatShading&&(data.flatShading=this.flatShading),this.side!==_&&(data.side=this.side),this.vertexColors&&(data.vertexColors=!0),this.opacity<1&&(data.opacity=this.opacity),!0===this.transparent&&(data.transparent=this.transparent),data.depthFunc=this.depthFunc,data.depthTest=this.depthTest,data.depthWrite=this.depthWrite,data.stencilWrite=this.stencilWrite,data.stencilWriteMask=this.stencilWriteMask,data.stencilFunc=this.stencilFunc,data.stencilRef=this.stencilRef,data.stencilFuncMask=this.stencilFuncMask,data.stencilFail=this.stencilFail,data.stencilZFail=this.stencilZFail,data.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(data.rotation=this.rotation),!0===this.polygonOffset&&(data.polygonOffset=!0),0!==this.polygonOffsetFactor&&(data.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(data.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(data.linewidth=this.linewidth),void 0!==this.dashSize&&(data.dashSize=this.dashSize),void 0!==this.gapSize&&(data.gapSize=this.gapSize),void 0!==this.scale&&(data.scale=this.scale),!0===this.dithering&&(data.dithering=!0),this.alphaTest>0&&(data.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(data.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(data.wireframe=this.wireframe),this.wireframeLinewidth>1&&(data.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(data.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(data.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(data.morphTargets=!0),!0===this.morphNormals&&(data.morphNormals=!0),!0===this.skinning&&(data.skinning=!0),!1===this.visible&&(data.visible=!1),!1===this.toneMapped&&(data.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(data.userData=this.userData),t){const t=e(meta.textures),n=e(meta.images);t.length>0&&(data.textures=t),n.length>0&&(data.images=n)}return data},clone:function(){return(new this.constructor).copy(this)},copy:function(source){this.name=source.name,this.fog=source.fog,this.blending=source.blending,this.side=source.side,this.flatShading=source.flatShading,this.vertexColors=source.vertexColors,this.opacity=source.opacity,this.transparent=source.transparent,this.blendSrc=source.blendSrc,this.blendDst=source.blendDst,this.blendEquation=source.blendEquation,this.blendSrcAlpha=source.blendSrcAlpha,this.blendDstAlpha=source.blendDstAlpha,this.blendEquationAlpha=source.blendEquationAlpha,this.depthFunc=source.depthFunc,this.depthTest=source.depthTest,this.depthWrite=source.depthWrite,this.stencilWriteMask=source.stencilWriteMask,this.stencilFunc=source.stencilFunc,this.stencilRef=source.stencilRef,this.stencilFuncMask=source.stencilFuncMask,this.stencilFail=source.stencilFail,this.stencilZFail=source.stencilZFail,this.stencilZPass=source.stencilZPass,this.stencilWrite=source.stencilWrite;const t=source.clippingPlanes;let e=null;if(null!==t){const n=t.length;e=new Array(n);for(let i=0;i!==n;++i)e[i]=t[i].clone()}return this.clippingPlanes=e,this.clipIntersection=source.clipIntersection,this.clipShadows=source.clipShadows,this.shadowSide=source.shadowSide,this.colorWrite=source.colorWrite,this.precision=source.precision,this.polygonOffset=source.polygonOffset,this.polygonOffsetFactor=source.polygonOffsetFactor,this.polygonOffsetUnits=source.polygonOffsetUnits,this.dithering=source.dithering,this.alphaTest=source.alphaTest,this.premultipliedAlpha=source.premultipliedAlpha,this.visible=source.visible,this.toneMapped=source.toneMapped,this.userData=JSON.parse(JSON.stringify(source.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(ki.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Ni.prototype=Object.create(ki.prototype),Ni.prototype.constructor=Ni,Ni.prototype.isMeshBasicMaterial=!0,Ni.prototype.copy=function(source){return ki.prototype.copy.call(this,source),this.color.copy(source.color),this.map=source.map,this.lightMap=source.lightMap,this.lightMapIntensity=source.lightMapIntensity,this.aoMap=source.aoMap,this.aoMapIntensity=source.aoMapIntensity,this.specularMap=source.specularMap,this.alphaMap=source.alphaMap,this.envMap=source.envMap,this.combine=source.combine,this.reflectivity=source.reflectivity,this.refractionRatio=source.refractionRatio,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this.skinning=source.skinning,this.morphTargets=source.morphTargets,this};const Di=new sr,zi=new Xn;function Bi(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=Nn,this.updateRange={offset:0,count:-1},this.version=0}function Fi(t,e,n){Bi.call(this,new Int8Array(t),e,n)}function ji(t,e,n){Bi.call(this,new Uint8Array(t),e,n)}function Ui(t,e,n){Bi.call(this,new Uint8ClampedArray(t),e,n)}function Gi(t,e,n){Bi.call(this,new Int16Array(t),e,n)}function Hi(t,e,n){Bi.call(this,new Uint16Array(t),e,n)}function Vi(t,e,n){Bi.call(this,new Int32Array(t),e,n)}function Wi(t,e,n){Bi.call(this,new Uint32Array(t),e,n)}function qi(t,e,n){Bi.call(this,new Float32Array(t),e,n)}function Zi(t,e,n){Bi.call(this,new Float64Array(t),e,n)}Object.defineProperty(Bi.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Bi.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(source){return this.name=source.name,this.array=new source.array.constructor(source.array),this.itemSize=source.itemSize,this.count=source.count,this.normalized=source.normalized,this.usage=source.usage,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),r=new Pi),e[n++]=r.r,e[n++]=r.g,e[n++]=r.b}return this},copyVector2sArray:function(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),r=new Xn),e[n++]=r.x,e[n++]=r.y}return this},copyVector3sArray:function(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),r=new sr),e[n++]=r.x,e[n++]=r.y,e[n++]=r.z}return this},copyVector4sArray:function(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),r=new rr),e[n++]=r.x,e[n++]=r.y,e[n++]=r.z,e[n++]=r.w}return this},applyMatrix3:function(t){if(2===this.itemSize)for(let i=0,e=this.count;i<e;i++)zi.fromBufferAttribute(this,i),zi.applyMatrix3(t),this.setXY(i,zi.x,zi.y);else if(3===this.itemSize)for(let i=0,e=this.count;i<e;i++)Di.fromBufferAttribute(this,i),Di.applyMatrix3(t),this.setXYZ(i,Di.x,Di.y,Di.z);return this},applyMatrix4:function(t){for(let i=0,e=this.count;i<e;i++)Di.x=this.getX(i),Di.y=this.getY(i),Di.z=this.getZ(i),Di.applyMatrix4(t),this.setXYZ(i,Di.x,Di.y,Di.z);return this},applyNormalMatrix:function(t){for(let i=0,e=this.count;i<e;i++)Di.x=this.getX(i),Di.y=this.getY(i),Di.z=this.getZ(i),Di.applyNormalMatrix(t),this.setXYZ(i,Di.x,Di.y,Di.z);return this},transformDirection:function(t){for(let i=0,e=this.count;i<e;i++)Di.x=this.getX(i),Di.y=this.getY(i),Di.z=this.getZ(i),Di.transformDirection(t),this.setXYZ(i,Di.x,Di.y,Di.z);return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this},setXYZW:function(t,e,n,r,o){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=o,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),Fi.prototype=Object.create(Bi.prototype),Fi.prototype.constructor=Fi,ji.prototype=Object.create(Bi.prototype),ji.prototype.constructor=ji,Ui.prototype=Object.create(Bi.prototype),Ui.prototype.constructor=Ui,Gi.prototype=Object.create(Bi.prototype),Gi.prototype.constructor=Gi,Hi.prototype=Object.create(Bi.prototype),Hi.prototype.constructor=Hi,Vi.prototype=Object.create(Bi.prototype),Vi.prototype.constructor=Vi,Wi.prototype=Object.create(Bi.prototype),Wi.prototype.constructor=Wi,qi.prototype=Object.create(Bi.prototype),qi.prototype.constructor=qi,Zi.prototype=Object.create(Bi.prototype),Zi.prototype.constructor=Zi;class $i{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(t){const e=[];let n,i,r=void 0;const o=t.faces;for(i=0;i<o.length;i++){const t=o[i];t.materialIndex!==r&&(r=t.materialIndex,void 0!==n&&(n.count=3*i-n.start,e.push(n)),n={start:3*i,materialIndex:r})}void 0!==n&&(n.count=3*i-n.start,e.push(n)),this.groups=e}fromGeometry(t){const e=t.faces,n=t.vertices,r=t.faceVertexUvs,o=r[0]&&r[0].length>0,c=r[1]&&r[1].length>0,l=t.morphTargets,h=l.length;let d;if(h>0){d=[];for(let i=0;i<h;i++)d[i]={name:l[i].name,data:[]};this.morphTargets.position=d}const f=t.morphNormals,m=f.length;let v;if(m>0){v=[];for(let i=0;i<m;i++)v[i]={name:f[i].name,data:[]};this.morphTargets.normal=v}const y=t.skinIndices,x=t.skinWeights,_=y.length===n.length,w=x.length===n.length;n.length>0&&0===e.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let i=0;i<e.length;i++){const t=e[i];this.vertices.push(n[t.a],n[t.b],n[t.c]);const M=t.vertexNormals;if(3===M.length)this.normals.push(M[0],M[1],M[2]);else{const e=t.normal;this.normals.push(e,e,e)}const S=t.vertexColors;if(3===S.length)this.colors.push(S[0],S[1],S[2]);else{const e=t.color;this.colors.push(e,e,e)}if(!0===o){const t=r[0][i];void 0!==t?this.uvs.push(t[0],t[1],t[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",i),this.uvs.push(new Xn,new Xn,new Xn))}if(!0===c){const t=r[1][i];void 0!==t?this.uvs2.push(t[0],t[1],t[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",i),this.uvs2.push(new Xn,new Xn,new Xn))}for(let e=0;e<h;e++){const n=l[e].vertices;d[e].data.push(n[t.a],n[t.b],n[t.c])}for(let t=0;t<m;t++){const e=f[t].vertexNormals[i];v[t].data.push(e.a,e.b,e.c)}_&&this.skinIndices.push(y[t.a],y[t.b],y[t.c]),w&&this.skinWeights.push(x[t.a],x[t.b],x[t.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}}function Yi(t){if(0===t.length)return-1/0;let e=t[0];for(let i=1,n=t.length;i<n;++i)t[i]>e&&(e=t[i]);return e}let Xi=1;const Ji=new zr,Qi=new ci,Ki=new sr,to=new ur,eo=new ur,no=new sr;function ro(){Object.defineProperty(this,"id",{value:Xi+=2}),this.uuid=Yn.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}ro.prototype=Object.assign(Object.create(qn.prototype),{constructor:ro,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(Yi(t)>65535?Wi:Hi)(t,1):this.index=t},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new Jn).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return Ji.makeRotationX(t),this.applyMatrix4(Ji),this},rotateY:function(t){return Ji.makeRotationY(t),this.applyMatrix4(Ji),this},rotateZ:function(t){return Ji.makeRotationZ(t),this.applyMatrix4(Ji),this},translate:function(t,e,n){return Ji.makeTranslation(t,e,n),this.applyMatrix4(Ji),this},scale:function(t,e,n){return Ji.makeScale(t,e,n),this.applyMatrix4(Ji),this},lookAt:function(t){return Qi.lookAt(t),Qi.updateMatrix(),this.applyMatrix4(Qi.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ki).negate(),this.translate(Ki.x,Ki.y,Ki.z),this},setFromObject:function(object){const t=object.geometry;if(object.isPoints||object.isLine){const e=new qi(3*t.vertices.length,3),n=new qi(3*t.colors.length,3);if(this.setAttribute("position",e.copyVector3sArray(t.vertices)),this.setAttribute("color",n.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){const e=new qi(t.lineDistances.length,1);this.setAttribute("lineDistance",e.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else object.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(t){const e=[];for(let i=0,n=t.length;i<n;i++){const n=t[i];e.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new qi(e,3)),this},updateFromObject:function(object){let t=object.geometry;if(object.isMesh){let e=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(e=void 0,t.elementsNeedUpdate=!1),void 0===e)return this.fromGeometry(t);e.verticesNeedUpdate=t.verticesNeedUpdate,e.normalsNeedUpdate=t.normalsNeedUpdate,e.colorsNeedUpdate=t.colorsNeedUpdate,e.uvsNeedUpdate=t.uvsNeedUpdate,e.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=e}if(!0===t.verticesNeedUpdate){const e=this.attributes.position;void 0!==e&&(e.copyVector3sArray(t.vertices),e.needsUpdate=!0),t.verticesNeedUpdate=!1}if(!0===t.normalsNeedUpdate){const e=this.attributes.normal;void 0!==e&&(e.copyVector3sArray(t.normals),e.needsUpdate=!0),t.normalsNeedUpdate=!1}if(!0===t.colorsNeedUpdate){const e=this.attributes.color;void 0!==e&&(e.copyColorsArray(t.colors),e.needsUpdate=!0),t.colorsNeedUpdate=!1}if(t.uvsNeedUpdate){const e=this.attributes.uv;void 0!==e&&(e.copyVector2sArray(t.uvs),e.needsUpdate=!0),t.uvsNeedUpdate=!1}if(t.lineDistancesNeedUpdate){const e=this.attributes.lineDistance;void 0!==e&&(e.copyArray(t.lineDistances),e.needsUpdate=!0),t.lineDistancesNeedUpdate=!1}return t.groupsNeedUpdate&&(t.computeGroups(object.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new $i).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){const e=new Float32Array(3*t.vertices.length);if(this.setAttribute("position",new Bi(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){const e=new Float32Array(3*t.normals.length);this.setAttribute("normal",new Bi(e,3).copyVector3sArray(t.normals))}if(t.colors.length>0){const e=new Float32Array(3*t.colors.length);this.setAttribute("color",new Bi(e,3).copyColorsArray(t.colors))}if(t.uvs.length>0){const e=new Float32Array(2*t.uvs.length);this.setAttribute("uv",new Bi(e,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){const e=new Float32Array(2*t.uvs2.length);this.setAttribute("uv2",new Bi(e,2).copyVector2sArray(t.uvs2))}this.groups=t.groups;for(const e in t.morphTargets){const n=[],r=t.morphTargets[e];for(let i=0,t=r.length;i<t;i++){const t=r[i],e=new qi(3*t.data.length,3);e.name=t.name,n.push(e.copyVector3sArray(t.data))}this.morphAttributes[e]=n}if(t.skinIndices.length>0){const e=new qi(4*t.skinIndices.length,4);this.setAttribute("skinIndex",e.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){const e=new qi(4*t.skinWeights.length,4);this.setAttribute("skinWeight",e.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ur);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new sr(-1/0,-1/0,-1/0),new sr(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,t=e.length;i<t;i++){const t=e[i];to.setFromBufferAttribute(t),this.morphTargetsRelative?(no.addVectors(this.boundingBox.min,to.min),this.boundingBox.expandByPoint(no),no.addVectors(this.boundingBox.max,to.max),this.boundingBox.expandByPoint(no)):(this.boundingBox.expandByPoint(to.min),this.boundingBox.expandByPoint(to.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Lr);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new sr,1/0);if(t){const n=this.boundingSphere.center;if(to.setFromBufferAttribute(t),e)for(let i=0,t=e.length;i<t;i++){const t=e[i];eo.setFromBufferAttribute(t),this.morphTargetsRelative?(no.addVectors(to.min,eo.min),to.expandByPoint(no),no.addVectors(to.max,eo.max),to.expandByPoint(no)):(to.expandByPoint(eo.min),to.expandByPoint(eo.max))}to.getCenter(n);let r=0;for(let i=0,e=t.count;i<e;i++)no.fromBufferAttribute(t,i),r=Math.max(r,n.distanceToSquared(no));if(e)for(let i=0,o=e.length;i<o;i++){const o=e[i],c=this.morphTargetsRelative;for(let e=0,l=o.count;e<l;e++)no.fromBufferAttribute(o,e),c&&(Ki.fromBufferAttribute(t,e),no.add(Ki)),r=Math.max(r,n.distanceToSquared(no))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new Bi(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let i=0,t=n.count;i<t;i++)n.setXYZ(i,0,0,0);const r=new sr,o=new sr,c=new sr,l=new sr,h=new sr,d=new sr,f=new sr,m=new sr;if(t)for(let i=0,v=t.count;i<v;i+=3){const v=t.getX(i+0),y=t.getX(i+1),x=t.getX(i+2);r.fromBufferAttribute(e,v),o.fromBufferAttribute(e,y),c.fromBufferAttribute(e,x),f.subVectors(c,o),m.subVectors(r,o),f.cross(m),l.fromBufferAttribute(n,v),h.fromBufferAttribute(n,y),d.fromBufferAttribute(n,x),l.add(f),h.add(f),d.add(f),n.setXYZ(v,l.x,l.y,l.z),n.setXYZ(y,h.x,h.y,h.z),n.setXYZ(x,d.x,d.y,d.z)}else for(let i=0,t=e.count;i<t;i+=3)r.fromBufferAttribute(e,i+0),o.fromBufferAttribute(e,i+1),c.fromBufferAttribute(e,i+2),f.subVectors(c,o),m.subVectors(r,o),f.cross(m),n.setXYZ(i+0,f.x,f.y,f.z),n.setXYZ(i+1,f.x,f.y,f.z),n.setXYZ(i+2,f.x,f.y,f.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(void 0===t.attributes[r])continue;const o=n[r].array,c=t.attributes[r],l=c.array,h=c.itemSize*e,d=Math.min(l.length,o.length-h);for(let i=0,t=h;i<d;i++,t++)o[t]=l[i]}return this},normalizeNormals:function(){const t=this.attributes.normal;for(let i=0,e=t.count;i<e;i++)no.fromBufferAttribute(t,i),no.normalize(),t.setXYZ(i,no.x,no.y,no.z)},toNonIndexed:function(){function t(t,e){const n=t.array,r=t.itemSize,o=t.normalized,c=new n.constructor(e.length*r);let l=0,h=0;for(let i=0,t=e.length;i<t;i++){l=e[i]*r;for(let t=0;t<r;t++)c[h++]=n[l++]}return new Bi(c,r,o)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;const e=new ro,n=this.index.array,r=this.attributes;for(const o in r){const c=t(r[o],n);e.setAttribute(o,c)}const o=this.morphAttributes;for(const r in o){const c=[],l=o[r];for(let i=0,e=l.length;i<e;i++){const e=t(l[i],n);c.push(e)}e.morphAttributes[r]=c}e.morphTargetsRelative=this.morphTargetsRelative;const c=this.groups;for(let i=0,t=c.length;i<t;i++){const t=c[i];e.addGroup(t.start,t.count,t.materialIndex)}return e},toJSON:function(){const data={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(data.uuid=this.uuid,data.type=this.type,""!==this.name&&(data.name=this.name),Object.keys(this.userData).length>0&&(data.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const e in t)void 0!==t[e]&&(data[e]=t[e]);return data}data.data={attributes:{}};const t=this.index;null!==t&&(data.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const e=this.attributes;for(const t in e){const n=e[t],r=n.toJSON(data.data);""!==n.name&&(r.name=n.name),data.data.attributes[t]=r}const n={};let r=!1;for(const t in this.morphAttributes){const e=this.morphAttributes[t],o=[];for(let i=0,t=e.length;i<t;i++){const t=e[i],n=t.toJSON(data.data);""!==t.name&&(n.name=t.name),o.push(n)}o.length>0&&(n[t]=o,r=!0)}r&&(data.data.morphAttributes=n,data.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(data.data.groups=JSON.parse(JSON.stringify(o)));const c=this.boundingSphere;return null!==c&&(data.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),data},clone:function(){return(new ro).copy(this)},copy:function(source){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const data={};this.name=source.name;const t=source.index;null!==t&&this.setIndex(t.clone(data));const e=source.attributes;for(const t in e){const n=e[t];this.setAttribute(t,n.clone(data))}const n=source.morphAttributes;for(const t in n){const e=[],r=n[t];for(let i=0,t=r.length;i<t;i++)e.push(r[i].clone(data));this.morphAttributes[t]=e}this.morphTargetsRelative=source.morphTargetsRelative;const r=source.groups;for(let i=0,t=r.length;i<t;i++){const t=r[i];this.addGroup(t.start,t.count,t.materialIndex)}const o=source.boundingBox;null!==o&&(this.boundingBox=o.clone());const c=source.boundingSphere;return null!==c&&(this.boundingSphere=c.clone()),this.drawRange.start=source.drawRange.start,this.drawRange.count=source.drawRange.count,this.userData=source.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const io=new zr,oo=new Dr,ao=new Lr,so=new sr,co=new sr,lo=new sr,uo=new sr,ho=new sr,po=new sr,fo=new sr,mo=new sr,go=new sr,vo=new Xn,yo=new Xn,xo=new Xn,bo=new sr,_o=new sr;function wo(t,e){ci.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new ro,this.material=void 0!==e?e:new Ni,this.updateMorphTargets()}function Mo(object,t,e,n,r,o,c,l){let h;if(h=t.side===w?n.intersectTriangle(c,o,r,!0,l):n.intersectTriangle(r,o,c,t.side!==M,l),null===h)return null;_o.copy(l),_o.applyMatrix4(object.matrixWorld);const d=e.ray.origin.distanceTo(_o);return d<e.near||d>e.far?null:{distance:d,point:_o.clone(),object:object}}function So(object,t,e,n,r,o,c,l,h,a,b,d){so.fromBufferAttribute(r,a),co.fromBufferAttribute(r,b),lo.fromBufferAttribute(r,d);const f=object.morphTargetInfluences;if(t.morphTargets&&o&&f){fo.set(0,0,0),mo.set(0,0,0),go.set(0,0,0);for(let i=0,t=o.length;i<t;i++){const t=f[i],e=o[i];0!==t&&(uo.fromBufferAttribute(e,a),ho.fromBufferAttribute(e,b),po.fromBufferAttribute(e,d),c?(fo.addScaledVector(uo,t),mo.addScaledVector(ho,t),go.addScaledVector(po,t)):(fo.addScaledVector(uo.sub(so),t),mo.addScaledVector(ho.sub(co),t),go.addScaledVector(po.sub(lo),t)))}so.add(fo),co.add(mo),lo.add(go)}object.isSkinnedMesh&&(object.boneTransform(a,so),object.boneTransform(b,co),object.boneTransform(d,lo));const m=Mo(object,t,e,n,so,co,lo,bo);if(m){l&&(vo.fromBufferAttribute(l,a),yo.fromBufferAttribute(l,b),xo.fromBufferAttribute(l,d),m.uv=Si.getUV(bo,so,co,lo,vo,yo,xo,new Xn)),h&&(vo.fromBufferAttribute(h,a),yo.fromBufferAttribute(h,b),xo.fromBufferAttribute(h,d),m.uv2=Si.getUV(bo,so,co,lo,vo,yo,xo,new Xn));const t=new Oi(a,b,d);Si.getNormal(so,co,lo,t.normal),m.face=t}return m}wo.prototype=Object.assign(Object.create(ci.prototype),{constructor:wo,isMesh:!0,copy:function(source){return ci.prototype.copy.call(this,source),void 0!==source.morphTargetInfluences&&(this.morphTargetInfluences=source.morphTargetInfluences.slice()),void 0!==source.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},source.morphTargetDictionary)),this.material=source.material,this.geometry=source.geometry,this},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(t,e){const n=this.geometry,r=this.material,o=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),ao.copy(n.boundingSphere),ao.applyMatrix4(o),!1===t.ray.intersectsSphere(ao))return;if(io.getInverse(o),oo.copy(t.ray).applyMatrix4(io),null!==n.boundingBox&&!1===oo.intersectsBox(n.boundingBox))return;let c;if(n.isBufferGeometry){const o=n.index,l=n.attributes.position,h=n.morphAttributes.position,d=n.morphTargetsRelative,f=n.attributes.uv,m=n.attributes.uv2,v=n.groups,y=n.drawRange;if(null!==o)if(Array.isArray(r))for(let i=0,n=v.length;i<n;i++){const n=v[i],x=r[n.materialIndex];for(let r=Math.max(n.start,y.start),v=Math.min(n.start+n.count,y.start+y.count);r<v;r+=3){const a=o.getX(r),b=o.getX(r+1),v=o.getX(r+2);c=So(this,x,t,oo,l,h,d,f,m,a,b,v),c&&(c.faceIndex=Math.floor(r/3),c.face.materialIndex=n.materialIndex,e.push(c))}}else{for(let i=Math.max(0,y.start),n=Math.min(o.count,y.start+y.count);i<n;i+=3){const a=o.getX(i),b=o.getX(i+1),n=o.getX(i+2);c=So(this,r,t,oo,l,h,d,f,m,a,b,n),c&&(c.faceIndex=Math.floor(i/3),e.push(c))}}else if(void 0!==l)if(Array.isArray(r))for(let i=0,n=v.length;i<n;i++){const n=v[i],o=r[n.materialIndex];for(let r=Math.max(n.start,y.start),v=Math.min(n.start+n.count,y.start+y.count);r<v;r+=3){c=So(this,o,t,oo,l,h,d,f,m,r,r+1,r+2),c&&(c.faceIndex=Math.floor(r/3),c.face.materialIndex=n.materialIndex,e.push(c))}}else{for(let i=Math.max(0,y.start),n=Math.min(l.count,y.start+y.count);i<n;i+=3){c=So(this,r,t,oo,l,h,d,f,m,i,i+1,i+2),c&&(c.faceIndex=Math.floor(i/3),e.push(c))}}}else if(n.isGeometry){const o=Array.isArray(r),l=n.vertices,h=n.faces;let d;const f=n.faceVertexUvs[0];f.length>0&&(d=f);for(let n=0,f=h.length;n<f;n++){const f=h[n],m=o?r[f.materialIndex]:r;if(void 0===m)continue;const v=l[f.a],y=l[f.b],x=l[f.c];if(c=Mo(this,m,t,oo,v,y,x,bo),c){if(d&&d[n]){const t=d[n];vo.copy(t[0]),yo.copy(t[1]),xo.copy(t[2]),c.uv=Si.getUV(bo,v,y,x,vo,yo,xo,new Xn)}c.face=f,c.faceIndex=n,e.push(c)}}}}});let To=0;const Eo=new zr,Ao=new ci,Lo=new sr;function Co(){Object.defineProperty(this,"id",{value:To+=2}),this.uuid=Yn.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Co.prototype=Object.assign(Object.create(qn.prototype),{constructor:Co,isGeometry:!0,applyMatrix4:function(t){const e=(new Jn).getNormalMatrix(t);for(let i=0,e=this.vertices.length;i<e;i++){this.vertices[i].applyMatrix4(t)}for(let i=0,t=this.faces.length;i<t;i++){const t=this.faces[i];t.normal.applyMatrix3(e).normalize();for(let n=0,r=t.vertexNormals.length;n<r;n++)t.vertexNormals[n].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return Eo.makeRotationX(t),this.applyMatrix4(Eo),this},rotateY:function(t){return Eo.makeRotationY(t),this.applyMatrix4(Eo),this},rotateZ:function(t){return Eo.makeRotationZ(t),this.applyMatrix4(Eo),this},translate:function(t,e,n){return Eo.makeTranslation(t,e,n),this.applyMatrix4(Eo),this},scale:function(t,e,n){return Eo.makeScale(t,e,n),this.applyMatrix4(Eo),this},lookAt:function(t){return Ao.lookAt(t),Ao.updateMatrix(),this.applyMatrix4(Ao.matrix),this},fromBufferGeometry:function(t){const e=this,n=null!==t.index?t.index:void 0,r=t.attributes;if(void 0===r.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;const o=r.position,c=r.normal,l=r.color,h=r.uv,d=r.uv2;void 0!==d&&(this.faceVertexUvs[1]=[]);for(let i=0;i<o.count;i++)e.vertices.push((new sr).fromBufferAttribute(o,i)),void 0!==l&&e.colors.push((new Pi).fromBufferAttribute(l,i));function f(a,b,t,n){const r=void 0===l?[]:[e.colors[a].clone(),e.colors[b].clone(),e.colors[t].clone()],o=void 0===c?[]:[(new sr).fromBufferAttribute(c,a),(new sr).fromBufferAttribute(c,b),(new sr).fromBufferAttribute(c,t)],f=new Oi(a,b,t,o,r,n);e.faces.push(f),void 0!==h&&e.faceVertexUvs[0].push([(new Xn).fromBufferAttribute(h,a),(new Xn).fromBufferAttribute(h,b),(new Xn).fromBufferAttribute(h,t)]),void 0!==d&&e.faceVertexUvs[1].push([(new Xn).fromBufferAttribute(d,a),(new Xn).fromBufferAttribute(d,b),(new Xn).fromBufferAttribute(d,t)])}const m=t.groups;if(m.length>0)for(let i=0;i<m.length;i++){const t=m[i],e=t.start;for(let r=e,o=e+t.count;r<o;r+=3)void 0!==n?f(n.getX(r),n.getX(r+1),n.getX(r+2),t.materialIndex):f(r,r+1,r+2,t.materialIndex)}else if(void 0!==n)for(let i=0;i<n.count;i+=3)f(n.getX(i),n.getX(i+1),n.getX(i+2));else for(let i=0;i<o.count;i+=3)f(i,i+1,i+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Lo).negate(),this.translate(Lo.x,Lo.y,Lo.z),this},normalize:function(){this.computeBoundingSphere();const t=this.boundingSphere.center,e=this.boundingSphere.radius,s=0===e?1:1/e,n=new zr;return n.set(s,0,0,-s*t.x,0,s,0,-s*t.y,0,0,s,-s*t.z,0,0,0,1),this.applyMatrix4(n),this},computeFaceNormals:function(){const t=new sr,e=new sr;for(let n=0,r=this.faces.length;n<r;n++){const r=this.faces[n],o=this.vertices[r.a],c=this.vertices[r.b],l=this.vertices[r.c];t.subVectors(l,c),e.subVectors(o,c),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){void 0===t&&(t=!0);const e=new Array(this.vertices.length);for(let t=0,n=this.vertices.length;t<n;t++)e[t]=new sr;if(t){const t=new sr,n=new sr;for(let r=0,o=this.faces.length;r<o;r++){const o=this.faces[r],c=this.vertices[o.a],l=this.vertices[o.b],h=this.vertices[o.c];t.subVectors(h,l),n.subVectors(c,l),t.cross(n),e[o.a].add(t),e[o.b].add(t),e[o.c].add(t)}}else{this.computeFaceNormals();for(let t=0,n=this.faces.length;t<n;t++){const n=this.faces[t];e[n.a].add(n.normal),e[n.b].add(n.normal),e[n.c].add(n.normal)}}for(let t=0,n=this.vertices.length;t<n;t++)e[t].normalize();for(let t=0,n=this.faces.length;t<n;t++){const n=this.faces[t],r=n.vertexNormals;3===r.length?(r[0].copy(e[n.a]),r[1].copy(e[n.b]),r[2].copy(e[n.c])):(r[0]=e[n.a].clone(),r[1]=e[n.b].clone(),r[2]=e[n.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t],n=e.vertexNormals;3===n.length?(n[0].copy(e.normal),n[1].copy(e.normal),n[2].copy(e.normal)):(n[0]=e.normal.clone(),n[1]=e.normal.clone(),n[2]=e.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t];e.__originalFaceNormal?e.__originalFaceNormal.copy(e.normal):e.__originalFaceNormal=e.normal.clone(),e.__originalVertexNormals||(e.__originalVertexNormals=[]);for(let i=0,t=e.vertexNormals.length;i<t;i++)e.__originalVertexNormals[i]?e.__originalVertexNormals[i].copy(e.vertexNormals[i]):e.__originalVertexNormals[i]=e.vertexNormals[i].clone()}const t=new Co;t.faces=this.faces;for(let i=0,e=this.morphTargets.length;i<e;i++){if(!this.morphNormals[i]){this.morphNormals[i]={},this.morphNormals[i].faceNormals=[],this.morphNormals[i].vertexNormals=[];const t=this.morphNormals[i].faceNormals,e=this.morphNormals[i].vertexNormals;for(let n=0,r=this.faces.length;n<r;n++){const n=new sr,r={a:new sr,b:new sr,c:new sr};t.push(n),e.push(r)}}const e=this.morphNormals[i];t.vertices=this.morphTargets[i].vertices,t.computeFaceNormals(),t.computeVertexNormals();for(let t=0,n=this.faces.length;t<n;t++){const n=this.faces[t],r=e.faceNormals[t],o=e.vertexNormals[t];r.copy(n.normal),o.a.copy(n.vertexNormals[0]),o.b.copy(n.vertexNormals[1]),o.c.copy(n.vertexNormals[2])}}for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t];e.normal=e.__originalFaceNormal,e.vertexNormals=e.__originalVertexNormals}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ur),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Lr),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(!t||!t.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);let r;const o=this.vertices.length,c=this.vertices,l=t.vertices,h=this.faces,d=t.faces,f=this.colors,m=t.colors;void 0===n&&(n=0),void 0!==e&&(r=(new Jn).getNormalMatrix(e));for(let i=0,t=l.length;i<t;i++){const t=l[i].clone();void 0!==e&&t.applyMatrix4(e),c.push(t)}for(let i=0,t=m.length;i<t;i++)f.push(m[i].clone());for(let i=0,t=d.length;i<t;i++){const t=d[i];let e,c;const l=t.vertexNormals,f=t.vertexColors,m=new Oi(t.a+o,t.b+o,t.c+o);m.normal.copy(t.normal),void 0!==r&&m.normal.applyMatrix3(r).normalize();for(let t=0,n=l.length;t<n;t++)e=l[t].clone(),void 0!==r&&e.applyMatrix3(r).normalize(),m.vertexNormals.push(e);m.color.copy(t.color);for(let t=0,e=f.length;t<e;t++)c=f[t],m.vertexColors.push(c.clone());m.materialIndex=t.materialIndex+n,h.push(m)}for(let i=0,e=t.faceVertexUvs.length;i<e;i++){const e=t.faceVertexUvs[i];void 0===this.faceVertexUvs[i]&&(this.faceVertexUvs[i]=[]);for(let t=0,n=e.length;t<n;t++){const n=e[t],r=[];for(let t=0,e=n.length;t<e;t++)r.push(n[t].clone());this.faceVertexUvs[i].push(r)}}},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){const t={},e=[],n=[],r=Math.pow(10,4);for(let i=0,o=this.vertices.length;i<o;i++){const o=this.vertices[i],c=Math.round(o.x*r)+"_"+Math.round(o.y*r)+"_"+Math.round(o.z*r);void 0===t[c]?(t[c]=i,e.push(this.vertices[i]),n[i]=e.length-1):n[i]=n[t[c]]}const o=[];for(let i=0,t=this.faces.length;i<t;i++){const t=this.faces[i];t.a=n[t.a],t.b=n[t.b],t.c=n[t.c];const e=[t.a,t.b,t.c];for(let t=0;t<3;t++)if(e[t]===e[(t+1)%3]){o.push(i);break}}for(let i=o.length-1;i>=0;i--){const t=o[i];this.faces.splice(t,1);for(let e=0,n=this.faceVertexUvs.length;e<n;e++)this.faceVertexUvs[e].splice(t,1)}const c=this.vertices.length-e.length;return this.vertices=e,c},setFromPoints:function(t){this.vertices=[];for(let i=0,e=t.length;i<e;i++){const e=t[i];this.vertices.push(new sr(e.x,e.y,e.z||0))}return this},sortFacesByMaterialIndex:function(){const t=this.faces,e=t.length;for(let i=0;i<e;i++)t[i]._id=i;t.sort((function(a,b){return a.materialIndex-b.materialIndex}));const n=this.faceVertexUvs[0],r=this.faceVertexUvs[1];let o,c;n&&n.length===e&&(o=[]),r&&r.length===e&&(c=[]);for(let i=0;i<e;i++){const e=t[i]._id;o&&o.push(n[e]),c&&c.push(r[e])}o&&(this.faceVertexUvs[0]=o),c&&(this.faceVertexUvs[1]=c)},toJSON:function(){const data={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(data.uuid=this.uuid,data.type=this.type,""!==this.name&&(data.name=this.name),void 0!==this.parameters){const t=this.parameters;for(const e in t)void 0!==t[e]&&(data[e]=t[e]);return data}const t=[];for(let i=0;i<this.vertices.length;i++){const e=this.vertices[i];t.push(e.x,e.y,e.z)}const e=[],n=[],r={},o=[],c={},l=[],h={};for(let i=0;i<this.faces.length;i++){const t=this.faces[i],n=!0,r=!1,o=void 0!==this.faceVertexUvs[0][i],c=t.normal.length()>0,l=t.vertexNormals.length>0,h=1!==t.color.r||1!==t.color.g||1!==t.color.b,y=t.vertexColors.length>0;let x=0;if(x=d(x,0,0),x=d(x,1,n),x=d(x,2,r),x=d(x,3,o),x=d(x,4,c),x=d(x,5,l),x=d(x,6,h),x=d(x,7,y),e.push(x),e.push(t.a,t.b,t.c),e.push(t.materialIndex),o){const t=this.faceVertexUvs[0][i];e.push(v(t[0]),v(t[1]),v(t[2]))}if(c&&e.push(f(t.normal)),l){const n=t.vertexNormals;e.push(f(n[0]),f(n[1]),f(n[2]))}if(h&&e.push(m(t.color)),y){const n=t.vertexColors;e.push(m(n[0]),m(n[1]),m(n[2]))}}function d(t,e,n){return n?t|1<<e:t&~(1<<e)}function f(t){const e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==r[e]||(r[e]=n.length/3,n.push(t.x,t.y,t.z)),r[e]}function m(t){const e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==c[e]||(c[e]=o.length,o.push(t.getHex())),c[e]}function v(t){const e=t.x.toString()+t.y.toString();return void 0!==h[e]||(h[e]=l.length/2,l.push(t.x,t.y)),h[e]}return data.data={},data.data.vertices=t,data.data.normals=n,o.length>0&&(data.data.colors=o),l.length>0&&(data.data.uvs=[l]),data.data.faces=e,data},clone:function(){return(new Co).copy(this)},copy:function(source){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=source.name;const t=source.vertices;for(let i=0,e=t.length;i<e;i++)this.vertices.push(t[i].clone());const e=source.colors;for(let i=0,t=e.length;i<t;i++)this.colors.push(e[i].clone());const n=source.faces;for(let i=0,t=n.length;i<t;i++)this.faces.push(n[i].clone());for(let i=0,t=source.faceVertexUvs.length;i<t;i++){const t=source.faceVertexUvs[i];void 0===this.faceVertexUvs[i]&&(this.faceVertexUvs[i]=[]);for(let e=0,n=t.length;e<n;e++){const n=t[e],r=[];for(let t=0,e=n.length;t<e;t++){const e=n[t];r.push(e.clone())}this.faceVertexUvs[i].push(r)}}const r=source.morphTargets;for(let i=0,t=r.length;i<t;i++){const t={};if(t.name=r[i].name,void 0!==r[i].vertices){t.vertices=[];for(let e=0,n=r[i].vertices.length;e<n;e++)t.vertices.push(r[i].vertices[e].clone())}if(void 0!==r[i].normals){t.normals=[];for(let e=0,n=r[i].normals.length;e<n;e++)t.normals.push(r[i].normals[e].clone())}this.morphTargets.push(t)}const o=source.morphNormals;for(let i=0,t=o.length;i<t;i++){const t={};if(void 0!==o[i].vertexNormals){t.vertexNormals=[];for(let e=0,n=o[i].vertexNormals.length;e<n;e++){const n=o[i].vertexNormals[e],r={};r.a=n.a.clone(),r.b=n.b.clone(),r.c=n.c.clone(),t.vertexNormals.push(r)}}if(void 0!==o[i].faceNormals){t.faceNormals=[];for(let e=0,n=o[i].faceNormals.length;e<n;e++)t.faceNormals.push(o[i].faceNormals[e].clone())}this.morphNormals.push(t)}const c=source.skinWeights;for(let i=0,t=c.length;i<t;i++)this.skinWeights.push(c[i].clone());const l=source.skinIndices;for(let i=0,t=l.length;i<t;i++)this.skinIndices.push(l[i].clone());const h=source.lineDistances;for(let i=0,t=h.length;i<t;i++)this.lineDistances.push(h[i]);const d=source.boundingBox;null!==d&&(this.boundingBox=d.clone());const f=source.boundingSphere;return null!==f&&(this.boundingSphere=f.clone()),this.elementsNeedUpdate=source.elementsNeedUpdate,this.verticesNeedUpdate=source.verticesNeedUpdate,this.uvsNeedUpdate=source.uvsNeedUpdate,this.normalsNeedUpdate=source.normalsNeedUpdate,this.colorsNeedUpdate=source.colorsNeedUpdate,this.lineDistancesNeedUpdate=source.lineDistancesNeedUpdate,this.groupsNeedUpdate=source.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class Ro extends Co{constructor(t,e,n,r,o,c){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:o,depthSegments:c},this.fromBufferGeometry(new Po(t,e,n,r,o,c)),this.mergeVertices()}}class Po extends ro{constructor(t=1,e=1,n=1,r=1,o=1,c=1){super(),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:o,depthSegments:c};const l=this;r=Math.floor(r),o=Math.floor(o),c=Math.floor(c);const h=[],d=[],f=[],m=[];let v=0,y=0;function x(u,t,e,n,r,o,c,x,_,w,M){const S=o/_,T=c/w,E=o/2,A=c/2,L=x/2,C=_+1,R=w+1;let P=0,O=0;const I=new sr;for(let o=0;o<R;o++){const c=o*T-A;for(let l=0;l<C;l++){const h=l*S-E;I[u]=h*n,I[t]=c*r,I[e]=L,d.push(I.x,I.y,I.z),I[u]=0,I[t]=0,I[e]=x>0?1:-1,f.push(I.x,I.y,I.z),m.push(l/_),m.push(1-o/w),P+=1}}for(let t=0;t<w;t++)for(let e=0;e<_;e++){const a=v+e+C*t,b=v+e+C*(t+1),n=v+(e+1)+C*(t+1),r=v+(e+1)+C*t;h.push(a,b,r),h.push(b,n,r),O+=6}l.addGroup(y,O,M),y+=O,v+=P}x("z","y","x",-1,-1,n,e,t,c,o,0),x("z","y","x",1,-1,n,e,-t,c,o,1),x("x","z","y",1,1,t,n,e,r,c,2),x("x","z","y",1,-1,t,n,-e,r,c,3),x("x","y","z",1,-1,t,e,n,r,o,4),x("x","y","z",-1,-1,t,e,-n,r,o,5),this.setIndex(h),this.setAttribute("position",new qi(d,3)),this.setAttribute("normal",new qi(f,3)),this.setAttribute("uv",new qi(m,2))}}function Oo(t){const e={};for(const u in t){e[u]={};for(const p in t[u]){const n=t[u][p];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture)?e[u][p]=n.clone():Array.isArray(n)?e[u][p]=n.slice():e[u][p]=n}}return e}function Io(t){const e={};for(let u=0;u<t.length;u++){const n=Oo(t[u]);for(const p in n)e[p]=n[p]}return e}const ko={clone:Oo,merge:Io};function No(t){ki.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function Do(){ci.call(this),this.type="Camera",this.matrixWorldInverse=new zr,this.projectionMatrix=new zr,this.projectionMatrixInverse=new zr}function zo(t,e,n,r){Do.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}No.prototype=Object.create(ki.prototype),No.prototype.constructor=No,No.prototype.isShaderMaterial=!0,No.prototype.copy=function(source){return ki.prototype.copy.call(this,source),this.fragmentShader=source.fragmentShader,this.vertexShader=source.vertexShader,this.uniforms=Oo(source.uniforms),this.defines=Object.assign({},source.defines),this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.lights=source.lights,this.clipping=source.clipping,this.skinning=source.skinning,this.morphTargets=source.morphTargets,this.morphNormals=source.morphNormals,this.extensions=Object.assign({},source.extensions),this.glslVersion=source.glslVersion,this},No.prototype.toJSON=function(meta){const data=ki.prototype.toJSON.call(this,meta);data.glslVersion=this.glslVersion,data.uniforms={};for(const t in this.uniforms){const e=this.uniforms[t].value;e&&e.isTexture?data.uniforms[t]={type:"t",value:e.toJSON(meta).uuid}:e&&e.isColor?data.uniforms[t]={type:"c",value:e.getHex()}:e&&e.isVector2?data.uniforms[t]={type:"v2",value:e.toArray()}:e&&e.isVector3?data.uniforms[t]={type:"v3",value:e.toArray()}:e&&e.isVector4?data.uniforms[t]={type:"v4",value:e.toArray()}:e&&e.isMatrix3?data.uniforms[t]={type:"m3",value:e.toArray()}:e&&e.isMatrix4?data.uniforms[t]={type:"m4",value:e.toArray()}:data.uniforms[t]={value:e}}Object.keys(this.defines).length>0&&(data.defines=this.defines),data.vertexShader=this.vertexShader,data.fragmentShader=this.fragmentShader;const t={};for(const e in this.extensions)!0===this.extensions[e]&&(t[e]=!0);return Object.keys(t).length>0&&(data.extensions=t),data},Do.prototype=Object.assign(Object.create(ci.prototype),{constructor:Do,isCamera:!0,copy:function(source,t){return ci.prototype.copy.call(this,source,t),this.matrixWorldInverse.copy(source.matrixWorldInverse),this.projectionMatrix.copy(source.projectionMatrix),this.projectionMatrixInverse.copy(source.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new sr),this.updateMatrixWorld(!0);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){ci.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(t,e){ci.prototype.updateWorldMatrix.call(this,t,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),zo.prototype=Object.assign(Object.create(Do.prototype),{constructor:zo,isPerspectiveCamera:!0,copy:function(source,t){return Do.prototype.copy.call(this,source,t),this.fov=source.fov,this.zoom=source.zoom,this.near=source.near,this.far=source.far,this.focus=source.focus,this.aspect=source.aspect,this.view=null===source.view?null:Object.assign({},source.view),this.filmGauge=source.filmGauge,this.filmOffset=source.filmOffset,this},setFocalLength:function(t){const e=.5*this.getFilmHeight()/t;this.fov=2*Yn.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){const t=Math.tan(.5*Yn.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*Yn.RAD2DEG*Math.atan(Math.tan(.5*Yn.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,r,o,c){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=o,this.view.height=c,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const t=this.near;let e=t*Math.tan(.5*Yn.DEG2RAD*this.fov)/this.zoom,n=2*e,r=this.aspect*n,o=-.5*r;const view=this.view;if(null!==this.view&&this.view.enabled){const t=view.fullWidth,c=view.fullHeight;o+=view.offsetX*r/t,e-=view.offsetY*n/c,r*=view.width/t,n*=view.height/c}const c=this.filmOffset;0!==c&&(o+=t*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,e,e-n,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(meta){const data=ci.prototype.toJSON.call(this,meta);return data.object.fov=this.fov,data.object.zoom=this.zoom,data.object.near=this.near,data.object.far=this.far,data.object.focus=this.focus,data.object.aspect=this.aspect,null!==this.view&&(data.object.view=Object.assign({},this.view)),data.object.filmGauge=this.filmGauge,data.object.filmOffset=this.filmOffset,data}});function Bo(t,e,n){if(ci.call(this),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const r=new zo(90,1,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new sr(1,0,0)),this.add(r);const o=new zo(90,1,t,e);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new sr(-1,0,0)),this.add(o);const c=new zo(90,1,t,e);c.layers=this.layers,c.up.set(0,0,1),c.lookAt(new sr(0,1,0)),this.add(c);const l=new zo(90,1,t,e);l.layers=this.layers,l.up.set(0,0,-1),l.lookAt(new sr(0,-1,0)),this.add(l);const h=new zo(90,1,t,e);h.layers=this.layers,h.up.set(0,-1,0),h.lookAt(new sr(0,0,1)),this.add(h);const d=new zo(90,1,t,e);d.layers=this.layers,d.up.set(0,-1,0),d.lookAt(new sr(0,0,-1)),this.add(d),this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();const f=t.xr.enabled,m=t.getRenderTarget();t.xr.enabled=!1;const v=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,r),t.setRenderTarget(n,1),t.render(e,o),t.setRenderTarget(n,2),t.render(e,c),t.setRenderTarget(n,3),t.render(e,l),t.setRenderTarget(n,4),t.render(e,h),n.texture.generateMipmaps=v,t.setRenderTarget(n,5),t.render(e,d),t.setRenderTarget(m),t.xr.enabled=f},this.clear=function(t,e,r,o){const c=t.getRenderTarget();for(let i=0;i<6;i++)t.setRenderTarget(n,i),t.clear(e,r,o);t.setRenderTarget(c)}}function Fo(t,e,n){Number.isInteger(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=n),ir.call(this,t,t,e),this.texture.isWebGLCubeRenderTargetTexture=!0}function jo(data,t,e,n,r,o,c,l,h,d,f,m){nr.call(this,null,o,c,l,h,d,n,r,f,m),this.image={data:data||null,width:t||1,height:e||1},this.magFilter=void 0!==h?h:St,this.minFilter=void 0!==d?d:St,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}Bo.prototype=Object.create(ci.prototype),Bo.prototype.constructor=Bo,Fo.prototype=Object.create(ir.prototype),Fo.prototype.constructor=Fo,Fo.prototype.isWebGLCubeRenderTarget=!0,Fo.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=$t,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",fragmentShader:"\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t"},r=new Po(5,5,5),o=new No({name:"CubemapFromEquirect",uniforms:Oo(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:w,blending:E});o.uniforms.tEquirect.value=e;const c=new wo(r,o),l=e.minFilter;return e.minFilter===Ot&&(e.minFilter=Ct),new Bo(1,10,this).update(t,c),e.minFilter=l,c.geometry.dispose(),c.material.dispose(),this},jo.prototype=Object.create(nr.prototype),jo.prototype.constructor=jo,jo.prototype.isDataTexture=!0;const Uo=new Lr,Go=new sr;class Ho{constructor(t,e,n,r,o,c){this.planes=[void 0!==t?t:new pi,void 0!==e?e:new pi,void 0!==n?n:new pi,void 0!==r?r:new pi,void 0!==o?o:new pi,void 0!==c?c:new pi]}set(t,e,n,r,o,c){const l=this.planes;return l[0].copy(t),l[1].copy(e),l[2].copy(n),l[3].copy(r),l[4].copy(o),l[5].copy(c),this}clone(){return(new this.constructor).copy(this)}copy(t){const e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,r=n[0],o=n[1],c=n[2],l=n[3],h=n[4],d=n[5],f=n[6],m=n[7],v=n[8],y=n[9],x=n[10],_=n[11],w=n[12],M=n[13],S=n[14],T=n[15];return e[0].setComponents(l-r,m-h,_-v,T-w).normalize(),e[1].setComponents(l+r,m+h,_+v,T+w).normalize(),e[2].setComponents(l+o,m+d,_+y,T+M).normalize(),e[3].setComponents(l-o,m-d,_-y,T-M).normalize(),e[4].setComponents(l-c,m-f,_-x,T-S).normalize(),e[5].setComponents(l+c,m+f,_+x,T+S).normalize(),this}intersectsObject(object){const t=object.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Uo.copy(t.boundingSphere).applyMatrix4(object.matrixWorld),this.intersectsSphere(Uo)}intersectsSprite(t){return Uo.center.set(0,0,0),Uo.radius=.7071067811865476,Uo.applyMatrix4(t.matrixWorld),this.intersectsSphere(Uo)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let i=0;i<6;i++){if(e[i].distanceToPoint(n)<r)return!1}return!0}intersectsBox(t){const e=this.planes;for(let i=0;i<6;i++){const n=e[i];if(Go.x=n.normal.x>0?t.max.x:t.min.x,Go.y=n.normal.y>0?t.max.y:t.min.y,Go.z=n.normal.z>0?t.max.z:t.min.z,n.distanceToPoint(Go)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}}function Vo(){let t=null,e=!1,n=null,r=null;function o(time,e){n(time,e),r=t.requestAnimationFrame(o)}return{start:function(){!0!==e&&null!==n&&(r=t.requestAnimationFrame(o),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function Wo(t,e){const n=e.isWebGL2,r=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const data=r.get(e);data&&(t.deleteBuffer(data.buffer),r.delete(e))},update:function(e,o){if(e.isGLBufferAttribute){var c=r.get(e);return void((!c||c.version<e.version)&&r.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const data=r.get(e);void 0===data?r.set(e,function(e,n){const r=e.array,o=e.usage,c=t.createBuffer();t.bindBuffer(n,c),t.bufferData(n,r,o),e.onUploadCallback();let l=5126;return r instanceof Float32Array?l=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?l=5123:r instanceof Int16Array?l=5122:r instanceof Uint32Array?l=5125:r instanceof Int32Array?l=5124:r instanceof Int8Array?l=5120:r instanceof Uint8Array&&(l=5121),{buffer:c,type:l,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version}}(e,o)):data.version<e.version&&(!function(e,r,o){const c=r.array,l=r.updateRange;t.bindBuffer(o,e),-1===l.count?t.bufferSubData(o,0,c):(n?t.bufferSubData(o,l.offset*c.BYTES_PER_ELEMENT,c,l.offset,l.count):t.bufferSubData(o,l.offset*c.BYTES_PER_ELEMENT,c.subarray(l.offset,l.offset+l.count)),l.count=-1)}(data.buffer,e,o),data.version=e.version)}}}class qo extends Co{constructor(t,e,n,r){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new Zo(t,e,n,r)),this.mergeVertices()}}class Zo extends ro{constructor(t,e,n,r){super(),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const o=(t=t||1)/2,c=(e=e||1)/2,l=Math.floor(n)||1,h=Math.floor(r)||1,d=l+1,f=h+1,m=t/l,v=e/h,y=[],x=[],_=[],w=[];for(let t=0;t<f;t++){const e=t*v-c;for(let n=0;n<d;n++){const r=n*m-o;x.push(r,-e,0),_.push(0,0,1),w.push(n/l),w.push(1-t/h)}}for(let t=0;t<h;t++)for(let e=0;e<l;e++){const a=e+d*t,b=e+d*(t+1),n=e+1+d*(t+1),r=e+1+d*t;y.push(a,b,r),y.push(b,n,r)}this.setIndex(y),this.setAttribute("position",new qi(x,3)),this.setAttribute("normal",new qi(_,3)),this.setAttribute("uv",new qi(w,2))}}const $o={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Yo={common:{diffuse:{value:new Pi(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Jn},uv2Transform:{value:new Jn},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Xn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Pi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Pi(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Jn}},sprite:{diffuse:{value:new Pi(15658734)},opacity:{value:1},center:{value:new Xn(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Jn}}},Xo={basic:{uniforms:Io([Yo.common,Yo.specularmap,Yo.envmap,Yo.aomap,Yo.lightmap,Yo.fog]),vertexShader:$o.meshbasic_vert,fragmentShader:$o.meshbasic_frag},lambert:{uniforms:Io([Yo.common,Yo.specularmap,Yo.envmap,Yo.aomap,Yo.lightmap,Yo.emissivemap,Yo.fog,Yo.lights,{emissive:{value:new Pi(0)}}]),vertexShader:$o.meshlambert_vert,fragmentShader:$o.meshlambert_frag},phong:{uniforms:Io([Yo.common,Yo.specularmap,Yo.envmap,Yo.aomap,Yo.lightmap,Yo.emissivemap,Yo.bumpmap,Yo.normalmap,Yo.displacementmap,Yo.fog,Yo.lights,{emissive:{value:new Pi(0)},specular:{value:new Pi(1118481)},shininess:{value:30}}]),vertexShader:$o.meshphong_vert,fragmentShader:$o.meshphong_frag},standard:{uniforms:Io([Yo.common,Yo.envmap,Yo.aomap,Yo.lightmap,Yo.emissivemap,Yo.bumpmap,Yo.normalmap,Yo.displacementmap,Yo.roughnessmap,Yo.metalnessmap,Yo.fog,Yo.lights,{emissive:{value:new Pi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:$o.meshphysical_vert,fragmentShader:$o.meshphysical_frag},toon:{uniforms:Io([Yo.common,Yo.aomap,Yo.lightmap,Yo.emissivemap,Yo.bumpmap,Yo.normalmap,Yo.displacementmap,Yo.gradientmap,Yo.fog,Yo.lights,{emissive:{value:new Pi(0)}}]),vertexShader:$o.meshtoon_vert,fragmentShader:$o.meshtoon_frag},matcap:{uniforms:Io([Yo.common,Yo.bumpmap,Yo.normalmap,Yo.displacementmap,Yo.fog,{matcap:{value:null}}]),vertexShader:$o.meshmatcap_vert,fragmentShader:$o.meshmatcap_frag},points:{uniforms:Io([Yo.points,Yo.fog]),vertexShader:$o.points_vert,fragmentShader:$o.points_frag},dashed:{uniforms:Io([Yo.common,Yo.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:$o.linedashed_vert,fragmentShader:$o.linedashed_frag},depth:{uniforms:Io([Yo.common,Yo.displacementmap]),vertexShader:$o.depth_vert,fragmentShader:$o.depth_frag},normal:{uniforms:Io([Yo.common,Yo.bumpmap,Yo.normalmap,Yo.displacementmap,{opacity:{value:1}}]),vertexShader:$o.normal_vert,fragmentShader:$o.normal_frag},sprite:{uniforms:Io([Yo.sprite,Yo.fog]),vertexShader:$o.sprite_vert,fragmentShader:$o.sprite_frag},background:{uniforms:{uvTransform:{value:new Jn},t2D:{value:null}},vertexShader:$o.background_vert,fragmentShader:$o.background_frag},cube:{uniforms:Io([Yo.envmap,{opacity:{value:1}}]),vertexShader:$o.cube_vert,fragmentShader:$o.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:$o.equirect_vert,fragmentShader:$o.equirect_frag},distanceRGBA:{uniforms:Io([Yo.common,Yo.displacementmap,{referencePosition:{value:new sr},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:$o.distanceRGBA_vert,fragmentShader:$o.distanceRGBA_frag},shadow:{uniforms:Io([Yo.lights,Yo.fog,{color:{value:new Pi(0)},opacity:{value:1}}]),vertexShader:$o.shadow_vert,fragmentShader:$o.shadow_frag}};function Jo(t,e,n,r,o){const c=new Pi(0);let l,h,d=0,f=null,m=0,v=null;function y(t,e){n.buffers.color.setClear(t.r,t.g,t.b,e,o)}return{getClearColor:function(){return c},setClearColor:function(t,e){c.set(t),d=void 0!==e?e:1,y(c,d)},getClearAlpha:function(){return d},setClearAlpha:function(t){d=t,y(c,d)},render:function(n,o,x,M){let S=!0===o.isScene?o.background:null;S&&S.isTexture&&(S=e.get(S));const T=t.xr,E=T.getSession&&T.getSession();E&&"additive"===E.environmentBlendMode&&(S=null),null===S?y(c,d):S&&S.isColor&&(y(S,1),M=!0),(t.autoClear||M)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),S&&(S.isCubeTexture||S.isWebGLCubeRenderTarget||S.isWebGLCubeRenderTargetTexture||S.mapping===xt)?(void 0===h&&(h=new wo(new Po(1,1,1),new No({name:"BackgroundCubeMaterial",uniforms:Oo(Xo.cube.uniforms),vertexShader:Xo.cube.vertexShader,fragmentShader:Xo.cube.fragmentShader,side:w,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),S.isWebGLCubeRenderTarget&&(S=S.texture),h.material.uniforms.envMap.value=S,h.material.uniforms.flipEnvMap.value=S.isCubeTexture?-1:1,f===S&&m===S.version&&v===t.toneMapping||(h.material.needsUpdate=!0,f=S,m=S.version,v=t.toneMapping),n.unshift(h,h.geometry,h.material,0,0,null)):S&&S.isTexture&&(void 0===l&&(l=new wo(new Zo(2,2),new No({name:"BackgroundMaterial",uniforms:Oo(Xo.background.uniforms),vertexShader:Xo.background.vertexShader,fragmentShader:Xo.background.fragmentShader,side:_,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=S,!0===S.matrixAutoUpdate&&S.updateMatrix(),l.material.uniforms.uvTransform.value.copy(S.matrix),f===S&&m===S.version&&v===t.toneMapping||(l.material.needsUpdate=!0,f=S,m=S.version,v=t.toneMapping),n.unshift(l,l.geometry,l.material,0,0,null))}}}function Qo(t,e,n,r){const o=t.getParameter(34921),c=r.isWebGL2?null:e.get("OES_vertex_array_object"),l=r.isWebGL2||null!==c,h={},d=y(null);let f=d;function m(e){return r.isWebGL2?t.bindVertexArray(e):c.bindVertexArrayOES(e)}function v(e){return r.isWebGL2?t.deleteVertexArray(e):c.deleteVertexArrayOES(e)}function y(t){const e=[],n=[],r=[];for(let i=0;i<o;i++)e[i]=0,n[i]=0,r[i]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:r,object:t,attributes:{},index:null}}function x(){const t=f.newAttributes;for(let i=0,e=t.length;i<e;i++)t[i]=0}function _(t){w(t,0)}function w(n,o){const c=f.newAttributes,l=f.enabledAttributes,h=f.attributeDivisors;if(c[n]=1,0===l[n]&&(t.enableVertexAttribArray(n),l[n]=1),h[n]!==o){(r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,o),h[n]=o}}function M(){const e=f.newAttributes,n=f.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==e[i]&&(t.disableVertexAttribArray(i),n[i]=0)}function S(e,n,o,c,l,h){!0!==r.isWebGL2||5124!==o&&5125!==o?t.vertexAttribPointer(e,n,o,c,l,h):t.vertexAttribIPointer(e,n,o,l,h)}function T(){E(),f!==d&&(f=d,m(f.object))}function E(){d.geometry=null,d.program=null,d.wireframe=!1}return{setup:function(object,o,d,v,T){let E=!1;if(l){const e=function(e,n,o){const l=!0===o.wireframe;let d=h[e.id];void 0===d&&(d={},h[e.id]=d);let f=d[n.id];void 0===f&&(f={},d[n.id]=f);let m=f[l];void 0===m&&(m=y(r.isWebGL2?t.createVertexArray():c.createVertexArrayOES()),f[l]=m);return m}(v,d,o);f!==e&&(f=e,m(f.object)),E=function(t,e){const n=f.attributes,r=t.attributes;if(Object.keys(n).length!==Object.keys(r).length)return!0;for(const t in r){const e=n[t],o=r[t];if(void 0===e)return!0;if(e.attribute!==o)return!0;if(e.data!==o.data)return!0}return f.index!==e}(v,T),E&&function(t,e){const n={},r=t.attributes;for(const t in r){const e=r[t],data={};data.attribute=e,e.data&&(data.data=e.data),n[t]=data}f.attributes=n,f.index=e}(v,T)}else{const t=!0===o.wireframe;f.geometry===v.id&&f.program===d.id&&f.wireframe===t||(f.geometry=v.id,f.program=d.id,f.wireframe=t,E=!0)}!0===object.isInstancedMesh&&(E=!0),null!==T&&n.update(T,34963),E&&(!function(object,o,c,l){if(!1===r.isWebGL2&&(object.isInstancedMesh||l.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;x();const h=l.attributes,d=c.getAttributes(),f=o.defaultAttributeValues;for(const e in d){const r=d[e];if(r>=0){const o=h[e];if(void 0!==o){const e=o.normalized,c=o.itemSize,h=n.get(o);if(void 0===h)continue;const d=h.buffer,f=h.type,m=h.bytesPerElement;if(o.isInterleavedBufferAttribute){const data=o.data,n=data.stride,h=o.offset;data&&data.isInstancedInterleavedBuffer?(w(r,data.meshPerAttribute),void 0===l._maxInstanceCount&&(l._maxInstanceCount=data.meshPerAttribute*data.count)):_(r),t.bindBuffer(34962,d),S(r,c,f,e,n*m,h*m)}else o.isInstancedBufferAttribute?(w(r,o.meshPerAttribute),void 0===l._maxInstanceCount&&(l._maxInstanceCount=o.meshPerAttribute*o.count)):_(r),t.bindBuffer(34962,d),S(r,c,f,e,0,0)}else if("instanceMatrix"===e){const e=n.get(object.instanceMatrix);if(void 0===e)continue;const o=e.buffer,c=e.type;w(r+0,1),w(r+1,1),w(r+2,1),w(r+3,1),t.bindBuffer(34962,o),t.vertexAttribPointer(r+0,4,c,!1,64,0),t.vertexAttribPointer(r+1,4,c,!1,64,16),t.vertexAttribPointer(r+2,4,c,!1,64,32),t.vertexAttribPointer(r+3,4,c,!1,64,48)}else if("instanceColor"===e){const e=n.get(object.instanceColor);if(void 0===e)continue;const o=e.buffer,c=e.type;w(r,1),t.bindBuffer(34962,o),t.vertexAttribPointer(r,3,c,!1,12,0)}else if(void 0!==f){const n=f[e];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(r,n);break;case 3:t.vertexAttrib3fv(r,n);break;case 4:t.vertexAttrib4fv(r,n);break;default:t.vertexAttrib1fv(r,n)}}}}M()}(object,o,d,v),null!==T&&t.bindBuffer(34963,n.get(T).buffer))},reset:T,resetDefaultState:E,dispose:function(){T();for(const t in h){const e=h[t];for(const t in e){const n=e[t];for(const t in n)v(n[t].object),delete n[t];delete e[t]}delete h[t]}},releaseStatesOfGeometry:function(t){if(void 0===h[t.id])return;const e=h[t.id];for(const t in e){const n=e[t];for(const t in n)v(n[t].object),delete n[t];delete e[t]}delete h[t.id]},releaseStatesOfProgram:function(t){for(const e in h){const n=h[e];if(void 0===n[t.id])continue;const r=n[t.id];for(const t in r)v(r[t].object),delete r[t];delete n[t.id]}},initAttributes:x,enableAttribute:_,disableUnusedAttributes:M}}function Ko(t,e,n,r){const o=r.isWebGL2;let c;this.setMode=function(t){c=t},this.render=function(e,r){t.drawArrays(c,e,r),n.update(r,c,1)},this.renderInstances=function(r,l,h){if(0===h)return;let d,f;if(o)d=t,f="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",null===d)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");d[f](c,r,l,h),n.update(l,c,h)}}function ta(t,e,n){let r;function o(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const c="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext;let l=void 0!==n.precision?n.precision:"highp";const h=o(l);h!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",h,"instead."),l=h);const d=!0===n.logarithmicDepthBuffer,f=t.getParameter(34930),m=t.getParameter(35660),v=t.getParameter(3379),y=t.getParameter(34076),x=t.getParameter(34921),_=t.getParameter(36347),w=t.getParameter(36348),M=t.getParameter(36349),S=m>0,T=c||!!e.get("OES_texture_float");return{isWebGL2:c,getMaxAnisotropy:function(){if(void 0!==r)return r;const n=e.get("EXT_texture_filter_anisotropic");return r=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,r},getMaxPrecision:o,precision:l,logarithmicDepthBuffer:d,maxTextures:f,maxVertexTextures:m,maxTextureSize:v,maxCubemapSize:y,maxAttributes:x,maxVertexUniforms:_,maxVaryings:w,maxFragmentUniforms:M,vertexTextures:S,floatFragmentTextures:T,floatVertexTextures:S&&T,maxSamples:c?t.getParameter(36183):0}}function ea(t){const e=this;let n=null,r=0,o=!1,c=!1;const l=new pi,h=new Jn,d={value:null,needsUpdate:!1};function f(){d.value!==n&&(d.value=n,d.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function m(t,n,r,o){const c=null!==t?t.length:0;let f=null;if(0!==c){if(f=d.value,!0!==o||null===f){const e=r+4*c,o=n.matrixWorldInverse;h.getNormalMatrix(o),(null===f||f.length<e)&&(f=new Float32Array(e));for(let i=0,e=r;i!==c;++i,e+=4)l.copy(t[i]).applyMatrix4(o,h),l.normal.toArray(f,e),f[e+3]=l.constant}d.value=f,d.needsUpdate=!0}return e.numPlanes=c,e.numIntersection=0,f}this.uniform=d,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,c){const l=0!==t.length||e||0!==r||o;return o=e,n=m(t,c,0),r=t.length,l},this.beginShadows=function(){c=!0,m(null)},this.endShadows=function(){c=!1,f()},this.setState=function(e,l,h){const v=e.clippingPlanes,y=e.clipIntersection,x=e.clipShadows,_=t.get(e);if(!o||null===v||0===v.length||c&&!x)c?m(null):f();else{const t=c?0:r,e=4*t;let o=_.clippingState||null;d.value=o,o=m(v,l,e,h);for(let i=0;i!==e;++i)o[i]=n[i];_.clippingState=o,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=t}}}function na(t){let e=new WeakMap;function n(t,e){return e===vt?t.mapping=mt:e===yt&&(t.mapping=gt),t}return{get:function(r){if(r&&r.isTexture){const o=r.mapping;if(o===vt||o===yt){if(e.has(r)){return n(e.get(r).texture,r.mapping)}{const image=r.image;if(image&&image.height>0){const o=t.getRenderList(),c=t.getRenderTarget(),l=t.getRenderState(),h=new Fo(image.height/2);return h.fromEquirectangularTexture(t,r),e.set(r,h),t.setRenderTarget(c),t.setRenderList(o),t.setRenderState(l),n(h.texture,r.mapping)}return null}}}return r},dispose:function(){e=new WeakMap}}}function ra(t){const e={};return{has:function(n){if(void 0!==e[n])return null!==e[n];let r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return e[n]=r,null!==r},get:function(t){return this.has(t)||console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e[t]}}}function ia(t,e,n,r){const o=new WeakMap,c=new WeakMap;function l(t){const h=t.target,d=o.get(h);null!==d.index&&e.remove(d.index);for(const t in d.attributes)e.remove(d.attributes[t]);h.removeEventListener("dispose",l),o.delete(h);const f=c.get(d);f&&(e.remove(f),c.delete(d)),r.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,n.memory.geometries--}function h(t){const n=[],r=t.index,o=t.attributes.position;let l=0;if(null!==r){const t=r.array;l=r.version;for(let i=0,e=t.length;i<e;i+=3){const a=t[i+0],b=t[i+1],e=t[i+2];n.push(a,b,b,e,e,a)}}else{const t=o.array;l=o.version;for(let i=0,e=t.length/3-1;i<e;i+=3){const a=i+0,b=i+1,t=i+2;n.push(a,b,b,t,t,a)}}const h=new(Yi(n)>65535?Wi:Hi)(n,1);h.version=l;const d=c.get(t);d&&e.remove(d),c.set(t,h)}return{get:function(object,t){let e=o.get(t);return e||(t.addEventListener("dispose",l),t.isBufferGeometry?e=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new ro).setFromObject(object)),e=t._bufferGeometry),o.set(t,e),n.memory.geometries++,e)},update:function(t){const n=t.attributes;for(const t in n)e.update(n[t],34962);const r=t.morphAttributes;for(const t in r){const n=r[t];for(let i=0,t=n.length;i<t;i++)e.update(n[i],34962)}},getWireframeAttribute:function(t){const e=c.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&h(t)}else h(t);return c.get(t)}}}function oa(t,e,n,r){const o=r.isWebGL2;let c,l,h;this.setMode=function(t){c=t},this.setIndex=function(t){l=t.type,h=t.bytesPerElement},this.render=function(e,r){t.drawElements(c,r,l,e*h),n.update(r,c,1)},this.renderInstances=function(r,d,f){if(0===f)return;let m,v;if(o)m=t,v="drawElementsInstanced";else if(m=e.get("ANGLE_instanced_arrays"),v="drawElementsInstancedANGLE",null===m)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");m[v](c,d,l,r*h,f),n.update(d,c,f)}}function aa(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,r){switch(e.calls++,n){case 4:e.triangles+=r*(t/3);break;case 1:e.lines+=r*(t/2);break;case 3:e.lines+=r*(t-1);break;case 2:e.lines+=r*t;break;case 0:e.points+=r*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function sa(a,b){return a[0]-b[0]}function ca(a,b){return Math.abs(b[1])-Math.abs(a[1])}function la(t){const e={},n=new Float32Array(8),r=[];for(let i=0;i<8;i++)r[i]=[i,0];return{update:function(object,o,c,l){const h=object.morphTargetInfluences,d=void 0===h?0:h.length;let f=e[o.id];if(void 0===f){f=[];for(let i=0;i<d;i++)f[i]=[i,0];e[o.id]=f}for(let i=0;i<d;i++){const t=f[i];t[0]=i,t[1]=h[i]}f.sort(ca);for(let i=0;i<8;i++)i<d&&f[i][1]?(r[i][0]=f[i][0],r[i][1]=f[i][1]):(r[i][0]=Number.MAX_SAFE_INTEGER,r[i][1]=0);r.sort(sa);const m=c.morphTargets&&o.morphAttributes.position,v=c.morphNormals&&o.morphAttributes.normal;let y=0;for(let i=0;i<8;i++){const t=r[i],e=t[0],c=t[1];e!==Number.MAX_SAFE_INTEGER&&c?(m&&o.getAttribute("morphTarget"+i)!==m[e]&&o.setAttribute("morphTarget"+i,m[e]),v&&o.getAttribute("morphNormal"+i)!==v[e]&&o.setAttribute("morphNormal"+i,v[e]),n[i]=c,y+=c):(m&&void 0!==o.getAttribute("morphTarget"+i)&&o.deleteAttribute("morphTarget"+i),v&&void 0!==o.getAttribute("morphNormal"+i)&&o.deleteAttribute("morphNormal"+i),n[i]=0)}const x=o.morphTargetsRelative?1:1-y;l.getUniforms().setValue(t,"morphTargetBaseInfluence",x),l.getUniforms().setValue(t,"morphTargetInfluences",n)}}}function ua(t,e,n,r){let o=new WeakMap;return{update:function(object){const t=r.render.frame,c=object.geometry,l=e.get(object,c);return o.get(l)!==t&&(c.isGeometry&&l.updateFromObject(object),e.update(l),o.set(l,t)),object.isInstancedMesh&&(n.update(object.instanceMatrix,34962),null!==object.instanceColor&&n.update(object.instanceColor,34962)),l},dispose:function(){o=new WeakMap}}}function ha(t,e,n,r,o,c,l,h,d,f){t=void 0!==t?t:[],e=void 0!==e?e:mt,l=void 0!==l?l:Zt,nr.call(this,t,e,n,r,o,c,l,h,d,f),this.flipY=!1}function da(data,t,e,n){nr.call(this,null),this.image={data:data||null,width:t||1,height:e||1,depth:n||1},this.magFilter=St,this.minFilter=St,this.wrapR=wt,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function pa(data,t,e,n){nr.call(this,null),this.image={data:data||null,width:t||1,height:e||1,depth:n||1},this.magFilter=St,this.minFilter=St,this.wrapR=wt,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Xo.physical={uniforms:Io([Xo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Xn(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Pi(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:$o.meshphysical_vert,fragmentShader:$o.meshphysical_frag},ha.prototype=Object.create(nr.prototype),ha.prototype.constructor=ha,ha.prototype.isCubeTexture=!0,Object.defineProperty(ha.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),da.prototype=Object.create(nr.prototype),da.prototype.constructor=da,da.prototype.isDataTexture2DArray=!0,pa.prototype=Object.create(nr.prototype),pa.prototype.constructor=pa,pa.prototype.isDataTexture3D=!0;const fa=new nr,ma=new da,ga=new pa,va=new ha,ya=[],xa=[],ba=new Float32Array(16),_a=new Float32Array(9),wa=new Float32Array(4);function Ma(t,e,n){const r=t[0];if(r<=0||r>0)return t;const o=e*n;let c=ya[o];if(void 0===c&&(c=new Float32Array(o),ya[o]=c),0!==e){r.toArray(c,0);for(let i=1,r=0;i!==e;++i)r+=n,t[i].toArray(c,r)}return c}function Sa(a,b){if(a.length!==b.length)return!1;for(let i=0,t=a.length;i<t;i++)if(a[i]!==b[i])return!1;return!0}function Ta(a,b){for(let i=0,t=b.length;i<t;i++)a[i]=b[i]}function Ea(t,e){let n=xa[e];void 0===n&&(n=new Int32Array(e),xa[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function Aa(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function La(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Sa(n,e))return;t.uniform2fv(this.addr,e),Ta(n,e)}}function Ca(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Sa(n,e))return;t.uniform3fv(this.addr,e),Ta(n,e)}}function Ra(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Sa(n,e))return;t.uniform4fv(this.addr,e),Ta(n,e)}}function Pa(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Sa(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Ta(n,e)}else{if(Sa(n,r))return;wa.set(r),t.uniformMatrix2fv(this.addr,!1,wa),Ta(n,r)}}function Oa(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Sa(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Ta(n,e)}else{if(Sa(n,r))return;_a.set(r),t.uniformMatrix3fv(this.addr,!1,_a),Ta(n,r)}}function Ia(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Sa(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Ta(n,e)}else{if(Sa(n,r))return;ba.set(r),t.uniformMatrix4fv(this.addr,!1,ba),Ta(n,r)}}function ka(t,e,n){const r=this.cache,o=n.allocateTextureUnit();r[0]!==o&&(t.uniform1i(this.addr,o),r[0]=o),n.safeSetTexture2D(e||fa,o)}function Na(t,e,n){const r=this.cache,o=n.allocateTextureUnit();r[0]!==o&&(t.uniform1i(this.addr,o),r[0]=o),n.setTexture2DArray(e||ma,o)}function Da(t,e,n){const r=this.cache,o=n.allocateTextureUnit();r[0]!==o&&(t.uniform1i(this.addr,o),r[0]=o),n.setTexture3D(e||ga,o)}function za(t,e,n){const r=this.cache,o=n.allocateTextureUnit();r[0]!==o&&(t.uniform1i(this.addr,o),r[0]=o),n.safeSetTextureCube(e||va,o)}function Ba(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Fa(t,e){const n=this.cache;Sa(n,e)||(t.uniform2iv(this.addr,e),Ta(n,e))}function ja(t,e){const n=this.cache;Sa(n,e)||(t.uniform3iv(this.addr,e),Ta(n,e))}function Ua(t,e){const n=this.cache;Sa(n,e)||(t.uniform4iv(this.addr,e),Ta(n,e))}function Ga(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Ha(t,e){t.uniform1fv(this.addr,e)}function Va(t,e){t.uniform1iv(this.addr,e)}function Wa(t,e){t.uniform2iv(this.addr,e)}function qa(t,e){t.uniform3iv(this.addr,e)}function Za(t,e){t.uniform4iv(this.addr,e)}function $a(t,e){const data=Ma(e,this.size,2);t.uniform2fv(this.addr,data)}function Ya(t,e){const data=Ma(e,this.size,3);t.uniform3fv(this.addr,data)}function Xa(t,e){const data=Ma(e,this.size,4);t.uniform4fv(this.addr,data)}function Ja(t,e){const data=Ma(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,data)}function Qa(t,e){const data=Ma(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,data)}function Ka(t,e){const data=Ma(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,data)}function ts(t,e,n){const r=e.length,o=Ea(n,r);t.uniform1iv(this.addr,o);for(let i=0;i!==r;++i)n.safeSetTexture2D(e[i]||fa,o[i])}function es(t,e,n){const r=e.length,o=Ea(n,r);t.uniform1iv(this.addr,o);for(let i=0;i!==r;++i)n.safeSetTextureCube(e[i]||va,o[i])}function ns(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return Aa;case 35664:return La;case 35665:return Ca;case 35666:return Ra;case 35674:return Pa;case 35675:return Oa;case 35676:return Ia;case 5124:case 35670:return Ba;case 35667:case 35671:return Fa;case 35668:case 35672:return ja;case 35669:case 35673:return Ua;case 5125:return Ga;case 35678:case 36198:case 36298:case 36306:case 35682:return ka;case 35679:case 36299:case 36307:return Da;case 35680:case 36300:case 36308:case 36293:return za;case 36289:case 36303:case 36311:case 36292:return Na}}(e.type)}function rs(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return Ha;case 35664:return $a;case 35665:return Ya;case 35666:return Xa;case 35674:return Ja;case 35675:return Qa;case 35676:return Ka;case 5124:case 35670:return Va;case 35667:case 35671:return Wa;case 35668:case 35672:return qa;case 35669:case 35673:return Za;case 35678:case 36198:case 36298:case 36306:case 35682:return ts;case 35680:case 36300:case 36308:case 36293:return es}}(e.type)}function is(t){this.id=t,this.seq=[],this.map={}}rs.prototype.updateCache=function(data){const t=this.cache;data instanceof Float32Array&&t.length!==data.length&&(this.cache=new Float32Array(data.length)),Ta(t,data)},is.prototype.setValue=function(t,e,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const u=r[i];u.setValue(t,e[u.id],n)}};const os=/([\w\d_]+)(\])?(\[|\.)?/g;function as(t,e){t.seq.push(e),t.map[e.id]=e}function ss(t,e,n){const path=t.name,r=path.length;for(os.lastIndex=0;;){const o=os.exec(path),c=os.lastIndex;let l=o[1];const h="]"===o[2],d=o[3];if(h&&(l|=0),void 0===d||"["===d&&c+2===r){as(n,void 0===d?new ns(l,t,e):new rs(l,t,e));break}{let t=n.map[l];void 0===t&&(t=new is(l),as(n,t)),n=t}}}function cs(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let i=0;i<n;++i){const n=t.getActiveUniform(e,i);ss(n,t.getUniformLocation(e,n.name),this)}}function ls(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}cs.prototype.setValue=function(t,e,n,r){const u=this.map[e];void 0!==u&&u.setValue(t,n,r)},cs.prototype.setOptional=function(t,object,e){const n=object[e];void 0!==n&&this.setValue(t,e,n)},cs.upload=function(t,e,n,r){for(let i=0,o=e.length;i!==o;++i){const u=e[i],o=n[u.id];!1!==o.needsUpdate&&u.setValue(t,o.value,r)}},cs.seqWithValue=function(t,e){const n=[];for(let i=0,r=t.length;i!==r;++i){const u=t[i];u.id in e&&n.push(u)}return n};let us=0;function hs(t){switch(t){case sn:return["Linear","( value )"];case cn:return["sRGB","( value )"];case un:return["RGBE","( value )"];case dn:return["RGBM","( value, 7.0 )"];case pn:return["RGBM","( value, 16.0 )"];case fn:return["RGBD","( value, 256.0 )"];case ln:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case hn:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function ds(t,e,n){const r=t.getShaderParameter(e,35713),o=t.getShaderInfoLog(e).trim();return r&&""===o?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+o+function(t){const e=t.split("\n");for(let i=0;i<e.length;i++)e[i]=i+1+": "+e[i];return e.join("\n")}(t.getShaderSource(e))}function ps(t,e){const n=hs(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function fs(t,e){const n=hs(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function ms(t,e){let n;switch(e){case ct:n="Linear";break;case lt:n="Reinhard";break;case ut:n="OptimizedCineon";break;case ht:n="ACESFilmic";break;case pt:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function gs(t){return""!==t}function vs(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function ys(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const xs=/^[ \t]*#include +<([\w\d./]+)>/gm;function bs(t){return t.replace(xs,_s)}function _s(t,e){const n=$o[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return bs(n)}const ws=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Ms=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Ss(t){return t.replace(Ms,Es).replace(ws,Ts)}function Ts(t,e,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Es(t,e,n,r)}function Es(t,e,n,r){let o="";for(let i=parseInt(e);i<parseInt(n);i++)o+=r.replace(/\[\s*i\s*\]/g,"[ "+i+" ]").replace(/UNROLLED_LOOP_INDEX/g,i);return o}function As(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function Ls(t,e,n,r){const o=t.getContext(),c=n.defines;let l=n.vertexShader,h=n.fragmentShader;const d=function(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===v?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===y?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===x&&(e="SHADOWMAP_TYPE_VSM"),e}(n),f=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case mt:case gt:e="ENVMAP_TYPE_CUBE";break;case xt:case bt:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),m=function(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case gt:case bt:e="ENVMAP_MODE_REFRACTION"}return e}(n),_=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case it:e="ENVMAP_BLENDING_MULTIPLY";break;case ot:e="ENVMAP_BLENDING_MIX";break;case at:e="ENVMAP_BLENDING_ADD"}return e}(n),w=t.gammaFactor>0?t.gammaFactor:1,M=n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(gs).join("\n")}(n),S=function(t){const e=[];for(const n in t){const r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}(c),T=o.createProgram();let E,A,L=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(E=[S].filter(gs).join("\n"),E.length>0&&(E+="\n"),A=[M,S].filter(gs).join("\n"),A.length>0&&(A+="\n")):(E=[As(n),"#define SHADER_NAME "+n.shaderName,S,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+w,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+m:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+d:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(gs).join("\n"),A=[M,As(n),"#define SHADER_NAME "+n.shaderName,S,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+w,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.envMap?"#define "+m:"",n.envMap?"#define "+_:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+d:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==st?"#define TONE_MAPPING":"",n.toneMapping!==st?$o.tonemapping_pars_fragment:"",n.toneMapping!==st?ms("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",$o.encodings_pars_fragment,n.map?ps("mapTexelToLinear",n.mapEncoding):"",n.matcap?ps("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?ps("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?ps("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?ps("lightMapTexelToLinear",n.lightMapEncoding):"",fs("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(gs).join("\n")),l=bs(l),l=vs(l,n),l=ys(l,n),h=bs(h),h=vs(h,n),h=ys(h,n),l=Ss(l),h=Ss(h),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(L="#version 300 es\n",E=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+E,A=["#define varying in",n.glslVersion===Wn?"":"out highp vec4 pc_fragColor;",n.glslVersion===Wn?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+A);const C=L+A+h,R=ls(o,35633,L+E+l),P=ls(o,35632,C);if(o.attachShader(T,R),o.attachShader(T,P),void 0!==n.index0AttributeName?o.bindAttribLocation(T,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(T,0,"position"),o.linkProgram(T),t.debug.checkShaderErrors){const t=o.getProgramInfoLog(T).trim(),e=o.getShaderInfoLog(R).trim(),n=o.getShaderInfoLog(P).trim();let r=!0,c=!0;if(!1===o.getProgramParameter(T,35714)){r=!1;const e=ds(o,R,"vertex"),n=ds(o,P,"fragment");console.error("THREE.WebGLProgram: shader error: ",o.getError(),"35715",o.getProgramParameter(T,35715),"gl.getProgramInfoLog",t,e,n)}else""!==t?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",t):""!==e&&""!==n||(c=!1);c&&(this.diagnostics={runnable:r,programLog:t,vertexShader:{log:e,prefix:E},fragmentShader:{log:n,prefix:A}})}let O,I;return o.deleteShader(R),o.deleteShader(P),this.getUniforms=function(){return void 0===O&&(O=new cs(o,T)),O},this.getAttributes=function(){return void 0===I&&(I=function(t,e){const n={},r=t.getProgramParameter(e,35721);for(let i=0;i<r;i++){const r=t.getActiveAttrib(e,i).name;n[r]=t.getAttribLocation(e,r)}return n}(o,T)),I},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(T),this.program=void 0},this.name=n.shaderName,this.id=us++,this.cacheKey=e,this.usedTimes=1,this.program=T,this.vertexShader=R,this.fragmentShader=P,this}function Cs(t,e,n,r,o,c){const l=[],h=r.isWebGL2,d=r.logarithmicDepthBuffer,f=r.floatVertexTextures,m=r.maxVertexUniforms,v=r.vertexTextures;let y=r.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},_=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function S(map){let t;return map?map.isTexture?t=map.encoding:map.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=map.texture.encoding):t=sn,t}return{getParameters:function(o,l,_,T,object){const E=T.fog,A=o.isMeshStandardMaterial?T.environment:null,L=e.get(o.envMap||A),C=x[o.type],R=object.isSkinnedMesh?function(object){const t=object.skeleton.bones;if(f)return 1024;{const e=m,n=Math.floor((e-20)/4),r=Math.min(n,t.length);return r<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+r+"."),0):r}}(object):0;let P,O;if(null!==o.precision&&(y=r.getMaxPrecision(o.precision),y!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",y,"instead.")),C){const t=Xo[C];P=t.vertexShader,O=t.fragmentShader}else P=o.vertexShader,O=o.fragmentShader;const I=t.getRenderTarget();return{isWebGL2:h,shaderID:C,shaderName:o.type,vertexShader:P,fragmentShader:O,defines:o.defines,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:y,instancing:!0===object.isInstancedMesh,instancingColor:!0===object.isInstancedMesh&&null!==object.instanceColor,supportsVertexTextures:v,outputEncoding:null!==I?S(I.texture):t.outputEncoding,map:!!o.map,mapEncoding:S(o.map),matcap:!!o.matcap,matcapEncoding:S(o.matcap),envMap:!!L,envMapMode:L&&L.mapping,envMapEncoding:S(L),envMapCubeUV:!!L&&(L.mapping===xt||L.mapping===bt),lightMap:!!o.lightMap,lightMapEncoding:S(o.lightMap),aoMap:!!o.aoMap,emissiveMap:!!o.emissiveMap,emissiveMapEncoding:S(o.emissiveMap),bumpMap:!!o.bumpMap,normalMap:!!o.normalMap,objectSpaceNormalMap:o.normalMapType===yn,tangentSpaceNormalMap:o.normalMapType===vn,clearcoatMap:!!o.clearcoatMap,clearcoatRoughnessMap:!!o.clearcoatRoughnessMap,clearcoatNormalMap:!!o.clearcoatNormalMap,displacementMap:!!o.displacementMap,roughnessMap:!!o.roughnessMap,metalnessMap:!!o.metalnessMap,specularMap:!!o.specularMap,alphaMap:!!o.alphaMap,gradientMap:!!o.gradientMap,sheen:!!o.sheen,transmissionMap:!!o.transmissionMap,combine:o.combine,vertexTangents:o.normalMap&&o.vertexTangents,vertexColors:o.vertexColors,vertexUvs:!!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatMap||o.clearcoatRoughnessMap||o.clearcoatNormalMap||o.displacementMap||o.transmissionMap),uvsVertexOnly:!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatNormalMap||o.transmissionMap||!o.displacementMap),fog:!!E,useFog:o.fog,fogExp2:E&&E.isFogExp2,flatShading:o.flatShading,sizeAttenuation:o.sizeAttenuation,logarithmicDepthBuffer:d,skinning:o.skinning&&R>0,maxBones:R,useVertexTexture:f,morphTargets:o.morphTargets,morphNormals:o.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:l.directional.length,numPointLights:l.point.length,numSpotLights:l.spot.length,numRectAreaLights:l.rectArea.length,numHemiLights:l.hemi.length,numDirLightShadows:l.directionalShadowMap.length,numPointLightShadows:l.pointShadowMap.length,numSpotLightShadows:l.spotShadowMap.length,numClippingPlanes:c.numPlanes,numClipIntersection:c.numIntersection,dithering:o.dithering,shadowMapEnabled:t.shadowMap.enabled&&_.length>0,shadowMapType:t.shadowMap.type,toneMapping:o.toneMapped?t.toneMapping:st,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:o.premultipliedAlpha,alphaTest:o.alphaTest,doubleSided:o.side===M,flipSided:o.side===w,depthPacking:void 0!==o.depthPacking&&o.depthPacking,index0AttributeName:o.index0AttributeName,extensionDerivatives:o.extensions&&o.extensions.derivatives,extensionFragDepth:o.extensions&&o.extensions.fragDepth,extensionDrawBuffers:o.extensions&&o.extensions.drawBuffers,extensionShaderTextureLOD:o.extensions&&o.extensions.shaderTextureLOD,rendererExtensionFragDepth:h||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||n.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()}},getProgramCacheKey:function(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);if(!1===e.isRawShaderMaterial){for(let i=0;i<_.length;i++)n.push(e[_[i]]);n.push(t.outputEncoding),n.push(t.gammaFactor)}return n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){const e=x[t.type];let n;if(e){const t=Xo[e];n=ko.clone(t.uniforms)}else n=t.uniforms;return n},acquireProgram:function(e,n){let r;for(let p=0,t=l.length;p<t;p++){const t=l[p];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new Ls(t,n,e,o),l.push(r)),r},releaseProgram:function(t){if(0==--t.usedTimes){const i=l.indexOf(t);l[i]=l[l.length-1],l.pop(),t.destroy()}},programs:l}}function Rs(){let t=new WeakMap;return{get:function(object){let map=t.get(object);return void 0===map&&(map={},t.set(object,map)),map},remove:function(object){t.delete(object)},update:function(object,e,n){t.get(object)[e]=n},dispose:function(){t=new WeakMap}}}function Ps(a,b){return a.groupOrder!==b.groupOrder?a.groupOrder-b.groupOrder:a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.program!==b.program?a.program.id-b.program.id:a.material.id!==b.material.id?a.material.id-b.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function Os(a,b){return a.groupOrder!==b.groupOrder?a.groupOrder-b.groupOrder:a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:a.id-b.id}function Is(t){const e=[];let n=0;const r=[],o=[],c={id:-1};function l(object,r,o,l,h,d){let f=e[n];const m=t.get(o);return void 0===f?(f={id:object.id,object:object,geometry:r,material:o,program:m.program||c,groupOrder:l,renderOrder:object.renderOrder,z:h,group:d},e[n]=f):(f.id=object.id,f.object=object,f.geometry=r,f.material=o,f.program=m.program||c,f.groupOrder=l,f.renderOrder=object.renderOrder,f.z=h,f.group=d),n++,f}return{opaque:r,transparent:o,init:function(){n=0,r.length=0,o.length=0},push:function(object,t,e,n,c,h){const d=l(object,t,e,n,c,h);(!0===e.transparent?o:r).push(d)},unshift:function(object,t,e,n,c,h){const d=l(object,t,e,n,c,h);(!0===e.transparent?o:r).unshift(d)},finish:function(){for(let i=n,t=e.length;i<t;i++){const t=e[i];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.program=null,t.group=null}},sort:function(t,e){r.length>1&&r.sort(t||Ps),o.length>1&&o.sort(e||Os)}}}function ks(t){let e=new WeakMap;return{get:function(n,r){const o=e.get(n);let c;return void 0===o?(c=new Is(t),e.set(n,new WeakMap),e.get(n).set(r,c)):(c=o.get(r),void 0===c&&(c=new Is(t),o.set(r,c))),c},dispose:function(){e=new WeakMap}}}function Ns(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new sr,color:new Pi};break;case"SpotLight":n={position:new sr,direction:new sr,color:new Pi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new sr,color:new Pi,distance:0,decay:0};break;case"HemisphereLight":n={direction:new sr,skyColor:new Pi,groundColor:new Pi};break;case"RectAreaLight":n={color:new Pi,position:new sr,halfWidth:new sr,halfHeight:new sr}}return t[e.id]=n,n}}}let Ds=0;function zs(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function Bs(){const t=new Ns,e=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xn};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xn,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let i=0;i<9;i++)n.probe.push(new sr);const r=new sr,o=new zr,c=new zr;return{setup:function(l,h,d){let f=0,g=0,b=0;for(let i=0;i<9;i++)n.probe[i].set(0,0,0);let m=0,v=0,y=0,x=0,_=0,w=0,M=0,S=0;const T=d.matrixWorldInverse;l.sort(zs);for(let i=0,h=l.length;i<h;i++){const h=l[i],d=h.color,E=h.intensity,A=h.distance,L=h.shadow&&h.shadow.map?h.shadow.map.texture:null;if(h.isAmbientLight)f+=d.r*E,g+=d.g*E,b+=d.b*E;else if(h.isLightProbe)for(let t=0;t<9;t++)n.probe[t].addScaledVector(h.sh.coefficients[t],E);else if(h.isDirectionalLight){const o=t.get(h);if(o.color.copy(h.color).multiplyScalar(h.intensity),o.direction.setFromMatrixPosition(h.matrixWorld),r.setFromMatrixPosition(h.target.matrixWorld),o.direction.sub(r),o.direction.transformDirection(T),h.castShadow){const shadow=h.shadow,t=e.get(h);t.shadowBias=shadow.bias,t.shadowNormalBias=shadow.normalBias,t.shadowRadius=shadow.radius,t.shadowMapSize=shadow.mapSize,n.directionalShadow[m]=t,n.directionalShadowMap[m]=L,n.directionalShadowMatrix[m]=h.shadow.matrix,w++}n.directional[m]=o,m++}else if(h.isSpotLight){const o=t.get(h);if(o.position.setFromMatrixPosition(h.matrixWorld),o.position.applyMatrix4(T),o.color.copy(d).multiplyScalar(E),o.distance=A,o.direction.setFromMatrixPosition(h.matrixWorld),r.setFromMatrixPosition(h.target.matrixWorld),o.direction.sub(r),o.direction.transformDirection(T),o.coneCos=Math.cos(h.angle),o.penumbraCos=Math.cos(h.angle*(1-h.penumbra)),o.decay=h.decay,h.castShadow){const shadow=h.shadow,t=e.get(h);t.shadowBias=shadow.bias,t.shadowNormalBias=shadow.normalBias,t.shadowRadius=shadow.radius,t.shadowMapSize=shadow.mapSize,n.spotShadow[y]=t,n.spotShadowMap[y]=L,n.spotShadowMatrix[y]=h.shadow.matrix,S++}n.spot[y]=o,y++}else if(h.isRectAreaLight){const e=t.get(h);e.color.copy(d).multiplyScalar(E),e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(T),c.identity(),o.copy(h.matrixWorld),o.premultiply(T),c.extractRotation(o),e.halfWidth.set(.5*h.width,0,0),e.halfHeight.set(0,.5*h.height,0),e.halfWidth.applyMatrix4(c),e.halfHeight.applyMatrix4(c),n.rectArea[x]=e,x++}else if(h.isPointLight){const r=t.get(h);if(r.position.setFromMatrixPosition(h.matrixWorld),r.position.applyMatrix4(T),r.color.copy(h.color).multiplyScalar(h.intensity),r.distance=h.distance,r.decay=h.decay,h.castShadow){const shadow=h.shadow,t=e.get(h);t.shadowBias=shadow.bias,t.shadowNormalBias=shadow.normalBias,t.shadowRadius=shadow.radius,t.shadowMapSize=shadow.mapSize,t.shadowCameraNear=shadow.camera.near,t.shadowCameraFar=shadow.camera.far,n.pointShadow[v]=t,n.pointShadowMap[v]=L,n.pointShadowMatrix[v]=h.shadow.matrix,M++}n.point[v]=r,v++}else if(h.isHemisphereLight){const e=t.get(h);e.direction.setFromMatrixPosition(h.matrixWorld),e.direction.transformDirection(T),e.direction.normalize(),e.skyColor.copy(h.color).multiplyScalar(E),e.groundColor.copy(h.groundColor).multiplyScalar(E),n.hemi[_]=e,_++}}x>0&&(n.rectAreaLTC1=Yo.LTC_1,n.rectAreaLTC2=Yo.LTC_2),n.ambient[0]=f,n.ambient[1]=g,n.ambient[2]=b;const E=n.hash;E.directionalLength===m&&E.pointLength===v&&E.spotLength===y&&E.rectAreaLength===x&&E.hemiLength===_&&E.numDirectionalShadows===w&&E.numPointShadows===M&&E.numSpotShadows===S||(n.directional.length=m,n.spot.length=y,n.rectArea.length=x,n.point.length=v,n.hemi.length=_,n.directionalShadow.length=w,n.directionalShadowMap.length=w,n.pointShadow.length=M,n.pointShadowMap.length=M,n.spotShadow.length=S,n.spotShadowMap.length=S,n.directionalShadowMatrix.length=w,n.pointShadowMatrix.length=M,n.spotShadowMatrix.length=S,E.directionalLength=m,E.pointLength=v,E.spotLength=y,E.rectAreaLength=x,E.hemiLength=_,E.numDirectionalShadows=w,E.numPointShadows=M,E.numSpotShadows=S,n.version=Ds++)},state:n}}function Fs(){const t=new Bs,e=[],n=[];return{init:function(){e.length=0,n.length=0},state:{lightsArray:e,shadowsArray:n,lights:t},setupLights:function(r){t.setup(e,n,r)},pushLight:function(t){e.push(t)},pushShadow:function(t){n.push(t)}}}function js(){let t=new WeakMap;return{get:function(e,n){let r;return!1===t.has(e)?(r=new Fs,t.set(e,new WeakMap),t.get(e).set(n,r)):!1===t.get(e).has(n)?(r=new Fs,t.get(e).set(n,r)):r=t.get(e).get(n),r},dispose:function(){t=new WeakMap}}}function Us(t){ki.call(this),this.type="MeshDepthMaterial",this.depthPacking=mn,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}function Gs(t){ki.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new sr,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}Us.prototype=Object.create(ki.prototype),Us.prototype.constructor=Us,Us.prototype.isMeshDepthMaterial=!0,Us.prototype.copy=function(source){return ki.prototype.copy.call(this,source),this.depthPacking=source.depthPacking,this.skinning=source.skinning,this.morphTargets=source.morphTargets,this.map=source.map,this.alphaMap=source.alphaMap,this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this},Gs.prototype=Object.create(ki.prototype),Gs.prototype.constructor=Gs,Gs.prototype.isMeshDistanceMaterial=!0,Gs.prototype.copy=function(source){return ki.prototype.copy.call(this,source),this.referencePosition.copy(source.referencePosition),this.nearDistance=source.nearDistance,this.farDistance=source.farDistance,this.skinning=source.skinning,this.morphTargets=source.morphTargets,this.map=source.map,this.alphaMap=source.alphaMap,this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this};function Hs(t,e,n){let r=new Ho;const o=new Xn,c=new Xn,l=new rr,h=[],d=[],f={},m={0:w,1:_,2:M},y=new No({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Xn},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),S=y.clone();S.defines.HORIZONAL_PASS=1;const T=new ro;T.setAttribute("position",new Bi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const A=new wo(T,y),L=this;function C(shadow,n){const r=e.update(A);y.uniforms.shadow_pass.value=shadow.map.texture,y.uniforms.resolution.value=shadow.mapSize,y.uniforms.radius.value=shadow.radius,t.setRenderTarget(shadow.mapPass),t.clear(),t.renderBufferDirect(n,null,r,y,A,null),S.uniforms.shadow_pass.value=shadow.mapPass.texture,S.uniforms.resolution.value=shadow.mapSize,S.uniforms.radius.value=shadow.radius,t.setRenderTarget(shadow.map),t.clear(),t.renderBufferDirect(n,null,r,S,A,null)}function R(t,e,n){const r=t<<0|e<<1|n<<2;let o=h[r];return void 0===o&&(o=new Us({depthPacking:gn,morphTargets:t,skinning:e}),h[r]=o),o}function P(t,e,n){const r=t<<0|e<<1|n<<2;let o=d[r];return void 0===o&&(o=new Gs({morphTargets:t,skinning:e}),d[r]=o),o}function O(object,e,n,r,o,c,l){let h=null,d=R,v=object.customDepthMaterial;if(!0===r.isPointLight&&(d=P,v=object.customDistanceMaterial),void 0===v){let t=!1;!0===n.morphTargets&&(t=e.morphAttributes&&e.morphAttributes.position&&e.morphAttributes.position.length>0);let r=!1;!0===object.isSkinnedMesh&&(!0===n.skinning?r=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",object)),h=d(t,r,!0===object.isInstancedMesh)}else h=v;if(t.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){const t=h.uuid,e=n.uuid;let r=f[t];void 0===r&&(r={},f[t]=r);let o=r[e];void 0===o&&(o=h.clone(),r[e]=o),h=o}return h.visible=n.visible,h.wireframe=n.wireframe,h.side=l===x?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:m[n.side],h.clipShadows=n.clipShadows,h.clippingPlanes=n.clippingPlanes,h.clipIntersection=n.clipIntersection,h.wireframeLinewidth=n.wireframeLinewidth,h.linewidth=n.linewidth,!0===r.isPointLight&&!0===h.isMeshDistanceMaterial&&(h.referencePosition.setFromMatrixPosition(r.matrixWorld),h.nearDistance=o,h.farDistance=c),h}function I(object,n,o,c,l){if(!1===object.visible)return;if(object.layers.test(n.layers)&&(object.isMesh||object.isLine||object.isPoints)&&(object.castShadow||object.receiveShadow&&l===x)&&(!object.frustumCulled||r.intersectsObject(object))){object.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,object.matrixWorld);const n=e.update(object),r=object.material;if(Array.isArray(r)){const e=n.groups;for(let h=0,d=e.length;h<d;h++){const d=e[h],f=r[d.materialIndex];if(f&&f.visible){const e=O(object,n,f,c,o.near,o.far,l);t.renderBufferDirect(o,null,n,e,object,d)}}}else if(r.visible){const e=O(object,n,r,c,o.near,o.far,l);t.renderBufferDirect(o,null,n,e,object,null)}}const h=object.children;for(let i=0,t=h.length;i<t;i++)I(h[i],n,o,c,l)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=v,this.render=function(e,h,d){if(!1===L.enabled)return;if(!1===L.autoUpdate&&!1===L.needsUpdate)return;if(0===e.length)return;const f=t.getRenderTarget(),m=t.getActiveCubeFace(),v=t.getActiveMipmapLevel(),y=t.state;y.setBlending(E),y.buffers.color.setClear(1,1,1,1),y.buffers.depth.setTest(!0),y.setScissorTest(!1);for(let i=0,f=e.length;i<f;i++){const f=e[i],shadow=f.shadow;if(!1===shadow.autoUpdate&&!1===shadow.needsUpdate)continue;if(void 0===shadow){console.warn("THREE.WebGLShadowMap:",f,"has no shadow.");continue}o.copy(shadow.mapSize);const m=shadow.getFrameExtents();if(o.multiply(m),c.copy(shadow.mapSize),(o.x>n||o.y>n)&&(o.x>n&&(c.x=Math.floor(n/m.x),o.x=c.x*m.x,shadow.mapSize.x=c.x),o.y>n&&(c.y=Math.floor(n/m.y),o.y=c.y*m.y,shadow.mapSize.y=c.y)),null===shadow.map&&!shadow.isPointLightShadow&&this.type===x){const t={minFilter:Ct,magFilter:Ct,format:$t};shadow.map=new ir(o.x,o.y,t),shadow.map.texture.name=f.name+".shadowMap",shadow.mapPass=new ir(o.x,o.y,t),shadow.camera.updateProjectionMatrix()}if(null===shadow.map){const t={minFilter:St,magFilter:St,format:$t};shadow.map=new ir(o.x,o.y,t),shadow.map.texture.name=f.name+".shadowMap",shadow.camera.updateProjectionMatrix()}t.setRenderTarget(shadow.map),t.clear();const v=shadow.getViewportCount();for(let t=0;t<v;t++){const e=shadow.getViewport(t);l.set(c.x*e.x,c.y*e.y,c.x*e.z,c.y*e.w),y.viewport(l),shadow.updateMatrices(f,t),r=shadow.getFrustum(),I(h,d,shadow.camera,f,this.type)}shadow.isPointLightShadow||this.type!==x||C(shadow,d),shadow.needsUpdate=!1}L.needsUpdate=!1,t.setRenderTarget(f,m,v)}}function Vs(t,e,n){const r=n.isWebGL2;const o=new function(){let e=!1;const n=new rr;let r=null;const o=new rr(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,g,b,a,r){!0===r&&(e*=a,g*=a,b*=a),n.set(e,g,b,a),!1===o.equals(n)&&(t.clearColor(e,g,b,a),o.copy(n))},reset:function(){e=!1,r=null,o.set(-1,0,0,0)}}},c=new function(){let e=!1,n=null,r=null,o=null;return{setTest:function(t){t?St(2929):Tt(2929)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){if(e)switch(e){case Y:t.depthFunc(512);break;case X:t.depthFunc(519);break;case J:t.depthFunc(513);break;case Q:t.depthFunc(515);break;case K:t.depthFunc(514);break;case tt:t.depthFunc(518);break;case et:t.depthFunc(516);break;case nt:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);r=e}},setLocked:function(t){e=t},setClear:function(e){o!==e&&(t.clearDepth(e),o=e)},reset:function(){e=!1,n=null,r=null,o=null}}},f=new function(){let e=!1,n=null,r=null,o=null,c=null,l=null,h=null,d=null,f=null;return{setTest:function(t){e||(t?St(2960):Tt(2960))},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,l){r===e&&o===n&&c===l||(t.stencilFunc(e,n,l),r=e,o=n,c=l)},setOp:function(e,n,r){l===e&&h===n&&d===r||(t.stencilOp(e,n,r),l=e,h=n,d=r)},setLocked:function(t){e=t},setClear:function(e){f!==e&&(t.clearStencil(e),f=e)},reset:function(){e=!1,n=null,r=null,o=null,c=null,l=null,h=null,d=null,f=null}}};let m={},v=null,y=null,x=null,_=null,S=null,T=null,it=null,ot=null,at=null,st=!1,ct=null,lt=null,ut=null,ht=null,pt=null;const ft=t.getParameter(35661);let mt=!1,gt=0;const vt=t.getParameter(7938);-1!==vt.indexOf("WebGL")?(gt=parseFloat(/^WebGL\ ([0-9])/.exec(vt)[1]),mt=gt>=1):-1!==vt.indexOf("OpenGL ES")&&(gt=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(vt)[1]),mt=gt>=2);let yt=null,xt={};const bt=new rr,_t=new rr;function wt(e,n,r){const data=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let i=0;i<r;i++)t.texImage2D(n+i,0,6408,1,1,0,6408,5121,data);return o}const Mt={};function St(e){!0!==m[e]&&(t.enable(e),m[e]=!0)}function Tt(e){!1!==m[e]&&(t.disable(e),m[e]=!1)}Mt[3553]=wt(3553,3553,1),Mt[34067]=wt(34067,34069,6),o.setClear(0,0,0,1),c.setClear(1),f.setClear(0),St(2929),c.setFunc(Q),Ct(!1),Rt(h),St(2884),Lt(E);const Et={[O]:32774,[I]:32778,[k]:32779};if(r)Et[N]=32775,Et[D]=32776;else{const t=e.get("EXT_blend_minmax");null!==t&&(Et[N]=t.MIN_EXT,Et[D]=t.MAX_EXT)}const At={[z]:0,[B]:1,[F]:768,[U]:770,[$]:776,[W]:774,[H]:772,[j]:769,[G]:771,[Z]:775,[V]:773};function Lt(e,n,r,o,c,l,h,d){if(e!==E){if(y||(St(3042),y=!0),e===P)c=c||n,l=l||r,h=h||o,n===_&&c===it||(t.blendEquationSeparate(Et[n],Et[c]),_=n,it=c),r===S&&o===T&&l===ot&&h===at||(t.blendFuncSeparate(At[r],At[o],At[l],At[h]),S=r,T=o,ot=l,at=h),x=e,st=null;else if(e!==x||d!==st){if(_===O&&it===O||(t.blendEquation(32774),_=O,it=O),d)switch(e){case A:t.blendFuncSeparate(1,771,1,771);break;case L:t.blendFunc(1,1);break;case C:t.blendFuncSeparate(0,0,769,771);break;case R:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case A:t.blendFuncSeparate(770,771,1,771);break;case L:t.blendFunc(770,1);break;case C:t.blendFunc(0,769);break;case R:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}S=null,T=null,ot=null,at=null,x=e,st=d}}else y&&(Tt(3042),y=!1)}function Ct(e){ct!==e&&(e?t.frontFace(2304):t.frontFace(2305),ct=e)}function Rt(e){e!==l?(St(2884),e!==lt&&(e===h?t.cullFace(1029):e===d?t.cullFace(1028):t.cullFace(1032))):Tt(2884),lt=e}function Pt(e,n,r){e?(St(32823),ht===n&&pt===r||(t.polygonOffset(n,r),ht=n,pt=r)):Tt(32823)}function Ot(e){void 0===e&&(e=33984+ft-1),yt!==e&&(t.activeTexture(e),yt=e)}return{buffers:{color:o,depth:c,stencil:f},enable:St,disable:Tt,useProgram:function(e){return v!==e&&(t.useProgram(e),v=e,!0)},setBlending:Lt,setMaterial:function(t,e){t.side===M?Tt(2884):St(2884);let n=t.side===w;e&&(n=!n),Ct(n),t.blending===A&&!1===t.transparent?Lt(E):Lt(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),c.setFunc(t.depthFunc),c.setTest(t.depthTest),c.setMask(t.depthWrite),o.setMask(t.colorWrite);const r=t.stencilWrite;f.setTest(r),r&&(f.setMask(t.stencilWriteMask),f.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),f.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),Pt(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:Ct,setCullFace:Rt,setLineWidth:function(e){e!==ut&&(mt&&t.lineWidth(e),ut=e)},setPolygonOffset:Pt,setScissorTest:function(t){t?St(3089):Tt(3089)},activeTexture:Ot,bindTexture:function(e,n){null===yt&&Ot();let r=xt[yt];void 0===r&&(r={type:void 0,texture:void 0},xt[yt]=r),r.type===e&&r.texture===n||(t.bindTexture(e,n||Mt[e]),r.type=e,r.texture=n)},unbindTexture:function(){const e=xt[yt];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===bt.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),bt.copy(e))},viewport:function(e){!1===_t.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),_t.copy(e))},reset:function(){m={},yt=null,xt={},v=null,x=null,ct=null,lt=null,o.reset(),c.reset(),f.reset()}}}function Ws(t,e,n,r,o,c,l){const h=o.isWebGL2,d=o.maxTextures,f=o.maxCubemapSize,m=o.maxTextureSize,v=o.maxSamples,y=new WeakMap;let x,_=!1;try{_="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function w(t,e){return _?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function M(image,t,e,n){let r=1;if((image.width>n||image.height>n)&&(r=n/Math.max(image.width,image.height)),r<1||!0===t){if("undefined"!=typeof HTMLImageElement&&image instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&image instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&image instanceof ImageBitmap){const n=t?Yn.floorPowerOfTwo:Math.floor,o=n(r*image.width),c=n(r*image.height);void 0===x&&(x=w(o,c));const canvas=e?w(o,c):x;return canvas.width=o,canvas.height=c,canvas.getContext("2d").drawImage(image,0,0,o,c),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+image.width+"x"+image.height+") to ("+o+"x"+c+")."),canvas}return"data"in image&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+image.width+"x"+image.height+")."),image}return image}function S(image){return Yn.isPowerOfTwo(image.width)&&Yn.isPowerOfTwo(image.height)}function T(t,e){return t.generateMipmaps&&e&&t.minFilter!==St&&t.minFilter!==Ct}function E(e,n,o,c){t.generateMipmap(e),r.get(n).__maxMipLevel=Math.log(Math.max(o,c))*Math.LOG2E}function A(n,r,o){if(!1===h)return r;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let c=r;return 6403===r&&(5126===o&&(c=33326),5131===o&&(c=33325),5121===o&&(c=33321)),6407===r&&(5126===o&&(c=34837),5131===o&&(c=34843),5121===o&&(c=32849)),6408===r&&(5126===o&&(c=34836),5131===o&&(c=34842),5121===o&&(c=32856)),33325!==c&&33326!==c&&34842!==c&&34836!==c||e.get("EXT_color_buffer_float"),c}function L(t){return t===St||t===Tt||t===At?9728:9729}function C(e){const n=e.target;n.removeEventListener("dispose",C),function(e){const n=r.get(e);if(void 0===n.__webglInit)return;t.deleteTexture(n.__webglTexture),r.remove(e)}(n),n.isVideoTexture&&y.delete(n),l.memory.textures--}function R(e){const n=e.target;n.removeEventListener("dispose",R),function(e){const n=r.get(e),o=r.get(e.texture);if(!e)return;void 0!==o.__webglTexture&&t.deleteTexture(o.__webglTexture);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLCubeRenderTarget)for(let i=0;i<6;i++)t.deleteFramebuffer(n.__webglFramebuffer[i]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[i]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&t.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer&&t.deleteRenderbuffer(n.__webglColorRenderbuffer),n.__webglDepthRenderbuffer&&t.deleteRenderbuffer(n.__webglDepthRenderbuffer);r.remove(e.texture),r.remove(e)}(n),l.memory.textures--}let P=0;function O(t,slot){const e=r.get(t);if(t.isVideoTexture&&function(t){const e=l.render.frame;y.get(t)!==e&&(y.set(t,e),t.update())}(t),t.version>0&&e.__version!==t.version){const image=t.image;if(void 0===image)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==image.complete)return void F(e,t,slot);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+slot),n.bindTexture(3553,e.__webglTexture)}function I(e,slot){if(6!==e.image.length)return;const o=r.get(e);if(e.version>0&&o.__version!==e.version){B(o,e),n.activeTexture(33984+slot),n.bindTexture(34067,o.__webglTexture),t.pixelStorei(37440,e.flipY);const r=e&&(e.isCompressedTexture||e.image[0].isCompressedTexture),l=e.image[0]&&e.image[0].isDataTexture,d=[];for(let i=0;i<6;i++)d[i]=r||l?l?e.image[i].image:e.image[i]:M(e.image[i],!1,!0,f);const image=d[0],m=S(image)||h,v=c.convert(e.format),y=c.convert(e.type),x=A(e.internalFormat,v,y);let _;if(z(34067,e,m),r){for(let i=0;i<6;i++){_=d[i].mipmaps;for(let t=0;t<_.length;t++){const r=_[t];e.format!==$t&&e.format!==Zt?null!==v?n.compressedTexImage2D(34069+i,t,x,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+i,t,x,r.width,r.height,0,v,y,r.data)}}o.__maxMipLevel=_.length-1}else{_=e.mipmaps;for(let i=0;i<6;i++)if(l){n.texImage2D(34069+i,0,x,d[i].width,d[i].height,0,v,y,d[i].data);for(let t=0;t<_.length;t++){const e=_[t].image[i].image;n.texImage2D(34069+i,t+1,x,e.width,e.height,0,v,y,e.data)}}else{n.texImage2D(34069+i,0,x,v,y,d[i]);for(let t=0;t<_.length;t++){const e=_[t];n.texImage2D(34069+i,t+1,x,v,y,e.image[i])}}o.__maxMipLevel=_.length}T(e,m)&&E(34067,e,image.width,image.height),o.__version=e.version,e.onUpdate&&e.onUpdate(e)}else n.activeTexture(33984+slot),n.bindTexture(34067,o.__webglTexture)}function k(t,slot){n.activeTexture(33984+slot),n.bindTexture(34067,r.get(t).__webglTexture)}const N={[_t]:10497,[wt]:33071,[Mt]:33648},D={[St]:9728,[Tt]:9984,[At]:9986,[Ct]:9729,[Rt]:9985,[Ot]:9987};function z(n,c,l){l?(t.texParameteri(n,10242,N[c.wrapS]),t.texParameteri(n,10243,N[c.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,N[c.wrapR]),t.texParameteri(n,10240,D[c.magFilter]),t.texParameteri(n,10241,D[c.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),c.wrapS===wt&&c.wrapT===wt||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,L(c.magFilter)),t.texParameteri(n,10241,L(c.minFilter)),c.minFilter!==St&&c.minFilter!==Ct&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));const d=e.get("EXT_texture_filter_anisotropic");if(d){if(c.type===jt&&null===e.get("OES_texture_float_linear"))return;if(c.type===Ut&&null===(h||e.get("OES_texture_half_float_linear")))return;(c.anisotropy>1||r.get(c).__currentAnisotropy)&&(t.texParameterf(n,d.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(c.anisotropy,o.getMaxAnisotropy())),r.get(c).__currentAnisotropy=c.anisotropy)}}function B(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",C),e.__webglTexture=t.createTexture(),l.memory.textures++)}function F(e,r,slot){let o=3553;r.isDataTexture2DArray&&(o=35866),r.isDataTexture3D&&(o=32879),B(e,r),n.activeTexture(33984+slot),n.bindTexture(o,e.__webglTexture),t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment);const l=function(t){return!h&&(t.wrapS!==wt||t.wrapT!==wt||t.minFilter!==St&&t.minFilter!==Ct)}(r)&&!1===S(r.image),image=M(r.image,l,!1,m),d=S(image)||h,f=c.convert(r.format);let v,y=c.convert(r.type),x=A(r.internalFormat,f,y);z(o,r,d);const _=r.mipmaps;if(r.isDepthTexture)x=6402,h?x=r.type===jt?36012:r.type===Ft?33190:r.type===Wt?35056:33189:r.type===jt&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===Qt&&6402===x&&r.type!==zt&&r.type!==Ft&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=zt,y=c.convert(r.type)),r.format===Kt&&6402===x&&(x=34041,r.type!==Wt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Wt,y=c.convert(r.type))),n.texImage2D(3553,0,x,image.width,image.height,0,f,y,null);else if(r.isDataTexture)if(_.length>0&&d){for(let i=0,t=_.length;i<t;i++)v=_[i],n.texImage2D(3553,i,x,v.width,v.height,0,f,y,v.data);r.generateMipmaps=!1,e.__maxMipLevel=_.length-1}else n.texImage2D(3553,0,x,image.width,image.height,0,f,y,image.data),e.__maxMipLevel=0;else if(r.isCompressedTexture){for(let i=0,t=_.length;i<t;i++)v=_[i],r.format!==$t&&r.format!==Zt?null!==f?n.compressedTexImage2D(3553,i,x,v.width,v.height,0,v.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,i,x,v.width,v.height,0,f,y,v.data);e.__maxMipLevel=_.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,x,image.width,image.height,image.depth,0,f,y,image.data),e.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,x,image.width,image.height,image.depth,0,f,y,image.data),e.__maxMipLevel=0;else if(_.length>0&&d){for(let i=0,t=_.length;i<t;i++)v=_[i],n.texImage2D(3553,i,x,f,y,v);r.generateMipmaps=!1,e.__maxMipLevel=_.length-1}else n.texImage2D(3553,0,x,f,y,image),e.__maxMipLevel=0;T(r,d)&&E(o,r,image.width,image.height),e.__version=r.version,r.onUpdate&&r.onUpdate(r)}function j(e,o,l,h){const d=c.convert(o.texture.format),f=c.convert(o.texture.type),m=A(o.texture.internalFormat,d,f);n.texImage2D(h,0,m,o.width,o.height,0,d,f,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,l,h,r.get(o.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function U(e,n,r){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){let o=33189;if(r){const e=n.depthTexture;e&&e.isDepthTexture&&(e.type===jt?o=36012:e.type===Ft&&(o=33190));const r=H(n);t.renderbufferStorageMultisample(36161,r,o,n.width,n.height)}else t.renderbufferStorage(36161,o,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){if(r){const e=H(n);t.renderbufferStorageMultisample(36161,e,35056,n.width,n.height)}else t.renderbufferStorage(36161,34041,n.width,n.height);t.framebufferRenderbuffer(36160,33306,36161,e)}else{const e=c.convert(n.texture.format),o=c.convert(n.texture.type),l=A(n.texture.internalFormat,e,o);if(r){const e=H(n);t.renderbufferStorageMultisample(36161,e,l,n.width,n.height)}else t.renderbufferStorage(36161,l,n.width,n.height)}t.bindRenderbuffer(36161,null)}function G(e){const n=r.get(e),o=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),O(n.depthTexture,0);const o=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Qt)t.framebufferTexture2D(36160,36096,3553,o,0);else{if(n.depthTexture.format!==Kt)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,o,0)}}(n.__webglFramebuffer,e)}else if(o){n.__webglDepthbuffer=[];for(let i=0;i<6;i++)t.bindFramebuffer(36160,n.__webglFramebuffer[i]),n.__webglDepthbuffer[i]=t.createRenderbuffer(),U(n.__webglDepthbuffer[i],e,!1)}else t.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),U(n.__webglDepthbuffer,e,!1);t.bindFramebuffer(36160,null)}function H(t){return h&&t.isWebGLMultisampleRenderTarget?Math.min(v,t.samples):0}let V=!1,W=!1;this.allocateTextureUnit=function(){const t=P;return t>=d&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+d),P+=1,t},this.resetTextureUnits=function(){P=0},this.setTexture2D=O,this.setTexture2DArray=function(t,slot){const e=r.get(t);t.version>0&&e.__version!==t.version?F(e,t,slot):(n.activeTexture(33984+slot),n.bindTexture(35866,e.__webglTexture))},this.setTexture3D=function(t,slot){const e=r.get(t);t.version>0&&e.__version!==t.version?F(e,t,slot):(n.activeTexture(33984+slot),n.bindTexture(32879,e.__webglTexture))},this.setTextureCube=I,this.setTextureCubeDynamic=k,this.setupRenderTarget=function(e){const o=r.get(e),d=r.get(e.texture);e.addEventListener("dispose",R),d.__webglTexture=t.createTexture(),l.memory.textures++;const f=!0===e.isWebGLCubeRenderTarget,m=!0===e.isWebGLMultisampleRenderTarget,v=S(e)||h;if(!h||e.texture.format!==Zt||e.texture.type!==jt&&e.texture.type!==Ut||(e.texture.format=$t,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),f){o.__webglFramebuffer=[];for(let i=0;i<6;i++)o.__webglFramebuffer[i]=t.createFramebuffer()}else if(o.__webglFramebuffer=t.createFramebuffer(),m)if(h){o.__webglMultisampledFramebuffer=t.createFramebuffer(),o.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,o.__webglColorRenderbuffer);const n=c.convert(e.texture.format),r=c.convert(e.texture.type),l=A(e.texture.internalFormat,n,r),h=H(e);t.renderbufferStorageMultisample(36161,h,l,e.width,e.height),t.bindFramebuffer(36160,o.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,o.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(o.__webglDepthRenderbuffer=t.createRenderbuffer(),U(o.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(f){n.bindTexture(34067,d.__webglTexture),z(34067,e.texture,v);for(let i=0;i<6;i++)j(o.__webglFramebuffer[i],e,36064,34069+i);T(e.texture,v)&&E(34067,e.texture,e.width,e.height),n.bindTexture(34067,null)}else n.bindTexture(3553,d.__webglTexture),z(3553,e.texture,v),j(o.__webglFramebuffer,e,36064,3553),T(e.texture,v)&&E(3553,e.texture,e.width,e.height),n.bindTexture(3553,null);e.depthBuffer&&G(e)},this.updateRenderTargetMipmap=function(t){const e=t.texture;if(T(e,S(t)||h)){const o=t.isWebGLCubeRenderTarget?34067:3553,c=r.get(e).__webglTexture;n.bindTexture(o,c),E(o,e,t.width,t.height),n.bindTexture(o,null)}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(h){const n=r.get(e);t.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,n.__webglFramebuffer);const o=e.width,c=e.height;let mask=16384;e.depthBuffer&&(mask|=256),e.stencilBuffer&&(mask|=1024),t.blitFramebuffer(0,0,o,c,0,0,o,c,mask,9728),t.bindFramebuffer(36160,n.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(t,slot){t&&t.isWebGLRenderTarget&&(!1===V&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),V=!0),t=t.texture),O(t,slot)},this.safeSetTextureCube=function(t,slot){t&&t.isWebGLCubeRenderTarget&&(!1===W&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),W=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?I(t,slot):k(t,slot)}}function qs(t,e,n){const r=n.isWebGL2;return{convert:function(p){let t;if(p===kt)return 5121;if(p===Gt)return 32819;if(p===Ht)return 32820;if(p===Vt)return 33635;if(p===Nt)return 5120;if(p===Dt)return 5122;if(p===zt)return 5123;if(p===Bt)return 5124;if(p===Ft)return 5125;if(p===jt)return 5126;if(p===Ut)return r?5131:(t=e.get("OES_texture_half_float"),null!==t?t.HALF_FLOAT_OES:null);if(p===qt)return 6406;if(p===Zt)return 6407;if(p===$t)return 6408;if(p===Yt)return 6409;if(p===Xt)return 6410;if(p===Qt)return 6402;if(p===Kt)return 34041;if(p===te)return 6403;if(p===ee)return 36244;if(p===ne)return 33319;if(p===re)return 33320;if(p===ie)return 36248;if(p===oe)return 36249;if(p===ae||p===se||p===ce||p===le){if(t=e.get("WEBGL_compressed_texture_s3tc"),null===t)return null;if(p===ae)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(p===se)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(p===ce)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(p===le)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(p===ue||p===he||p===de||p===pe){if(t=e.get("WEBGL_compressed_texture_pvrtc"),null===t)return null;if(p===ue)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(p===he)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(p===de)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(p===pe)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(p===fe)return t=e.get("WEBGL_compressed_texture_etc1"),null!==t?t.COMPRESSED_RGB_ETC1_WEBGL:null;if((p===me||p===ge)&&(t=e.get("WEBGL_compressed_texture_etc"),null!==t)){if(p===me)return t.COMPRESSED_RGB8_ETC2;if(p===ge)return t.COMPRESSED_RGBA8_ETC2_EAC}return p===ve||p===ye||p===xe||p===be||p===_e||p===we||p===Me||p===Se||p===Te||p===Ee||p===Ae||p===Le||p===Ce||p===Re||p===Oe||p===Ie||p===ke||p===Ne||p===De||p===ze||p===Be||p===Fe||p===je||p===Ue||p===Ge||p===He||p===Ve||p===We?(t=e.get("WEBGL_compressed_texture_astc"),null!==t?p:null):p===Pe?(t=e.get("EXT_texture_compression_bptc"),null!==t?p:null):p===Wt?r?34042:(t=e.get("WEBGL_depth_texture"),null!==t?t.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}function Zs(t){zo.call(this),this.cameras=t||[]}function $s(){ci.call(this),this.type="Group"}function Ys(){this._targetRay=null,this._grip=null,this._hand=null}function Xs(t,e){const n=this;let r=null,o=1,c=null,l="local-floor",h=null;const d=[],f=new Map,m=new zo;m.layers.enable(1),m.viewport=new rr;const v=new zo;v.layers.enable(2),v.viewport=new rr;const y=[m,v],x=new Zs;x.layers.enable(1),x.layers.enable(2);let _=null,w=null;function M(t){const e=f.get(t.inputSource);e&&e.dispatchEvent({type:t.type})}function S(){f.forEach((function(t,e){t.disconnect(e)})),f.clear(),t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),P.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function T(t){c=t,P.setContext(r),P.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}function E(t){const e=r.inputSources;for(let i=0;i<d.length;i++)f.set(e[i],d[i]);for(let i=0;i<t.removed.length;i++){const e=t.removed[i],n=f.get(e);n&&(n.dispatchEvent({type:"disconnected",data:e}),f.delete(e))}for(let i=0;i<t.added.length;i++){const e=t.added[i],n=f.get(e);n&&n.dispatchEvent({type:"connected",data:e})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=d[t];return void 0===e&&(e=new Ys,d[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=d[t];return void 0===e&&(e=new Ys,d[t]=e),e.getGripSpace()},this.getHand=function(t){let e=d[t];return void 0===e&&(e=new Ys,d[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){o=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){l=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c},this.getSession=function(){return r},this.setSession=function(t){if(r=t,null!==r){r.addEventListener("select",M),r.addEventListener("selectstart",M),r.addEventListener("selectend",M),r.addEventListener("squeeze",M),r.addEventListener("squeezestart",M),r.addEventListener("squeezeend",M),r.addEventListener("end",S);const t=e.getContextAttributes();!0!==t.xrCompatible&&e.makeXRCompatible();const n={antialias:t.antialias,alpha:t.alpha,depth:t.depth,stencil:t.stencil,framebufferScaleFactor:o},c=new XRWebGLLayer(r,e,n);r.updateRenderState({baseLayer:c}),r.requestReferenceSpace(l).then(T),r.addEventListener("inputsourceschange",E)}};const A=new sr,L=new sr;function C(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}this.getCamera=function(t){x.near=v.near=m.near=t.near,x.far=v.far=m.far=t.far,_===x.near&&w===x.far||(r.updateRenderState({depthNear:x.near,depthFar:x.far}),_=x.near,w=x.far);const e=t.parent,n=x.cameras;C(x,e);for(let i=0;i<n.length;i++)C(n[i],e);t.matrixWorld.copy(x.matrixWorld);const o=t.children;for(let i=0,t=o.length;i<t;i++)o[i].updateMatrixWorld(!0);return 2===n.length?function(t,e,n){A.setFromMatrixPosition(e.matrixWorld),L.setFromMatrixPosition(n.matrixWorld);const r=A.distanceTo(L),o=e.projectionMatrix.elements,c=n.projectionMatrix.elements,l=o[14]/(o[10]-1),h=o[14]/(o[10]+1),d=(o[9]+1)/o[5],f=(o[9]-1)/o[5],m=(o[8]-1)/o[0],v=(c[8]+1)/c[0],y=l*m,x=l*v,_=r/(-m+v),w=_*-m;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(w),t.translateZ(_),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.getInverse(t.matrixWorld);const M=l+_,S=h+_,T=y-w,E=x+(r-w),C=d*h/S*M,R=f*h/S*M;t.projectionMatrix.makePerspective(T,E,C,R,M,S)}(x,m,v):x.projectionMatrix.copy(m.projectionMatrix),x};let R=null;const P=new Vo;P.setAnimationLoop((function(time,e){if(h=e.getViewerPose(c),null!==h){const e=h.views,n=r.renderState.baseLayer;t.setFramebuffer(n.framebuffer);let o=!1;e.length!==x.cameras.length&&(x.cameras.length=0,o=!0);for(let i=0;i<e.length;i++){const view=e[i],t=n.getViewport(view),r=y[i];r.matrix.fromArray(view.transform.matrix),r.projectionMatrix.fromArray(view.projectionMatrix),r.viewport.set(t.x,t.y,t.width,t.height),0===i&&x.matrix.copy(r.matrix),!0===o&&x.cameras.push(r)}}const n=r.inputSources;for(let i=0;i<d.length;i++){const t=d[i],r=n[i];t.update(r,e,c)}R&&R(time,e)})),this.setAnimationLoop=function(t){R=t},this.dispose=function(){}}function Js(t){function e(e,n){e.opacity.value=n.opacity,n.color&&e.diffuse.value.copy(n.color),n.emissive&&e.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(e.map.value=n.map),n.alphaMap&&(e.alphaMap.value=n.alphaMap),n.specularMap&&(e.specularMap.value=n.specularMap);const r=t.get(n).envMap;if(r){e.envMap.value=r,e.flipEnvMap.value=r.isCubeTexture?-1:1,e.reflectivity.value=n.reflectivity,e.refractionRatio.value=n.refractionRatio;const o=t.get(r).__maxMipLevel;void 0!==o&&(e.maxMipLevel.value=o)}let o,c;n.lightMap&&(e.lightMap.value=n.lightMap,e.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(e.aoMap.value=n.aoMap,e.aoMapIntensity.value=n.aoMapIntensity),n.map?o=n.map:n.specularMap?o=n.specularMap:n.displacementMap?o=n.displacementMap:n.normalMap?o=n.normalMap:n.bumpMap?o=n.bumpMap:n.roughnessMap?o=n.roughnessMap:n.metalnessMap?o=n.metalnessMap:n.alphaMap?o=n.alphaMap:n.emissiveMap?o=n.emissiveMap:n.clearcoatMap?o=n.clearcoatMap:n.clearcoatNormalMap?o=n.clearcoatNormalMap:n.clearcoatRoughnessMap&&(o=n.clearcoatRoughnessMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),e.uvTransform.value.copy(o.matrix)),n.aoMap?c=n.aoMap:n.lightMap&&(c=n.lightMap),void 0!==c&&(c.isWebGLRenderTarget&&(c=c.texture),!0===c.matrixAutoUpdate&&c.updateMatrix(),e.uv2Transform.value.copy(c.matrix))}function n(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(e.emissiveMap.value=n.emissiveMap),n.bumpMap&&(e.bumpMap.value=n.bumpMap,e.bumpScale.value=n.bumpScale,n.side===w&&(e.bumpScale.value*=-1)),n.normalMap&&(e.normalMap.value=n.normalMap,e.normalScale.value.copy(n.normalScale),n.side===w&&e.normalScale.value.negate()),n.displacementMap&&(e.displacementMap.value=n.displacementMap,e.displacementScale.value=n.displacementScale,e.displacementBias.value=n.displacementBias),t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,r,o,c){r.isMeshBasicMaterial?e(t,r):r.isMeshLambertMaterial?(e(t,r),function(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}(t,r)):r.isMeshToonMaterial?(e(t,r),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap);e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===w&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===w&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshPhongMaterial?(e(t,r),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===w&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===w&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshStandardMaterial?(e(t,r),r.isMeshPhysicalMaterial?function(t,e){n(t,e),t.reflectivity.value=e.reflectivity,t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.sheen&&t.sheen.value.copy(e.sheen);e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap);e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap);e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===w&&t.clearcoatNormalScale.value.negate());t.transmission.value=e.transmission,e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap)}(t,r):n(t,r)):r.isMeshMatcapMaterial?(e(t,r),function(t,e){e.matcap&&(t.matcap.value=e.matcap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===w&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===w&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshDepthMaterial?(e(t,r),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshDistanceMaterial?(e(t,r),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias);t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,r)):r.isMeshNormalMaterial?(e(t,r),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===w&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===w&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(t,r),r.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,r)):r.isPointsMaterial?function(t,e,n,r){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*r,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);let o;e.map?o=e.map:e.alphaMap&&(o=e.alphaMap);void 0!==o&&(!0===o.matrixAutoUpdate&&o.updateMatrix(),t.uvTransform.value.copy(o.matrix))}(t,r,o,c):r.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);let n;e.map?n=e.map:e.alphaMap&&(n=e.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(t,r):r.isShadowMaterial?(t.color.value.copy(r.color),t.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function Qs(t){const e=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==t.context?t.context:null,r=void 0!==t.alpha&&t.alpha,o=void 0===t.depth||t.depth,c=void 0===t.stencil||t.stencil,l=void 0!==t.antialias&&t.antialias,h=void 0===t.premultipliedAlpha||t.premultipliedAlpha,d=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,f=void 0!==t.powerPreference?t.powerPreference:"default",m=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;let v=null,y=null;this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=sn,this.physicallyCorrectLights=!1,this.toneMapping=st,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const x=this;let _=!1,w=null,M=0,S=0,T=null,E=null,A=-1,L=null,C=null;const R=new rr,P=new rr;let O=null,I=e.width,k=e.height,N=1,D=null,z=null;const B=new rr(0,0,I,k),F=new rr(0,0,I,k);let j=!1;const U=new Ho;let G=!1,H=!1;const V=new zr,W=new sr,Z={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function $(){return null===T?N:1}let Y,X,J,Q,K,tt,et,nt,it,ot,at,ct,lt,ut,ht,pt,ft,mt,gt,vt,yt,xt=n;function bt(t,n){for(let i=0;i<t.length;i++){const r=t[i],o=e.getContext(r,n);if(null!==o)return o}return null}try{const t={alpha:r,depth:o,stencil:c,antialias:l,premultipliedAlpha:h,preserveDrawingBuffer:d,powerPreference:f,failIfMajorPerformanceCaveat:m};if(e.addEventListener("webglcontextlost",St,!1),e.addEventListener("webglcontextrestored",Tt,!1),null===xt){const e=["webgl2","webgl","experimental-webgl"];if(!0===x.isWebGL1Renderer&&e.shift(),xt=bt(e,t),null===xt)throw bt(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===xt.getShaderPrecisionFormat&&(xt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function _t(){Y=new ra(xt),X=new ta(xt,Y,t),!1===X.isWebGL2&&(Y.get("WEBGL_depth_texture"),Y.get("OES_texture_float"),Y.get("OES_texture_half_float"),Y.get("OES_texture_half_float_linear"),Y.get("OES_standard_derivatives"),Y.get("OES_element_index_uint"),Y.get("OES_vertex_array_object"),Y.get("ANGLE_instanced_arrays")),Y.get("OES_texture_float_linear"),vt=new qs(xt,Y,X),J=new Vs(xt,Y,X),J.scissor(P.copy(F).multiplyScalar(N).floor()),J.viewport(R.copy(B).multiplyScalar(N).floor()),Q=new aa(xt),K=new Rs,tt=new Ws(xt,Y,J,K,X,vt,Q),et=new na(x),nt=new Wo(xt,X),yt=new Qo(xt,Y,nt,X),it=new ia(xt,nt,Q,yt),ot=new ua(xt,it,nt,Q),ft=new la(xt),ht=new ea(K),at=new Cs(x,et,Y,X,yt,ht),ct=new Js(K),lt=new ks(K),ut=new js,pt=new Jo(x,et,J,ot,h),mt=new Ko(xt,Y,Q,X),gt=new oa(xt,Y,Q,X),Q.programs=at.programs,x.capabilities=X,x.extensions=Y,x.properties=K,x.renderLists=lt,x.state=J,x.info=Q}_t();const wt=new Xs(x,xt);this.xr=wt;const Mt=new Hs(x,ot,X.maxTextureSize);function St(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),_=!0}function Tt(){console.log("THREE.WebGLRenderer: Context Restored."),_=!1,_t()}function Et(t){const e=t.target;e.removeEventListener("dispose",Et),function(t){At(t),K.remove(t)}(e)}function At(t){const e=K.get(t).program;void 0!==e&&at.releaseProgram(e)}this.shadowMap=Mt,this.getContext=function(){return xt},this.getContextAttributes=function(){return xt.getContextAttributes()},this.forceContextLoss=function(){const t=Y.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=Y.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return N},this.setPixelRatio=function(t){void 0!==t&&(N=t,this.setSize(I,k,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new Xn),t.set(I,k)},this.setSize=function(t,n,r){wt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(I=t,k=n,e.width=Math.floor(t*N),e.height=Math.floor(n*N),!1!==r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new Xn),t.set(I*N,k*N).floor()},this.setDrawingBufferSize=function(t,n,r){I=t,k=n,N=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new rr),t.copy(R)},this.getViewport=function(t){return t.copy(B)},this.setViewport=function(t,e,n,r){t.isVector4?B.set(t.x,t.y,t.z,t.w):B.set(t,e,n,r),J.viewport(R.copy(B).multiplyScalar(N).floor())},this.getScissor=function(t){return t.copy(F)},this.setScissor=function(t,e,n,r){t.isVector4?F.set(t.x,t.y,t.z,t.w):F.set(t,e,n,r),J.scissor(P.copy(F).multiplyScalar(N).floor())},this.getScissorTest=function(){return j},this.setScissorTest=function(t){J.setScissorTest(j=t)},this.setOpaqueSort=function(t){D=t},this.setTransparentSort=function(t){z=t},this.getClearColor=function(){return pt.getClearColor()},this.setClearColor=function(){pt.setClearColor.apply(pt,arguments)},this.getClearAlpha=function(){return pt.getClearAlpha()},this.setClearAlpha=function(){pt.setClearAlpha.apply(pt,arguments)},this.clear=function(t,e,n){let r=0;(void 0===t||t)&&(r|=16384),(void 0===e||e)&&(r|=256),(void 0===n||n)&&(r|=1024),xt.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",St,!1),e.removeEventListener("webglcontextrestored",Tt,!1),lt.dispose(),ut.dispose(),K.dispose(),et.dispose(),ot.dispose(),yt.dispose(),wt.dispose(),Ct.stop()},this.renderBufferImmediate=function(object,t){yt.initAttributes();const e=K.get(object);object.hasPositions&&!e.position&&(e.position=xt.createBuffer()),object.hasNormals&&!e.normal&&(e.normal=xt.createBuffer()),object.hasUvs&&!e.uv&&(e.uv=xt.createBuffer()),object.hasColors&&!e.color&&(e.color=xt.createBuffer());const n=t.getAttributes();object.hasPositions&&(xt.bindBuffer(34962,e.position),xt.bufferData(34962,object.positionArray,35048),yt.enableAttribute(n.position),xt.vertexAttribPointer(n.position,3,5126,!1,0,0)),object.hasNormals&&(xt.bindBuffer(34962,e.normal),xt.bufferData(34962,object.normalArray,35048),yt.enableAttribute(n.normal),xt.vertexAttribPointer(n.normal,3,5126,!1,0,0)),object.hasUvs&&(xt.bindBuffer(34962,e.uv),xt.bufferData(34962,object.uvArray,35048),yt.enableAttribute(n.uv),xt.vertexAttribPointer(n.uv,2,5126,!1,0,0)),object.hasColors&&(xt.bindBuffer(34962,e.color),xt.bufferData(34962,object.colorArray,35048),yt.enableAttribute(n.color),xt.vertexAttribPointer(n.color,3,5126,!1,0,0)),yt.disableUnusedAttributes(),xt.drawArrays(4,0,object.count),object.count=0},this.renderBufferDirect=function(t,e,n,r,object,o){null===e&&(e=Z);const c=object.isMesh&&object.matrixWorld.determinant()<0,l=Nt(t,e,r,object);J.setMaterial(r,c);let h=n.index;const d=n.attributes.position;if(null===h){if(void 0===d||0===d.count)return}else if(0===h.count)return;let f,m=1;!0===r.wireframe&&(h=it.getWireframeAttribute(n),m=2),(r.morphTargets||r.morphNormals)&&ft.update(object,n,r,l),yt.setup(object,r,l,n,h);let v=mt;null!==h&&(f=nt.get(h),v=gt,v.setIndex(f));const y=null!==h?h.count:d.count,x=n.drawRange.start*m,_=n.drawRange.count*m,w=null!==o?o.start*m:0,M=null!==o?o.count*m:1/0,S=Math.max(x,w),T=Math.min(y,x+_,w+M)-1,E=Math.max(0,T-S+1);if(0!==E){if(object.isMesh)!0===r.wireframe?(J.setLineWidth(r.wireframeLinewidth*$()),v.setMode(1)):v.setMode(4);else if(object.isLine){let t=r.linewidth;void 0===t&&(t=1),J.setLineWidth(t*$()),object.isLineSegments?v.setMode(1):object.isLineLoop?v.setMode(2):v.setMode(3)}else object.isPoints?v.setMode(0):object.isSprite&&v.setMode(4);if(object.isInstancedMesh)v.renderInstances(S,E,object.count);else if(n.isInstancedBufferGeometry){const t=Math.min(n.instanceCount,n._maxInstanceCount);v.renderInstances(S,E,t)}else v.render(S,E)}},this.compile=function(t,e){y=ut.get(t,e),y.init(),t.traverse((function(object){object.isLight&&(y.pushLight(object),object.castShadow&&y.pushShadow(object))})),y.setupLights(e);const n=new WeakMap;t.traverse((function(object){const e=object.material;if(e)if(Array.isArray(e))for(let i=0;i<e.length;i++){const r=e[i];!1===n.has(r)&&(It(r,t,object),n.set(r))}else!1===n.has(e)&&(It(e,t,object),n.set(e))}))};let Lt=null;const Ct=new Vo;function Rt(object,t,e,n){if(!1===object.visible)return;if(object.layers.test(t.layers))if(object.isGroup)e=object.renderOrder;else if(object.isLOD)!0===object.autoUpdate&&object.update(t);else if(object.isLight)y.pushLight(object),object.castShadow&&y.pushShadow(object);else if(object.isSprite){if(!object.frustumCulled||U.intersectsSprite(object)){n&&W.setFromMatrixPosition(object.matrixWorld).applyMatrix4(V);const t=ot.update(object),r=object.material;r.visible&&v.push(object,t,r,e,W.z,null)}}else if(object.isImmediateRenderObject)n&&W.setFromMatrixPosition(object.matrixWorld).applyMatrix4(V),v.push(object,null,object.material,e,W.z,null);else if((object.isMesh||object.isLine||object.isPoints)&&(object.isSkinnedMesh&&object.skeleton.frame!==Q.render.frame&&(object.skeleton.update(),object.skeleton.frame=Q.render.frame),!object.frustumCulled||U.intersectsObject(object))){n&&W.setFromMatrixPosition(object.matrixWorld).applyMatrix4(V);const t=ot.update(object),r=object.material;if(Array.isArray(r)){const n=t.groups;for(let i=0,o=n.length;i<o;i++){const o=n[i],c=r[o.materialIndex];c&&c.visible&&v.push(object,t,c,e,W.z,o)}}else r.visible&&v.push(object,t,r,e,W.z,null)}const r=object.children;for(let i=0,o=r.length;i<o;i++)Rt(r[i],t,e,n)}function Pt(t,e,n){const r=!0===e.isScene?e.overrideMaterial:null;for(let i=0,o=t.length;i<o;i++){const o=t[i],object=o.object,c=o.geometry,l=null===r?o.material:r,h=o.group;if(n.isArrayCamera){C=n;const t=n.cameras;for(let n=0,r=t.length;n<r;n++){const r=t[n];object.layers.test(r.layers)&&(J.viewport(R.copy(r.viewport)),y.setupLights(r),Ot(object,e,r,c,l,h))}}else C=null,Ot(object,e,n,c,l,h)}}function Ot(object,t,e,n,r,o){if(object.onBeforeRender(x,t,e,n,r,o),y=ut.get(t,C||e),object.modelViewMatrix.multiplyMatrices(e.matrixWorldInverse,object.matrixWorld),object.normalMatrix.getNormalMatrix(object.modelViewMatrix),object.isImmediateRenderObject){const n=Nt(e,t,r,object);J.setMaterial(r),yt.reset(),function(object,t){object.render((function(object){x.renderBufferImmediate(object,t)}))}(object,n)}else x.renderBufferDirect(e,t,n,r,object,o);object.onAfterRender(x,t,e,n,r,o),y=ut.get(t,C||e)}function It(t,e,object){!0!==e.isScene&&(e=Z);const n=K.get(t),r=y.state.lights,o=y.state.shadowsArray,c=r.state.version,l=at.getParameters(t,r.state,o,e,object),h=at.getProgramCacheKey(l);let d=n.program,f=!0;if(void 0===d)t.addEventListener("dispose",Et);else if(d.cacheKey!==h)At(t);else if(n.lightsStateVersion!==c)f=!1;else{if(void 0!==l.shaderID){const r=t.isMeshStandardMaterial?e.environment:null;return void(n.envMap=et.get(t.envMap||r))}f=!1}f&&(l.uniforms=at.getUniforms(t),t.onBeforeCompile(l,x),d=at.acquireProgram(l,h),n.program=d,n.uniforms=l.uniforms,n.outputEncoding=l.outputEncoding);const m=n.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(n.numClippingPlanes=ht.numPlanes,n.numIntersection=ht.numIntersection,m.clippingPlanes=ht.uniform),n.environment=t.isMeshStandardMaterial?e.environment:null,n.fog=e.fog,n.envMap=et.get(t.envMap||n.environment),n.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),n.lightsStateVersion=c,n.needsLights&&(m.ambientLightColor.value=r.state.ambient,m.lightProbe.value=r.state.probe,m.directionalLights.value=r.state.directional,m.directionalLightShadows.value=r.state.directionalShadow,m.spotLights.value=r.state.spot,m.spotLightShadows.value=r.state.spotShadow,m.rectAreaLights.value=r.state.rectArea,m.ltc_1.value=r.state.rectAreaLTC1,m.ltc_2.value=r.state.rectAreaLTC2,m.pointLights.value=r.state.point,m.pointLightShadows.value=r.state.pointShadow,m.hemisphereLights.value=r.state.hemi,m.directionalShadowMap.value=r.state.directionalShadowMap,m.directionalShadowMatrix.value=r.state.directionalShadowMatrix,m.spotShadowMap.value=r.state.spotShadowMap,m.spotShadowMatrix.value=r.state.spotShadowMatrix,m.pointShadowMap.value=r.state.pointShadowMap,m.pointShadowMatrix.value=r.state.pointShadowMatrix);const v=n.program.getUniforms(),_=cs.seqWithValue(v.seq,m);n.uniformsList=_}function Nt(t,e,n,object){!0!==e.isScene&&(e=Z),tt.resetTextureUnits();const r=e.fog,o=n.isMeshStandardMaterial?e.environment:null,c=null===T?x.outputEncoding:T.texture.encoding,l=et.get(n.envMap||o),h=K.get(n),d=y.state.lights;if(!0===G&&(!0===H||t!==L)){const e=t===L&&n.id===A;ht.setState(n,t,e)}n.version===h.__version?n.fog&&h.fog!==r||h.environment!==o||h.needsLights&&h.lightsStateVersion!==d.state.version?It(n,e,object):void 0===h.numClippingPlanes||h.numClippingPlanes===ht.numPlanes&&h.numIntersection===ht.numIntersection?(h.outputEncoding!==c||h.envMap!==l)&&It(n,e,object):It(n,e,object):(It(n,e,object),h.__version=n.version);let f=!1,m=!1,v=!1;const _=h.program,w=_.getUniforms(),M=h.uniforms;if(J.useProgram(_.program)&&(f=!0,m=!0,v=!0),n.id!==A&&(A=n.id,m=!0),f||L!==t){if(w.setValue(xt,"projectionMatrix",t.projectionMatrix),X.logarithmicDepthBuffer&&w.setValue(xt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),L!==t&&(L=t,m=!0,v=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){const e=w.map.cameraPosition;void 0!==e&&e.setValue(xt,W.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&w.setValue(xt,"isOrthographic",!0===t.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||n.skinning)&&w.setValue(xt,"viewMatrix",t.matrixWorldInverse)}if(n.skinning){w.setOptional(xt,object,"bindMatrix"),w.setOptional(xt,object,"bindMatrixInverse");const t=object.skeleton;if(t){const e=t.bones;if(X.floatVertexTextures){if(void 0===t.boneTexture){let n=Math.sqrt(4*e.length);n=Yn.ceilPowerOfTwo(n),n=Math.max(n,4);const r=new Float32Array(n*n*4);r.set(t.boneMatrices);const o=new jo(r,n,n,$t,jt);t.boneMatrices=r,t.boneTexture=o,t.boneTextureSize=n}w.setValue(xt,"boneTexture",t.boneTexture,tt),w.setValue(xt,"boneTextureSize",t.boneTextureSize)}else w.setOptional(xt,t,"boneMatrices")}}var S,E;return(m||h.receiveShadow!==object.receiveShadow)&&(h.receiveShadow=object.receiveShadow,w.setValue(xt,"receiveShadow",object.receiveShadow)),m&&(w.setValue(xt,"toneMappingExposure",x.toneMappingExposure),h.needsLights&&(E=v,(S=M).ambientLightColor.needsUpdate=E,S.lightProbe.needsUpdate=E,S.directionalLights.needsUpdate=E,S.directionalLightShadows.needsUpdate=E,S.pointLights.needsUpdate=E,S.pointLightShadows.needsUpdate=E,S.spotLights.needsUpdate=E,S.spotLightShadows.needsUpdate=E,S.rectAreaLights.needsUpdate=E,S.hemisphereLights.needsUpdate=E),r&&n.fog&&ct.refreshFogUniforms(M,r),ct.refreshMaterialUniforms(M,n,N,k),cs.upload(xt,h.uniformsList,M,tt)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(cs.upload(xt,h.uniformsList,M,tt),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&w.setValue(xt,"center",object.center),w.setValue(xt,"modelViewMatrix",object.modelViewMatrix),w.setValue(xt,"normalMatrix",object.normalMatrix),w.setValue(xt,"modelMatrix",object.matrixWorld),_}Ct.setAnimationLoop((function(time){wt.isPresenting||Lt&&Lt(time)})),"undefined"!=typeof window&&Ct.setContext(window),this.setAnimationLoop=function(t){Lt=t,wt.setAnimationLoop(t),null===t?Ct.stop():Ct.start()},this.render=function(t,e){let n,r;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===_)return;yt.resetDefaultState(),A=-1,L=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===wt.enabled&&!0===wt.isPresenting&&(e=wt.getCamera(e)),!0===t.isScene&&t.onBeforeRender(x,t,e,n||T),y=ut.get(t,e),y.init(),V.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),U.setFromProjectionMatrix(V),H=this.localClippingEnabled,G=ht.init(this.clippingPlanes,H,e),v=lt.get(t,e),v.init(),Rt(t,e,0,x.sortObjects),v.finish(),!0===x.sortObjects&&v.sort(D,z),!0===G&&ht.beginShadows();const o=y.state.shadowsArray;Mt.render(o,t,e),y.setupLights(e),!0===G&&ht.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),pt.render(v,t,e,r);const c=v.opaque,l=v.transparent;c.length>0&&Pt(c,t,e),l.length>0&&Pt(l,t,e),!0===t.isScene&&t.onAfterRender(x,t,e),null!==T&&(tt.updateRenderTargetMipmap(T),tt.updateMultisampleRenderTarget(T)),J.buffers.depth.setTest(!0),J.buffers.depth.setMask(!0),J.buffers.color.setMask(!0),J.setPolygonOffset(!1),v=null,y=null},this.setFramebuffer=function(t){w!==t&&null===T&&xt.bindFramebuffer(36160,t),w=t},this.getActiveCubeFace=function(){return M},this.getActiveMipmapLevel=function(){return S},this.getRenderList=function(){return v},this.setRenderList=function(t){v=t},this.getRenderState=function(){return y},this.setRenderState=function(t){y=t},this.getRenderTarget=function(){return T},this.setRenderTarget=function(t,e=0,n=0){T=t,M=e,S=n,t&&void 0===K.get(t).__webglFramebuffer&&tt.setupRenderTarget(t);let r=w,o=!1;if(t){const n=K.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(r=n[e],o=!0):r=t.isWebGLMultisampleRenderTarget?K.get(t).__webglMultisampledFramebuffer:n,R.copy(t.viewport),P.copy(t.scissor),O=t.scissorTest}else R.copy(B).multiplyScalar(N).floor(),P.copy(F).multiplyScalar(N).floor(),O=j;if(E!==r&&(xt.bindFramebuffer(36160,r),E=r),J.viewport(R),J.scissor(P),J.setScissorTest(O),o){const r=K.get(t.texture);xt.framebufferTexture2D(36160,36064,34069+e,r.__webglTexture,n)}},this.readRenderTargetPixels=function(t,e,n,r,o,c,l){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let h=K.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==l&&(h=h[l]),h){let l=!1;h!==E&&(xt.bindFramebuffer(36160,h),l=!0);try{const h=t.texture,d=h.format,f=h.type;if(d!==$t&&vt.convert(d)!==xt.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(f===kt||vt.convert(f)===xt.getParameter(35738)||f===jt&&(X.isWebGL2||Y.get("OES_texture_float")||Y.get("WEBGL_color_buffer_float"))||f===Ut&&(X.isWebGL2?Y.get("EXT_color_buffer_float"):Y.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===xt.checkFramebufferStatus(36160)?e>=0&&e<=t.width-r&&n>=0&&n<=t.height-o&&xt.readPixels(e,n,r,o,vt.convert(d),vt.convert(f),c):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{l&&xt.bindFramebuffer(36160,E)}}},this.copyFramebufferToTexture=function(t,e,n){void 0===n&&(n=0);const r=Math.pow(2,-n),o=Math.floor(e.image.width*r),c=Math.floor(e.image.height*r),l=vt.convert(e.format);tt.setTexture2D(e,0),xt.copyTexImage2D(3553,n,l,t.x,t.y,o,c,0),J.unbindTexture()},this.copyTextureToTexture=function(t,e,n,r){void 0===r&&(r=0);const o=e.image.width,c=e.image.height,l=vt.convert(n.format),h=vt.convert(n.type);tt.setTexture2D(n,0),xt.pixelStorei(37440,n.flipY),xt.pixelStorei(37441,n.premultiplyAlpha),xt.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?xt.texSubImage2D(3553,r,t.x,t.y,o,c,l,h,e.image.data):e.isCompressedTexture?xt.compressedTexSubImage2D(3553,r,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,l,e.mipmaps[0].data):xt.texSubImage2D(3553,r,t.x,t.y,l,h,e.image),0===r&&n.generateMipmaps&&xt.generateMipmap(3553),J.unbindTexture()},this.initTexture=function(t){tt.setTexture2D(t,0),J.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Ks(t){Qs.call(this,t)}Zs.prototype=Object.assign(Object.create(zo.prototype),{constructor:Zs,isArrayCamera:!0}),$s.prototype=Object.assign(Object.create(ci.prototype),{constructor:$s,isGroup:!0}),Object.assign(Ys.prototype,{constructor:Ys,getHandSpace:function(){if(null===this._hand&&(this._hand=new $s,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(let i=0;i<=window.XRHand.LITTLE_PHALANX_TIP;i++){const t=new $s;t.matrixAutoUpdate=!1,t.visible=!1,this._hand.joints.push(t),this._hand.add(t)}return this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new $s,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new $s,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this},disconnect:function(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(t,e,n){let r=null,o=null,c=null;const l=this._targetRay,h=this._grip,d=this._hand;if(t)if(d&&t.hand){c=!0;for(let i=0;i<=window.XRHand.LITTLE_PHALANX_TIP;i++)if(t.hand[i]){const r=e.getJointPose(t.hand[i],n),o=d.joints[i];null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.jointRadius=r.radius),o.visible=null!==r;const c=d.joints[window.XRHand.INDEX_PHALANX_TIP],l=d.joints[window.XRHand.THUMB_PHALANX_TIP],h=c.position.distanceTo(l.position),f=.02,m=.005;d.inputState.pinching&&h>f+m?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!d.inputState.pinching&&h<=f-m&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}}else null!==l&&(r=e.getPose(t.targetRaySpace,n),null!==r&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale))),null!==h&&t.gripSpace&&(o=e.getPose(t.gripSpace,n),null!==o&&(h.matrix.fromArray(o.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale)));return null!==l&&(l.visible=null!==r),null!==h&&(h.visible=null!==o),null!==d&&(d.visible=null!==c),this}}),Object.assign(Xs.prototype,qn.prototype),Ks.prototype=Object.assign(Object.create(Qs.prototype),{constructor:Ks,isWebGL1Renderer:!0});class tc{constructor(t,e){Object.defineProperty(this,"isFogExp2",{value:!0}),this.name="",this.color=new Pi(t),this.density=void 0!==e?e:25e-5}clone(){return new tc(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class ec{constructor(t,e,n){Object.defineProperty(this,"isFog",{value:!0}),this.name="",this.color=new Pi(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}clone(){return new ec(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class nc extends ci{constructor(){super(),Object.defineProperty(this,"isScene",{value:!0}),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(source,t){return super.copy(source,t),null!==source.background&&(this.background=source.background.clone()),null!==source.environment&&(this.environment=source.environment.clone()),null!==source.fog&&(this.fog=source.fog.clone()),null!==source.overrideMaterial&&(this.overrideMaterial=source.overrideMaterial.clone()),this.autoUpdate=source.autoUpdate,this.matrixAutoUpdate=source.matrixAutoUpdate,this}toJSON(meta){const data=super.toJSON(meta);return null!==this.background&&(data.object.background=this.background.toJSON(meta)),null!==this.environment&&(data.object.environment=this.environment.toJSON(meta)),null!==this.fog&&(data.object.fog=this.fog.toJSON()),data}}function rc(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=Nn,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Yn.generateUUID()}Object.defineProperty(rc.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(rc.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(source){return this.array=new source.array.constructor(source.array),this.count=source.count,this.stride=source.stride,this.usage=source.usage,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(let i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(data){void 0===data.arrayBuffers&&(data.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Yn.generateUUID()),void 0===data.arrayBuffers[this.array.buffer._uuid]&&(data.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new rc(new this.array.constructor(data.arrayBuffers[this.array.buffer._uuid]),this.stride);return t.setUsage(this.usage),t},onUpload:function(t){return this.onUploadCallback=t,this},toJSON:function(data){return void 0===data.arrayBuffers&&(data.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Yn.generateUUID()),void 0===data.arrayBuffers[this.array.buffer._uuid]&&(data.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const ic=new sr;function oc(t,e,n,r){this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===r}function ac(t){ki.call(this),this.type="SpriteMaterial",this.color=new Pi(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}let sc;Object.defineProperties(oc.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(t){this.data.needsUpdate=t}}}),Object.assign(oc.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(let i=0,e=this.data.count;i<e;i++)ic.x=this.getX(i),ic.y=this.getY(i),ic.z=this.getZ(i),ic.applyMatrix4(t),this.setXYZ(i,ic.x,ic.y,ic.z);return this},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this},setXYZW:function(t,e,n,r,o){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=o,this},clone:function(data){if(void 0===data){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const e=i*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[e+n])}return new Bi(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===data.interleavedBuffers&&(data.interleavedBuffers={}),void 0===data.interleavedBuffers[this.data.uuid]&&(data.interleavedBuffers[this.data.uuid]=this.data.clone(data)),new oc(data.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(data){if(void 0===data){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const e=i*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[e+n])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===data.interleavedBuffers&&(data.interleavedBuffers={}),void 0===data.interleavedBuffers[this.data.uuid]&&(data.interleavedBuffers[this.data.uuid]=this.data.toJSON(data)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}),ac.prototype=Object.create(ki.prototype),ac.prototype.constructor=ac,ac.prototype.isSpriteMaterial=!0,ac.prototype.copy=function(source){return ki.prototype.copy.call(this,source),this.color.copy(source.color),this.map=source.map,this.alphaMap=source.alphaMap,this.rotation=source.rotation,this.sizeAttenuation=source.sizeAttenuation,this};const cc=new sr,lc=new sr,uc=new sr,hc=new Xn,dc=new Xn,pc=new zr,fc=new sr,mc=new sr,gc=new sr,vc=new Xn,yc=new Xn,xc=new Xn;function bc(t){if(ci.call(this),this.type="Sprite",void 0===sc){sc=new ro;const t=new rc(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);sc.setIndex([0,1,2,0,2,3]),sc.setAttribute("position",new oc(t,3,0,!1)),sc.setAttribute("uv",new oc(t,2,3,!1))}this.geometry=sc,this.material=void 0!==t?t:new ac,this.center=new Xn(.5,.5)}function _c(t,e,n,r,o,c){hc.subVectors(t,n).addScalar(.5).multiply(r),void 0!==o?(dc.x=c*hc.x-o*hc.y,dc.y=o*hc.x+c*hc.y):dc.copy(hc),t.copy(e),t.x+=dc.x,t.y+=dc.y,t.applyMatrix4(pc)}bc.prototype=Object.assign(Object.create(ci.prototype),{constructor:bc,isSprite:!0,raycast:function(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),lc.setFromMatrixScale(this.matrixWorld),pc.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),uc.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&lc.multiplyScalar(-uc.z);const n=this.material.rotation;let r,o;0!==n&&(o=Math.cos(n),r=Math.sin(n));const c=this.center;_c(fc.set(-.5,-.5,0),uc,c,lc,r,o),_c(mc.set(.5,-.5,0),uc,c,lc,r,o),_c(gc.set(.5,.5,0),uc,c,lc,r,o),vc.set(0,0),yc.set(1,0),xc.set(1,1);let l=t.ray.intersectTriangle(fc,mc,gc,!1,cc);if(null===l&&(_c(mc.set(-.5,.5,0),uc,c,lc,r,o),yc.set(0,1),l=t.ray.intersectTriangle(fc,gc,mc,!1,cc),null===l))return;const h=t.ray.origin.distanceTo(cc);h<t.near||h>t.far||e.push({distance:h,point:cc.clone(),uv:Si.getUV(cc,fc,mc,gc,vc,yc,xc,new Xn),face:null,object:this})},copy:function(source){return ci.prototype.copy.call(this,source),void 0!==source.center&&this.center.copy(source.center),this.material=source.material,this}});const wc=new sr,Mc=new sr;function Sc(){ci.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function Tc(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),wo.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new zr,this.bindMatrixInverse=new zr}Sc.prototype=Object.assign(Object.create(ci.prototype),{constructor:Sc,isLOD:!0,copy:function(source){ci.prototype.copy.call(this,source,!1);const t=source.levels;for(let i=0,e=t.length;i<e;i++){const e=t[i];this.addLevel(e.object.clone(),e.distance)}return this.autoUpdate=source.autoUpdate,this},addLevel:function(object,t){void 0===t&&(t=0),t=Math.abs(t);const e=this.levels;let n;for(n=0;n<e.length&&!(t<e[n].distance);n++);return e.splice(n,0,{distance:t,object:object}),this.add(object),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(t){const e=this.levels;if(e.length>0){let i,n;for(i=1,n=e.length;i<n&&!(t<e[i].distance);i++);return e[i-1].object}return null},raycast:function(t,e){if(this.levels.length>0){wc.setFromMatrixPosition(this.matrixWorld);const n=t.ray.origin.distanceTo(wc);this.getObjectForDistance(n).raycast(t,e)}},update:function(t){const e=this.levels;if(e.length>1){wc.setFromMatrixPosition(t.matrixWorld),Mc.setFromMatrixPosition(this.matrixWorld);const n=wc.distanceTo(Mc)/t.zoom;let i,r;for(e[0].object.visible=!0,i=1,r=e.length;i<r&&n>=e[i].distance;i++)e[i-1].object.visible=!1,e[i].object.visible=!0;for(this._currentLevel=i-1;i<r;i++)e[i].object.visible=!1}},toJSON:function(meta){const data=ci.prototype.toJSON.call(this,meta);!1===this.autoUpdate&&(data.object.autoUpdate=!1),data.object.levels=[];const t=this.levels;for(let i=0,e=t.length;i<e;i++){const e=t[i];data.object.levels.push({object:e.object.uuid,distance:e.distance})}return data}}),Tc.prototype=Object.assign(Object.create(wo.prototype),{constructor:Tc,isSkinnedMesh:!0,copy:function(source){return wo.prototype.copy.call(this,source),this.bindMode=source.bindMode,this.bindMatrix.copy(source.bindMatrix),this.bindMatrixInverse.copy(source.bindMatrixInverse),this.skeleton=source.skeleton,this},bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const t=new rr,e=this.geometry.attributes.skinWeight;for(let i=0,n=e.count;i<n;i++){t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.w=e.getW(i);const n=1/t.manhattanLength();n!==1/0?t.multiplyScalar(n):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){wo.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(){const t=new sr,e=new rr,n=new rr,r=new sr,o=new zr;return function(c,l){const h=this.skeleton,d=this.geometry;e.fromBufferAttribute(d.attributes.skinIndex,c),n.fromBufferAttribute(d.attributes.skinWeight,c),t.fromBufferAttribute(d.attributes.position,c).applyMatrix4(this.bindMatrix),l.set(0,0,0);for(let i=0;i<4;i++){const c=n.getComponent(i);if(0!==c){const n=e.getComponent(i);o.multiplyMatrices(h.bones[n].matrixWorld,h.boneInverses[n]),l.addScaledVector(r.copy(t).applyMatrix4(o),c)}}return l.applyMatrix4(this.bindMatrixInverse)}}()});const Ec=new zr,Ac=new zr;function Lc(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(let i=0,t=this.bones.length;i<t;i++)this.boneInverses.push(new zr)}}function Cc(){ci.call(this),this.type="Bone"}Object.assign(Lc.prototype,{calculateInverses:function(){this.boneInverses=[];for(let i=0,t=this.bones.length;i<t;i++){const t=new zr;this.bones[i]&&t.getInverse(this.bones[i].matrixWorld),this.boneInverses.push(t)}},pose:function(){for(let i=0,t=this.bones.length;i<t;i++){const t=this.bones[i];t&&t.matrixWorld.getInverse(this.boneInverses[i])}for(let i=0,t=this.bones.length;i<t;i++){const t=this.bones[i];t&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}},update:function(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let i=0,r=t.length;i<r;i++){const r=t[i]?t[i].matrixWorld:Ac;Ec.multiplyMatrices(r,e[i]),Ec.toArray(n,16*i)}void 0!==r&&(r.needsUpdate=!0)},clone:function(){return new Lc(this.bones,this.boneInverses)},getBoneByName:function(t){for(let i=0,e=this.bones.length;i<e;i++){const e=this.bones[i];if(e.name===t)return e}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}}),Cc.prototype=Object.assign(Object.create(ci.prototype),{constructor:Cc,isBone:!0});const Rc=new zr,Pc=new zr,Oc=[],Ic=new wo;function kc(t,e,n){wo.call(this,t,e),this.instanceMatrix=new Bi(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}function Nc(t){ki.call(this),this.type="LineBasicMaterial",this.color=new Pi(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(t)}kc.prototype=Object.assign(Object.create(wo.prototype),{constructor:kc,isInstancedMesh:!0,copy:function(source){return wo.prototype.copy.call(this,source),this.instanceMatrix.copy(source.instanceMatrix),this.count=source.count,this},setColorAt:function(t,e){null===this.instanceColor&&(this.instanceColor=new Bi(new Float32Array(3*this.count),3)),e.toArray(this.instanceColor.array,3*t)},getMatrixAt:function(t,e){e.fromArray(this.instanceMatrix.array,16*t)},raycast:function(t,e){const n=this.matrixWorld,r=this.count;if(Ic.geometry=this.geometry,Ic.material=this.material,void 0!==Ic.material)for(let o=0;o<r;o++){this.getMatrixAt(o,Rc),Pc.multiplyMatrices(n,Rc),Ic.matrixWorld=Pc,Ic.raycast(t,Oc);for(let i=0,t=Oc.length;i<t;i++){const t=Oc[i];t.instanceId=o,t.object=this,e.push(t)}Oc.length=0}},setMatrixAt:function(t,e){e.toArray(this.instanceMatrix.array,16*t)},updateMorphTargets:function(){}}),Nc.prototype=Object.create(ki.prototype),Nc.prototype.constructor=Nc,Nc.prototype.isLineBasicMaterial=!0,Nc.prototype.copy=function(source){return ki.prototype.copy.call(this,source),this.color.copy(source.color),this.linewidth=source.linewidth,this.linecap=source.linecap,this.linejoin=source.linejoin,this.morphTargets=source.morphTargets,this};const Dc=new sr,zc=new sr,Bc=new zr,Fc=new Dr,jc=new Lr;function Uc(t,e,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),ci.call(this),this.type="Line",this.geometry=void 0!==t?t:new ro,this.material=void 0!==e?e:new Nc,this.updateMorphTargets()}Uc.prototype=Object.assign(Object.create(ci.prototype),{constructor:Uc,isLine:!0,copy:function(source){return ci.prototype.copy.call(this,source),this.material=source.material,this.geometry=source.geometry,this},computeLineDistances:function(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[0];for(let i=1,t=e.count;i<t;i++)Dc.fromBufferAttribute(e,i-1),zc.fromBufferAttribute(e,i),n[i]=n[i-1],n[i]+=Dc.distanceTo(zc);t.setAttribute("lineDistance",new qi(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){const e=t.vertices,n=t.lineDistances;n[0]=0;for(let i=1,t=e.length;i<t;i++)n[i]=n[i-1],n[i]+=e[i-1].distanceTo(e[i])}return this},raycast:function(t,e){const n=this.geometry,r=this.matrixWorld,o=t.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),jc.copy(n.boundingSphere),jc.applyMatrix4(r),jc.radius+=o,!1===t.ray.intersectsSphere(jc))return;Bc.getInverse(r),Fc.copy(t.ray).applyMatrix4(Bc);const c=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=c*c,h=new sr,d=new sr,f=new sr,m=new sr,v=this&&this.isLineSegments?2:1;if(n.isBufferGeometry){const r=n.index,o=n.attributes.position.array;if(null!==r){const n=r.array;for(let i=0,r=n.length-1;i<r;i+=v){const a=n[i],b=n[i+1];if(h.fromArray(o,3*a),d.fromArray(o,3*b),Fc.distanceSqToSegment(h,d,m,f)>l)continue;m.applyMatrix4(this.matrixWorld);const r=t.ray.origin.distanceTo(m);r<t.near||r>t.far||e.push({distance:r,point:f.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}else for(let i=0,n=o.length/3-1;i<n;i+=v){if(h.fromArray(o,3*i),d.fromArray(o,3*i+3),Fc.distanceSqToSegment(h,d,m,f)>l)continue;m.applyMatrix4(this.matrixWorld);const n=t.ray.origin.distanceTo(m);n<t.near||n>t.far||e.push({distance:n,point:f.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}else if(n.isGeometry){const r=n.vertices,o=r.length;for(let i=0;i<o-1;i+=v){if(Fc.distanceSqToSegment(r[i],r[i+1],m,f)>l)continue;m.applyMatrix4(this.matrixWorld);const n=t.ray.origin.distanceTo(m);n<t.near||n>t.far||e.push({distance:n,point:f.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const Gc=new sr,Hc=new sr;function Vc(t,e){Uc.call(this,t,e),this.type="LineSegments"}function Wc(t,e){Uc.call(this,t,e),this.type="LineLoop"}function qc(t){ki.call(this),this.type="PointsMaterial",this.color=new Pi(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}Vc.prototype=Object.assign(Object.create(Uc.prototype),{constructor:Vc,isLineSegments:!0,computeLineDistances:function(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[];for(let i=0,t=e.count;i<t;i+=2)Gc.fromBufferAttribute(e,i),Hc.fromBufferAttribute(e,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+Gc.distanceTo(Hc);t.setAttribute("lineDistance",new qi(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){const e=t.vertices,n=t.lineDistances;for(let i=0,t=e.length;i<t;i+=2)Gc.copy(e[i]),Hc.copy(e[i+1]),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+Gc.distanceTo(Hc)}return this}}),Wc.prototype=Object.assign(Object.create(Uc.prototype),{constructor:Wc,isLineLoop:!0}),qc.prototype=Object.create(ki.prototype),qc.prototype.constructor=qc,qc.prototype.isPointsMaterial=!0,qc.prototype.copy=function(source){return ki.prototype.copy.call(this,source),this.color.copy(source.color),this.map=source.map,this.alphaMap=source.alphaMap,this.size=source.size,this.sizeAttenuation=source.sizeAttenuation,this.morphTargets=source.morphTargets,this};const Zc=new zr,$c=new Dr,Yc=new Lr,Xc=new sr;function Jc(t,e){ci.call(this),this.type="Points",this.geometry=void 0!==t?t:new ro,this.material=void 0!==e?e:new qc,this.updateMorphTargets()}function Qc(t,e,n,r,o,c,object){const l=$c.distanceSqToPoint(t);if(l<n){const n=new sr;$c.closestPointToPoint(t,n),n.applyMatrix4(r);const h=o.ray.origin.distanceTo(n);if(h<o.near||h>o.far)return;c.push({distance:h,distanceToRay:Math.sqrt(l),point:n,index:e,face:null,object:object})}}function Kc(video,t,e,n,r,o,c,l,h){nr.call(this,video,t,e,n,r,o,c,l,h),this.format=void 0!==c?c:Zt,this.minFilter=void 0!==o?o:Ct,this.magFilter=void 0!==r?r:Ct,this.generateMipmaps=!1;const d=this;"requestVideoFrameCallback"in video&&video.requestVideoFrameCallback((function t(){d.needsUpdate=!0,video.requestVideoFrameCallback(t)}))}function tl(t,e,n,r,o,c,l,h,d,f,m,v){nr.call(this,null,c,l,h,d,f,r,o,m,v),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function el(canvas,t,e,n,r,o,c,l,h){nr.call(this,canvas,t,e,n,r,o,c,l,h),this.needsUpdate=!0}function nl(t,e,n,r,o,c,l,h,d,f){if((f=void 0!==f?f:Qt)!==Qt&&f!==Kt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&f===Qt&&(n=zt),void 0===n&&f===Kt&&(n=Wt),nr.call(this,null,r,o,c,l,h,f,n,d),this.image={width:t,height:e},this.magFilter=void 0!==l?l:St,this.minFilter=void 0!==h?h:St,this.flipY=!1,this.generateMipmaps=!1}Jc.prototype=Object.assign(Object.create(ci.prototype),{constructor:Jc,isPoints:!0,copy:function(source){return ci.prototype.copy.call(this,source),this.material=source.material,this.geometry=source.geometry,this},raycast:function(t,e){const n=this.geometry,r=this.matrixWorld,o=t.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Yc.copy(n.boundingSphere),Yc.applyMatrix4(r),Yc.radius+=o,!1===t.ray.intersectsSphere(Yc))return;Zc.getInverse(r),$c.copy(t.ray).applyMatrix4(Zc);const c=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=c*c;if(n.isBufferGeometry){const o=n.index,c=n.attributes.position.array;if(null!==o){const n=o.array;for(let i=0,o=n.length;i<o;i++){const a=n[i];Xc.fromArray(c,3*a),Qc(Xc,a,l,r,t,e,this)}}else for(let i=0,n=c.length/3;i<n;i++)Xc.fromArray(c,3*i),Qc(Xc,i,l,r,t,e,this)}else{const o=n.vertices;for(let i=0,n=o.length;i<n;i++)Qc(o[i],i,l,r,t,e,this)}},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}),Kc.prototype=Object.assign(Object.create(nr.prototype),{constructor:Kc,isVideoTexture:!0,update:function(){const video=this.image;!1==="requestVideoFrameCallback"in video&&video.readyState>=video.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),tl.prototype=Object.create(nr.prototype),tl.prototype.constructor=tl,tl.prototype.isCompressedTexture=!0,el.prototype=Object.create(nr.prototype),el.prototype.constructor=el,el.prototype.isCanvasTexture=!0,nl.prototype=Object.create(nr.prototype),nl.prototype.constructor=nl,nl.prototype.isDepthTexture=!0;class rl extends ro{constructor(t){super(),this.type="WireframeGeometry";const e=[],n=[0,0],r={},o=["a","b","c"];if(t&&t.isGeometry){const c=t.faces;for(let i=0,t=c.length;i<t;i++){const t=c[i];for(let e=0;e<3;e++){const c=t[o[e]],l=t[o[(e+1)%3]];n[0]=Math.min(c,l),n[1]=Math.max(c,l);const h=n[0]+","+n[1];void 0===r[h]&&(r[h]={index1:n[0],index2:n[1]})}}for(const n in r){const o=r[n];let c=t.vertices[o.index1];e.push(c.x,c.y,c.z),c=t.vertices[o.index2],e.push(c.x,c.y,c.z)}}else if(t&&t.isBufferGeometry){const o=new sr;if(null!==t.index){const c=t.attributes.position,l=t.index;let h=t.groups;0===h.length&&(h=[{start:0,count:l.count,materialIndex:0}]);for(let t=0,ol=h.length;t<ol;++t){const e=h[t],o=e.start;for(let i=o,t=o+e.count;i<t;i+=3)for(let t=0;t<3;t++){const e=l.getX(i+t),o=l.getX(i+(t+1)%3);n[0]=Math.min(e,o),n[1]=Math.max(e,o);const c=n[0]+","+n[1];void 0===r[c]&&(r[c]={index1:n[0],index2:n[1]})}}for(const t in r){const n=r[t];o.fromBufferAttribute(c,n.index1),e.push(o.x,o.y,o.z),o.fromBufferAttribute(c,n.index2),e.push(o.x,o.y,o.z)}}else{const n=t.attributes.position;for(let i=0,t=n.count/3;i<t;i++)for(let t=0;t<3;t++){const r=3*i+t;o.fromBufferAttribute(n,r),e.push(o.x,o.y,o.z);const c=3*i+(t+1)%3;o.fromBufferAttribute(n,c),e.push(o.x,o.y,o.z)}}}this.setAttribute("position",new qi(e,3))}}function il(t,e,n){Co.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new al(t,e,n)),this.mergeVertices()}function al(t,e,n){ro.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};const r=[],o=[],c=[],l=[],h=1e-5,d=new sr,f=new sr,m=new sr,v=new sr,y=new sr;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const x=e+1;for(let i=0;i<=n;i++){const r=i/n;for(let n=0;n<=e;n++){const u=n/e;t(u,r,f),o.push(f.x,f.y,f.z),u-h>=0?(t(u-h,r,m),v.subVectors(f,m)):(t(u+h,r,m),v.subVectors(m,f)),r-h>=0?(t(u,r-h,m),y.subVectors(f,m)):(t(u,r+h,m),y.subVectors(m,f)),d.crossVectors(v,y).normalize(),c.push(d.x,d.y,d.z),l.push(u,r)}}for(let i=0;i<n;i++)for(let t=0;t<e;t++){const a=i*x+t,b=i*x+t+1,e=(i+1)*x+t+1,n=(i+1)*x+t;r.push(a,b,n),r.push(b,e,n)}this.setIndex(r),this.setAttribute("position",new qi(o,3)),this.setAttribute("normal",new qi(c,3)),this.setAttribute("uv",new qi(l,2))}il.prototype=Object.create(Co.prototype),il.prototype.constructor=il,al.prototype=Object.create(ro.prototype),al.prototype.constructor=al;class sl extends Co{constructor(t,e,n,r){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r},this.fromBufferGeometry(new cl(t,e,n,r)),this.mergeVertices()}}class cl extends ro{constructor(t,e,n,r){super(),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r},n=n||1;const o=[],c=[];function l(a,b,t,e){const n=Math.pow(2,e),r=[];for(let i=0;i<=n;i++){r[i]=[];const e=a.clone().lerp(t,i/n),o=b.clone().lerp(t,i/n),c=n-i;for(let t=0;t<=c;t++)r[i][t]=0===t&&i===n?e:e.clone().lerp(o,t/c)}for(let i=0;i<n;i++)for(let t=0;t<2*(n-i)-1;t++){const e=Math.floor(t/2);t%2==0?(h(r[i][e+1]),h(r[i+1][e]),h(r[i][e])):(h(r[i][e+1]),h(r[i+1][e+1]),h(r[i+1][e]))}}function h(t){o.push(t.x,t.y,t.z)}function d(e,n){const r=3*e;n.x=t[r+0],n.y=t[r+1],n.z=t[r+2]}function f(t,e,n,r){r<0&&1===t.x&&(c[e]=t.x-1),0===n.x&&0===n.z&&(c[e]=r/2/Math.PI+.5)}function m(t){return Math.atan2(t.z,-t.x)}!function(t){const a=new sr,b=new sr,n=new sr;for(let i=0;i<e.length;i+=3)d(e[i+0],a),d(e[i+1],b),d(e[i+2],n),l(a,b,n,t)}(r=r||0),function(t){const e=new sr;for(let i=0;i<o.length;i+=3)e.x=o[i+0],e.y=o[i+1],e.z=o[i+2],e.normalize().multiplyScalar(t),o[i+0]=e.x,o[i+1]=e.y,o[i+2]=e.z}(n),function(){const t=new sr;for(let i=0;i<o.length;i+=3){t.x=o[i+0],t.y=o[i+1],t.z=o[i+2];const u=m(t)/2/Math.PI+.5,n=(e=t,Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5);c.push(u,1-n)}var e;(function(){const a=new sr,b=new sr,t=new sr,e=new sr,n=new Xn,r=new Xn,l=new Xn;for(let i=0,h=0;i<o.length;i+=9,h+=6){a.set(o[i+0],o[i+1],o[i+2]),b.set(o[i+3],o[i+4],o[i+5]),t.set(o[i+6],o[i+7],o[i+8]),n.set(c[h+0],c[h+1]),r.set(c[h+2],c[h+3]),l.set(c[h+4],c[h+5]),e.copy(a).add(b).add(t).divideScalar(3);const d=m(e);f(n,h+0,a,d),f(r,h+2,b,d),f(l,h+4,t,d)}})(),function(){for(let i=0;i<c.length;i+=6){const t=c[i+0],e=c[i+2],n=c[i+4],r=Math.max(t,e,n),o=Math.min(t,e,n);r>.9&&o<.1&&(t<.2&&(c[i+0]+=1),e<.2&&(c[i+2]+=1),n<.2&&(c[i+4]+=1))}}()}(),this.setAttribute("position",new qi(o,3)),this.setAttribute("normal",new qi(o.slice(),3)),this.setAttribute("uv",new qi(c,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}}class ll extends Co{constructor(t,e){super(),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new hl(t,e)),this.mergeVertices()}}class hl extends cl{constructor(t,e){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}}class pl extends Co{constructor(t,e){super(),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new fl(t,e)),this.mergeVertices()}}class fl extends cl{constructor(t,e){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}}class ml extends Co{constructor(t,e){super(),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new gl(t,e)),this.mergeVertices()}}class gl extends cl{constructor(t,e){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}}class vl extends Co{constructor(t,e){super(),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new yl(t,e)),this.mergeVertices()}}class yl extends cl{constructor(t,e){const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}}class xl extends Co{constructor(path,t,e,n,r,o){super(),this.type="TubeGeometry",this.parameters={path:path,tubularSegments:t,radius:e,radialSegments:n,closed:r},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");const c=new bl(path,t,e,n,r);this.tangents=c.tangents,this.normals=c.normals,this.binormals=c.binormals,this.fromBufferGeometry(c),this.mergeVertices()}}class bl extends ro{constructor(path,t,e,n,r){super(),this.type="TubeBufferGeometry",this.parameters={path:path,tubularSegments:t,radius:e,radialSegments:n,closed:r},t=t||64,e=e||1,n=n||8,r=r||!1;const o=path.computeFrenetFrames(t,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const c=new sr,l=new sr,h=new Xn;let d=new sr;const f=[],m=[],v=[],y=[];function x(i){d=path.getPointAt(i/t,d);const r=o.normals[i],h=o.binormals[i];for(let t=0;t<=n;t++){const o=t/n*Math.PI*2,v=Math.sin(o),y=-Math.cos(o);l.x=y*r.x+v*h.x,l.y=y*r.y+v*h.y,l.z=y*r.z+v*h.z,l.normalize(),m.push(l.x,l.y,l.z),c.x=d.x+e*l.x,c.y=d.y+e*l.y,c.z=d.z+e*l.z,f.push(c.x,c.y,c.z)}}!function(){for(let i=0;i<t;i++)x(i);x(!1===r?t:0),function(){for(let i=0;i<=t;i++)for(let e=0;e<=n;e++)h.x=i/t,h.y=e/n,v.push(h.x,h.y)}(),function(){for(let e=1;e<=t;e++)for(let i=1;i<=n;i++){const a=(n+1)*(e-1)+(i-1),b=(n+1)*e+(i-1),t=(n+1)*e+i,r=(n+1)*(e-1)+i;y.push(a,b,r),y.push(b,t,r)}}()}(),this.setIndex(y),this.setAttribute("position",new qi(f,3)),this.setAttribute("normal",new qi(m,3)),this.setAttribute("uv",new qi(v,2))}toJSON(){const data=ro.prototype.toJSON.call(this);return data.path=this.parameters.path.toJSON(),data}}class _l extends Co{constructor(t,e,n,r,p,q,o){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:p,q:q},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new wl(t,e,n,r,p,q)),this.mergeVertices()}}class wl extends ro{constructor(t,e,n,r,p,q){super(),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:p,q:q},t=t||1,e=e||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,p=p||2,q=q||3;const o=[],c=[],l=[],h=[],d=new sr,f=new sr,m=new sr,v=new sr,y=new sr,x=new sr,_=new sr;for(let i=0;i<=n;++i){const u=i/n*p*Math.PI*2;w(u,p,q,t,m),w(u+.01,p,q,t,v),x.subVectors(v,m),_.addVectors(v,m),y.crossVectors(x,_),_.crossVectors(y,x),y.normalize(),_.normalize();for(let t=0;t<=r;++t){const o=t/r*Math.PI*2,v=-e*Math.cos(o),x=e*Math.sin(o);d.x=m.x+(v*_.x+x*y.x),d.y=m.y+(v*_.y+x*y.y),d.z=m.z+(v*_.z+x*y.z),c.push(d.x,d.y,d.z),f.subVectors(d,m).normalize(),l.push(f.x,f.y,f.z),h.push(i/n),h.push(t/r)}}for(let t=1;t<=n;t++)for(let i=1;i<=r;i++){const a=(r+1)*(t-1)+(i-1),b=(r+1)*t+(i-1),e=(r+1)*t+i,n=(r+1)*(t-1)+i;o.push(a,b,n),o.push(b,e,n)}function w(u,p,q,t,e){const n=Math.cos(u),r=Math.sin(u),o=q/p*u,c=Math.cos(o);e.x=t*(2+c)*.5*n,e.y=t*(2+c)*r*.5,e.z=t*Math.sin(o)*.5}this.setIndex(o),this.setAttribute("position",new qi(c,3)),this.setAttribute("normal",new qi(l,3)),this.setAttribute("uv",new qi(h,2))}}class Ml extends Co{constructor(t,e,n,r,o){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:o},this.fromBufferGeometry(new Sl(t,e,n,r,o)),this.mergeVertices()}}class Sl extends ro{constructor(t,e,n,r,o){super(),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:o},t=t||1,e=e||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,o=o||2*Math.PI;const c=[],l=[],h=[],d=[],f=new sr,m=new sr,v=new sr;for(let c=0;c<=n;c++)for(let i=0;i<=r;i++){const u=i/r*o,y=c/n*Math.PI*2;m.x=(t+e*Math.cos(y))*Math.cos(u),m.y=(t+e*Math.cos(y))*Math.sin(u),m.z=e*Math.sin(y),l.push(m.x,m.y,m.z),f.x=t*Math.cos(u),f.y=t*Math.sin(u),v.subVectors(m,f).normalize(),h.push(v.x,v.y,v.z),d.push(i/r),d.push(c/n)}for(let t=1;t<=n;t++)for(let i=1;i<=r;i++){const a=(r+1)*t+i-1,b=(r+1)*(t-1)+i-1,e=(r+1)*(t-1)+i,n=(r+1)*t+i;c.push(a,b,n),c.push(b,e,n)}this.setIndex(c),this.setAttribute("position",new qi(l,3)),this.setAttribute("normal",new qi(h,3)),this.setAttribute("uv",new qi(d,2))}}const Tl=function(data,t,e){e=e||2;const n=t&&t.length,r=n?t[0]*e:data.length;let o=El(data,0,r,e,!0);const c=[];if(!o||o.next===o.prev)return c;let l,h,d,f,m,v,y;if(n&&(o=function(data,t,e,n){const r=[];let i,o,c,l,h;for(i=0,o=t.length;i<o;i++)c=t[i]*n,l=i<o-1?t[i+1]*n:data.length,h=El(data,c,l,n,!1),h===h.next&&(h.steiner=!0),r.push(zl(h));for(r.sort(Il),i=0;i<r.length;i++)kl(r[i],e),e=Al(e,e.next);return e}(data,t,o,e)),data.length>80*e){l=d=data[0],h=f=data[1];for(let i=e;i<r;i+=e)m=data[i],v=data[i+1],m<l&&(l=m),v<h&&(h=v),m>d&&(d=m),v>f&&(f=v);y=Math.max(d-l,f-h),y=0!==y?1/y:0}return Ll(o,c,e,l,h,y),c};function El(data,t,e,n,r){let i,o;if(r===function(data,t,e,n){let r=0;for(let i=t,o=e-n;i<e;i+=n)r+=(data[o]-data[i])*(data[i+1]+data[o+1]),o=i;return r}(data,t,e,n)>0)for(i=t;i<e;i+=n)o=ql(i,data[i],data[i+1],o);else for(i=e-n;i>=t;i-=n)o=ql(i,data[i],data[i+1],o);return o&&jl(o,o.next)&&(Zl(o),o=o.next),o}function Al(t,e){if(!t)return t;e||(e=t);let n,p=t;do{if(n=!1,p.steiner||!jl(p,p.next)&&0!==area(p.prev,p,p.next))p=p.next;else{if(Zl(p),p=e=p.prev,p===p.next)break;n=!0}}while(n||p!==e);return e}function Ll(t,e,n,r,o,c,l){if(!t)return;!l&&c&&function(t,e,n,r){let p=t;do{null===p.z&&(p.z=Dl(p.x,p.y,e,n,r)),p.prevZ=p.prev,p.nextZ=p.next,p=p.next}while(p!==t);p.prevZ.nextZ=null,p.prevZ=null,function(t){let i,p,q,e,n,r,o,c,l=1;do{for(p=t,t=null,n=null,r=0;p;){for(r++,q=p,o=0,i=0;i<l&&(o++,q=q.nextZ,q);i++);for(c=l;o>0||c>0&&q;)0!==o&&(0===c||!q||p.z<=q.z)?(e=p,p=p.nextZ,o--):(e=q,q=q.nextZ,c--),n?n.nextZ=e:t=e,e.prevZ=n,n=e;p=q}n.nextZ=null,l*=2}while(r>1)}(p)}(t,r,o,c);let h,d,f=t;for(;t.prev!==t.next;)if(h=t.prev,d=t.next,c?Rl(t,r,o,c):Cl(t))e.push(h.i/n),e.push(t.i/n),e.push(d.i/n),Zl(t),t=d.next,f=d.next;else if((t=d)===f){l?1===l?Ll(t=Pl(Al(t),e,n),e,n,r,o,c,2):2===l&&Ol(t,e,n,r,o,c):Ll(Al(t),e,n,r,o,c,1);break}}function Cl(t){const a=t.prev,b=t,e=t.next;if(area(a,b,e)>=0)return!1;let p=t.next.next;for(;p!==t.prev;){if(Bl(a.x,a.y,b.x,b.y,e.x,e.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Rl(t,e,n,r){const a=t.prev,b=t,o=t.next;if(area(a,b,o)>=0)return!1;const c=a.x<b.x?a.x<o.x?a.x:o.x:b.x<o.x?b.x:o.x,l=a.y<b.y?a.y<o.y?a.y:o.y:b.y<o.y?b.y:o.y,h=a.x>b.x?a.x>o.x?a.x:o.x:b.x>o.x?b.x:o.x,d=a.y>b.y?a.y>o.y?a.y:o.y:b.y>o.y?b.y:o.y,f=Dl(c,l,e,n,r),m=Dl(h,d,e,n,r);let p=t.prevZ,v=t.nextZ;for(;p&&p.z>=f&&v&&v.z<=m;){if(p!==t.prev&&p!==t.next&&Bl(a.x,a.y,b.x,b.y,o.x,o.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,v!==t.prev&&v!==t.next&&Bl(a.x,a.y,b.x,b.y,o.x,o.y,v.x,v.y)&&area(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(;p&&p.z>=f;){if(p!==t.prev&&p!==t.next&&Bl(a.x,a.y,b.x,b.y,o.x,o.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;v&&v.z<=m;){if(v!==t.prev&&v!==t.next&&Bl(a.x,a.y,b.x,b.y,o.x,o.y,v.x,v.y)&&area(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function Pl(t,e,n){let p=t;do{const a=p.prev,b=p.next.next;!jl(a,b)&&Ul(a,p,p.next,b)&&Vl(a,b)&&Vl(b,a)&&(e.push(a.i/n),e.push(p.i/n),e.push(b.i/n),Zl(p),Zl(p.next),p=t=b),p=p.next}while(p!==t);return Al(p)}function Ol(t,e,n,r,o,c){let a=t;do{let b=a.next.next;for(;b!==a.prev;){if(a.i!==b.i&&Fl(a,b)){let t=Wl(a,b);return a=Al(a,a.next),t=Al(t,t.next),Ll(a,e,n,r,o,c),void Ll(t,e,n,r,o,c)}b=b.next}a=a.next}while(a!==t)}function Il(a,b){return a.x-b.x}function kl(t,e){if(e=function(t,e){let p=e;const n=t.x,r=t.y;let o,c=-1/0;do{if(r<=p.y&&r>=p.next.y&&p.next.y!==p.y){const t=p.x+(r-p.y)*(p.next.x-p.x)/(p.next.y-p.y);if(t<=n&&t>c){if(c=t,t===n){if(r===p.y)return p;if(r===p.next.y)return p.next}o=p.x<p.next.x?p:p.next}}p=p.next}while(p!==e);if(!o)return null;if(n===c)return o;const l=o,h=o.x,d=o.y;let f,m=1/0;p=o;do{n>=p.x&&p.x>=h&&n!==p.x&&Bl(r<d?n:c,r,h,d,r<d?c:n,r,p.x,p.y)&&(f=Math.abs(r-p.y)/(n-p.x),Vl(p,t)&&(f<m||f===m&&(p.x>o.x||p.x===o.x&&Nl(o,p)))&&(o=p,m=f)),p=p.next}while(p!==l);return o}(t,e)){const b=Wl(e,t);Al(e,e.next),Al(b,b.next)}}function Nl(t,p){return area(t.prev,t,p.prev)<0&&area(p.next,t,t.next)<0}function Dl(t,e,n,r,o){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*o)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*o)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function zl(t){let p=t,e=t;do{(p.x<e.x||p.x===e.x&&p.y<e.y)&&(e=p),p=p.next}while(p!==t);return e}function Bl(t,e,n,r,o,c,l,h){return(o-l)*(e-h)-(t-l)*(c-h)>=0&&(t-l)*(r-h)-(n-l)*(e-h)>=0&&(n-l)*(c-h)-(o-l)*(r-h)>=0}function Fl(a,b){return a.next.i!==b.i&&a.prev.i!==b.i&&!function(a,b){let p=a;do{if(p.i!==a.i&&p.next.i!==a.i&&p.i!==b.i&&p.next.i!==b.i&&Ul(p,p.next,a,b))return!0;p=p.next}while(p!==a);return!1}(a,b)&&(Vl(a,b)&&Vl(b,a)&&function(a,b){let p=a,t=!1;const e=(a.x+b.x)/2,n=(a.y+b.y)/2;do{p.y>n!=p.next.y>n&&p.next.y!==p.y&&e<(p.next.x-p.x)*(n-p.y)/(p.next.y-p.y)+p.x&&(t=!t),p=p.next}while(p!==a);return t}(a,b)&&(area(a.prev,a,b.prev)||area(a,b.prev,b))||jl(a,b)&&area(a.prev,a,a.next)>0&&area(b.prev,b,b.next)>0)}function area(p,q,t){return(q.y-p.y)*(t.x-q.x)-(q.x-p.x)*(t.y-q.y)}function jl(t,e){return t.x===e.x&&t.y===e.y}function Ul(t,e,n,r){const o=Hl(area(t,e,n)),c=Hl(area(t,e,r)),l=Hl(area(n,r,t)),h=Hl(area(n,r,e));return o!==c&&l!==h||(!(0!==o||!Gl(t,n,e))||(!(0!==c||!Gl(t,r,e))||(!(0!==l||!Gl(n,t,r))||!(0!==h||!Gl(n,e,r)))))}function Gl(p,q,t){return q.x<=Math.max(p.x,t.x)&&q.x>=Math.min(p.x,t.x)&&q.y<=Math.max(p.y,t.y)&&q.y>=Math.min(p.y,t.y)}function Hl(t){return t>0?1:t<0?-1:0}function Vl(a,b){return area(a.prev,a,a.next)<0?area(a,b,a.next)>=0&&area(a,a.prev,b)>=0:area(a,b,a.prev)<0||area(a,a.next,b)<0}function Wl(a,b){const t=new $l(a.i,a.x,a.y),e=new $l(b.i,b.x,b.y),n=a.next,r=b.prev;return a.next=b,b.prev=a,t.next=n,n.prev=t,e.next=t,t.prev=e,r.next=e,e.prev=r,e}function ql(i,t,e,n){const p=new $l(i,t,e);return n?(p.next=n.next,p.prev=n,n.next.prev=p,n.next=p):(p.prev=p,p.next=p),p}function Zl(p){p.next.prev=p.prev,p.prev.next=p.next,p.prevZ&&(p.prevZ.nextZ=p.nextZ),p.nextZ&&(p.nextZ.prevZ=p.prevZ)}function $l(i,t,e){this.i=i,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}const Yl={area:function(t){const e=t.length;let a=0;for(let p=e-1,q=0;q<e;p=q++)a+=t[p].x*t[q].y-t[q].x*t[p].y;return.5*a},isClockWise:function(t){return Yl.area(t)<0},triangulateShape:function(t,e){const n=[],r=[],o=[];Xl(t),Jl(n,t);let c=t.length;e.forEach(Xl);for(let i=0;i<e.length;i++)r.push(c),c+=e[i].length,Jl(n,e[i]);const l=Tl(n,r);for(let i=0;i<l.length;i+=3)o.push(l.slice(i,i+3));return o}};function Xl(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Jl(t,e){for(let i=0;i<e.length;i++)t.push(e[i].x),t.push(e[i].y)}class Ql extends Co{constructor(t,e){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new Kl(t,e)),this.mergeVertices()}toJSON(){const data=super.toJSON();return eu(this.parameters.shapes,this.parameters.options,data)}}class Kl extends ro{constructor(t,e){super(),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,r=[],o=[];for(let i=0,e=t.length;i<e;i++){c(t[i])}function c(t){const c=[],l=void 0!==e.curveSegments?e.curveSegments:12,h=void 0!==e.steps?e.steps:1;let d=void 0!==e.depth?e.depth:100,f=void 0===e.bevelEnabled||e.bevelEnabled,m=void 0!==e.bevelThickness?e.bevelThickness:6,v=void 0!==e.bevelSize?e.bevelSize:m-2,y=void 0!==e.bevelOffset?e.bevelOffset:0,x=void 0!==e.bevelSegments?e.bevelSegments:3;const _=e.extrudePath,w=void 0!==e.UVGenerator?e.UVGenerator:tu;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),d=e.amount);let M,S,T,E,A,L=!1;_&&(M=_.getSpacedPoints(h),L=!0,f=!1,S=_.computeFrenetFrames(h,!1),T=new sr,E=new sr,A=new sr),f||(x=0,m=0,v=0,y=0);const C=t.extractPoints(l);let R=C.shape;const P=C.holes;if(!Yl.isClockWise(R)){R=R.reverse();for(let t=0,e=P.length;t<e;t++){const e=P[t];Yl.isClockWise(e)&&(P[t]=e.reverse())}}const O=Yl.triangulateShape(R,P),I=R;for(let t=0,e=P.length;t<e;t++){const e=P[t];R=R.concat(e)}function k(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}const N=R.length,D=O.length;function z(t,e,n){let r,o,c;const l=t.x-e.x,h=t.y-e.y,d=n.x-t.x,f=n.y-t.y,m=l*l+h*h,v=l*f-h*d;if(Math.abs(v)>Number.EPSILON){const v=Math.sqrt(m),y=Math.sqrt(d*d+f*f),x=e.x-h/v,_=e.y+l/v,w=((n.x-f/y-x)*f-(n.y+d/y-_)*d)/(l*f-h*d);r=x+l*w-t.x,o=_+h*w-t.y;const M=r*r+o*o;if(M<=2)return new Xn(r,o);c=Math.sqrt(M/2)}else{let t=!1;l>Number.EPSILON?d>Number.EPSILON&&(t=!0):l<-Number.EPSILON?d<-Number.EPSILON&&(t=!0):Math.sign(h)===Math.sign(f)&&(t=!0),t?(r=-h,o=l,c=Math.sqrt(m)):(r=l,o=h,c=Math.sqrt(m/2))}return new Xn(r/c,o/c)}const B=[];for(let i=0,t=I.length,e=t-1,n=i+1;i<t;i++,e++,n++)e===t&&(e=0),n===t&&(n=0),B[i]=z(I[i],I[e],I[n]);const F=[];let j,U=B.concat();for(let t=0,e=P.length;t<e;t++){const e=P[t];j=[];for(let i=0,t=e.length,n=t-1,r=i+1;i<t;i++,n++,r++)n===t&&(n=0),r===t&&(r=0),j[i]=z(e[i],e[n],e[r]);F.push(j),U=U.concat(j)}for(let b=0;b<x;b++){const t=b/x,e=m*Math.cos(t*Math.PI/2),n=v*Math.sin(t*Math.PI/2)+y;for(let i=0,t=I.length;i<t;i++){const t=k(I[i],B[i],n);V(t.x,t.y,-e)}for(let t=0,r=P.length;t<r;t++){const r=P[t];j=F[t];for(let i=0,t=r.length;i<t;i++){const t=k(r[i],j[i],n);V(t.x,t.y,-e)}}}const G=v+y;for(let i=0;i<N;i++){const t=f?k(R[i],U[i],G):R[i];L?(E.copy(S.normals[0]).multiplyScalar(t.x),T.copy(S.binormals[0]).multiplyScalar(t.y),A.copy(M[0]).add(E).add(T),V(A.x,A.y,A.z)):V(t.x,t.y,0)}for(let s=1;s<=h;s++)for(let i=0;i<N;i++){const t=f?k(R[i],U[i],G):R[i];L?(E.copy(S.normals[s]).multiplyScalar(t.x),T.copy(S.binormals[s]).multiplyScalar(t.y),A.copy(M[s]).add(E).add(T),V(A.x,A.y,A.z)):V(t.x,t.y,d/h*s)}for(let b=x-1;b>=0;b--){const t=b/x,e=m*Math.cos(t*Math.PI/2),n=v*Math.sin(t*Math.PI/2)+y;for(let i=0,t=I.length;i<t;i++){const t=k(I[i],B[i],n);V(t.x,t.y,d+e)}for(let t=0,r=P.length;t<r;t++){const r=P[t];j=F[t];for(let i=0,t=r.length;i<t;i++){const t=k(r[i],j[i],n);L?V(t.x,t.y+M[h-1].y,M[h-1].x+e):V(t.x,t.y,d+e)}}}function H(t,e){let i=t.length;for(;--i>=0;){const n=i;let r=i-1;r<0&&(r=t.length-1);for(let s=0,t=h+2*x;s<t;s++){const t=N*s,o=N*(s+1);Z(e+n+t,e+r+t,e+r+o,e+n+o)}}}function V(t,e,n){c.push(t),c.push(e),c.push(n)}function W(a,b,t){$(a),$(b),$(t);const e=r.length/3,o=w.generateTopUV(n,r,e-3,e-2,e-1);Y(o[0]),Y(o[1]),Y(o[2])}function Z(a,b,t,e){$(a),$(b),$(e),$(b),$(t),$(e);const o=r.length/3,c=w.generateSideWallUV(n,r,o-6,o-3,o-2,o-1);Y(c[0]),Y(c[1]),Y(c[3]),Y(c[1]),Y(c[2]),Y(c[3])}function $(t){r.push(c[3*t+0]),r.push(c[3*t+1]),r.push(c[3*t+2])}function Y(t){o.push(t.x),o.push(t.y)}!function(){const t=r.length/3;if(f){let t=0,e=N*t;for(let i=0;i<D;i++){const t=O[i];W(t[2]+e,t[1]+e,t[0]+e)}t=h+2*x,e=N*t;for(let i=0;i<D;i++){const t=O[i];W(t[0]+e,t[1]+e,t[2]+e)}}else{for(let i=0;i<D;i++){const t=O[i];W(t[2],t[1],t[0])}for(let i=0;i<D;i++){const t=O[i];W(t[0]+N*h,t[1]+N*h,t[2]+N*h)}}n.addGroup(t,r.length/3-t,0)}(),function(){const t=r.length/3;let e=0;H(I,e),e+=I.length;for(let t=0,n=P.length;t<n;t++){const n=P[t];H(n,e),e+=n.length}n.addGroup(t,r.length/3-t,1)}()}this.setAttribute("position",new qi(r,3)),this.setAttribute("uv",new qi(o,2)),this.computeVertexNormals()}toJSON(){const data=ro.prototype.toJSON.call(this);return eu(this.parameters.shapes,this.parameters.options,data)}}const tu={generateTopUV:function(t,e,n,r,o){const c=e[3*n],l=e[3*n+1],h=e[3*r],d=e[3*r+1],f=e[3*o],m=e[3*o+1];return[new Xn(c,l),new Xn(h,d),new Xn(f,m)]},generateSideWallUV:function(t,e,n,r,o,c){const l=e[3*n],h=e[3*n+1],d=e[3*n+2],f=e[3*r],m=e[3*r+1],v=e[3*r+2],y=e[3*o],x=e[3*o+1],_=e[3*o+2],w=e[3*c],M=e[3*c+1],S=e[3*c+2];return Math.abs(h-m)<.01?[new Xn(l,1-d),new Xn(f,1-v),new Xn(y,1-_),new Xn(w,1-S)]:[new Xn(h,1-d),new Xn(m,1-v),new Xn(x,1-_),new Xn(M,1-S)]}};function eu(t,e,data){if(data.shapes=[],Array.isArray(t))for(let i=0,e=t.length;i<e;i++){const e=t[i];data.shapes.push(e.uuid)}else data.shapes.push(t.uuid);return void 0!==e.extrudePath&&(data.options.extrudePath=e.extrudePath.toJSON()),data}class nu extends Co{constructor(text,t){super(),this.type="TextGeometry",this.parameters={text:text,parameters:t},this.fromBufferGeometry(new ru(text,t)),this.mergeVertices()}}class ru extends Kl{constructor(text,t){const e=(t=t||{}).font;if(!e||!e.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Co;const n=e.generateShapes(text,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),super(n,t),this.type="TextBufferGeometry"}}class iu extends Co{constructor(t,e,n,r,o,c,l){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:o,thetaStart:c,thetaLength:l},this.fromBufferGeometry(new ou(t,e,n,r,o,c,l)),this.mergeVertices()}}class ou extends ro{constructor(t,e,n,r,o,c,l){super(),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:o,thetaStart:c,thetaLength:l},t=t||1,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,o=void 0!==o?o:2*Math.PI,c=void 0!==c?c:0,l=void 0!==l?l:Math.PI;const h=Math.min(c+l,Math.PI);let d=0;const f=[],m=new sr,v=new sr,y=[],x=[],_=[],w=[];for(let y=0;y<=n;y++){const M=[],S=y/n;let T=0;0==y&&0==c?T=.5/e:y==n&&h==Math.PI&&(T=-.5/e);for(let n=0;n<=e;n++){const u=n/e;m.x=-t*Math.cos(r+u*o)*Math.sin(c+S*l),m.y=t*Math.cos(c+S*l),m.z=t*Math.sin(r+u*o)*Math.sin(c+S*l),x.push(m.x,m.y,m.z),v.copy(m).normalize(),_.push(v.x,v.y,v.z),w.push(u+T,1-S),M.push(d++)}f.push(M)}for(let t=0;t<n;t++)for(let r=0;r<e;r++){const a=f[t][r+1],b=f[t][r],e=f[t+1][r],o=f[t+1][r+1];(0!==t||c>0)&&y.push(a,b,o),(t!==n-1||h<Math.PI)&&y.push(b,e,o)}this.setIndex(y),this.setAttribute("position",new qi(x,3)),this.setAttribute("normal",new qi(_,3)),this.setAttribute("uv",new qi(w,2))}}class au extends Co{constructor(t,e,n,r,o,c){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:o,thetaLength:c},this.fromBufferGeometry(new su(t,e,n,r,o,c)),this.mergeVertices()}}class su extends ro{constructor(t,e,n,r,o,c){super(),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:o,thetaLength:c},t=t||.5,e=e||1,o=void 0!==o?o:0,c=void 0!==c?c:2*Math.PI,n=void 0!==n?Math.max(3,n):8;const l=[],h=[],d=[],f=[];let m=t;const v=(e-t)/(r=void 0!==r?Math.max(1,r):1),y=new sr,x=new Xn;for(let t=0;t<=r;t++){for(let i=0;i<=n;i++){const t=o+i/n*c;y.x=m*Math.cos(t),y.y=m*Math.sin(t),h.push(y.x,y.y,y.z),d.push(0,0,1),x.x=(y.x/e+1)/2,x.y=(y.y/e+1)/2,f.push(x.x,x.y)}m+=v}for(let t=0;t<r;t++){const e=t*(n+1);for(let i=0;i<n;i++){const t=i+e,a=t,b=t+n+1,r=t+n+2,o=t+1;l.push(a,b,o),l.push(b,r,o)}}this.setIndex(l),this.setAttribute("position",new qi(h,3)),this.setAttribute("normal",new qi(d,3)),this.setAttribute("uv",new qi(f,2))}}class cu extends Co{constructor(t,e,n,r){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},this.fromBufferGeometry(new lu(t,e,n,r)),this.mergeVertices()}}class lu extends ro{constructor(t,e,n,r){super(),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},e=Math.floor(e)||12,n=n||0,r=r||2*Math.PI,r=Yn.clamp(r,0,2*Math.PI);const o=[],c=[],l=[],h=1/e,d=new sr,f=new Xn;for(let i=0;i<=e;i++){const o=n+i*h*r,m=Math.sin(o),v=Math.cos(o);for(let n=0;n<=t.length-1;n++)d.x=t[n].x*m,d.y=t[n].y,d.z=t[n].x*v,c.push(d.x,d.y,d.z),f.x=i/e,f.y=n/(t.length-1),l.push(f.x,f.y)}for(let i=0;i<e;i++)for(let e=0;e<t.length-1;e++){const base=e+i*t.length,a=base,b=base+t.length,n=base+t.length+1,r=base+1;o.push(a,b,r),o.push(b,n,r)}if(this.setIndex(o),this.setAttribute("position",new qi(c,3)),this.setAttribute("uv",new qi(l,2)),this.computeVertexNormals(),r===2*Math.PI){const n=this.attributes.normal.array,r=new sr,o=new sr,c=new sr,base=e*t.length*3;for(let i=0,e=0;i<t.length;i++,e+=3)r.x=n[e+0],r.y=n[e+1],r.z=n[e+2],o.x=n[base+e+0],o.y=n[base+e+1],o.z=n[base+e+2],c.addVectors(r,o).normalize(),n[e+0]=n[base+e+0]=c.x,n[e+1]=n[base+e+1]=c.y,n[e+2]=n[base+e+2]=c.z}}}class uu extends Co{constructor(t,e){super(),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new hu(t,e)),this.mergeVertices()}toJSON(){const data=Co.prototype.toJSON.call(this);return du(this.parameters.shapes,data)}}class hu extends ro{constructor(t,e){super(),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;const n=[],r=[],o=[],c=[];let l=0,h=0;if(!1===Array.isArray(t))d(t);else for(let i=0;i<t.length;i++)d(t[i]),this.addGroup(l,h,i),l+=h,h=0;function d(t){const l=r.length/3,d=t.extractPoints(e);let f=d.shape;const m=d.holes;!1===Yl.isClockWise(f)&&(f=f.reverse());for(let i=0,t=m.length;i<t;i++){const t=m[i];!0===Yl.isClockWise(t)&&(m[i]=t.reverse())}const v=Yl.triangulateShape(f,m);for(let i=0,t=m.length;i<t;i++){const t=m[i];f=f.concat(t)}for(let i=0,t=f.length;i<t;i++){const t=f[i];r.push(t.x,t.y,0),o.push(0,0,1),c.push(t.x,t.y)}for(let i=0,t=v.length;i<t;i++){const t=v[i],a=t[0]+l,b=t[1]+l,e=t[2]+l;n.push(a,b,e),h+=3}}this.setIndex(n),this.setAttribute("position",new qi(r,3)),this.setAttribute("normal",new qi(o,3)),this.setAttribute("uv",new qi(c,2))}toJSON(){const data=ro.prototype.toJSON.call(this);return du(this.parameters.shapes,data)}}function du(t,data){if(data.shapes=[],Array.isArray(t))for(let i=0,e=t.length;i<e;i++){const e=t[i];data.shapes.push(e.uuid)}else data.shapes.push(t.uuid);return data}class pu extends ro{constructor(t,e){super(),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;const n=[],r=Math.cos(Yn.DEG2RAD*e),o=[0,0],c={};let l,h,d;const f=["a","b","c"];let m;t.isBufferGeometry?(m=new Co,m.fromBufferGeometry(t)):m=t.clone(),m.mergeVertices(),m.computeFaceNormals();const v=m.vertices,y=m.faces;for(let i=0,t=y.length;i<t;i++){const t=y[i];for(let e=0;e<3;e++)l=t[f[e]],h=t[f[(e+1)%3]],o[0]=Math.min(l,h),o[1]=Math.max(l,h),d=o[0]+","+o[1],void 0===c[d]?c[d]={index1:o[0],index2:o[1],face1:i,face2:void 0}:c[d].face2=i}for(d in c){const t=c[d];if(void 0===t.face2||y[t.face1].normal.dot(y[t.face2].normal)<=r){let e=v[t.index1];n.push(e.x,e.y,e.z),e=v[t.index2],n.push(e.x,e.y,e.z)}}this.setAttribute("position",new qi(n,3))}}class fu extends Co{constructor(t,e,n,r,o,c,l,h){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:o,openEnded:c,thetaStart:l,thetaLength:h},this.fromBufferGeometry(new mu(t,e,n,r,o,c,l,h)),this.mergeVertices()}}class mu extends ro{constructor(t,e,n,r,o,c,l,h){super(),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:o,openEnded:c,thetaStart:l,thetaLength:h};const d=this;t=void 0!==t?t:1,e=void 0!==e?e:1,n=n||1,r=Math.floor(r)||8,o=Math.floor(o)||1,c=void 0!==c&&c,l=void 0!==l?l:0,h=void 0!==h?h:2*Math.PI;const f=[],m=[],v=[],y=[];let x=0;const _=[],w=n/2;let M=0;function S(n){const o=x,c=new Xn,_=new sr;let S=0;const T=!0===n?t:e,E=!0===n?1:-1;for(let t=1;t<=r;t++)m.push(0,w*E,0),v.push(0,E,0),y.push(.5,.5),x++;const A=x;for(let t=0;t<=r;t++){const e=t/r*h+l,n=Math.cos(e),o=Math.sin(e);_.x=T*o,_.y=w*E,_.z=T*n,m.push(_.x,_.y,_.z),v.push(0,E,0),c.x=.5*n+.5,c.y=.5*o*E+.5,y.push(c.x,c.y),x++}for(let t=0;t<r;t++){const e=o+t,i=A+t;!0===n?f.push(i,i+1,e):f.push(i+1,i,e),S+=3}d.addGroup(M,S,!0===n?1:2),M+=S}!function(){const c=new sr,S=new sr;let T=0;const E=(e-t)/n;for(let d=0;d<=o;d++){const f=[],M=d/o,T=M*(e-t)+t;for(let t=0;t<=r;t++){const u=t/r,e=u*h+l,o=Math.sin(e),d=Math.cos(e);S.x=T*o,S.y=-M*n+w,S.z=T*d,m.push(S.x,S.y,S.z),c.set(o,E,d).normalize(),v.push(c.x,c.y,c.z),y.push(u,1-M),f.push(x++)}_.push(f)}for(let t=0;t<r;t++)for(let e=0;e<o;e++){const a=_[e][t],b=_[e+1][t],n=_[e+1][t+1],r=_[e][t+1];f.push(a,b,r),f.push(b,n,r),T+=6}d.addGroup(M,T,0),M+=T}(),!1===c&&(t>0&&S(!0),e>0&&S(!1)),this.setIndex(f),this.setAttribute("position",new qi(m,3)),this.setAttribute("normal",new qi(v,3)),this.setAttribute("uv",new qi(y,2))}}class gu extends fu{constructor(t,e,n,r,o,c,l){super(0,t,e,n,r,o,c,l),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:o,thetaStart:c,thetaLength:l}}}class vu extends mu{constructor(t,e,n,r,o,c,l){super(0,t,e,n,r,o,c,l),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:o,thetaStart:c,thetaLength:l}}}class yu extends Co{constructor(t,e,n,r){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new xu(t,e,n,r)),this.mergeVertices()}}class xu extends ro{constructor(t,e,n,r){super(),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},t=t||1,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;const o=[],c=[],l=[],h=[],d=new sr,f=new Xn;c.push(0,0,0),l.push(0,0,1),h.push(.5,.5);for(let s=0,i=3;s<=e;s++,i+=3){const o=n+s/e*r;d.x=t*Math.cos(o),d.y=t*Math.sin(o),c.push(d.x,d.y,d.z),l.push(0,0,1),f.x=(c[i]/t+1)/2,f.y=(c[i+1]/t+1)/2,h.push(f.x,f.y)}for(let i=1;i<=e;i++)o.push(i,i+1,0);this.setIndex(o),this.setAttribute("position",new qi(c,3)),this.setAttribute("normal",new qi(l,3)),this.setAttribute("uv",new qi(h,2))}}var bu=Object.freeze({__proto__:null,WireframeGeometry:rl,ParametricGeometry:il,ParametricBufferGeometry:al,TetrahedronGeometry:ll,TetrahedronBufferGeometry:hl,OctahedronGeometry:pl,OctahedronBufferGeometry:fl,IcosahedronGeometry:ml,IcosahedronBufferGeometry:gl,DodecahedronGeometry:vl,DodecahedronBufferGeometry:yl,PolyhedronGeometry:sl,PolyhedronBufferGeometry:cl,TubeGeometry:xl,TubeBufferGeometry:bl,TorusKnotGeometry:_l,TorusKnotBufferGeometry:wl,TorusGeometry:Ml,TorusBufferGeometry:Sl,TextGeometry:nu,TextBufferGeometry:ru,SphereGeometry:iu,SphereBufferGeometry:ou,RingGeometry:au,RingBufferGeometry:su,PlaneGeometry:qo,PlaneBufferGeometry:Zo,LatheGeometry:cu,LatheBufferGeometry:lu,ShapeGeometry:uu,ShapeBufferGeometry:hu,ExtrudeGeometry:Ql,ExtrudeBufferGeometry:Kl,EdgesGeometry:pu,ConeGeometry:gu,ConeBufferGeometry:vu,CylinderGeometry:fu,CylinderBufferGeometry:mu,CircleGeometry:yu,CircleBufferGeometry:xu,BoxGeometry:Ro,BoxBufferGeometry:Po});function _u(t){ki.call(this),this.type="ShadowMaterial",this.color=new Pi(0),this.transparent=!0,this.setValues(t)}function wu(t){No.call(this,t),this.type="RawShaderMaterial"}function Mu(t){ki.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Pi(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vn,this.normalScale=new Xn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(t)}function Su(t){Mu.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Xn(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(t)}function Tu(t){ki.call(this),this.type="MeshPhongMaterial",this.color=new Pi(16777215),this.specular=new Pi(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vn,this.normalScale=new Xn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=it,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Eu(t){ki.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Pi(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vn,this.normalScale=new Xn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Au(t){ki.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vn,this.normalScale=new Xn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Lu(t){ki.call(this),this.type="MeshLambertMaterial",this.color=new Pi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=it,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Cu(t){ki.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Pi(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vn,this.normalScale=new Xn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Ru(t){Nc.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}_u.prototype=Object.create(ki.prototype),_u.prototype.constructor=_u,_u.prototype.isShadowMaterial=!0,_u.prototype.copy=function(source){return ki.prototype.copy.call(this,source),this.color.copy(source.color),this},wu.prototype=Object.create(No.prototype),wu.prototype.constructor=wu,wu.prototype.isRawShaderMaterial=!0,Mu.prototype=Object.create(ki.prototype),Mu.prototype.constructor=Mu,Mu.prototype.isMeshStandardMaterial=!0,Mu.prototype.copy=function(source){return ki.prototype.copy.call(this,source),this.defines={STANDARD:""},this.color.copy(source.color),this.roughness=source.roughness,this.metalness=source.metalness,this.map=source.map,this.lightMap=source.lightMap,this.lightMapIntensity=source.lightMapIntensity,this.aoMap=source.aoMap,this.aoMapIntensity=source.aoMapIntensity,this.emissive.copy(source.emissive),this.emissiveMap=source.emissiveMap,this.emissiveIntensity=source.emissiveIntensity,this.bumpMap=source.bumpMap,this.bumpScale=source.bumpScale,this.normalMap=source.normalMap,this.normalMapType=source.normalMapType,this.normalScale.copy(source.normalScale),this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.roughnessMap=source.roughnessMap,this.metalnessMap=source.metalnessMap,this.alphaMap=source.alphaMap,this.envMap=source.envMap,this.envMapIntensity=source.envMapIntensity,this.refractionRatio=source.refractionRatio,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this.skinning=source.skinning,this.morphTargets=source.morphTargets,this.morphNormals=source.morphNormals,this.vertexTangents=source.vertexTangents,this},Su.prototype=Object.create(Mu.prototype),Su.prototype.constructor=Su,Su.prototype.isMeshPhysicalMaterial=!0,Su.prototype.copy=function(source){return Mu.prototype.copy.call(this,source),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=source.clearcoat,this.clearcoatMap=source.clearcoatMap,this.clearcoatRoughness=source.clearcoatRoughness,this.clearcoatRoughnessMap=source.clearcoatRoughnessMap,this.clearcoatNormalMap=source.clearcoatNormalMap,this.clearcoatNormalScale.copy(source.clearcoatNormalScale),this.reflectivity=source.reflectivity,source.sheen?this.sheen=(this.sheen||new Pi).copy(source.sheen):this.sheen=null,this.transmission=source.transmission,this.transmissionMap=source.transmissionMap,this},Tu.prototype=Object.create(ki.prototype),Tu.prototype.constructor=Tu,Tu.prototype.isMeshPhongMaterial=!0,Tu.prototype.copy=function(source){return ki.prototype.copy.call(this,source),this.color.copy(source.color),this.specular.copy(source.specular),this.shininess=source.shininess,this.map=source.map,this.lightMap=source.lightMap,this.lightMapIntensity=source.lightMapIntensity,this.aoMap=source.aoMap,this.aoMapIntensity=source.aoMapIntensity,this.emissive.copy(source.emissive),this.emissiveMap=source.emissiveMap,this.emissiveIntensity=source.emissiveIntensity,this.bumpMap=source.bumpMap,this.bumpScale=source.bumpScale,this.normalMap=source.normalMap,this.normalMapType=source.normalMapType,this.normalScale.copy(source.normalScale),this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.specularMap=source.specularMap,this.alphaMap=source.alphaMap,this.envMap=source.envMap,this.combine=source.combine,this.reflectivity=source.reflectivity,this.refractionRatio=source.refractionRatio,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this.skinning=source.skinning,this.morphTargets=source.morphTargets,this.morphNormals=source.morphNormals,this},Eu.prototype=Object.create(ki.prototype),Eu.prototype.constructor=Eu,Eu.prototype.isMeshToonMaterial=!0,Eu.prototype.copy=function(source){return ki.prototype.copy.call(this,source),this.color.copy(source.color),this.map=source.map,this.gradientMap=source.gradientMap,this.lightMap=source.lightMap,this.lightMapIntensity=source.lightMapIntensity,this.aoMap=source.aoMap,this.aoMapIntensity=source.aoMapIntensity,this.emissive.copy(source.emissive),this.emissiveMap=source.emissiveMap,this.emissiveIntensity=source.emissiveIntensity,this.bumpMap=source.bumpMap,this.bumpScale=source.bumpScale,this.normalMap=source.normalMap,this.normalMapType=source.normalMapType,this.normalScale.copy(source.normalScale),this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.alphaMap=source.alphaMap,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this.skinning=source.skinning,this.morphTargets=source.morphTargets,this.morphNormals=source.morphNormals,this},Au.prototype=Object.create(ki.prototype),Au.prototype.constructor=Au,Au.prototype.isMeshNormalMaterial=!0,Au.prototype.copy=function(source){return ki.prototype.copy.call(this,source),this.bumpMap=source.bumpMap,this.bumpScale=source.bumpScale,this.normalMap=source.normalMap,this.normalMapType=source.normalMapType,this.normalScale.copy(source.normalScale),this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.skinning=source.skinning,this.morphTargets=source.morphTargets,this.morphNormals=source.morphNormals,this},Lu.prototype=Object.create(ki.prototype),Lu.prototype.constructor=Lu,Lu.prototype.isMeshLambertMaterial=!0,Lu.prototype.copy=function(source){return ki.prototype.copy.call(this,source),this.color.copy(source.color),this.map=source.map,this.lightMap=source.lightMap,this.lightMapIntensity=source.lightMapIntensity,this.aoMap=source.aoMap,this.aoMapIntensity=source.aoMapIntensity,this.emissive.copy(source.emissive),this.emissiveMap=source.emissiveMap,this.emissiveIntensity=source.emissiveIntensity,this.specularMap=source.specularMap,this.alphaMap=source.alphaMap,this.envMap=source.envMap,this.combine=source.combine,this.reflectivity=source.reflectivity,this.refractionRatio=source.refractionRatio,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this.skinning=source.skinning,this.morphTargets=source.morphTargets,this.morphNormals=source.morphNormals,this},Cu.prototype=Object.create(ki.prototype),Cu.prototype.constructor=Cu,Cu.prototype.isMeshMatcapMaterial=!0,Cu.prototype.copy=function(source){return ki.prototype.copy.call(this,source),this.defines={MATCAP:""},this.color.copy(source.color),this.matcap=source.matcap,this.map=source.map,this.bumpMap=source.bumpMap,this.bumpScale=source.bumpScale,this.normalMap=source.normalMap,this.normalMapType=source.normalMapType,this.normalScale.copy(source.normalScale),this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.alphaMap=source.alphaMap,this.skinning=source.skinning,this.morphTargets=source.morphTargets,this.morphNormals=source.morphNormals,this},Ru.prototype=Object.create(Nc.prototype),Ru.prototype.constructor=Ru,Ru.prototype.isLineDashedMaterial=!0,Ru.prototype.copy=function(source){return Nc.prototype.copy.call(this,source),this.scale=source.scale,this.dashSize=source.dashSize,this.gapSize=source.gapSize,this};var Pu=Object.freeze({__proto__:null,ShadowMaterial:_u,SpriteMaterial:ac,RawShaderMaterial:wu,ShaderMaterial:No,PointsMaterial:qc,MeshPhysicalMaterial:Su,MeshStandardMaterial:Mu,MeshPhongMaterial:Tu,MeshToonMaterial:Eu,MeshNormalMaterial:Au,MeshLambertMaterial:Lu,MeshDepthMaterial:Us,MeshDistanceMaterial:Gs,MeshBasicMaterial:Ni,MeshMatcapMaterial:Cu,LineDashedMaterial:Ru,LineBasicMaterial:Nc,Material:ki});const Ou={arraySlice:function(t,e,n){return Ou.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(object){return ArrayBuffer.isView(object)&&!(object instanceof DataView)},getKeyframeOrder:function(t){const e=t.length,n=new Array(e);for(let i=0;i!==e;++i)n[i]=i;return n.sort((function(i,e){return t[i]-t[e]})),n},sortedArray:function(t,e,n){const r=t.length,o=new t.constructor(r);for(let i=0,c=0;c!==r;++i){const r=n[i]*e;for(let n=0;n!==e;++n)o[c++]=t[r+n]}return o},flattenJSON:function(t,e,n,r){let i=1,o=t[0];for(;void 0!==o&&void 0===o[r];)o=t[i++];if(void 0===o)return;let c=o[r];if(void 0!==c)if(Array.isArray(c))do{c=o[r],void 0!==c&&(e.push(o.time),n.push.apply(n,c)),o=t[i++]}while(void 0!==o);else if(void 0!==c.toArray)do{c=o[r],void 0!==c&&(e.push(o.time),c.toArray(n,n.length)),o=t[i++]}while(void 0!==o);else do{c=o[r],void 0!==c&&(e.push(o.time),n.push(c)),o=t[i++]}while(void 0!==o)},subclip:function(t,e,n,r,o){o=o||30;const c=t.clone();c.name=e;const l=[];for(let i=0;i<c.tracks.length;++i){const track=c.tracks[i],t=track.getValueSize(),e=[],h=[];for(let c=0;c<track.times.length;++c){const l=track.times[c]*o;if(!(l<n||l>=r)){e.push(track.times[c]);for(let e=0;e<t;++e)h.push(track.values[c*t+e])}}0!==e.length&&(track.times=Ou.convertArray(e,track.times.constructor),track.values=Ou.convertArray(h,track.values.constructor),l.push(track))}c.tracks=l;let h=1/0;for(let i=0;i<c.tracks.length;++i)h>c.tracks[i].times[0]&&(h=c.tracks[i].times[0]);for(let i=0;i<c.tracks.length;++i)c.tracks[i].shift(-1*h);return c.resetDuration(),c},makeClipAdditive:function(t,e,n,r){void 0===e&&(e=0),void 0===n&&(n=t),(void 0===r||r<=0)&&(r=30);const o=t.tracks.length,c=e/r;for(let i=0;i<o;++i){const e=n.tracks[i],r=e.ValueTypeName;if("bool"===r||"string"===r)continue;const o=t.tracks.find((function(track){return track.name===e.name&&track.ValueTypeName===r}));if(void 0===o)continue;let l=0;const h=e.getValueSize();e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=h/3);let d=0;const f=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=f/3);const m=e.times.length-1;let v;if(c<=e.times[0]){const t=l,n=h-l;v=Ou.arraySlice(e.values,t,n)}else if(c>=e.times[m]){const t=m*h+l,n=t+h-l;v=Ou.arraySlice(e.values,t,n)}else{const t=e.createInterpolant(),n=l,r=h-l;t.evaluate(c),v=Ou.arraySlice(t.resultBuffer,n,r)}if("quaternion"===r){(new ar).fromArray(v).normalize().conjugate().toArray(v)}const y=o.times.length;for(let t=0;t<y;++t){const e=t*f+d;if("quaternion"===r)ar.multiplyQuaternionsFlat(o.values,e,v,0,o.values,e);else{const t=f-2*d;for(let n=0;n<t;++n)o.values[e+n]-=v[n]}}}return t.blendMode=nn,t}};function Iu(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function ku(t,e,n,r){Iu.call(this,t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Nu(t,e,n,r){Iu.call(this,t,e,n,r)}function Du(t,e,n,r){Iu.call(this,t,e,n,r)}function zu(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Ou.convertArray(e,this.TimeBufferType),this.values=Ou.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function Bu(t,e,n){zu.call(this,t,e,n)}function Fu(t,e,n,r){zu.call(this,t,e,n,r)}function ju(t,e,n,r){zu.call(this,t,e,n,r)}function Uu(t,e,n,r){Iu.call(this,t,e,n,r)}function Gu(t,e,n,r){zu.call(this,t,e,n,r)}function Hu(t,e,n,r){zu.call(this,t,e,n,r)}function Vu(t,e,n,r){zu.call(this,t,e,n,r)}function Wu(t,e,n,r){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.blendMode=void 0!==r?r:en,this.uuid=Yn.generateUUID(),this.duration<0&&this.resetDuration()}function qu(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ju;case"vector":case"vector2":case"vector3":case"vector4":return Vu;case"color":return Fu;case"quaternion":return Gu;case"bool":case"boolean":return Bu;case"string":return Hu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],n=[];Ou.flattenJSON(t.keys,e,n,"value"),t.times=e,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}Object.assign(Iu.prototype,{evaluate:function(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],o=e[n-1];t:{e:{let c;n:{r:if(!(t<r)){for(let c=n+2;;){if(void 0===r){if(t<o)break r;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,o)}if(n===c)break;if(o=r,r=e[++n],t<r)break e}c=e.length;break n}if(t>=o)break t;{const l=e[1];t<l&&(n=2,o=l);for(let c=n-2;;){if(void 0===o)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(n===c)break;if(r=o,o=e[--n-1],t>=o)break e}c=n,n=0}}for(;n<c;){const r=n+c>>>1;t<e[r]?c=r:n=r+1}if(r=e[n],o=e[n-1],void 0===o)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,o,t)}this._cachedIndex=n,this.intervalChanged_(n,o,r)}return this.interpolate_(n,o,t,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,o=t*r;for(let i=0;i!==r;++i)e[i]=n[o+i];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Iu.prototype,{beforeStart_:Iu.prototype.copySampleValue_,afterEnd_:Iu.prototype.copySampleValue_}),ku.prototype=Object.assign(Object.create(Iu.prototype),{constructor:ku,DefaultSettings_:{endingStart:Qe,endingEnd:Qe},intervalChanged_:function(t,e,n){const r=this.parameterPositions;let o=t-2,c=t+1,l=r[o],h=r[c];if(void 0===l)switch(this.getSettings_().endingStart){case Ke:o=t,l=2*e-n;break;case tn:o=r.length-2,l=e+r[o]-r[o+1];break;default:o=t,l=n}if(void 0===h)switch(this.getSettings_().endingEnd){case Ke:c=t,h=2*n-e;break;case tn:c=1,h=n+r[1]-r[0];break;default:c=t-1,h=e}const d=.5*(n-e),f=this.valueSize;this._weightPrev=d/(e-l),this._weightNext=d/(h-n),this._offsetPrev=o*f,this._offsetNext=c*f},interpolate_:function(t,e,n,r){const o=this.resultBuffer,c=this.sampleValues,l=this.valueSize,h=t*l,d=h-l,f=this._offsetPrev,m=this._offsetNext,v=this._weightPrev,y=this._weightNext,p=(n-e)/(r-e),x=p*p,_=x*p,w=-v*_+2*v*x-v*p,M=(1+v)*_+(-1.5-2*v)*x+(-.5+v)*p+1,S=(-1-y)*_+(1.5+y)*x+.5*p,T=y*_-y*x;for(let i=0;i!==l;++i)o[i]=w*c[f+i]+M*c[d+i]+S*c[h+i]+T*c[m+i];return o}}),Nu.prototype=Object.assign(Object.create(Iu.prototype),{constructor:Nu,interpolate_:function(t,e,n,r){const o=this.resultBuffer,c=this.sampleValues,l=this.valueSize,h=t*l,d=h-l,f=(n-e)/(r-e),m=1-f;for(let i=0;i!==l;++i)o[i]=c[d+i]*m+c[h+i]*f;return o}}),Du.prototype=Object.assign(Object.create(Iu.prototype),{constructor:Du,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(zu,{toJSON:function(track){const t=track.constructor;let e;if(void 0!==t.toJSON)e=t.toJSON(track);else{e={name:track.name,times:Ou.convertArray(track.times,Array),values:Ou.convertArray(track.values,Array)};const t=track.getInterpolation();t!==track.DefaultInterpolation&&(e.interpolation=t)}return e.type=track.ValueTypeName,e}}),Object.assign(zu.prototype,{constructor:zu,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Xe,InterpolantFactoryMethodDiscrete:function(t){return new Du(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new Nu(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new ku(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){let e;switch(t){case Ye:e=this.InterpolantFactoryMethodDiscrete;break;case Xe:e=this.InterpolantFactoryMethodLinear;break;case Je:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ye;case this.InterpolantFactoryMethodLinear:return Xe;case this.InterpolantFactoryMethodSmooth:return Je}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t){const e=this.times;for(let i=0,n=e.length;i!==n;++i)e[i]+=t}return this},scale:function(t){if(1!==t){const e=this.times;for(let i=0,n=e.length;i!==n;++i)e[i]*=t}return this},trim:function(t,e){const n=this.times,r=n.length;let o=0,c=r-1;for(;o!==r&&n[o]<t;)++o;for(;-1!==c&&n[c]>e;)--c;if(++c,0!==o||c!==r){o>=c&&(c=Math.max(c,1),o=c-1);const t=this.getValueSize();this.times=Ou.arraySlice(n,o,c),this.values=Ou.arraySlice(this.values,o*t,c*t)}return this},validate:function(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,o=n.length;0===o&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let c=null;for(let i=0;i!==o;i++){const e=n[i];if("number"==typeof e&&isNaN(e)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,i,e),t=!1;break}if(null!==c&&c>e){console.error("THREE.KeyframeTrack: Out of order keys.",this,i,e,c),t=!1;break}c=e}if(void 0!==r&&Ou.isTypedArray(r))for(let i=0,e=r.length;i!==e;++i){const e=r[i];if(isNaN(e)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,i,e),t=!1;break}}return t},optimize:function(){const t=Ou.arraySlice(this.times),e=Ou.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===Je,o=t.length-1;let c=1;for(let i=1;i<o;++i){let o=!1;const time=t[i];if(time!==t[i+1]&&(1!==i||time!==time[0]))if(r)o=!0;else{const t=i*n,r=t-n,c=t+n;for(let l=0;l!==n;++l){const n=e[t+l];if(n!==e[r+l]||n!==e[c+l]){o=!0;break}}}if(o){if(i!==c){t[c]=t[i];const r=i*n,o=c*n;for(let t=0;t!==n;++t)e[o+t]=e[r+t]}++c}}if(o>0){t[c]=t[o];for(let t=o*n,r=c*n,l=0;l!==n;++l)e[r+l]=e[t+l];++c}return c!==t.length?(this.times=Ou.arraySlice(t,0,c),this.values=Ou.arraySlice(e,0,c*n)):(this.times=t,this.values=e),this},clone:function(){const t=Ou.arraySlice(this.times,0),e=Ou.arraySlice(this.values,0),track=new(0,this.constructor)(this.name,t,e);return track.createInterpolant=this.createInterpolant,track}}),Bu.prototype=Object.assign(Object.create(zu.prototype),{constructor:Bu,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Ye,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Fu.prototype=Object.assign(Object.create(zu.prototype),{constructor:Fu,ValueTypeName:"color"}),ju.prototype=Object.assign(Object.create(zu.prototype),{constructor:ju,ValueTypeName:"number"}),Uu.prototype=Object.assign(Object.create(Iu.prototype),{constructor:Uu,interpolate_:function(t,e,n,r){const o=this.resultBuffer,c=this.sampleValues,l=this.valueSize,h=(n-e)/(r-e);let d=t*l;for(let t=d+l;d!==t;d+=4)ar.slerpFlat(o,0,c,d-l,c,d,h);return o}}),Gu.prototype=Object.assign(Object.create(zu.prototype),{constructor:Gu,ValueTypeName:"quaternion",DefaultInterpolation:Xe,InterpolantFactoryMethodLinear:function(t){return new Uu(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),Hu.prototype=Object.assign(Object.create(zu.prototype),{constructor:Hu,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Ye,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Vu.prototype=Object.assign(Object.create(zu.prototype),{constructor:Vu,ValueTypeName:"vector"}),Object.assign(Wu,{parse:function(t){const e=[],n=t.tracks,r=1/(t.fps||1);for(let i=0,t=n.length;i!==t;++i)e.push(qu(n[i]).scale(r));return new Wu(t.name,t.duration,e,t.blendMode)},toJSON:function(t){const e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let i=0,t=n.length;i!==t;++i)e.push(zu.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(t,e,n,r){const o=e.length,c=[];for(let i=0;i<o;i++){let t=[],l=[];t.push((i+o-1)%o,i,(i+1)%o),l.push(0,1,0);const h=Ou.getKeyframeOrder(t);t=Ou.sortedArray(t,1,h),l=Ou.sortedArray(l,1,h),r||0!==t[0]||(t.push(o),l.push(l[0])),c.push(new ju(".morphTargetInfluences["+e[i].name+"]",t,l).scale(1/n))}return new Wu(t,-1,c)},findByName:function(t,e){let n=t;if(!Array.isArray(t)){const e=t;n=e.geometry&&e.geometry.animations||e.animations}for(let i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){const r={},pattern=/^([\w-]*?)([\d]+)$/;for(let i=0,e=t.length;i<e;i++){const e=t[i],n=e.name.match(pattern);if(n&&n.length>1){const t=n[1];let o=r[t];o||(r[t]=o=[]),o.push(e)}}const o=[];for(const t in r)o.push(Wu.CreateFromMorphTargetSequence(t,r[t],e,n));return o},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(t,e,n,r,o){if(0!==n.length){const c=[],l=[];Ou.flattenJSON(n,c,l,r),0!==c.length&&o.push(new t(e,c,l))}},r=[],o=t.name||"default",c=t.fps||30,l=t.blendMode;let h=t.length||-1;const d=t.hierarchy||[];for(let t=0;t<d.length;t++){const o=d[t].keys;if(o&&0!==o.length)if(o[0].morphTargets){const t={};let e;for(e=0;e<o.length;e++)if(o[e].morphTargets)for(let n=0;n<o[e].morphTargets.length;n++)t[o[e].morphTargets[n]]=-1;for(const n in t){const t=[],c=[];for(let r=0;r!==o[e].morphTargets.length;++r){const r=o[e];t.push(r.time),c.push(r.morphTarget===n?1:0)}r.push(new ju(".morphTargetInfluence["+n+"]",t,c))}h=t.length*(c||1)}else{const c=".bones["+e[t].name+"]";n(Vu,c+".position",o,"pos",r),n(Gu,c+".quaternion",o,"rot",r),n(Vu,c+".scale",o,"scl",r)}}return 0===r.length?null:new Wu(o,h,r,l)}}),Object.assign(Wu.prototype,{resetDuration:function(){let t=0;for(let i=0,e=this.tracks.length;i!==e;++i){const track=this.tracks[i];t=Math.max(t,track.times[track.times.length-1])}return this.duration=t,this},trim:function(){for(let i=0;i<this.tracks.length;i++)this.tracks[i].trim(0,this.duration);return this},validate:function(){let t=!0;for(let i=0;i<this.tracks.length;i++)t=t&&this.tracks[i].validate();return t},optimize:function(){for(let i=0;i<this.tracks.length;i++)this.tracks[i].optimize();return this},clone:function(){const t=[];for(let i=0;i<this.tracks.length;i++)t.push(this.tracks[i].clone());return new Wu(this.name,this.duration,t,this.blendMode)}});const Zu={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function $u(t,e,n){const r=this;let o=!1,c=0,l=0,h=void 0;const d=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){l++,!1===o&&void 0!==r.onStart&&r.onStart(t,c,l),o=!0},this.itemEnd=function(t){c++,void 0!==r.onProgress&&r.onProgress(t,c,l),c===l&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return h?h(t):t},this.setURLModifier=function(t){return h=t,this},this.addHandler=function(t,e){return d.push(t,e),this},this.removeHandler=function(t){const e=d.indexOf(t);return-1!==e&&d.splice(e,2),this},this.getHandler=function(t){for(let i=0,e=d.length;i<e;i+=2){const e=d[i],n=d[i+1];if(e.global&&(e.lastIndex=0),e.test(t))return n}return null}}const Yu=new $u;function Xu(t){this.manager=void 0!==t?t:Yu,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Xu.prototype,{load:function(){},loadAsync:function(t,e){const n=this;return new Promise((function(r,o){n.load(t,r,e,o)}))},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(path){return this.path=path,this},setResourcePath:function(t){return this.resourcePath=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}});const Ju={};function Qu(t){Xu.call(this,t)}function Ku(t){Xu.call(this,t)}function eh(t){Xu.call(this,t)}function nh(t){Xu.call(this,t)}function rh(t){Xu.call(this,t)}function ih(t){Xu.call(this,t)}function oh(t){Xu.call(this,t)}function ah(){this.type="Curve",this.arcLengthDivisions=200}function sh(t,e,n,r,o,c,l,h){ah.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=o||0,this.aEndAngle=c||2*Math.PI,this.aClockwise=l||!1,this.aRotation=h||0}function ch(t,e,n,r,o,c){sh.call(this,t,e,n,n,r,o,c),this.type="ArcCurve"}function lh(){let t=0,e=0,n=0,r=0;function o(o,c,l,h){t=o,e=l,n=-3*o+3*c-2*l-h,r=2*o-2*c+l+h}return{initCatmullRom:function(t,e,n,r,c){o(e,n,c*(n-t),c*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,c,l,h){let d=(e-t)/c-(n-t)/(c+l)+(n-e)/l,f=(n-e)/l-(r-e)/(l+h)+(r-n)/h;d*=l,f*=l,o(e,n,d,f)},calc:function(o){const c=o*o;return t+e*o+n*c+r*(c*o)}}}Qu.prototype=Object.assign(Object.create(Xu.prototype),{constructor:Qu,load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const o=this,c=Zu.get(t);if(void 0!==c)return o.manager.itemStart(t),setTimeout((function(){e&&e(c),o.manager.itemEnd(t)}),0),c;if(void 0!==Ju[t])return void Ju[t].push({onLoad:e,onProgress:n,onError:r});const l=t.match(/^data:(.*?)(;base64)?,(.*)$/);let h;if(l){const n=l[1],c=!!l[2];let data=l[3];data=decodeURIComponent(data),c&&(data=atob(data));try{let r;const c=(this.responseType||"").toLowerCase();switch(c){case"arraybuffer":case"blob":const view=new Uint8Array(data.length);for(let i=0;i<data.length;i++)view[i]=data.charCodeAt(i);r="blob"===c?new Blob([view.buffer],{type:n}):view.buffer;break;case"document":const t=new DOMParser;r=t.parseFromString(data,n);break;case"json":r=JSON.parse(data);break;default:r=data}setTimeout((function(){e&&e(r),o.manager.itemEnd(t)}),0)}catch(e){setTimeout((function(){r&&r(e),o.manager.itemError(t),o.manager.itemEnd(t)}),0)}}else{Ju[t]=[],Ju[t].push({onLoad:e,onProgress:n,onError:r}),h=new XMLHttpRequest,h.open("GET",t,!0),h.addEventListener("load",(function(e){const n=this.response,r=Ju[t];if(delete Ju[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Zu.add(t,n);for(let i=0,t=r.length;i<t;i++){const t=r[i];t.onLoad&&t.onLoad(n)}o.manager.itemEnd(t)}else{for(let i=0,t=r.length;i<t;i++){const t=r[i];t.onError&&t.onError(e)}o.manager.itemError(t),o.manager.itemEnd(t)}}),!1),h.addEventListener("progress",(function(e){const n=Ju[t];for(let i=0,t=n.length;i<t;i++){const t=n[i];t.onProgress&&t.onProgress(e)}}),!1),h.addEventListener("error",(function(e){const n=Ju[t];delete Ju[t];for(let i=0,t=n.length;i<t;i++){const t=n[i];t.onError&&t.onError(e)}o.manager.itemError(t),o.manager.itemEnd(t)}),!1),h.addEventListener("abort",(function(e){const n=Ju[t];delete Ju[t];for(let i=0,t=n.length;i<t;i++){const t=n[i];t.onError&&t.onError(e)}o.manager.itemError(t),o.manager.itemEnd(t)}),!1),void 0!==this.responseType&&(h.responseType=this.responseType),void 0!==this.withCredentials&&(h.withCredentials=this.withCredentials),h.overrideMimeType&&h.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const header in this.requestHeader)h.setRequestHeader(header,this.requestHeader[header]);h.send(null)}return o.manager.itemStart(t),h},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this}}),Ku.prototype=Object.assign(Object.create(Xu.prototype),{constructor:Ku,load:function(t,e,n,r){const o=this,c=new Qu(o.manager);c.setPath(o.path),c.setRequestHeader(o.requestHeader),c.load(t,(function(text){try{e(o.parse(JSON.parse(text)))}catch(e){r?r(e):console.error(e),o.manager.itemError(t)}}),n,r)},parse:function(t){const e=[];for(let i=0;i<t.length;i++){const n=Wu.parse(t[i]);e.push(n)}return e}}),eh.prototype=Object.assign(Object.create(Xu.prototype),{constructor:eh,load:function(t,e,n,r){const o=this,c=[],l=new tl;l.image=c;const h=new Qu(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader);let d=0;function f(i){h.load(t[i],(function(t){const n=o.parse(t,!0);c[i]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},d+=1,6===d&&(1===n.mipmapCount&&(l.minFilter=Ct),l.format=n.format,l.needsUpdate=!0,e&&e(l))}),n,r)}if(Array.isArray(t))for(let i=0,e=t.length;i<e;++i)f(i);else h.load(t,(function(t){const n=o.parse(t,!0);if(n.isCubemap){const t=n.mipmaps.length/n.mipmapCount;for(let e=0;e<t;e++){c[e]={mipmaps:[]};for(let i=0;i<n.mipmapCount;i++)c[e].mipmaps.push(n.mipmaps[e*n.mipmapCount+i]),c[e].format=n.format,c[e].width=n.width,c[e].height=n.height}}else l.image.width=n.width,l.image.height=n.height,l.mipmaps=n.mipmaps;1===n.mipmapCount&&(l.minFilter=Ct),l.format=n.format,l.needsUpdate=!0,e&&e(l)}),n,r);return l}}),nh.prototype=Object.assign(Object.create(Xu.prototype),{constructor:nh,load:function(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const o=this,c=Zu.get(t);if(void 0!==c)return o.manager.itemStart(t),setTimeout((function(){e&&e(c),o.manager.itemEnd(t)}),0),c;const image=document.createElementNS("http://www.w3.org/1999/xhtml","img");function l(){image.removeEventListener("load",l,!1),image.removeEventListener("error",h,!1),Zu.add(t,this),e&&e(this),o.manager.itemEnd(t)}function h(e){image.removeEventListener("load",l,!1),image.removeEventListener("error",h,!1),r&&r(e),o.manager.itemError(t),o.manager.itemEnd(t)}return image.addEventListener("load",l,!1),image.addEventListener("error",h,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(image.crossOrigin=this.crossOrigin),o.manager.itemStart(t),image.src=t,image}}),rh.prototype=Object.assign(Object.create(Xu.prototype),{constructor:rh,load:function(t,e,n,r){const o=new ha,c=new nh(this.manager);c.setCrossOrigin(this.crossOrigin),c.setPath(this.path);let l=0;function h(i){c.load(t[i],(function(image){o.images[i]=image,l++,6===l&&(o.needsUpdate=!0,e&&e(o))}),void 0,r)}for(let i=0;i<t.length;++i)h(i);return o}}),ih.prototype=Object.assign(Object.create(Xu.prototype),{constructor:ih,load:function(t,e,n,r){const o=this,c=new jo,l=new Qu(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.load(t,(function(t){const n=o.parse(t);n&&(void 0!==n.image?c.image=n.image:void 0!==n.data&&(c.image.width=n.width,c.image.height=n.height,c.image.data=n.data),c.wrapS=void 0!==n.wrapS?n.wrapS:wt,c.wrapT=void 0!==n.wrapT?n.wrapT:wt,c.magFilter=void 0!==n.magFilter?n.magFilter:Ct,c.minFilter=void 0!==n.minFilter?n.minFilter:Ct,c.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(c.format=n.format),void 0!==n.type&&(c.type=n.type),void 0!==n.mipmaps&&(c.mipmaps=n.mipmaps,c.minFilter=Ot),1===n.mipmapCount&&(c.minFilter=Ct),c.needsUpdate=!0,e&&e(c,n))}),n,r),c}}),oh.prototype=Object.assign(Object.create(Xu.prototype),{constructor:oh,load:function(t,e,n,r){const o=new nr,c=new nh(this.manager);return c.setCrossOrigin(this.crossOrigin),c.setPath(this.path),c.load(t,(function(image){o.image=image;const n=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);o.format=n?Zt:$t,o.needsUpdate=!0,void 0!==e&&e(o)}),n,r),o}}),Object.assign(ah.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(u,t){const e=this.getUtoTmapping(u);return this.getPoint(e,t)},getPoints:function(t){void 0===t&&(t=5);const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){const t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,r=this.getPoint(0),o=0;e.push(0);for(let p=1;p<=t;p++)n=this.getPoint(p/t),o+=n.distanceTo(r),e.push(o),r=n;return this.cacheArcLengths=e,e},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(u,t){const e=this.getLengths();let i=0;const n=e.length;let r;r=t||u*e[n-1];let o,c=0,l=n-1;for(;c<=l;)if(i=Math.floor(c+(l-c)/2),o=e[i]-r,o<0)c=i+1;else{if(!(o>0)){l=i;break}l=i-1}if(i=l,e[i]===r)return i/(n-1);const h=e[i];return(i+(r-h)/(e[i+1]-h))/(n-1)},getTangent:function(t,e){let n=t-1e-4,r=t+1e-4;n<0&&(n=0),r>1&&(r=1);const o=this.getPoint(n),c=this.getPoint(r),l=e||(o.isVector2?new Xn:new sr);return l.copy(c).sub(o).normalize(),l},getTangentAt:function(u,t){const e=this.getUtoTmapping(u);return this.getTangent(e,t)},computeFrenetFrames:function(t,e){const n=new sr,r=[],o=[],c=[],l=new sr,h=new zr;for(let i=0;i<=t;i++){const u=i/t;r[i]=this.getTangentAt(u,new sr),r[i].normalize()}o[0]=new sr,c[0]=new sr;let d=Number.MAX_VALUE;const f=Math.abs(r[0].x),m=Math.abs(r[0].y),v=Math.abs(r[0].z);f<=d&&(d=f,n.set(1,0,0)),m<=d&&(d=m,n.set(0,1,0)),v<=d&&n.set(0,0,1),l.crossVectors(r[0],n).normalize(),o[0].crossVectors(r[0],l),c[0].crossVectors(r[0],o[0]);for(let i=1;i<=t;i++){if(o[i]=o[i-1].clone(),c[i]=c[i-1].clone(),l.crossVectors(r[i-1],r[i]),l.length()>Number.EPSILON){l.normalize();const t=Math.acos(Yn.clamp(r[i-1].dot(r[i]),-1,1));o[i].applyMatrix4(h.makeRotationAxis(l,t))}c[i].crossVectors(r[i],o[i])}if(!0===e){let e=Math.acos(Yn.clamp(o[0].dot(o[t]),-1,1));e/=t,r[0].dot(l.crossVectors(o[0],o[t]))>0&&(e=-e);for(let i=1;i<=t;i++)o[i].applyMatrix4(h.makeRotationAxis(r[i],e*i)),c[i].crossVectors(r[i],o[i])}return{tangents:r,normals:o,binormals:c}},clone:function(){return(new this.constructor).copy(this)},copy:function(source){return this.arcLengthDivisions=source.arcLengthDivisions,this},toJSON:function(){const data={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return data.arcLengthDivisions=this.arcLengthDivisions,data.type=this.type,data},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),sh.prototype=Object.create(ah.prototype),sh.prototype.constructor=sh,sh.prototype.isEllipseCurve=!0,sh.prototype.getPoint=function(t,e){const n=e||new Xn,r=2*Math.PI;let o=this.aEndAngle-this.aStartAngle;const c=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=r;for(;o>r;)o-=r;o<Number.EPSILON&&(o=c?0:r),!0!==this.aClockwise||c||(o===r?o=-r:o-=r);const l=this.aStartAngle+t*o;let h=this.aX+this.xRadius*Math.cos(l),d=this.aY+this.yRadius*Math.sin(l);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),n=h-this.aX,r=d-this.aY;h=n*t-r*e+this.aX,d=n*e+r*t+this.aY}return n.set(h,d)},sh.prototype.copy=function(source){return ah.prototype.copy.call(this,source),this.aX=source.aX,this.aY=source.aY,this.xRadius=source.xRadius,this.yRadius=source.yRadius,this.aStartAngle=source.aStartAngle,this.aEndAngle=source.aEndAngle,this.aClockwise=source.aClockwise,this.aRotation=source.aRotation,this},sh.prototype.toJSON=function(){const data=ah.prototype.toJSON.call(this);return data.aX=this.aX,data.aY=this.aY,data.xRadius=this.xRadius,data.yRadius=this.yRadius,data.aStartAngle=this.aStartAngle,data.aEndAngle=this.aEndAngle,data.aClockwise=this.aClockwise,data.aRotation=this.aRotation,data},sh.prototype.fromJSON=function(t){return ah.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},ch.prototype=Object.create(sh.prototype),ch.prototype.constructor=ch,ch.prototype.isArcCurve=!0;const uh=new sr,hh=new lh,dh=new lh,ph=new lh;function fh(t,e,n,r){ah.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=n||"centripetal",this.tension=void 0!==r?r:.5}function mh(t,e,n,r,o){const c=.5*(r-e),l=.5*(o-n),h=t*t;return(2*n-2*r+c+l)*(t*h)+(-3*n+3*r-2*c-l)*h+c*t+n}function gh(t,e,n,r){return function(t,p){const e=1-t;return e*e*p}(t,e)+function(t,p){return 2*(1-t)*t*p}(t,n)+function(t,p){return t*t*p}(t,r)}function vh(t,e,n,r,o){return function(t,p){const e=1-t;return e*e*e*p}(t,e)+function(t,p){const e=1-t;return 3*e*e*t*p}(t,n)+function(t,p){return 3*(1-t)*t*t*p}(t,r)+function(t,p){return t*t*t*p}(t,o)}function yh(t,e,n,r){ah.call(this),this.type="CubicBezierCurve",this.v0=t||new Xn,this.v1=e||new Xn,this.v2=n||new Xn,this.v3=r||new Xn}function xh(t,e,n,r){ah.call(this),this.type="CubicBezierCurve3",this.v0=t||new sr,this.v1=e||new sr,this.v2=n||new sr,this.v3=r||new sr}function bh(t,e){ah.call(this),this.type="LineCurve",this.v1=t||new Xn,this.v2=e||new Xn}function _h(t,e){ah.call(this),this.type="LineCurve3",this.v1=t||new sr,this.v2=e||new sr}function wh(t,e,n){ah.call(this),this.type="QuadraticBezierCurve",this.v0=t||new Xn,this.v1=e||new Xn,this.v2=n||new Xn}function Mh(t,e,n){ah.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new sr,this.v1=e||new sr,this.v2=n||new sr}function Sh(t){ah.call(this),this.type="SplineCurve",this.points=t||[]}fh.prototype=Object.create(ah.prototype),fh.prototype.constructor=fh,fh.prototype.isCatmullRomCurve3=!0,fh.prototype.getPoint=function(t,e){const n=e||new sr,r=this.points,o=r.length,p=(o-(this.closed?0:1))*t;let c,l,h=Math.floor(p),d=p-h;this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/o)+1)*o:0===d&&h===o-1&&(h=o-2,d=1),this.closed||h>0?c=r[(h-1)%o]:(uh.subVectors(r[0],r[1]).add(r[0]),c=uh);const f=r[h%o],m=r[(h+1)%o];if(this.closed||h+2<o?l=r[(h+2)%o]:(uh.subVectors(r[o-1],r[o-2]).add(r[o-1]),l=uh),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(c.distanceToSquared(f),t),n=Math.pow(f.distanceToSquared(m),t),r=Math.pow(m.distanceToSquared(l),t);n<1e-4&&(n=1),e<1e-4&&(e=n),r<1e-4&&(r=n),hh.initNonuniformCatmullRom(c.x,f.x,m.x,l.x,e,n,r),dh.initNonuniformCatmullRom(c.y,f.y,m.y,l.y,e,n,r),ph.initNonuniformCatmullRom(c.z,f.z,m.z,l.z,e,n,r)}else"catmullrom"===this.curveType&&(hh.initCatmullRom(c.x,f.x,m.x,l.x,this.tension),dh.initCatmullRom(c.y,f.y,m.y,l.y,this.tension),ph.initCatmullRom(c.z,f.z,m.z,l.z,this.tension));return n.set(hh.calc(d),dh.calc(d),ph.calc(d)),n},fh.prototype.copy=function(source){ah.prototype.copy.call(this,source),this.points=[];for(let i=0,t=source.points.length;i<t;i++){const t=source.points[i];this.points.push(t.clone())}return this.closed=source.closed,this.curveType=source.curveType,this.tension=source.tension,this},fh.prototype.toJSON=function(){const data=ah.prototype.toJSON.call(this);data.points=[];for(let i=0,t=this.points.length;i<t;i++){const t=this.points[i];data.points.push(t.toArray())}return data.closed=this.closed,data.curveType=this.curveType,data.tension=this.tension,data},fh.prototype.fromJSON=function(t){ah.prototype.fromJSON.call(this,t),this.points=[];for(let i=0,e=t.points.length;i<e;i++){const e=t.points[i];this.points.push((new sr).fromArray(e))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},yh.prototype=Object.create(ah.prototype),yh.prototype.constructor=yh,yh.prototype.isCubicBezierCurve=!0,yh.prototype.getPoint=function(t,e){const n=e||new Xn,r=this.v0,o=this.v1,c=this.v2,l=this.v3;return n.set(vh(t,r.x,o.x,c.x,l.x),vh(t,r.y,o.y,c.y,l.y)),n},yh.prototype.copy=function(source){return ah.prototype.copy.call(this,source),this.v0.copy(source.v0),this.v1.copy(source.v1),this.v2.copy(source.v2),this.v3.copy(source.v3),this},yh.prototype.toJSON=function(){const data=ah.prototype.toJSON.call(this);return data.v0=this.v0.toArray(),data.v1=this.v1.toArray(),data.v2=this.v2.toArray(),data.v3=this.v3.toArray(),data},yh.prototype.fromJSON=function(t){return ah.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},xh.prototype=Object.create(ah.prototype),xh.prototype.constructor=xh,xh.prototype.isCubicBezierCurve3=!0,xh.prototype.getPoint=function(t,e){const n=e||new sr,r=this.v0,o=this.v1,c=this.v2,l=this.v3;return n.set(vh(t,r.x,o.x,c.x,l.x),vh(t,r.y,o.y,c.y,l.y),vh(t,r.z,o.z,c.z,l.z)),n},xh.prototype.copy=function(source){return ah.prototype.copy.call(this,source),this.v0.copy(source.v0),this.v1.copy(source.v1),this.v2.copy(source.v2),this.v3.copy(source.v3),this},xh.prototype.toJSON=function(){const data=ah.prototype.toJSON.call(this);return data.v0=this.v0.toArray(),data.v1=this.v1.toArray(),data.v2=this.v2.toArray(),data.v3=this.v3.toArray(),data},xh.prototype.fromJSON=function(t){return ah.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},bh.prototype=Object.create(ah.prototype),bh.prototype.constructor=bh,bh.prototype.isLineCurve=!0,bh.prototype.getPoint=function(t,e){const n=e||new Xn;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},bh.prototype.getPointAt=function(u,t){return this.getPoint(u,t)},bh.prototype.getTangent=function(t,e){const n=e||new Xn;return n.copy(this.v2).sub(this.v1).normalize(),n},bh.prototype.copy=function(source){return ah.prototype.copy.call(this,source),this.v1.copy(source.v1),this.v2.copy(source.v2),this},bh.prototype.toJSON=function(){const data=ah.prototype.toJSON.call(this);return data.v1=this.v1.toArray(),data.v2=this.v2.toArray(),data},bh.prototype.fromJSON=function(t){return ah.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},_h.prototype=Object.create(ah.prototype),_h.prototype.constructor=_h,_h.prototype.isLineCurve3=!0,_h.prototype.getPoint=function(t,e){const n=e||new sr;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},_h.prototype.getPointAt=function(u,t){return this.getPoint(u,t)},_h.prototype.copy=function(source){return ah.prototype.copy.call(this,source),this.v1.copy(source.v1),this.v2.copy(source.v2),this},_h.prototype.toJSON=function(){const data=ah.prototype.toJSON.call(this);return data.v1=this.v1.toArray(),data.v2=this.v2.toArray(),data},_h.prototype.fromJSON=function(t){return ah.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},wh.prototype=Object.create(ah.prototype),wh.prototype.constructor=wh,wh.prototype.isQuadraticBezierCurve=!0,wh.prototype.getPoint=function(t,e){const n=e||new Xn,r=this.v0,o=this.v1,c=this.v2;return n.set(gh(t,r.x,o.x,c.x),gh(t,r.y,o.y,c.y)),n},wh.prototype.copy=function(source){return ah.prototype.copy.call(this,source),this.v0.copy(source.v0),this.v1.copy(source.v1),this.v2.copy(source.v2),this},wh.prototype.toJSON=function(){const data=ah.prototype.toJSON.call(this);return data.v0=this.v0.toArray(),data.v1=this.v1.toArray(),data.v2=this.v2.toArray(),data},wh.prototype.fromJSON=function(t){return ah.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Mh.prototype=Object.create(ah.prototype),Mh.prototype.constructor=Mh,Mh.prototype.isQuadraticBezierCurve3=!0,Mh.prototype.getPoint=function(t,e){const n=e||new sr,r=this.v0,o=this.v1,c=this.v2;return n.set(gh(t,r.x,o.x,c.x),gh(t,r.y,o.y,c.y),gh(t,r.z,o.z,c.z)),n},Mh.prototype.copy=function(source){return ah.prototype.copy.call(this,source),this.v0.copy(source.v0),this.v1.copy(source.v1),this.v2.copy(source.v2),this},Mh.prototype.toJSON=function(){const data=ah.prototype.toJSON.call(this);return data.v0=this.v0.toArray(),data.v1=this.v1.toArray(),data.v2=this.v2.toArray(),data},Mh.prototype.fromJSON=function(t){return ah.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Sh.prototype=Object.create(ah.prototype),Sh.prototype.constructor=Sh,Sh.prototype.isSplineCurve=!0,Sh.prototype.getPoint=function(t,e){const n=e||new Xn,r=this.points,p=(r.length-1)*t,o=Math.floor(p),c=p-o,l=r[0===o?o:o-1],h=r[o],d=r[o>r.length-2?r.length-1:o+1],f=r[o>r.length-3?r.length-1:o+2];return n.set(mh(c,l.x,h.x,d.x,f.x),mh(c,l.y,h.y,d.y,f.y)),n},Sh.prototype.copy=function(source){ah.prototype.copy.call(this,source),this.points=[];for(let i=0,t=source.points.length;i<t;i++){const t=source.points[i];this.points.push(t.clone())}return this},Sh.prototype.toJSON=function(){const data=ah.prototype.toJSON.call(this);data.points=[];for(let i=0,t=this.points.length;i<t;i++){const t=this.points[i];data.points.push(t.toArray())}return data},Sh.prototype.fromJSON=function(t){ah.prototype.fromJSON.call(this,t),this.points=[];for(let i=0,e=t.points.length;i<e;i++){const e=t.points[i];this.points.push((new Xn).fromArray(e))}return this};var Th=Object.freeze({__proto__:null,ArcCurve:ch,CatmullRomCurve3:fh,CubicBezierCurve:yh,CubicBezierCurve3:xh,EllipseCurve:sh,LineCurve:bh,LineCurve3:_h,QuadraticBezierCurve:wh,QuadraticBezierCurve3:Mh,SplineCurve:Sh});function Eh(){ah.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Ah(t){Eh.call(this),this.type="Path",this.currentPoint=new Xn,t&&this.setFromPoints(t)}function Lh(t){Ah.call(this,t),this.uuid=Yn.generateUUID(),this.type="Shape",this.holes=[]}function Ch(t,e){ci.call(this),this.type="Light",this.color=new Pi(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function Rh(t,e,n){Ch.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(ci.DefaultUp),this.updateMatrix(),this.groundColor=new Pi(e)}function Ph(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new Xn(512,512),this.map=null,this.mapPass=null,this.matrix=new zr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ho,this._frameExtents=new Xn(1,1),this._viewportCount=1,this._viewports=[new rr(0,0,1,1)]}function Oh(){Ph.call(this,new zo(50,1,.5,500))}function Ih(t,e,n,r,o,c){Ch.call(this,t,e),this.type="SpotLight",this.position.copy(ci.DefaultUp),this.updateMatrix(),this.target=new ci,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==o?o:0,this.decay=void 0!==c?c:1,this.shadow=new Oh}function kh(){Ph.call(this,new zo(90,1,.5,500)),this._frameExtents=new Xn(4,2),this._viewportCount=6,this._viewports=[new rr(2,1,1,1),new rr(0,1,1,1),new rr(3,1,1,1),new rr(1,1,1,1),new rr(3,0,1,1),new rr(1,0,1,1)],this._cubeDirections=[new sr(1,0,0),new sr(-1,0,0),new sr(0,0,1),new sr(0,0,-1),new sr(0,1,0),new sr(0,-1,0)],this._cubeUps=[new sr(0,1,0),new sr(0,1,0),new sr(0,1,0),new sr(0,1,0),new sr(0,0,1),new sr(0,0,-1)]}function Nh(t,e,n,r){Ch.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new kh}function Dh(t,e,n,r,o,c){Do.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==n?n:1,this.bottom=void 0!==r?r:-1,this.near=void 0!==o?o:.1,this.far=void 0!==c?c:2e3,this.updateProjectionMatrix()}function zh(){Ph.call(this,new Dh(-5,5,5,-5,.5,500))}function Bh(t,e){Ch.call(this,t,e),this.type="DirectionalLight",this.position.copy(ci.DefaultUp),this.updateMatrix(),this.target=new ci,this.shadow=new zh}function Fh(t,e){Ch.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function jh(t,e,n,r){Ch.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}Eh.prototype=Object.assign(Object.create(ah.prototype),{constructor:Eh,add:function(t){this.curves.push(t)},closePath:function(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new bh(e,t))},getPoint:function(t){const e=t*this.getLength(),n=this.getCurveLengths();let i=0;for(;i<n.length;){if(n[i]>=e){const t=n[i]-e,r=this.curves[i],o=r.getLength(),u=0===o?0:1-t/o;return r.getPointAt(u)}i++}return null},getLength:function(){const t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let i=0,n=this.curves.length;i<n;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;const e=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const o=r[i],c=o&&o.isEllipseCurve?2*t:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?t*o.points.length:t,l=o.getPoints(c);for(let t=0;t<l.length;t++){const r=l[t];n&&n.equals(r)||(e.push(r),n=r)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e},copy:function(source){ah.prototype.copy.call(this,source),this.curves=[];for(let i=0,t=source.curves.length;i<t;i++){const t=source.curves[i];this.curves.push(t.clone())}return this.autoClose=source.autoClose,this},toJSON:function(){const data=ah.prototype.toJSON.call(this);data.autoClose=this.autoClose,data.curves=[];for(let i=0,t=this.curves.length;i<t;i++){const t=this.curves[i];data.curves.push(t.toJSON())}return data},fromJSON:function(t){ah.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(let i=0,e=t.curves.length;i<e;i++){const e=t.curves[i];this.curves.push((new Th[e.type]).fromJSON(e))}return this}}),Ah.prototype=Object.assign(Object.create(Eh.prototype),{constructor:Ah,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(let i=1,e=t.length;i<e;i++)this.lineTo(t[i].x,t[i].y);return this},moveTo:function(t,e){return this.currentPoint.set(t,e),this},lineTo:function(t,e){const n=new bh(this.currentPoint.clone(),new Xn(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this},quadraticCurveTo:function(t,e,n,r){const o=new wh(this.currentPoint.clone(),new Xn(t,e),new Xn(n,r));return this.curves.push(o),this.currentPoint.set(n,r),this},bezierCurveTo:function(t,e,n,r,o,c){const l=new yh(this.currentPoint.clone(),new Xn(t,e),new Xn(n,r),new Xn(o,c));return this.curves.push(l),this.currentPoint.set(o,c),this},splineThru:function(t){const e=new Sh([this.currentPoint.clone()].concat(t));return this.curves.push(e),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,e,n,r,o,c){const l=this.currentPoint.x,h=this.currentPoint.y;return this.absarc(t+l,e+h,n,r,o,c),this},absarc:function(t,e,n,r,o,c){return this.absellipse(t,e,n,n,r,o,c),this},ellipse:function(t,e,n,r,o,c,l,h){const d=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(t+d,e+f,n,r,o,c,l,h),this},absellipse:function(t,e,n,r,o,c,l,h){const d=new sh(t,e,n,r,o,c,l,h);if(this.curves.length>0){const t=d.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(d);const f=d.getPoint(1);return this.currentPoint.copy(f),this},copy:function(source){return Eh.prototype.copy.call(this,source),this.currentPoint.copy(source.currentPoint),this},toJSON:function(){const data=Eh.prototype.toJSON.call(this);return data.currentPoint=this.currentPoint.toArray(),data},fromJSON:function(t){return Eh.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),Lh.prototype=Object.assign(Object.create(Ah.prototype),{constructor:Lh,getPointsHoles:function(t){const e=[];for(let i=0,n=this.holes.length;i<n;i++)e[i]=this.holes[i].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(source){Ah.prototype.copy.call(this,source),this.holes=[];for(let i=0,t=source.holes.length;i<t;i++){const t=source.holes[i];this.holes.push(t.clone())}return this},toJSON:function(){const data=Ah.prototype.toJSON.call(this);data.uuid=this.uuid,data.holes=[];for(let i=0,t=this.holes.length;i<t;i++){const t=this.holes[i];data.holes.push(t.toJSON())}return data},fromJSON:function(t){Ah.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(let i=0,e=t.holes.length;i<e;i++){const e=t.holes[i];this.holes.push((new Ah).fromJSON(e))}return this}}),Ch.prototype=Object.assign(Object.create(ci.prototype),{constructor:Ch,isLight:!0,copy:function(source){return ci.prototype.copy.call(this,source),this.color.copy(source.color),this.intensity=source.intensity,this},toJSON:function(meta){const data=ci.prototype.toJSON.call(this,meta);return data.object.color=this.color.getHex(),data.object.intensity=this.intensity,void 0!==this.groundColor&&(data.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(data.object.distance=this.distance),void 0!==this.angle&&(data.object.angle=this.angle),void 0!==this.decay&&(data.object.decay=this.decay),void 0!==this.penumbra&&(data.object.penumbra=this.penumbra),void 0!==this.shadow&&(data.object.shadow=this.shadow.toJSON()),data}}),Rh.prototype=Object.assign(Object.create(Ch.prototype),{constructor:Rh,isHemisphereLight:!0,copy:function(source){return Ch.prototype.copy.call(this,source),this.groundColor.copy(source.groundColor),this}}),Object.assign(Ph.prototype,{_projScreenMatrix:new zr,_lightPositionWorld:new sr,_lookTarget:new sr,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){const e=this.camera,n=this.matrix,r=this._projScreenMatrix,o=this._lookTarget,c=this._lightPositionWorld;c.setFromMatrixPosition(t.matrixWorld),e.position.copy(c),o.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(o),e.updateMatrixWorld(),r.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(r),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(source){return this.camera=source.camera.clone(),this.bias=source.bias,this.radius=source.radius,this.mapSize.copy(source.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const object={};return 0!==this.bias&&(object.bias=this.bias),0!==this.normalBias&&(object.normalBias=this.normalBias),1!==this.radius&&(object.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(object.mapSize=this.mapSize.toArray()),object.camera=this.camera.toJSON(!1).object,delete object.camera.matrix,object}}),Oh.prototype=Object.assign(Object.create(Ph.prototype),{constructor:Oh,isSpotLightShadow:!0,updateMatrices:function(t){const e=this.camera,n=2*Yn.RAD2DEG*t.angle,r=this.mapSize.width/this.mapSize.height,o=t.distance||e.far;n===e.fov&&r===e.aspect&&o===e.far||(e.fov=n,e.aspect=r,e.far=o,e.updateProjectionMatrix()),Ph.prototype.updateMatrices.call(this,t)}}),Ih.prototype=Object.assign(Object.create(Ch.prototype),{constructor:Ih,isSpotLight:!0,copy:function(source){return Ch.prototype.copy.call(this,source),this.distance=source.distance,this.angle=source.angle,this.penumbra=source.penumbra,this.decay=source.decay,this.target=source.target.clone(),this.shadow=source.shadow.clone(),this}}),kh.prototype=Object.assign(Object.create(Ph.prototype),{constructor:kh,isPointLightShadow:!0,updateMatrices:function(t,e){void 0===e&&(e=0);const n=this.camera,r=this.matrix,o=this._lightPositionWorld,c=this._lookTarget,l=this._projScreenMatrix;o.setFromMatrixPosition(t.matrixWorld),n.position.copy(o),c.copy(n.position),c.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(c),n.updateMatrixWorld(),r.makeTranslation(-o.x,-o.y,-o.z),l.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(l)}}),Nh.prototype=Object.assign(Object.create(Ch.prototype),{constructor:Nh,isPointLight:!0,copy:function(source){return Ch.prototype.copy.call(this,source),this.distance=source.distance,this.decay=source.decay,this.shadow=source.shadow.clone(),this}}),Dh.prototype=Object.assign(Object.create(Do.prototype),{constructor:Dh,isOrthographicCamera:!0,copy:function(source,t){return Do.prototype.copy.call(this,source,t),this.left=source.left,this.right=source.right,this.top=source.top,this.bottom=source.bottom,this.near=source.near,this.far=source.far,this.zoom=source.zoom,this.view=null===source.view?null:Object.assign({},source.view),this},setViewOffset:function(t,e,n,r,o,c){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=o,this.view.height=c,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let o=n-t,c=n+t,l=r+e,h=r-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=t*this.view.offsetX,c=o+t*this.view.width,l-=e*this.view.offsetY,h=l-e*this.view.height}this.projectionMatrix.makeOrthographic(o,c,l,h,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(meta){const data=ci.prototype.toJSON.call(this,meta);return data.object.zoom=this.zoom,data.object.left=this.left,data.object.right=this.right,data.object.top=this.top,data.object.bottom=this.bottom,data.object.near=this.near,data.object.far=this.far,null!==this.view&&(data.object.view=Object.assign({},this.view)),data}}),zh.prototype=Object.assign(Object.create(Ph.prototype),{constructor:zh,isDirectionalLightShadow:!0,updateMatrices:function(t){Ph.prototype.updateMatrices.call(this,t)}}),Bh.prototype=Object.assign(Object.create(Ch.prototype),{constructor:Bh,isDirectionalLight:!0,copy:function(source){return Ch.prototype.copy.call(this,source),this.target=source.target.clone(),this.shadow=source.shadow.clone(),this}}),Fh.prototype=Object.assign(Object.create(Ch.prototype),{constructor:Fh,isAmbientLight:!0}),jh.prototype=Object.assign(Object.create(Ch.prototype),{constructor:jh,isRectAreaLight:!0,copy:function(source){return Ch.prototype.copy.call(this,source),this.width=source.width,this.height=source.height,this},toJSON:function(meta){const data=Ch.prototype.toJSON.call(this,meta);return data.object.width=this.width,data.object.height=this.height,data}});class Uh{constructor(){Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(let i=0;i<9;i++)this.coefficients.push(new sr)}set(t){for(let i=0;i<9;i++)this.coefficients[i].copy(t[i]);return this}zero(){for(let i=0;i<9;i++)this.coefficients[i].set(0,0,0);return this}getAt(t,e){const n=t.x,r=t.y,o=t.z,c=this.coefficients;return e.copy(c[0]).multiplyScalar(.282095),e.addScaledVector(c[1],.488603*r),e.addScaledVector(c[2],.488603*o),e.addScaledVector(c[3],.488603*n),e.addScaledVector(c[4],n*r*1.092548),e.addScaledVector(c[5],r*o*1.092548),e.addScaledVector(c[6],.315392*(3*o*o-1)),e.addScaledVector(c[7],n*o*1.092548),e.addScaledVector(c[8],.546274*(n*n-r*r)),e}getIrradianceAt(t,e){const n=t.x,r=t.y,o=t.z,c=this.coefficients;return e.copy(c[0]).multiplyScalar(.886227),e.addScaledVector(c[1],1.023328*r),e.addScaledVector(c[2],1.023328*o),e.addScaledVector(c[3],1.023328*n),e.addScaledVector(c[4],.858086*n*r),e.addScaledVector(c[5],.858086*r*o),e.addScaledVector(c[6],.743125*o*o-.247708),e.addScaledVector(c[7],.858086*n*o),e.addScaledVector(c[8],.429043*(n*n-r*r)),e}add(t){for(let i=0;i<9;i++)this.coefficients[i].add(t.coefficients[i]);return this}addScaledSH(t,s){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(t.coefficients[i],s);return this}scale(s){for(let i=0;i<9;i++)this.coefficients[i].multiplyScalar(s);return this}lerp(t,e){for(let i=0;i<9;i++)this.coefficients[i].lerp(t.coefficients[i],e);return this}equals(t){for(let i=0;i<9;i++)if(!this.coefficients[i].equals(t.coefficients[i]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t,e){void 0===e&&(e=0);const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(t,e+3*i);return this}toArray(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(t,e+3*i);return t}static getBasisAt(t,e){const n=t.x,r=t.y,o=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*o,e[3]=.488603*n,e[4]=1.092548*n*r,e[5]=1.092548*r*o,e[6]=.315392*(3*o*o-1),e[7]=1.092548*n*o,e[8]=.546274*(n*n-r*r)}}function Gh(t,e){Ch.call(this,void 0,e),this.type="LightProbe",this.sh=void 0!==t?t:new Uh}function Hh(t){Xu.call(this,t),this.textures={}}Gh.prototype=Object.assign(Object.create(Ch.prototype),{constructor:Gh,isLightProbe:!0,copy:function(source){return Ch.prototype.copy.call(this,source),this.sh.copy(source.sh),this},fromJSON:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this},toJSON:function(meta){const data=Ch.prototype.toJSON.call(this,meta);return data.object.sh=this.sh.toArray(),data}}),Hh.prototype=Object.assign(Object.create(Xu.prototype),{constructor:Hh,load:function(t,e,n,r){const o=this,c=new Qu(o.manager);c.setPath(o.path),c.setRequestHeader(o.requestHeader),c.load(t,(function(text){try{e(o.parse(JSON.parse(text)))}catch(e){r?r(e):console.error(e),o.manager.itemError(t)}}),n,r)},parse:function(t){const e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}const r=new Pu[t.type];if(void 0!==t.uuid&&(r.uuid=t.uuid),void 0!==t.name&&(r.name=t.name),void 0!==t.color&&r.color.setHex(t.color),void 0!==t.roughness&&(r.roughness=t.roughness),void 0!==t.metalness&&(r.metalness=t.metalness),void 0!==t.sheen&&(r.sheen=(new Pi).setHex(t.sheen)),void 0!==t.emissive&&r.emissive.setHex(t.emissive),void 0!==t.specular&&r.specular.setHex(t.specular),void 0!==t.shininess&&(r.shininess=t.shininess),void 0!==t.clearcoat&&(r.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(r.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.fog&&(r.fog=t.fog),void 0!==t.flatShading&&(r.flatShading=t.flatShading),void 0!==t.blending&&(r.blending=t.blending),void 0!==t.combine&&(r.combine=t.combine),void 0!==t.side&&(r.side=t.side),void 0!==t.opacity&&(r.opacity=t.opacity),void 0!==t.transparent&&(r.transparent=t.transparent),void 0!==t.alphaTest&&(r.alphaTest=t.alphaTest),void 0!==t.depthTest&&(r.depthTest=t.depthTest),void 0!==t.depthWrite&&(r.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(r.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(r.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(r.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(r.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(r.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(r.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(r.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(r.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(r.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(r.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(r.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(r.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(r.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(r.rotation=t.rotation),1!==t.linewidth&&(r.linewidth=t.linewidth),void 0!==t.dashSize&&(r.dashSize=t.dashSize),void 0!==t.gapSize&&(r.gapSize=t.gapSize),void 0!==t.scale&&(r.scale=t.scale),void 0!==t.polygonOffset&&(r.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(r.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(r.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(r.skinning=t.skinning),void 0!==t.morphTargets&&(r.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(r.morphNormals=t.morphNormals),void 0!==t.dithering&&(r.dithering=t.dithering),void 0!==t.vertexTangents&&(r.vertexTangents=t.vertexTangents),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.toneMapped&&(r.toneMapped=t.toneMapped),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.vertexColors&&("number"==typeof t.vertexColors?r.vertexColors=t.vertexColors>0:r.vertexColors=t.vertexColors),void 0!==t.uniforms)for(const e in t.uniforms){const o=t.uniforms[e];switch(r.uniforms[e]={},o.type){case"t":r.uniforms[e].value=n(o.value);break;case"c":r.uniforms[e].value=(new Pi).setHex(o.value);break;case"v2":r.uniforms[e].value=(new Xn).fromArray(o.value);break;case"v3":r.uniforms[e].value=(new sr).fromArray(o.value);break;case"v4":r.uniforms[e].value=(new rr).fromArray(o.value);break;case"m3":r.uniforms[e].value=(new Jn).fromArray(o.value);break;case"m4":r.uniforms[e].value=(new zr).fromArray(o.value);break;default:r.uniforms[e].value=o.value}}if(void 0!==t.defines&&(r.defines=t.defines),void 0!==t.vertexShader&&(r.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(r.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(const e in t.extensions)r.extensions[e]=t.extensions[e];if(void 0!==t.shading&&(r.flatShading=1===t.shading),void 0!==t.size&&(r.size=t.size),void 0!==t.sizeAttenuation&&(r.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(r.map=n(t.map)),void 0!==t.matcap&&(r.matcap=n(t.matcap)),void 0!==t.alphaMap&&(r.alphaMap=n(t.alphaMap)),void 0!==t.bumpMap&&(r.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(r.bumpScale=t.bumpScale),void 0!==t.normalMap&&(r.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(r.normalMapType=t.normalMapType),void 0!==t.normalScale){let e=t.normalScale;!1===Array.isArray(e)&&(e=[e,e]),r.normalScale=(new Xn).fromArray(e)}return void 0!==t.displacementMap&&(r.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(r.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(r.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(r.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(r.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(r.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(r.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(r.specularMap=n(t.specularMap)),void 0!==t.envMap&&(r.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(r.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(r.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(r.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(r.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(r.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(r.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(r.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(r.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatMap&&(r.clearcoatMap=n(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(r.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(r.clearcoatNormalScale=(new Xn).fromArray(t.clearcoatNormalScale)),void 0!==t.transmission&&(r.transmission=t.transmission),void 0!==t.transmissionMap&&(r.transmissionMap=n(t.transmissionMap)),r},setTextures:function(t){return this.textures=t,this}});const Vh={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let s="";for(let i=0,e=t.length;i<e;i++)s+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(s))}catch(t){return s}},extractUrlBase:function(t){const e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};function Wh(){ro.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function qh(t,e,n,r){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Bi.call(this,t,e,n),this.meshPerAttribute=r||1}function Zh(t){Xu.call(this,t)}Wh.prototype=Object.assign(Object.create(ro.prototype),{constructor:Wh,isInstancedBufferGeometry:!0,copy:function(source){return ro.prototype.copy.call(this,source),this.instanceCount=source.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const data=ro.prototype.toJSON.call(this);return data.instanceCount=this.instanceCount,data.isInstancedBufferGeometry=!0,data}}),qh.prototype=Object.assign(Object.create(Bi.prototype),{constructor:qh,isInstancedBufferAttribute:!0,copy:function(source){return Bi.prototype.copy.call(this,source),this.meshPerAttribute=source.meshPerAttribute,this},toJSON:function(){const data=Bi.prototype.toJSON.call(this);return data.meshPerAttribute=this.meshPerAttribute,data.isInstancedBufferAttribute=!0,data}}),Zh.prototype=Object.assign(Object.create(Xu.prototype),{constructor:Zh,load:function(t,e,n,r){const o=this,c=new Qu(o.manager);c.setPath(o.path),c.setRequestHeader(o.requestHeader),c.load(t,(function(text){try{e(o.parse(JSON.parse(text)))}catch(e){r?r(e):console.error(e),o.manager.itemError(t)}}),n,r)},parse:function(t){const e={},n={};function r(t,r){if(void 0!==e[r])return e[r];const o=t.interleavedBuffers[r],c=function(t,e){if(void 0!==n[e])return n[e];const r=t.arrayBuffers[e],o=new Uint32Array(r).buffer;return n[e]=o,o}(t,o.buffer),l=new rc(new $h[o.type](c),o.stride);return l.uuid=o.uuid,e[r]=l,l}const o=t.isInstancedBufferGeometry?new Wh:new ro,c=t.data.index;if(void 0!==c){const t=new $h[c.type](c.array);o.setIndex(new Bi(t,1))}const l=t.data.attributes;for(const e in l){const n=l[e];let c;if(n.isInterleavedBufferAttribute){c=new oc(r(t.data,n.data),n.itemSize,n.offset,n.normalized)}else{const t=new $h[n.type](n.array);c=new(n.isInstancedBufferAttribute?qh:Bi)(t,n.itemSize,n.normalized)}void 0!==n.name&&(c.name=n.name),o.setAttribute(e,c)}const h=t.data.morphAttributes;if(h)for(const e in h){const n=h[e],c=[];for(let i=0,e=n.length;i<e;i++){const e=n[i];let o;if(e.isInterleavedBufferAttribute){o=new oc(r(t.data,e.data),e.itemSize,e.offset,e.normalized)}else{o=new Bi(new $h[e.type](e.array),e.itemSize,e.normalized)}void 0!==e.name&&(o.name=e.name),c.push(o)}o.morphAttributes[e]=c}t.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==d)for(let i=0,t=d.length;i!==t;++i){const t=d[i];o.addGroup(t.start,t.count,t.materialIndex)}const f=t.data.boundingSphere;if(void 0!==f){const t=new sr;void 0!==f.center&&t.fromArray(f.center),o.boundingSphere=new Lr(t,f.radius)}return t.name&&(o.name=t.name),t.userData&&(o.userData=t.userData),o}});const $h={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Yh(t){Xu.call(this,t)}Yh.prototype=Object.assign(Object.create(Xu.prototype),{constructor:Yh,load:function(t,e,n,r){const o=this,path=""===this.path?Vh.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||path;const c=new Qu(o.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.load(t,(function(text){let n=null;try{n=JSON.parse(text)}catch(e){return void 0!==r&&r(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}const c=n.metadata;void 0!==c&&void 0!==c.type&&"geometry"!==c.type.toLowerCase()?o.parse(n,e):console.error("THREE.ObjectLoader: Can't load "+t)}),n,r)},parse:function(t,e){const n=this.parseShape(t.shapes),r=this.parseGeometries(t.geometries,n),o=this.parseImages(t.images,(function(){void 0!==e&&e(object)})),c=this.parseTextures(t.textures,o),l=this.parseMaterials(t.materials,c),object=this.parseObject(t.object,r,l);return t.animations&&(object.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(object),object},parseShape:function(t){const e={};if(void 0!==t)for(let i=0,n=t.length;i<n;i++){const n=(new Lh).fromJSON(t[i]);e[n.uuid]=n}return e},parseGeometries:function(t,e){const n={};let r;if(void 0!==t){const o=new Zh;for(let i=0,c=t.length;i<c;i++){let c;const data=t[i];switch(data.type){case"PlaneGeometry":case"PlaneBufferGeometry":c=new bu[data.type](data.width,data.height,data.widthSegments,data.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":c=new bu[data.type](data.width,data.height,data.depth,data.widthSegments,data.heightSegments,data.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":c=new bu[data.type](data.radius,data.segments,data.thetaStart,data.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":c=new bu[data.type](data.radiusTop,data.radiusBottom,data.height,data.radialSegments,data.heightSegments,data.openEnded,data.thetaStart,data.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":c=new bu[data.type](data.radius,data.height,data.radialSegments,data.heightSegments,data.openEnded,data.thetaStart,data.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":c=new bu[data.type](data.radius,data.widthSegments,data.heightSegments,data.phiStart,data.phiLength,data.thetaStart,data.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":c=new bu[data.type](data.radius,data.detail);break;case"RingGeometry":case"RingBufferGeometry":c=new bu[data.type](data.innerRadius,data.outerRadius,data.thetaSegments,data.phiSegments,data.thetaStart,data.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":c=new bu[data.type](data.radius,data.tube,data.radialSegments,data.tubularSegments,data.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":c=new bu[data.type](data.radius,data.tube,data.tubularSegments,data.radialSegments,data.p,data.q);break;case"TubeGeometry":case"TubeBufferGeometry":c=new bu[data.type]((new Th[data.path.type]).fromJSON(data.path),data.tubularSegments,data.radius,data.radialSegments,data.closed);break;case"LatheGeometry":case"LatheBufferGeometry":c=new bu[data.type](data.points,data.segments,data.phiStart,data.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":c=new bu[data.type](data.vertices,data.indices,data.radius,data.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":r=[];for(let t=0,n=data.shapes.length;t<n;t++){const n=e[data.shapes[t]];r.push(n)}c=new bu[data.type](r,data.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":r=[];for(let t=0,n=data.shapes.length;t<n;t++){const n=e[data.shapes[t]];r.push(n)}const t=data.options.extrudePath;void 0!==t&&(data.options.extrudePath=(new Th[t.type]).fromJSON(t)),c=new bu[data.type](r,data.options);break;case"BufferGeometry":case"InstancedBufferGeometry":c=o.parse(data);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+data.type+'"');continue}c.uuid=data.uuid,void 0!==data.name&&(c.name=data.name),!0===c.isBufferGeometry&&void 0!==data.userData&&(c.userData=data.userData),n[data.uuid]=c}}return n},parseMaterials:function(t,e){const n={},r={};if(void 0!==t){const o=new Hh;o.setTextures(e);for(let i=0,e=t.length;i<e;i++){const data=t[i];if("MultiMaterial"===data.type){const t=[];for(let e=0;e<data.materials.length;e++){const r=data.materials[e];void 0===n[r.uuid]&&(n[r.uuid]=o.parse(r)),t.push(n[r.uuid])}r[data.uuid]=t}else void 0===n[data.uuid]&&(n[data.uuid]=o.parse(data)),r[data.uuid]=n[data.uuid]}}return r},parseAnimations:function(t){const e=[];for(let i=0;i<t.length;i++){const data=t[i],n=Wu.parse(data);void 0!==data.uuid&&(n.uuid=data.uuid),e.push(n)}return e},parseImages:function(t,e){const n=this,r={};let o;function c(t){return n.manager.itemStart(t),o.load(t,(function(){n.manager.itemEnd(t)}),void 0,(function(){n.manager.itemError(t),n.manager.itemEnd(t)}))}if(void 0!==t&&t.length>0){const l=new $u(e);o=new nh(l),o.setCrossOrigin(this.crossOrigin);for(let i=0,e=t.length;i<e;i++){const image=t[i],e=image.url;if(Array.isArray(e)){r[image.uuid]=[];for(let t=0,o=e.length;t<o;t++){const o=e[t],path=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:n.resourcePath+o;r[image.uuid].push(c(path))}}else{const path=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(image.url)?image.url:n.resourcePath+image.url;r[image.uuid]=c(path)}}}return r},parseTextures:function(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}const r={};if(void 0!==t)for(let i=0,o=t.length;i<o;i++){const data=t[i];let o;void 0===data.image&&console.warn('THREE.ObjectLoader: No "image" specified for',data.uuid),void 0===e[data.image]&&console.warn("THREE.ObjectLoader: Undefined image",data.image),o=Array.isArray(e[data.image])?new ha(e[data.image]):new nr(e[data.image]),o.needsUpdate=!0,o.uuid=data.uuid,void 0!==data.name&&(o.name=data.name),void 0!==data.mapping&&(o.mapping=n(data.mapping,Xh)),void 0!==data.offset&&o.offset.fromArray(data.offset),void 0!==data.repeat&&o.repeat.fromArray(data.repeat),void 0!==data.center&&o.center.fromArray(data.center),void 0!==data.rotation&&(o.rotation=data.rotation),void 0!==data.wrap&&(o.wrapS=n(data.wrap[0],Jh),o.wrapT=n(data.wrap[1],Jh)),void 0!==data.format&&(o.format=data.format),void 0!==data.type&&(o.type=data.type),void 0!==data.encoding&&(o.encoding=data.encoding),void 0!==data.minFilter&&(o.minFilter=n(data.minFilter,Qh)),void 0!==data.magFilter&&(o.magFilter=n(data.magFilter,Qh)),void 0!==data.anisotropy&&(o.anisotropy=data.anisotropy),void 0!==data.flipY&&(o.flipY=data.flipY),void 0!==data.premultiplyAlpha&&(o.premultiplyAlpha=data.premultiplyAlpha),void 0!==data.unpackAlignment&&(o.unpackAlignment=data.unpackAlignment),r[data.uuid]=o}return r},parseObject:function(data,t,e){let object,n,r;function o(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function c(t){if(void 0!==t){if(Array.isArray(t)){const n=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];void 0===e[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),n.push(e[r])}return n}return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),e[t]}}switch(data.type){case"Scene":object=new nc,void 0!==data.background&&Number.isInteger(data.background)&&(object.background=new Pi(data.background)),void 0!==data.fog&&("Fog"===data.fog.type?object.fog=new ec(data.fog.color,data.fog.near,data.fog.far):"FogExp2"===data.fog.type&&(object.fog=new tc(data.fog.color,data.fog.density)));break;case"PerspectiveCamera":object=new zo(data.fov,data.aspect,data.near,data.far),void 0!==data.focus&&(object.focus=data.focus),void 0!==data.zoom&&(object.zoom=data.zoom),void 0!==data.filmGauge&&(object.filmGauge=data.filmGauge),void 0!==data.filmOffset&&(object.filmOffset=data.filmOffset),void 0!==data.view&&(object.view=Object.assign({},data.view));break;case"OrthographicCamera":object=new Dh(data.left,data.right,data.top,data.bottom,data.near,data.far),void 0!==data.zoom&&(object.zoom=data.zoom),void 0!==data.view&&(object.view=Object.assign({},data.view));break;case"AmbientLight":object=new Fh(data.color,data.intensity);break;case"DirectionalLight":object=new Bh(data.color,data.intensity);break;case"PointLight":object=new Nh(data.color,data.intensity,data.distance,data.decay);break;case"RectAreaLight":object=new jh(data.color,data.intensity,data.width,data.height);break;case"SpotLight":object=new Ih(data.color,data.intensity,data.distance,data.angle,data.penumbra,data.decay);break;case"HemisphereLight":object=new Rh(data.color,data.groundColor,data.intensity);break;case"LightProbe":object=(new Gh).fromJSON(data);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":n=o(data.geometry),r=c(data.material),object=new wo(n,r);break;case"InstancedMesh":n=o(data.geometry),r=c(data.material);const t=data.count,e=data.instanceMatrix;object=new kc(n,r,t),object.instanceMatrix=new Bi(new Float32Array(e.array),16);break;case"LOD":object=new Sc;break;case"Line":object=new Uc(o(data.geometry),c(data.material),data.mode);break;case"LineLoop":object=new Wc(o(data.geometry),c(data.material));break;case"LineSegments":object=new Vc(o(data.geometry),c(data.material));break;case"PointCloud":case"Points":object=new Jc(o(data.geometry),c(data.material));break;case"Sprite":object=new bc(c(data.material));break;case"Group":object=new $s;break;default:object=new ci}if(object.uuid=data.uuid,void 0!==data.name&&(object.name=data.name),void 0!==data.matrix?(object.matrix.fromArray(data.matrix),void 0!==data.matrixAutoUpdate&&(object.matrixAutoUpdate=data.matrixAutoUpdate),object.matrixAutoUpdate&&object.matrix.decompose(object.position,object.quaternion,object.scale)):(void 0!==data.position&&object.position.fromArray(data.position),void 0!==data.rotation&&object.rotation.fromArray(data.rotation),void 0!==data.quaternion&&object.quaternion.fromArray(data.quaternion),void 0!==data.scale&&object.scale.fromArray(data.scale)),void 0!==data.castShadow&&(object.castShadow=data.castShadow),void 0!==data.receiveShadow&&(object.receiveShadow=data.receiveShadow),data.shadow&&(void 0!==data.shadow.bias&&(object.shadow.bias=data.shadow.bias),void 0!==data.shadow.normalBias&&(object.shadow.normalBias=data.shadow.normalBias),void 0!==data.shadow.radius&&(object.shadow.radius=data.shadow.radius),void 0!==data.shadow.mapSize&&object.shadow.mapSize.fromArray(data.shadow.mapSize),void 0!==data.shadow.camera&&(object.shadow.camera=this.parseObject(data.shadow.camera))),void 0!==data.visible&&(object.visible=data.visible),void 0!==data.frustumCulled&&(object.frustumCulled=data.frustumCulled),void 0!==data.renderOrder&&(object.renderOrder=data.renderOrder),void 0!==data.userData&&(object.userData=data.userData),void 0!==data.layers&&(object.layers.mask=data.layers),void 0!==data.children){const n=data.children;for(let i=0;i<n.length;i++)object.add(this.parseObject(n[i],t,e))}if("LOD"===data.type){void 0!==data.autoUpdate&&(object.autoUpdate=data.autoUpdate);const t=data.levels;for(let e=0;e<t.length;e++){const n=t[e],r=object.getObjectByProperty("uuid",n.object);void 0!==r&&object.addLevel(r,n.distance)}}return object}});const Xh={UVMapping:ft,CubeReflectionMapping:mt,CubeRefractionMapping:gt,EquirectangularReflectionMapping:vt,EquirectangularRefractionMapping:yt,CubeUVReflectionMapping:xt,CubeUVRefractionMapping:bt},Jh={RepeatWrapping:_t,ClampToEdgeWrapping:wt,MirroredRepeatWrapping:Mt},Qh={NearestFilter:St,NearestMipmapNearestFilter:Tt,NearestMipmapLinearFilter:At,LinearFilter:Ct,LinearMipmapNearestFilter:Rt,LinearMipmapLinearFilter:Ot};function Kh(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Xu.call(this,t),this.options={premultiplyAlpha:"none"}}function ed(){this.type="ShapePath",this.color=new Pi,this.subPaths=[],this.currentPath=null}function nd(data){this.type="Font",this.data=data}function rd(t,e,n,r,data){const glyph=data.glyphs[t]||data.glyphs["?"];if(!glyph)return void console.error('THREE.Font: character "'+t+'" does not exists in font family '+data.familyName+".");const path=new ed;let o,c,l,h,d,f,m,v;if(glyph.o){const t=glyph._cachedOutline||(glyph._cachedOutline=glyph.o.split(" "));for(let i=0,y=t.length;i<y;){switch(t[i++]){case"m":o=t[i++]*e+n,c=t[i++]*e+r,path.moveTo(o,c);break;case"l":o=t[i++]*e+n,c=t[i++]*e+r,path.lineTo(o,c);break;case"q":l=t[i++]*e+n,h=t[i++]*e+r,d=t[i++]*e+n,f=t[i++]*e+r,path.quadraticCurveTo(d,f,l,h);break;case"b":l=t[i++]*e+n,h=t[i++]*e+r,d=t[i++]*e+n,f=t[i++]*e+r,m=t[i++]*e+n,v=t[i++]*e+r,path.bezierCurveTo(d,f,m,v,l,h)}}}return{offsetX:glyph.ha*e,path:path}}function id(t){Xu.call(this,t)}let od;Kh.prototype=Object.assign(Object.create(Xu.prototype),{constructor:Kh,isImageBitmapLoader:!0,setOptions:function(t){return this.options=t,this},load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const o=this,c=Zu.get(t);if(void 0!==c)return o.manager.itemStart(t),setTimeout((function(){e&&e(c),o.manager.itemEnd(t)}),0),c;fetch(t).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,o.options)})).then((function(n){Zu.add(t,n),e&&e(n),o.manager.itemEnd(t)})).catch((function(e){r&&r(e),o.manager.itemError(t),o.manager.itemEnd(t)})),o.manager.itemStart(t)}}),Object.assign(ed.prototype,{moveTo:function(t,e){return this.currentPath=new Ah,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this},lineTo:function(t,e){return this.currentPath.lineTo(t,e),this},quadraticCurveTo:function(t,e,n,r){return this.currentPath.quadraticCurveTo(t,e,n,r),this},bezierCurveTo:function(t,e,n,r,o,c){return this.currentPath.bezierCurveTo(t,e,n,r,o,c),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,e){function n(t){const e=[];for(let i=0,n=t.length;i<n;i++){const n=t[i],r=new Lh;r.curves=n.curves,e.push(r)}return e}function r(t,e){const n=e.length;let r=!1;for(let p=n-1,q=0;q<n;p=q++){let n=e[p],o=e[q],c=o.x-n.x,l=o.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=e[q],c=-c,o=e[p],l=-l),t.y<n.y||t.y>o.y)continue;if(t.y===n.y){if(t.x===n.x)return!0}else{const e=l*(t.x-n.x)-c*(t.y-n.y);if(0===e)return!0;if(e<0)continue;r=!r}}else{if(t.y!==n.y)continue;if(o.x<=t.x&&t.x<=n.x||n.x<=t.x&&t.x<=o.x)return!0}}return r}const o=Yl.isClockWise,c=this.subPaths;if(0===c.length)return[];if(!0===e)return n(c);let l,h,d;const f=[];if(1===c.length)return h=c[0],d=new Lh,d.curves=h.curves,f.push(d),f;let m=!o(c[0].getPoints());m=t?!m:m;const v=[],y=[];let x,_,w=[],M=0;y[M]=void 0,w[M]=[];for(let i=0,e=c.length;i<e;i++)h=c[i],x=h.getPoints(),l=o(x),l=t?!l:l,l?(!m&&y[M]&&M++,y[M]={s:new Lh,p:x},y[M].s.curves=h.curves,m&&M++,w[M]=[]):w[M].push({h:h,p:x[0]});if(!y[0])return n(c);if(y.length>1){let t=!1;const e=[];for(let t=0,e=y.length;t<e;t++)v[t]=[];for(let n=0,o=y.length;n<o;n++){const o=w[n];for(let c=0;c<o.length;c++){const l=o[c];let h=!0;for(let o=0;o<y.length;o++)r(l.p,y[o].p)&&(n!==o&&e.push({froms:n,tos:o,hole:c}),h?(h=!1,v[o].push(l)):t=!0);h&&v[n].push(l)}}e.length>0&&(t||(w=v))}for(let i=0,t=y.length;i<t;i++){d=y[i].s,f.push(d),_=w[i];for(let t=0,e=_.length;t<e;t++)d.holes.push(_[t].h)}return f}}),Object.assign(nd.prototype,{isFont:!0,generateShapes:function(text,t){void 0===t&&(t=100);const e=[],n=function(text,t,data){const e=Array.from?Array.from(text):String(text).split(""),n=t/data.resolution,r=(data.boundingBox.yMax-data.boundingBox.yMin+data.underlineThickness)*n,o=[];let c=0,l=0;for(let i=0;i<e.length;i++){const t=e[i];if("\n"===t)c=0,l-=r;else{const e=rd(t,n,c,l,data);c+=e.offsetX,o.push(e.path)}}return o}(text,t,this.data);for(let p=0,t=n.length;p<t;p++)Array.prototype.push.apply(e,n[p].toShapes());return e}}),id.prototype=Object.assign(Object.create(Xu.prototype),{constructor:id,load:function(t,e,n,r){const o=this,c=new Qu(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.load(t,(function(text){let t;try{t=JSON.parse(text)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),t=JSON.parse(text.substring(65,text.length-2))}const n=o.parse(t);e&&e(n)}),n,r)},parse:function(t){return new nd(t)}});const ad={getContext:function(){return void 0===od&&(od=new(window.AudioContext||window.webkitAudioContext)),od},setContext:function(t){od=t}};function sd(t){Xu.call(this,t)}function cd(t,e,n){Gh.call(this,void 0,n);const r=(new Pi).set(t),o=(new Pi).set(e),c=new sr(r.r,r.g,r.b),l=new sr(o.r,o.g,o.b),h=Math.sqrt(Math.PI),d=h*Math.sqrt(.75);this.sh.coefficients[0].copy(c).add(l).multiplyScalar(h),this.sh.coefficients[1].copy(c).sub(l).multiplyScalar(d)}function ld(t,e){Gh.call(this,void 0,e);const n=(new Pi).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}sd.prototype=Object.assign(Object.create(Xu.prototype),{constructor:sd,load:function(t,e,n,r){const o=this,c=new Qu(o.manager);c.setResponseType("arraybuffer"),c.setPath(o.path),c.setRequestHeader(o.requestHeader),c.load(t,(function(n){try{const t=n.slice(0);ad.getContext().decodeAudioData(t,(function(t){e(t)}))}catch(e){r?r(e):console.error(e),o.manager.itemError(t)}}),n,r)}}),cd.prototype=Object.assign(Object.create(Gh.prototype),{constructor:cd,isHemisphereLightProbe:!0,copy:function(source){return Gh.prototype.copy.call(this,source),this},toJSON:function(meta){return Gh.prototype.toJSON.call(this,meta)}}),ld.prototype=Object.assign(Object.create(Gh.prototype),{constructor:ld,isAmbientLightProbe:!0,copy:function(source){return Gh.prototype.copy.call(this,source),this},toJSON:function(meta){return Gh.prototype.toJSON.call(this,meta)}});const ud=new zr,hd=new zr;function pd(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new zo,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new zo,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(pd.prototype,{update:function(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep;const n=t.projectionMatrix.clone(),r=e.eyeSep/2,o=r*e.near/e.focus,c=e.near*Math.tan(Yn.DEG2RAD*e.fov*.5)/e.zoom;let l,h;hd.elements[12]=-r,ud.elements[12]=r,l=-c*e.aspect+o,h=c*e.aspect+o,n.elements[0]=2*e.near/(h-l),n.elements[8]=(h+l)/(h-l),this.cameraL.projectionMatrix.copy(n),l=-c*e.aspect-o,h=c*e.aspect-o,n.elements[0]=2*e.near/(h-l),n.elements[8]=(h+l)/(h-l),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(hd),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(ud)}});class fd{constructor(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=("undefined"==typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}const md=new sr,gd=new ar,vd=new sr,yd=new sr;class xd extends ci{constructor(){super(),this.type="AudioListener",this.context=ad.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new fd}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(md,gd,vd),yd.set(0,0,-1).applyQuaternion(gd),e.positionX){const t=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(md.x,t),e.positionY.linearRampToValueAtTime(md.y,t),e.positionZ.linearRampToValueAtTime(md.z,t),e.forwardX.linearRampToValueAtTime(yd.x,t),e.forwardY.linearRampToValueAtTime(yd.y,t),e.forwardZ.linearRampToValueAtTime(yd.z,t),e.upX.linearRampToValueAtTime(n.x,t),e.upY.linearRampToValueAtTime(n.y,t),e.upZ.linearRampToValueAtTime(n.z,t)}else e.setPosition(md.x,md.y,md.z),e.setOrientation(yd.x,yd.y,yd.z,n.x,n.y,n.z)}}class bd extends ci{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t){if(void 0===t&&(t=0),!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const source=this.context.createBufferSource();return source.buffer=this.buffer,source.loop=this.loop,source.loopStart=this.loopStart,source.loopEnd=this.loopEnd,source.onended=this.onEnded.bind(this),source.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=source,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let i=1,t=this.filters.length;i<t;i++)this.filters[i-1].connect(this.filters[i]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let i=1,t=this.filters.length;i<t;i++)this.filters[i-1].disconnect(this.filters[i]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this}setDetune(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(filter){return this.setFilters(filter?[filter]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}const _d=new sr,wd=new ar,Md=new sr,Sd=new sr;class Td extends bd{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(_d,wd,Md),Sd.set(0,0,1).applyQuaternion(wd);const e=this.panner;if(e.positionX){const t=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(_d.x,t),e.positionY.linearRampToValueAtTime(_d.y,t),e.positionZ.linearRampToValueAtTime(_d.z,t),e.orientationX.linearRampToValueAtTime(Sd.x,t),e.orientationY.linearRampToValueAtTime(Sd.y,t),e.orientationZ.linearRampToValueAtTime(Sd.z,t)}else e.setPosition(_d.x,_d.y,_d.z),e.setOrientation(Sd.x,Sd.y,Sd.z)}}class Ed{constructor(audio,t){this.analyser=audio.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),audio.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const data=this.getFrequencyData();for(let i=0;i<data.length;i++)t+=data[i];return t/data.length}}function Ad(t,e,n){let r,o,c;switch(this.binding=t,this.valueSize=n,e){case"quaternion":r=this._slerp,o=this._slerpAdditive,c=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,o=this._select,c=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,o=this._lerpAdditive,c=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=o,this._setIdentity=c,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(Ad.prototype,{accumulate:function(t,e){const n=this.buffer,r=this.valueSize,o=t*r+r;let c=this.cumulativeWeight;if(0===c){for(let i=0;i!==r;++i)n[o+i]=n[i];c=e}else{c+=e;const t=e/c;this._mixBufferRegion(n,o,0,t,r)}this.cumulativeWeight=c},accumulateAdditive:function(t){const e=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,n),this.cumulativeWeightAdditive+=t},apply:function(t){const e=this.valueSize,n=this.buffer,r=t*e+e,o=this.cumulativeWeight,c=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const t=e*this._origIndex;this._mixBufferRegion(n,r,t,1-o,e)}c>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*e,1,e);for(let i=e,t=e+e;i!==t;++i)if(n[i]!==n[i+e]){l.setValue(n,r);break}},saveOriginalState:function(){const t=this.binding,e=this.buffer,n=this.valueSize,r=n*this._origIndex;t.getValue(e,r);for(let i=n,t=r;i!==t;++i)e[i]=e[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_setAdditiveIdentityNumeric:function(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let i=t;i<e;i++)this.buffer[i]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[e+i]=this.buffer[t+i]},_select:function(t,e,n,r,o){if(r>=.5)for(let i=0;i!==o;++i)t[e+i]=t[n+i]},_slerp:function(t,e,n,r){ar.slerpFlat(t,e,t,e,t,n,r)},_slerpAdditive:function(t,e,n,r,o){const c=this._workIndex*o;ar.multiplyQuaternionsFlat(t,c,t,e,t,n),ar.slerpFlat(t,e,t,e,t,c,r)},_lerp:function(t,e,n,r,o){const s=1-r;for(let i=0;i!==o;++i){const o=e+i;t[o]=t[o]*s+t[n+i]*r}},_lerpAdditive:function(t,e,n,r,o){for(let i=0;i!==o;++i){const o=e+i;t[o]=t[o]+t[n+i]*r}}});const Ld=new RegExp("[\\[\\]\\.:\\/]","g"),Cd="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Rd=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),Pd=/(WCOD+)?/.source.replace("WCOD",Cd),Od=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Id=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),kd=new RegExp("^"+Rd+Pd+Od+Id+"$"),Nd=["material","materials","bones"];function Dd(t,path,e){const n=e||zd.parseTrackName(path);this._targetGroup=t,this._bindings=t.subscribe_(path,n)}function zd(t,path,e){this.path=path,this.parsedPath=e||zd.parseTrackName(path),this.node=zd.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function Bd(){this.uuid=Yn.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let i=0,e=arguments.length;i!==e;++i)t[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}Object.assign(Dd.prototype,{getValue:function(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)},setValue:function(t,e){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)},bind:function(){const t=this._bindings;for(let i=this._targetGroup.nCachedObjects_,e=t.length;i!==e;++i)t[i].bind()},unbind:function(){const t=this._bindings;for(let i=this._targetGroup.nCachedObjects_,e=t.length;i!==e;++i)t[i].unbind()}}),Object.assign(zd,{Composite:Dd,create:function(t,path,e){return t&&t.isAnimationObjectGroup?new zd.Composite(t,path,e):new zd(t,path,e)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(Ld,"")},parseTrackName:function(t){const e=kd.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const t=n.nodeName.substring(r+1);-1!==Nd.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n},findNode:function(t,e){if(!e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let i=0;i<t.length;i++){const r=t[i];if(r.name===e||r.uuid===e)return r;const o=n(r.children);if(o)return o}return null},r=n(t.children);if(r)return r}return null}}),Object.assign(zd.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){const source=this.resolvedProperty;for(let i=0,n=source.length;i!==n;++i)t[e++]=source[i]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++]},function(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){let t=this.node;const e=this.parsedPath,n=e.objectName,r=e.propertyName;let o=e.propertyIndex;if(t||(t=zd.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let i=0;i<t.length;i++)if(t[i].name===r){r=i;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==r){if(void 0===t[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[r]}}const c=t[r];if(void 0===c){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",t)}let l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let h=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}h=this.BindingType.ArrayElement,this.resolvedProperty=c,this.propertyIndex=o}else void 0!==c.fromArray&&void 0!==c.toArray?(h=this.BindingType.HasFromToArray,this.resolvedProperty=c):Array.isArray(c)?(h=this.BindingType.EntireArray,this.resolvedProperty=c):this.propertyName=r;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][l]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(zd.prototype,{_getValue_unbound:zd.prototype.getValue,_setValue_unbound:zd.prototype.setValue}),Object.assign(Bd.prototype,{isAnimationObjectGroup:!0,add:function(){const t=this._objects,e=this._indicesByUUID,n=this._paths,r=this._parsedPaths,o=this._bindings,c=o.length;let l=void 0,h=t.length,d=this.nCachedObjects_;for(let i=0,f=arguments.length;i!==f;++i){const object=arguments[i],f=object.uuid;let m=e[f];if(void 0===m){m=h++,e[f]=m,t.push(object);for(let t=0,e=c;t!==e;++t)o[t].push(new zd(object,n[t],r[t]))}else if(m<d){l=t[m];const h=--d,v=t[h];e[v.uuid]=m,t[m]=v,e[f]=h,t[h]=object;for(let t=0,e=c;t!==e;++t){const e=o[t],c=e[h];let l=e[m];e[m]=c,void 0===l&&(l=new zd(object,n[t],r[t])),e[h]=l}}else t[m]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=d},remove:function(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length;let o=this.nCachedObjects_;for(let i=0,c=arguments.length;i!==c;++i){const object=arguments[i],c=object.uuid,l=e[c];if(void 0!==l&&l>=o){const h=o++,d=t[h];e[d.uuid]=l,t[l]=d,e[c]=h,t[h]=object;for(let t=0,e=r;t!==e;++t){const e=n[t],r=e[h],o=e[l];e[l]=r,e[h]=o}}}this.nCachedObjects_=o},uncache:function(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length;let o=this.nCachedObjects_,c=t.length;for(let i=0,l=arguments.length;i!==l;++i){const l=arguments[i].uuid,h=e[l];if(void 0!==h)if(delete e[l],h<o){const l=--o,d=t[l],f=--c,m=t[f];e[d.uuid]=h,t[h]=d,e[m.uuid]=l,t[l]=m,t.pop();for(let t=0,e=r;t!==e;++t){const e=n[t],r=e[l],o=e[f];e[h]=r,e[l]=o,e.pop()}}else{const o=--c,l=t[o];e[l.uuid]=h,t[h]=l,t.pop();for(let t=0,e=r;t!==e;++t){const e=n[t];e[h]=e[o],e.pop()}}}this.nCachedObjects_=o},subscribe_:function(path,t){const e=this._bindingsIndicesByPath;let n=e[path];const r=this._bindings;if(void 0!==n)return r[n];const o=this._paths,c=this._parsedPaths,l=this._objects,h=l.length,d=this.nCachedObjects_,f=new Array(h);n=r.length,e[path]=n,o.push(path),c.push(t),r.push(f);for(let i=d,e=l.length;i!==e;++i){const object=l[i];f[i]=new zd(object,path,t)}return f},unsubscribe_:function(path){const t=this._bindingsIndicesByPath,e=t[path];if(void 0!==e){const n=this._paths,r=this._parsedPaths,o=this._bindings,c=o.length-1,l=o[c];t[path[c]]=e,o[e]=l,o.pop(),r[e]=r[c],r.pop(),n[e]=n[c],n.pop()}}});class Fd{constructor(t,e,n,r){this._mixer=t,this._clip=e,this._localRoot=n||null,this.blendMode=r||e.blendMode;const o=e.tracks,c=o.length,l=new Array(c),h={endingStart:Qe,endingEnd:Qe};for(let i=0;i!==c;++i){const t=o[i].createInterpolant(null);l[i]=t,t.settings=h}this._interpolantSettings=h,this._interpolants=l,this._propertyBindings=new Array(c),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Ze,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(time){return this._startTime=time,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const n=this._clip.duration,r=t._clip.duration,o=r/n,c=n/r;t.warp(1,o,e),this.warp(c,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const r=this._mixer,o=r.time,c=this.timeScale;let l=this._timeScaleInterpolant;null===l&&(l=r._lendControlInterpolant(),this._timeScaleInterpolant=l);const h=l.parameterPositions,d=l.sampleValues;return h[0]=o,h[1]=o+n,d[0]=t/c,d[1]=e/c,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(time,t,e,n){if(!this.enabled)return void this._updateWeight(time);const r=this._startTime;if(null!==r){const n=(time-r)*e;if(n<0||0===e)return;this._startTime=null,t=e*n}t*=this._updateTimeScale(time);const o=this._updateTime(t),c=this._updateWeight(time);if(c>0){const t=this._interpolants,e=this._propertyBindings;switch(this.blendMode){case nn:for(let n=0,r=t.length;n!==r;++n)t[n].evaluate(o),e[n].accumulateAdditive(c);break;case en:default:for(let r=0,l=t.length;r!==l;++r)t[r].evaluate(o),e[r].accumulate(n,c)}}}_updateWeight(time){let t=0;if(this.enabled){t=this.weight;const e=this._weightInterpolant;if(null!==e){const n=e.evaluate(time)[0];t*=n,time>e.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(time){let t=0;if(!this.paused){t=this.timeScale;const e=this._timeScaleInterpolant;if(null!==e){t*=e.evaluate(time)[0],time>e.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(t){const e=this._clip.duration,n=this.loop;let time=this.time+t,r=this._loopCount;const o=n===$e;if(0===t)return-1===r?time:o&&1==(1&r)?e-time:time;if(n===qe){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(time>=e)time=e;else{if(!(time<0)){this.time=time;break t}time=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=time,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),time>=e||time<0){const n=Math.floor(time/e);time-=e*n,r+=Math.abs(n);const c=this.repetitions-r;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,time=t>0?e:0,this.time=time,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===c){const e=t<0;this._setEndings(e,!e,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=time,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=time;if(o&&1==(1&r))return e-time}return time}_setEndings(t,e,n){const r=this._interpolantSettings;n?(r.endingStart=Ke,r.endingEnd=Ke):(r.endingStart=t?this.zeroSlopeAtStart?Ke:Qe:tn,r.endingEnd=e?this.zeroSlopeAtEnd?Ke:Qe:tn)}_scheduleFading(t,e,n){const r=this._mixer,o=r.time;let c=this._weightInterpolant;null===c&&(c=r._lendControlInterpolant(),this._weightInterpolant=c);const l=c.parameterPositions,h=c.sampleValues;return l[0]=o,h[0]=e,l[1]=o+t,h[1]=n,this}}function jd(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}jd.prototype=Object.assign(Object.create(qn.prototype),{constructor:jd,_bindAction:function(t,e){const n=t._localRoot||this._root,r=t._clip.tracks,o=r.length,c=t._propertyBindings,l=t._interpolants,h=n.uuid,d=this._bindingsByRootAndName;let f=d[h];void 0===f&&(f={},d[h]=f);for(let i=0;i!==o;++i){const track=r[i],t=track.name;let o=f[t];if(void 0!==o)c[i]=o;else{if(o=c[i],void 0!==o){null===o._cacheIndex&&(++o.referenceCount,this._addInactiveBinding(o,h,t));continue}const path=e&&e._propertyBindings[i].binding.parsedPath;o=new Ad(zd.create(n,t,path),track.ValueTypeName,track.getValueSize()),++o.referenceCount,this._addInactiveBinding(o,h,t),c[i]=o}l[i].resultBuffer=o.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}const e=t._propertyBindings;for(let i=0,t=e.length;i!==t;++i){const t=e[i];0==t.useCount++&&(this._lendBinding(t),t.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let i=0,t=e.length;i!==t;++i){const t=e[i];0==--t.useCount&&(t.restoreOriginalState(),this._takeBackBinding(t))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){const r=this._actions,o=this._actionsByClip;let c=o[e];if(void 0===c)c={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,o[e]=c;else{const e=c.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=r.length,r.push(t),c.actionByRoot[n]=t},_removeInactiveAction:function(t){const e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;const o=t._clip.uuid,c=this._actionsByClip,l=c[o],h=l.knownActions,d=h[h.length-1],f=t._byClipCacheIndex;d._byClipCacheIndex=f,h[f]=d,h.pop(),t._byClipCacheIndex=null,delete l.actionByRoot[(t._localRoot||this._root).uuid],0===h.length&&delete c[o],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){const e=t._propertyBindings;for(let i=0,t=e.length;i!==t;++i){const t=e[i];0==--t.referenceCount&&this._removeInactiveBinding(t)}},_lendAction:function(t){const e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=n,e[n]=o},_takeBackAction:function(t){const e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=n,e[n]=o},_addInactiveBinding:function(t,e,n){const r=this._bindingsByRootAndName,o=this._bindings;let c=r[e];void 0===c&&(c={},r[e]=c),c[n]=t,t._cacheIndex=o.length,o.push(t)},_removeInactiveBinding:function(t){const e=this._bindings,n=t.binding,r=n.rootNode.uuid,o=n.path,c=this._bindingsByRootAndName,l=c[r],h=e[e.length-1],d=t._cacheIndex;h._cacheIndex=d,e[d]=h,e.pop(),delete l[o],0===Object.keys(l).length&&delete c[r]},_lendBinding:function(t){const e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=n,e[n]=o},_takeBackBinding:function(t){const e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=n,e[n]=o},_lendControlInterpolant:function(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return void 0===n&&(n=new Nu(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){const e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,o=e[r];t.__cacheIndex=r,e[r]=t,o.__cacheIndex=n,e[n]=o},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e,n){const r=e||this._root,o=r.uuid;let c="string"==typeof t?Wu.findByName(r,t):t;const l=null!==c?c.uuid:t,h=this._actionsByClip[l];let d=null;if(void 0===n&&(n=null!==c?c.blendMode:en),void 0!==h){const t=h.actionByRoot[o];if(void 0!==t&&t.blendMode===n)return t;d=h.knownActions[0],null===c&&(c=d._clip)}if(null===c)return null;const f=new Fd(this,c,e,n);return this._bindAction(f,d),this._addInactiveAction(f,l,o),f},existingAction:function(t,e){const n=e||this._root,r=n.uuid,o="string"==typeof t?Wu.findByName(n,t):t,c=o?o.uuid:t,l=this._actionsByClip[c];return void 0!==l&&l.actionByRoot[r]||null},stopAllAction:function(){const t=this._actions;for(let i=this._nActiveActions-1;i>=0;--i)t[i].stop();return this},update:function(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,time=this.time+=t,r=Math.sign(t),o=this._accuIndex^=1;for(let i=0;i!==n;++i){e[i]._update(time,t,r,o)}const c=this._bindings,l=this._nActiveBindings;for(let i=0;i!==l;++i)c[i].apply(o);return this},setTime:function(t){this.time=0;for(let i=0;i<this._actions.length;i++)this._actions[i].time=0;return this.update(t)},getRoot:function(){return this._root},uncacheClip:function(t){const e=this._actions,n=t.uuid,r=this._actionsByClip,o=r[n];if(void 0!==o){const t=o.knownActions;for(let i=0,n=t.length;i!==n;++i){const n=t[i];this._deactivateAction(n);const r=n._cacheIndex,o=e[e.length-1];n._cacheIndex=null,n._byClipCacheIndex=null,o._cacheIndex=r,e[r]=o,e.pop(),this._removeInactiveBindingsForAction(n)}delete r[n]}},uncacheRoot:function(t){const e=t.uuid,n=this._actionsByClip;for(const t in n){const r=n[t].actionByRoot[e];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}const r=this._bindingsByRootAndName[e];if(void 0!==r)for(const t in r){const e=r[t];e.restoreOriginalState(),this._removeInactiveBinding(e)}},uncacheAction:function(t,e){const n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}});class Ud{constructor(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}clone(){return new Ud(void 0===this.value.clone?this.value:this.value.clone())}}function Gd(t,e,n){rc.call(this,t,e),this.meshPerAttribute=n||1}function Hd(t,e,n,r,o){this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=r,this.count=o,this.version=0}function Vd(t,e,n,r){this.ray=new Dr(t,e),this.near=n||0,this.far=r||1/0,this.camera=null,this.layers=new $r,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Wd(a,b){return a.distance-b.distance}function qd(object,t,e,n){if(object.layers.test(t.layers)&&object.raycast(t,e),!0===n){const n=object.children;for(let i=0,r=n.length;i<r;i++)qd(n[i],t,e,!0)}}Gd.prototype=Object.assign(Object.create(rc.prototype),{constructor:Gd,isInstancedInterleavedBuffer:!0,copy:function(source){return rc.prototype.copy.call(this,source),this.meshPerAttribute=source.meshPerAttribute,this},clone:function(data){const t=rc.prototype.clone.call(this,data);return t.meshPerAttribute=this.meshPerAttribute,t},toJSON:function(data){const t=rc.prototype.toJSON.call(this,data);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}),Object.defineProperty(Hd.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Hd.prototype,{isGLBufferAttribute:!0,setBuffer:function(t){return this.buffer=t,this},setType:function(t,e){return this.type=t,this.elementSize=e,this},setItemSize:function(t){return this.itemSize=t,this},setCount:function(t){return this.count=t,this}}),Object.assign(Vd.prototype,{set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(object,t,e){const n=e||[];return qd(object,this,n,t),n.sort(Wd),n},intersectObjects:function(t,e,n){const r=n||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(let i=0,n=t.length;i<n;i++)qd(t[i],this,r,e);return r.sort(Wd),r}});class Zd{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}clone(){return(new this.constructor).copy(this)}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(Yn.clamp(e/this.radius,-1,1))),this}}class $d{constructor(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}set(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}clone(){return(new this.constructor).copy(this)}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}}const Yd=new Xn;class Xd{constructor(t,e){Object.defineProperty(this,"isBox2",{value:!0}),this.min=void 0!==t?t:new Xn(1/0,1/0),this.max=void 0!==e?e:new Xn(-1/0,-1/0)}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let i=0,e=t.length;i<e;i++)this.expandByPoint(t[i]);return this}setFromCenterAndSize(t,e){const n=Yd.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new Xn),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new Xn),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new Xn),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new Xn),e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Yd.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Jd=new sr,Qd=new sr;class Kd{constructor(t,e){this.start=void 0!==t?t:new sr,this.end=void 0!==e?e:new sr}set(t,e){return this.start.copy(t),this.end.copy(e),this}clone(){return(new this.constructor).copy(this)}copy(line){return this.start.copy(line.start),this.end.copy(line.end),this}getCenter(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new sr),t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new sr),t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new sr),this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){Jd.subVectors(t,this.start),Qd.subVectors(this.end,this.start);const n=Qd.dot(Qd);let r=Qd.dot(Jd)/n;return e&&(r=Yn.clamp(r,0,1)),r}closestPointToPoint(t,e,n){const r=this.closestPointToPointParameter(t,e);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new sr),this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(line){return line.start.equals(this.start)&&line.end.equals(this.end)}}function tp(t){ci.call(this),this.material=t,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}tp.prototype=Object.create(ci.prototype),tp.prototype.constructor=tp,tp.prototype.isImmediateRenderObject=!0;const ep=new sr;class np extends ci{constructor(t,e){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;const n=new ro,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let i=0,t=1,e=32;i<e;i++,t++){const n=i/e*Math.PI*2,o=t/e*Math.PI*2;r.push(Math.cos(n),Math.sin(n),1,Math.cos(o),Math.sin(o),1)}n.setAttribute("position",new qi(r,3));const o=new Nc({fog:!1,toneMapped:!1});this.cone=new Vc(n,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),ep.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(ep),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const ip=new sr,op=new zr,ap=new zr;class sp extends Vc{constructor(object){const t=function t(object){const e=[];object&&object.isBone&&e.push(object);for(let i=0;i<object.children.length;i++)e.push.apply(e,t(object.children[i]));return e}(object),e=new ro,n=[],r=[],o=new Pi(0,0,1),c=new Pi(0,1,0);for(let i=0;i<t.length;i++){const e=t[i];e.parent&&e.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),r.push(o.r,o.g,o.b),r.push(c.r,c.g,c.b))}e.setAttribute("position",new qi(n,3)),e.setAttribute("color",new qi(r,3)),super(e,new Nc({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=object,this.bones=t,this.matrix=object.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,r=n.getAttribute("position");ap.getInverse(this.root.matrixWorld);for(let i=0,t=0;i<e.length;i++){const n=e[i];n.parent&&n.parent.isBone&&(op.multiplyMatrices(ap,n.matrixWorld),ip.setFromMatrixPosition(op),r.setXYZ(t,ip.x,ip.y,ip.z),op.multiplyMatrices(ap,n.parent.matrixWorld),ip.setFromMatrixPosition(op),r.setXYZ(t+1,ip.x,ip.y,ip.z),t+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}class cp extends wo{constructor(t,e,n){super(new ou(e,4,2),new Ni({wireframe:!0,fog:!1,toneMapped:!1})),this.light=t,this.light.updateMatrixWorld(),this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const lp=new sr,up=new Pi,hp=new Pi;class dp extends ci{constructor(t,e,n){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const r=new fl(e);r.rotateY(.5*Math.PI),this.material=new Ni({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const o=r.getAttribute("position"),c=new Float32Array(3*o.count);r.setAttribute("color",new Bi(c,3)),this.add(new wo(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");up.copy(this.light.color),hp.copy(this.light.groundColor);for(let i=0,t=e.count;i<t;i++){const n=i<t/2?up:hp;e.setXYZ(i,n.r,n.g,n.b)}e.needsUpdate=!0}t.lookAt(lp.setFromMatrixPosition(this.light.matrixWorld).negate())}}class pp extends Vc{constructor(t,e,n,r){t=t||10,e=e||10,n=new Pi(void 0!==n?n:4473924),r=new Pi(void 0!==r?r:8947848);const o=e/2,c=t/e,l=t/2,h=[],d=[];for(let i=0,t=0,f=-l;i<=e;i++,f+=c){h.push(-l,0,f,l,0,f),h.push(f,0,-l,f,0,l);const e=i===o?n:r;e.toArray(d,t),t+=3,e.toArray(d,t),t+=3,e.toArray(d,t),t+=3,e.toArray(d,t),t+=3}const f=new ro;f.setAttribute("position",new qi(h,3)),f.setAttribute("color",new qi(d,3)),super(f,new Nc({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}class fp extends Vc{constructor(t,e,n,r,o,c){t=t||10,e=e||16,n=n||8,r=r||64,o=new Pi(void 0!==o?o:4473924),c=new Pi(void 0!==c?c:8947848);const l=[],h=[];for(let i=0;i<=e;i++){const n=i/e*(2*Math.PI),r=Math.sin(n)*t,d=Math.cos(n)*t;l.push(0,0,0),l.push(r,0,d);const f=1&i?o:c;h.push(f.r,f.g,f.b),h.push(f.r,f.g,f.b)}for(let i=0;i<=n;i++){const e=1&i?o:c,d=t-t/n*i;for(let t=0;t<r;t++){let n=t/r*(2*Math.PI),o=Math.sin(n)*d,c=Math.cos(n)*d;l.push(o,0,c),h.push(e.r,e.g,e.b),n=(t+1)/r*(2*Math.PI),o=Math.sin(n)*d,c=Math.cos(n)*d,l.push(o,0,c),h.push(e.r,e.g,e.b)}}const d=new ro;d.setAttribute("position",new qi(l,3)),d.setAttribute("color",new qi(h,3)),super(d,new Nc({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}}const mp=new sr,gp=new sr,vp=new sr;class yp extends ci{constructor(t,e,n){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1);let r=new ro;r.setAttribute("position",new qi([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const o=new Nc({fog:!1,toneMapped:!1});this.lightPlane=new Uc(r,o),this.add(this.lightPlane),r=new ro,r.setAttribute("position",new qi([0,0,0,0,0,1],3)),this.targetLine=new Uc(r,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){mp.setFromMatrixPosition(this.light.matrixWorld),gp.setFromMatrixPosition(this.light.target.matrixWorld),vp.subVectors(gp,mp),this.lightPlane.lookAt(gp),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(gp),this.targetLine.scale.z=vp.length()}}const xp=new sr,bp=new Do;class _p extends Vc{constructor(t){const e=new ro,n=new Nc({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],o=[],c={},l=new Pi(16755200),h=new Pi(16711680),d=new Pi(43775),f=new Pi(16777215),m=new Pi(3355443);function v(a,b,t){y(a,t),y(b,t)}function y(t,e){r.push(0,0,0),o.push(e.r,e.g,e.b),void 0===c[t]&&(c[t]=[]),c[t].push(r.length/3-1)}v("n1","n2",l),v("n2","n4",l),v("n4","n3",l),v("n3","n1",l),v("f1","f2",l),v("f2","f4",l),v("f4","f3",l),v("f3","f1",l),v("n1","f1",l),v("n2","f2",l),v("n3","f3",l),v("n4","f4",l),v("p","n1",h),v("p","n2",h),v("p","n3",h),v("p","n4",h),v("u1","u2",d),v("u2","u3",d),v("u3","u1",d),v("c","t",f),v("p","c",m),v("cn1","cn2",m),v("cn3","cn4",m),v("cf1","cf2",m),v("cf3","cf4",m),e.setAttribute("position",new qi(r,3)),e.setAttribute("color",new qi(o,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=c,this.update()}update(){const t=this.geometry,e=this.pointMap;bp.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),wp("c",e,t,bp,0,0,-1),wp("t",e,t,bp,0,0,1),wp("n1",e,t,bp,-1,-1,-1),wp("n2",e,t,bp,1,-1,-1),wp("n3",e,t,bp,-1,1,-1),wp("n4",e,t,bp,1,1,-1),wp("f1",e,t,bp,-1,-1,1),wp("f2",e,t,bp,1,-1,1),wp("f3",e,t,bp,-1,1,1),wp("f4",e,t,bp,1,1,1),wp("u1",e,t,bp,.7,1.1,-1),wp("u2",e,t,bp,-.7,1.1,-1),wp("u3",e,t,bp,0,2,-1),wp("cf1",e,t,bp,-1,0,1),wp("cf2",e,t,bp,1,0,1),wp("cf3",e,t,bp,0,-1,1),wp("cf4",e,t,bp,0,1,1),wp("cn1",e,t,bp,-1,0,-1),wp("cn2",e,t,bp,1,0,-1),wp("cn3",e,t,bp,0,-1,-1),wp("cn4",e,t,bp,0,1,-1),t.getAttribute("position").needsUpdate=!0}}function wp(t,e,n,r,o,c,l){xp.set(o,c,l).unproject(r);const h=e[t];if(void 0!==h){const t=n.getAttribute("position");for(let i=0,e=h.length;i<e;i++)t.setXYZ(h[i],xp.x,xp.y,xp.z)}}const Mp=new ur;class Sp extends Vc{constructor(object,t=16776960){const e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),r=new ro;r.setIndex(new Bi(e,1)),r.setAttribute("position",new Bi(n,3)),super(r,new Nc({color:t,toneMapped:!1})),this.object=object,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(object){if(void 0!==object&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Mp.setFromObject(this.object),Mp.isEmpty())return;const t=Mp.min,e=Mp.max,n=this.geometry.attributes.position,r=n.array;r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=t.x,r[4]=e.y,r[5]=e.z,r[6]=t.x,r[7]=t.y,r[8]=e.z,r[9]=e.x,r[10]=t.y,r[11]=e.z,r[12]=e.x,r[13]=e.y,r[14]=t.z,r[15]=t.x,r[16]=e.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=e.x,r[22]=t.y,r[23]=t.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(object){return this.object=object,this.update(),this}copy(source){return Vc.prototype.copy.call(this,source),this.object=source.object,this}}class Tp extends Vc{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new ro;r.setIndex(new Bi(n,1)),r.setAttribute("position",new qi([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new Nc({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}}class Ep extends Uc{constructor(t,e,n){const r=void 0!==n?n:16776960,o=new ro;o.setAttribute("position",new qi([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),o.computeBoundingSphere(),super(o,new Nc({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=void 0===e?1:e;const c=new ro;c.setAttribute("position",new qi([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),c.computeBoundingSphere(),this.add(new wo(c,new Ni({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){let e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?w:_,this.lookAt(this.plane.normal),super.updateMatrixWorld(t)}}const Ap=new sr;let Lp,Cp;class Rp extends ci{constructor(t,e,n,r,o,c){super(),this.type="ArrowHelper",void 0===t&&(t=new sr(0,0,1)),void 0===e&&(e=new sr(0,0,0)),void 0===n&&(n=1),void 0===r&&(r=16776960),void 0===o&&(o=.2*n),void 0===c&&(c=.2*o),void 0===Lp&&(Lp=new ro,Lp.setAttribute("position",new qi([0,0,0,0,1,0],3)),Cp=new mu(0,.5,1,5,1),Cp.translate(0,-.5,0)),this.position.copy(e),this.line=new Uc(Lp,new Nc({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new wo(Cp,new Ni({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,o,c)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{Ap.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(Ap,e)}}setLength(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(source){return super.copy(source,!1),this.line.copy(source.line),this.cone.copy(source.cone),this}}class Pp extends Vc{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new ro;n.setAttribute("position",new qi(e,3)),n.setAttribute("color",new qi([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(n,new Nc({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}}const Op=Math.pow(2,8),Ip=[.125,.215,.35,.446,.526,.582],kp=5+Ip.length,Np={[sn]:0,[cn]:1,[un]:2,[dn]:3,[pn]:4,[fn]:5,[ln]:6},Dp=new Dh,{_lodPlanes:zp,_sizeLods:Bp,_sigmas:Fp}=function(){const t=[],e=[],n=[];let r=8;for(let i=0;i<kp;i++){const o=Math.pow(2,r);e.push(o);let c=1/o;i>4?c=Ip[i-8+4-1]:0==i&&(c=0),n.push(c);const l=1/(o-1),h=-l/2,d=1+l/2,f=[h,h,d,h,d,d,h,h,d,d,h,d],m=6,v=6,y=3,x=2,_=1,w=new Float32Array(y*v*m),M=new Float32Array(x*v*m),S=new Float32Array(_*v*m);for(let t=0;t<m;t++){const e=t%3*2/3-1,n=t>2?0:-1,r=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];w.set(r,y*v*t),M.set(f,x*v*t);const o=[t,t,t,t,t,t];S.set(o,_*v*t)}const T=new ro;T.setAttribute("position",new Bi(w,y)),T.setAttribute("uv",new Bi(M,x)),T.setAttribute("faceIndex",new Bi(S,_)),t.push(T),r>4&&r--}return{_lodPlanes:t,_sizeLods:e,_sigmas:n}}();let jp=null;const Up=(1+Math.sqrt(5))/2,Gp=1/Up,Hp=[new sr(1,1,1),new sr(-1,1,1),new sr(1,1,-1),new sr(-1,1,-1),new sr(0,Up,Gp),new sr(0,Up,-Gp),new sr(Gp,0,Up),new sr(-Gp,0,Up),new sr(Up,Gp,0),new sr(-Up,Gp,0)];class Vp{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=function(t){const e=new Float32Array(t),n=new sr(0,1,0);return new wu({name:"SphericalGaussianBlur",defines:{n:t},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:Np[sn]},outputEncoding:{value:Np[sn]}},vertexShader:Xp(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t${Jp()}\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:E,depthTest:!1,depthWrite:!1})}(20),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){jp=this._renderer.getRenderTarget();const o=this._allocateTargets();return this._sceneToCubeUV(t,n,r,o),e>0&&this._blur(o,0,0,e),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(t){return this._fromTexture(t)}fromCubemap(t){return this._fromTexture(t)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=Yp(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=$p(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let i=0;i<zp.length;i++)zp[i].dispose()}_cleanup(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(jp),t.scissorTest=!1,Zp(t,0,0,t.width,t.height)}_fromTexture(t){jp=this._renderer.getRenderTarget();const e=this._allocateTargets(t);return this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e}_allocateTargets(t){const e={magFilter:St,minFilter:St,generateMipmaps:!1,type:kt,format:Jt,encoding:Wp(t)?t.encoding:un,depthBuffer:!1},n=qp(e);return n.depthBuffer=!t,this._pingPongRenderTarget=qp(e),n}_compileMaterial(t){const e=new wo(zp[0],t);this._renderer.compile(e,Dp)}_sceneToCubeUV(t,e,n,r){const o=new zo(90,1,e,n),c=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],h=this._renderer,d=h.outputEncoding,f=h.toneMapping,m=h.getClearColor(),v=h.getClearAlpha();h.toneMapping=st,h.outputEncoding=sn;let y=t.background;if(y&&y.isColor){y.convertSRGBToLinear();const e=Math.max(y.r,y.g,y.b),n=Math.min(Math.max(Math.ceil(Math.log2(e)),-128),127);y=y.multiplyScalar(Math.pow(2,-n));const r=(n+128)/255;h.setClearColor(y,r),t.background=null}for(let i=0;i<6;i++){const col=i%3;0==col?(o.up.set(0,c[i],0),o.lookAt(l[i],0,0)):1==col?(o.up.set(0,0,c[i]),o.lookAt(0,l[i],0)):(o.up.set(0,c[i],0),o.lookAt(0,0,l[i])),Zp(r,col*Op,i>2?Op:0,Op,Op),h.setRenderTarget(r),h.render(t,o)}h.toneMapping=f,h.outputEncoding=d,h.setClearColor(m,v)}_textureToCubeUV(t,e){const n=this._renderer;t.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=Yp()):null==this._equirectShader&&(this._equirectShader=$p());const r=t.isCubeTexture?this._cubemapShader:this._equirectShader,o=new wo(zp[0],r),c=r.uniforms;c.envMap.value=t,t.isCubeTexture||c.texelSize.value.set(1/t.image.width,1/t.image.height),c.inputEncoding.value=Np[t.encoding],c.outputEncoding.value=Np[e.texture.encoding],Zp(e,0,0,3*Op,2*Op),n.setRenderTarget(e),n.render(o,Dp)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let i=1;i<kp;i++){const e=Math.sqrt(Fp[i]*Fp[i]-Fp[i-1]*Fp[i-1]),n=Hp[(i-1)%Hp.length];this._blur(t,i-1,i,e,n)}e.autoClear=n}_blur(t,e,n,r,o){const c=this._pingPongRenderTarget;this._halfBlur(t,c,e,n,r,"latitudinal",o),this._halfBlur(c,t,n,n,r,"longitudinal",o)}_halfBlur(t,e,n,r,o,c,l){const h=this._renderer,d=this._blurMaterial;"latitudinal"!==c&&"longitudinal"!==c&&console.error("blur direction must be either latitudinal or longitudinal!");const f=new wo(zp[r],d),m=d.uniforms,v=Bp[n]-1,y=isFinite(o)?Math.PI/(2*v):2*Math.PI/39,x=o/y,_=isFinite(o)?1+Math.floor(3*x):20;_>20&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${_} samples when the maximum is set to 20`);const w=[];let M=0;for(let i=0;i<20;++i){const t=i/x,e=Math.exp(-t*t/2);w.push(e),0==i?M+=e:i<_&&(M+=2*e)}for(let i=0;i<w.length;i++)w[i]=w[i]/M;m.envMap.value=t.texture,m.samples.value=_,m.weights.value=w,m.latitudinal.value="latitudinal"===c,l&&(m.poleAxis.value=l),m.dTheta.value=y,m.mipInt.value=8-n,m.inputEncoding.value=Np[t.texture.encoding],m.outputEncoding.value=Np[t.texture.encoding];const S=Bp[r];Zp(e,3*Math.max(0,Op-2*S),(0===r?0:2*Op)+2*S*(r>4?r-8+4:0),3*S,2*S),h.setRenderTarget(e),h.render(f,Dp)}}function Wp(t){return void 0!==t&&t.type===kt&&(t.encoding===sn||t.encoding===cn||t.encoding===ln)}function qp(t){const e=new ir(3*Op,3*Op,t);return e.texture.mapping=xt,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function Zp(t,e,n,r,o){t.viewport.set(e,n,r,o),t.scissor.set(e,n,r,o)}function $p(){return new wu({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:new Xn(1,1)},inputEncoding:{value:Np[sn]},outputEncoding:{value:Np[sn]}},vertexShader:Xp(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t${Jp()}\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:E,depthTest:!1,depthWrite:!1})}function Yp(){return new wu({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Np[sn]},outputEncoding:{value:Np[sn]}},vertexShader:Xp(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t${Jp()}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:E,depthTest:!1,depthWrite:!1})}function Xp(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Jp(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}function Qp(a,b,t,e,n,r,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Oi(a,b,t,n,r,o)}const Kp=0,tf=1,ef=0,nf=1,rf=2;function of(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t}function af(t){return void 0===t&&(t=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t}function sf(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Jc(t,e)}function cf(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new bc(t)}function lf(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Jc(t,e)}function uf(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new qc(t)}function hf(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new qc(t)}function df(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new qc(t)}function pf(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new sr(t,e,n)}function ff(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new Bi(t,e).setUsage(Dn)}function mf(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Fi(t,e)}function gf(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new ji(t,e)}function vf(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Ui(t,e)}function yf(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Gi(t,e)}function xf(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Hi(t,e)}function bf(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Vi(t,e)}function _f(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Wi(t,e)}function wf(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new qi(t,e)}function Mf(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Zi(t,e)}function Sf(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),fh.call(this,t),this.type="catmullrom",this.closed=!0}function Tf(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),fh.call(this,t),this.type="catmullrom"}function Ef(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),fh.call(this,t),this.type="catmullrom"}function Af(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Pp(t)}function Lf(object,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Sp(object,t)}function Cf(object,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Vc(new pu(object.geometry),new Nc({color:void 0!==t?t:16777215}))}function Rf(object,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Vc(new rl(object.geometry),new Nc({color:void 0!==t?t:16777215}))}function Pf(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Qu(t)}function Of(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new ih(t)}function If(t,e,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new Fo(t,n)}ah.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(ah.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(Eh.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const e=new Co;for(let i=0,n=t.length;i<n;i++){const n=t[i];e.vertices.push(new sr(n.x,n.y,n.z||0))}return e}}),Object.assign(Ah.prototype,{fromPoints:function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),Sf.prototype=Object.create(fh.prototype),Tf.prototype=Object.create(fh.prototype),Ef.prototype=Object.create(fh.prototype),Object.assign(Ef.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),pp.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},sp.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Xu.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Vh.extractUrlBase(t)}}),Xu.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(Yh.prototype,{setTexturePath:function(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}),Object.assign(Xd.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(ur.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(Lr.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),Ho.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)},Kd.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(Yn,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Yn.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Yn.ceilPowerOfTwo(t)}}),Object.assign(Jn.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(zr.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new sr).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(q){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(q)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,r,o,c){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,r,n,o,c)}}),pi.prototype.isIntersectionLine=function(line){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(line)},ar.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(Dr.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(Si.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(Si,{barycoordFromPoint:function(t,a,b,e,n){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Si.getBarycoord(t,a,b,e,n)},normal:function(a,b,t,e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Si.getNormal(a,b,t,e)}}),Object.assign(Lh.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Ql(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new uu(this,t)}}),Object.assign(Xn.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(sr.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(rr.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Co.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(t){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.assign(ci.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties(ci.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(wo.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(wo.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),rn},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(Sc.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Lc.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Tc.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(ah.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),zo.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Ch.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(Bi.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Dn},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Dn)}}}),Object.assign(Bi.prototype,{setDynamic:function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?Dn:Nn),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(ro.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addAttribute:function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new Bi(arguments[1],arguments[2])))},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},applyMatrix:function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties(ro.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Wh.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(t){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=t}}}),Object.defineProperties(Vd.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(t){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=t}}}),Object.defineProperties(rc.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===Dn},set:function(t){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(t)}}}),Object.assign(rc.prototype,{setDynamic:function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?Dn:Nn),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Kl.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.assign(nc.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}}),Object.defineProperties(Ud.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(ki.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Pi}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===S}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}}}),Object.defineProperties(Tu.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Su.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(t){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=t}}}),Object.defineProperties(No.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(Qs.prototype,{clearTarget:function(t,e,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,r)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(Qs.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===t?cn:sn}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Hs.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(ir.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(bd.prototype,{load:{value:function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new sd).load(t,(function(t){e.setBuffer(t)})),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),Ed.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Bo.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)};const kf={merge:function(t,e,n){let r;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),r=e.matrix,e=e.geometry),t.merge(e,r,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}};function Nf(){console.error("THREE.CanvasRenderer has been removed")}function Df(){console.error("THREE.JSONLoader has been removed.")}Kn.crossOrigin=void 0,Kn.loadTexture=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const o=new oh;o.setCrossOrigin(this.crossOrigin);const c=o.load(t,n,void 0,r);return e&&(c.mapping=e),c},Kn.loadTextureCube=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const o=new rh;o.setCrossOrigin(this.crossOrigin);const c=o.load(t,n,void 0,r);return e&&(c.mapping=e),c},Kn.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Kn.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const zf={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function Bf(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:r}}))},,function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var content=function(t,e){var content=t[1]||"",n=t[3];if(!n)return content;if(e&&"function"==typeof btoa){var r=(c=n,l=btoa(unescape(encodeURIComponent(JSON.stringify(c)))),data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(l),"/*# ".concat(data," */")),o=n.sources.map((function(source){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(source," */")}));return[content].concat(o).concat([r]).join("\n")}var c,l,data;return[content].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(content,"}"):content})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(o[c]=!0)}for(var l=0;l<t.length;l++){var h=[].concat(t[l]);r&&o[h[0]]||(n&&(h[2]?h[2]="".concat(n," and ").concat(h[2]):h[2]=n),e.push(h))}},e}},function(t,e,n){"use strict";function r(t,e){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],c=o[0],l={id:t+":"+i,css:o[1],media:o[2],sourceMap:o[3]};r[c]?r[c].parts.push(l):n.push(r[c]={id:c,parts:[l]})}return n}n.r(e),n.d(e,"default",(function(){return y}));var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c={},head=o&&(document.head||document.getElementsByTagName("head")[0]),l=null,h=0,d=!1,f=function(){},m=null,v="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function y(t,e,n,o){d=n,m=o||{};var l=r(t,e);return x(l),function(e){for(var n=[],i=0;i<l.length;i++){var o=l[i];(h=c[o.id]).refs--,n.push(h)}e?x(l=r(t,e)):l=[];for(i=0;i<n.length;i++){var h;if(0===(h=n[i]).refs){for(var d=0;d<h.parts.length;d++)h.parts[d]();delete c[h.id]}}}}function x(t){for(var i=0;i<t.length;i++){var e=t[i],n=c[e.id];if(n){n.refs++;for(var r=0;r<n.parts.length;r++)n.parts[r](e.parts[r]);for(;r<e.parts.length;r++)n.parts.push(w(e.parts[r]));n.parts.length>e.parts.length&&(n.parts.length=e.parts.length)}else{var o=[];for(r=0;r<e.parts.length;r++)o.push(w(e.parts[r]));c[e.id]={id:e.id,refs:1,parts:o}}}}function _(){var t=document.createElement("style");return t.type="text/css",head.appendChild(t),t}function w(t){var e,n,r=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(r){if(d)return f;r.parentNode.removeChild(r)}if(v){var o=h++;r=l||(l=_()),e=T.bind(null,r,o,!1),n=T.bind(null,r,o,!0)}else r=_(),e=E.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}var M,S=(M=[],function(t,e){return M[t]=e,M.filter(Boolean).join("\n")});function T(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=S(e,o);else{var c=document.createTextNode(o),l=t.childNodes;l[e]&&t.removeChild(l[e]),l.length?t.insertBefore(c,l[e]):t.appendChild(c)}}function E(t,e){var n=e.css,r=e.media,o=e.sourceMap;if(r&&t.setAttribute("media",r),m.ssrId&&t.setAttribute("data-vue-ssr-id",e.id),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},,,,,,,,,,,,function(t,e,n){"use strict";n(99),n(19),n(45);var r="undefined"!=typeof InstallTrigger,o=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||"undefined"!=typeof safari&&safari.pushNotification).toString(),c=function(){var t=!1;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(t=!0),t},l=Math.min(1.75,(c()?window.devicePixelRatio:1)||1),h={isMobile:c,url:"https://party.wearezizo.com/",hd:!0,renderUserCtrl:!1,dev:!1,scrollInstance:null,tier:"TIER_2",dpr:l,skipIntro:!1,resetLocalStorage:!1,safari:o,ios:["iPad","iPhone","iPod"].indexOf(navigator.platform)>=0,firefox:r,fxaa:!c(),hdr:!1};e.a=h},,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";n.d(e,"b",(function(){return an})),n.d(e,"a",(function(){return O}));n(41),n(56),n(38),n(59),n(24),n(92),n(93),n(70),n(19),n(39),n(27);var r=n(8),o=n(44),c=n(2),l=n(97),h=n(96),d=n(157),f=n.n(d),m=n(78),v=n.n(m),y=n(98),x=n(4);n(248),n(181);"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual",window.addEventListener("beforeunload",(function(){window.history.scrollRestoration="auto"})),window.addEventListener("load",(function(){window.history.scrollRestoration="manual"})));var _=function(){return Object(x.m)(n.e(5).then(n.bind(null,400)))},w=function(){return Object(x.m)(n.e(6).then(n.bind(null,401)))},M=function(){},S=y.a.prototype.push;y.a.prototype.push=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M,n=arguments.length>2?arguments[2]:void 0;return S.call(this,t,e,n)},c.a.use(y.a);var T={mode:"history",base:decodeURI("/"),linkActiveClass:"nuxt-link-active",linkExactActiveClass:"nuxt-link-exact-active",scrollBehavior:function(t,e,n){var r=!1,o=Object(x.g)(t);(o.some((function(t){return t.options.scrollToTop}))||o.length<2&&o.every((function(t){return!1!==t.options.scrollToTop})))&&(r={x:0,y:0}),n&&(r=n);var c=window.$nuxt;return(t.path===e.path&&t.hash!==e.hash||t===e)&&c.$nextTick((function(){return c.$emit("triggerScroll")})),new Promise((function(e){c.$once("triggerScroll",(function(){if(t.hash){var n=t.hash;void 0!==window.CSS&&void 0!==window.CSS.escape&&(n="#"+window.CSS.escape(n.substr(1)));try{document.querySelector(n)&&(r={selector:n})}catch(t){console.warn("Failed to save scroll position. Please add CSS.escape() polyfill (https://github.com/mathiasbynens/CSS.escape).")}}e(r)}))}))},routes:[{path:"/about",component:_,name:"about___en"},{path:"/fr",component:w,name:"index___fr"},{path:"/ja",component:w,name:"index___ja"},{path:"/fr/about",component:_,name:"about___fr"},{path:"/ja/about",component:_,name:"about___ja"},{path:"/",component:w,name:"index___en"}],fallback:!1};function E(){return new y.a(T)}var A={name:"NuxtChild",functional:!0,props:{nuxtChildKey:{type:String,default:""},keepAlive:Boolean,keepAliveProps:{type:Object,default:void 0}},render:function(t,e){var n=e.parent,data=e.data,r=e.props,o=n.$createElement;data.nuxtChild=!0;for(var c=n,l=n.$nuxt.nuxt.transitions,h=n.$nuxt.nuxt.defaultTransition,d=0;n;)n.$vnode&&n.$vnode.data.nuxtChild&&d++,n=n.$parent;data.nuxtChildDepth=d;var f=l[d]||h,m={};L.forEach((function(t){void 0!==f[t]&&(m[t]=f[t])}));var v={};C.forEach((function(t){"function"==typeof f[t]&&(v[t]=f[t].bind(c))}));var y=v.beforeEnter;if(v.beforeEnter=function(t){if(window.$nuxt.$nextTick((function(){window.$nuxt.$emit("triggerScroll")})),y)return y.call(c,t)},!1===f.css){var x=v.leave;(!x||x.length<2)&&(v.leave=function(t,e){x&&x.call(c,t),c.$nextTick(e)})}var _=o("routerView",data);return r.keepAlive&&(_=o("keep-alive",{props:r.keepAliveProps},[_])),o("transition",{props:m,on:v},[_])}},L=["name","mode","appear","css","type","duration","enterClass","leaveClass","appearClass","enterActiveClass","enterActiveClass","leaveActiveClass","appearActiveClass","enterToClass","leaveToClass","appearToClass"],C=["beforeEnter","enter","afterEnter","enterCancelled","beforeLeave","leave","afterLeave","leaveCancelled","beforeAppear","appear","afterAppear","appearCancelled"],R={name:"NuxtError",props:{error:{type:Object,default:null}},computed:{statusCode:function(){return this.error&&this.error.statusCode||500},message:function(){return this.error.message||"Error"}},head:function(){return{title:this.message,meta:[{name:"viewport",content:"width=device-width,initial-scale=1.0,minimum-scale=1.0"}]}}},P=(n(249),n(5)),O=Object(P.a)(R,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"__nuxt-error-page"},[n("div",{staticClass:"error"},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"90",height:"90",fill:"#DBE1EC",viewBox:"0 0 48 48"}},[n("path",{attrs:{d:"M22 30h4v4h-4zm0-16h4v12h-4zm1.99-10C12.94 4 4 12.95 4 24s8.94 20 19.99 20S44 35.05 44 24 35.04 4 23.99 4zM24 40c-8.84 0-16-7.16-16-16S15.16 8 24 8s16 7.16 16 16-7.16 16-16 16z"}})]),t._v(" "),n("div",{staticClass:"title"},[t._v(t._s(t.message))]),t._v(" "),404===t.statusCode?n("p",{staticClass:"description"},[void 0===t.$route?n("a",{staticClass:"error-link",attrs:{href:"/"}}):n("NuxtLink",{staticClass:"error-link",attrs:{to:"/"}},[t._v("Back to the home page")])],1):t._e(),t._v(" "),t._m(0)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"logo"},[e("a",{attrs:{href:"https://nuxtjs.org",target:"_blank",rel:"noopener"}},[this._v("Nuxt.js")])])}],!1,null,null,null).exports,I=(n(47),n(45),n(100),n(36)),k={name:"Nuxt",components:{NuxtChild:A,NuxtError:O},props:{nuxtChildKey:{type:String,default:void 0},keepAlive:Boolean,keepAliveProps:{type:Object,default:void 0},name:{type:String,default:"default"}},errorCaptured:function(t){this.displayingNuxtError&&(this.errorFromNuxtError=t,this.$forceUpdate())},computed:{routerViewKey:function(){if(void 0!==this.nuxtChildKey||this.$route.matched.length>1)return this.nuxtChildKey||Object(x.c)(this.$route.matched[0].path)(this.$route.params);var t=Object(I.a)(this.$route.matched,1)[0];if(!t)return this.$route.path;var e=t.components.default;if(e&&e.options){var n=e.options;if(n.key)return"function"==typeof n.key?n.key(this.$route):n.key}return/\/$/.test(t.path)?this.$route.path:this.$route.path.replace(/\/$/,"")}},beforeCreate:function(){c.a.util.defineReactive(this,"nuxt",this.$root.$options.nuxt)},render:function(t){var e=this;return this.nuxt.err?this.errorFromNuxtError?(this.$nextTick((function(){return e.errorFromNuxtError=!1})),t("div",{},[t("h2","An error occurred while showing the error page"),t("p","Unfortunately an error occurred and while showing the error page another error occurred"),t("p","Error details: ".concat(this.errorFromNuxtError.toString())),t("nuxt-link",{props:{to:"/"}},"Go back to home")])):(this.displayingNuxtError=!0,this.$nextTick((function(){return e.displayingNuxtError=!1})),t(O,{props:{error:this.nuxt.err}})):t("NuxtChild",{key:this.routerViewKey,props:this.$props})}},N=(n(60),n(61),n(62),n(53),n(40),n(46),n(99),n(1)),D=n(33),z={head:function(){return this.$nuxtI18nSeo()},watch:{$route:function(t,e){"about___en"==t.name||"about___fr"==t.name||"about___ja"==t.name?this.blueBtn=!1:this.blueBtn=!(3==this.currentNav)}},mounted:function(){this.init(),this.isWindows=-1!=navigator.appVersion.indexOf("Win")},methods:{init:function(){window.oncontextmenu=function(t){return t.preventDefault(),t.stopPropagation(),!1},this.scope=Object(N.a)(this)},onStartSite:function(){var t=this;this.enable=!0,setTimeout((function(){t.contactOpen=!1}),1200)},onStartGame:function(t){var e=t.game,n=t.isNext;this.currentGame=e,n||(this.gameStart=0!=e,D.a.isMobile()&&(this.disableSound=this.gameStart))},onChallengeFromEnd:function(){this.gameStart=!1,D.a.isMobile()&&(this.disableSound=this.gameStart)},onNavigation:function(t){var e=t.cat;this.currentNav=e,this.challenge=3==e,this.blueBtn=!this.challenge},onLogoIntroComplete:function(){var t=this;this.showSoundBtn=!0,setTimeout((function(){t.disableSound=!1}),100)},onOpenContact:function(){clearTimeout(this.timerContactOpen),this.contactOpen=!0},onCloseContact:function(){var t=this;this.timerContactOpen=setTimeout((function(){t.contactOpen=!1}),1200)}},data:function(){return{disableSound:!0,currentNav:0,blueBtn:!0,challenge:!1,enable:!1,gameStart:!1,contactOpen:!0,currentGame:0,timerContactOpen:!1,showSoundBtn:!1,isWindows:!1}}},B=(n(251),Object(P.a)(z,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{class:{winFix:t.isWindows}},[t.enable?t._e():n("loading"),t._v(" "),t.enable?n("top-header",{class:{chal:t.challenge},attrs:{gameStart:t.gameStart||t.contactOpen}}):t._e(),t._v(" "),t.enable?n("navigation"):t._e(),t._v(" "),t.showSoundBtn?n("sound-btn",{class:[{blhv:t.blueBtn},{disable:t.disableSound}]}):t._e(),t._v(" "),t.enable?n("game-desc"):t._e(),t._v(" "),t.gameStart?n("game-ui",{attrs:{current:t.currentGame}}):t._e(),t._v(" "),n("client-only",[n("Main"),t._v(" "),n("nuxt")],1)],1)}),[],!1,null,null,null)),F=B.exports;function j(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return U(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}installComponents(B,{Loading:n(335).default,TopHeader:n(333).default,Navigation:n(332).default,SoundBtn:n(338).default,GameDesc:n(337).default,GameUi:n(334).default,Main:n(336).default});var G={_default:Object(x.s)(F)},H={render:function(t,e){var n=t(this.layout||"nuxt"),r=t("div",{domProps:{id:"__layout"},key:this.layoutName},[n]),o=t("transition",{props:{name:"layout",mode:"out-in"},on:{beforeEnter:function(t){window.$nuxt.$nextTick((function(){window.$nuxt.$emit("triggerScroll")}))}}},[r]);return t("div",{domProps:{id:"__nuxt"}},[o])},data:function(){return{isOnline:!0,layout:null,layoutName:"",nbFetching:0}},beforeCreate:function(){c.a.util.defineReactive(this,"nuxt",this.$options.nuxt)},created:function(){c.a.prototype.$nuxt=this,window.$nuxt=this,this.refreshOnlineStatus(),window.addEventListener("online",this.refreshOnlineStatus),window.addEventListener("offline",this.refreshOnlineStatus),this.error=this.nuxt.error,this.context=this.$options.context},computed:{isOffline:function(){return!this.isOnline},isFetching:function(){return this.nbFetching>0}},methods:{refreshOnlineStatus:function(){void 0===window.navigator.onLine?this.isOnline=!0:this.isOnline=window.navigator.onLine},refresh:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=Object(x.h)(t.$route)).length){e.next=3;break}return e.abrupt("return");case 3:return r=n.map((function(e){var p=[];if(e.$options.fetch&&e.$options.fetch.length&&p.push(Object(x.q)(e.$options.fetch,t.context)),e.$fetch)p.push(e.$fetch());else{var n,r=j(Object(x.e)(e.$vnode.componentInstance));try{for(r.s();!(n=r.n()).done;){var component=n.value;p.push(component.$fetch())}}catch(t){r.e(t)}finally{r.f()}}return e.$options.asyncData&&p.push(Object(x.q)(e.$options.asyncData,t.context).then((function(t){for(var n in t)c.a.set(e.$data,n,t[n])}))),Promise.all(p)})),e.prev=4,e.next=7,Promise.all(r);case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(4),Object(x.k)(e.t0),t.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[4,9]])})))()},setLayout:function(t){return t&&G["_"+t]||(t="default"),this.layoutName=t,this.layout=G["_"+t],this.layout},loadLayout:function(t){return t&&G["_"+t]||(t="default"),Promise.resolve(G["_"+t])}}};n(58),n(72);function V(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return W(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}c.a.use(l.a);var Z=["state","getters","actions","mutations"],$={};($=function(t,e){if((t=t.default||t).commit)throw new Error("[nuxt] ".concat(e," should export a method that returns a Vuex instance."));return"function"!=typeof t&&(t=Object.assign({},t)),X(t,e)}(n(313),"store/index.js")).modules=$.modules||{},function(t,e){t=t.default||t;var n=e.replace(/\.(js|mjs)$/,"").split("/"),r=n[n.length-1],o="store/".concat(e);if(t="state"===r?function(t,e){if("function"!=typeof t){console.warn("".concat(e," should export a method that returns an object"));var n=Object.assign({},t);return function(){return n}}return X(t,e)}(t,o):X(t,o),Z.includes(r)){var c=r;Q(J($,n,{isProperty:!0}),t,c)}else{"index"===r&&(n.pop(),r=n[n.length-1]);var l,h=J($,n),d=V(Z);try{for(d.s();!(l=d.n()).done;){var f=l.value;Q(h,t[f],f)}}catch(t){d.e(t)}finally{d.f()}!1===t.namespaced&&delete h.namespaced}}(n(314),"sound.js");var Y=$ instanceof Function?$:function(){return new l.a.Store(Object.assign({strict:!1},$))};function X(t,e){if(t.state&&"function"!=typeof t.state){console.warn("'state' should be a method that returns an object in ".concat(e));var n=Object.assign({},t.state);t=Object.assign({},t,{state:function(){return n}})}return t}function J(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.isProperty,o=void 0!==r&&r;if(!e.length||o&&1===e.length)return t;var c=e.shift();return t.modules[c]=t.modules[c]||{},t.modules[c].namespaced=!0,t.modules[c].modules=t.modules[c].modules||{},J(t.modules[c],e,{isProperty:o})}function Q(t,e,n){e&&("state"===n?t.state=e||t.state:t[n]=Object.assign({},t[n],e))}var K=n(158),tt=n.n(K),et=function(t,e){return nt.apply(this,arguments)};function nt(){return(nt=Object(r.a)(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r={"64x64":"/_nuxt/icons/icon_64x64.de3894.png","120x120":"/_nuxt/icons/icon_120x120.de3894.png","144x144":"/_nuxt/icons/icon_144x144.de3894.png","152x152":"/_nuxt/icons/icon_152x152.de3894.png","192x192":"/_nuxt/icons/icon_192x192.de3894.png","384x384":"/_nuxt/icons/icon_384x384.de3894.png","512x512":"/_nuxt/icons/icon_512x512.de3894.png",ipad_1536x2048:"/_nuxt/icons/splash_ipad_1536x2048.de3894.png",ipadpro9_1536x2048:"/_nuxt/icons/splash_ipadpro9_1536x2048.de3894.png",ipadpro10_1668x2224:"/_nuxt/icons/splash_ipadpro10_1668x2224.de3894.png",ipadpro12_2048x2732:"/_nuxt/icons/splash_ipadpro12_2048x2732.de3894.png",iphonese_640x1136:"/_nuxt/icons/splash_iphonese_640x1136.de3894.png",iphone6_50x1334:"/_nuxt/icons/splash_iphone6_50x1334.de3894.png",iphoneplus_1080x1920:"/_nuxt/icons/splash_iphoneplus_1080x1920.de3894.png",iphonex_1125x2436:"/_nuxt/icons/splash_iphonex_1125x2436.de3894.png",iphonexr_828x1792:"/_nuxt/icons/splash_iphonexr_828x1792.de3894.png",iphonexsmax_1242x2688:"/_nuxt/icons/splash_iphonexsmax_1242x2688.de3894.png"},n("icon",(function(t){return r[t+"x"+t]||""}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var it={};for(var ot in it)c.a.component(ot,it[ot]);n(75),n(79),n(71);var at=n(218);n(94).a.nuxti18n=function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.app,!e.isHMR){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,n.i18n.__onNavigate();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();var st=n(0);function ct(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function lt(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ct(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):ct(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function ut(t,e){var n=ht.call(this,t,e);if(n)return n.fullPath}function ht(t,e){if(t){var n=this.i18n;if(st.t===st.g.NO_PREFIX&&e&&e!==n.locale&&console.warn("[".concat(st.f,"] Passing non-current locale to localePath is unsupported when using no_prefix strategy")),e=e||n.locale){"string"==typeof t&&(t="/"===t[0]?{path:t}:{name:t});var r=Object.assign({},t);if(t.path&&!t.name){var path=!(e===st.j&&[st.g.PREFIX_EXCEPT_DEFAULT,st.g.PREFIX_AND_DEFAULT].includes(st.t)||st.t===st.g.NO_PREFIX||n.differentDomains)?"/".concat(e).concat(t.path):t.path;r.path=path}else{t.name||t.path||(r.name=this.getRouteBaseName()),r.name=function(t,e){var n=t+(st.t===st.g.NO_PREFIX?"":st.s+e);if(e===st.j&&st.t===st.g.PREFIX_AND_DEFAULT)return n+st.s+st.k;return n}(r.name,e);var o=r.params;o&&void 0===o[0]&&o.pathMatch&&(o[0]=o.pathMatch)}return this.router.resolve(r).route}}}function pt(t){var e=this.i18n;st.t===st.g.NO_PREFIX&&t&&t!==e.locale&&console.warn("[".concat(st.f,"] Passing non-current locale to switchLocalePath is unsupported when using no_prefix strategy"));var n=this.getRouteBaseName();if(!n)return"";var r=this.route,o=this.store,c=r.params,l=Object(at.a)(r,["params"]),h={};st.v&&st.v.syncRouteParams&&o&&(h=o.getters["".concat(st.v.moduleName,"/localeRouteParams")](t));var d=Object.assign({},l,{name:n,params:lt(lt(lt({},c),h),{},{0:c.pathMatch})}),path=this.localePath(d,t);if(e.differentDomains){var f=e.locales.find((function(e){return e[st.b]===t}));if(f&&f[st.c])path=window.location.protocol.split(":")[0]+"://"+f[st.c]+path;else console.warn("[".concat(st.f,"] Could not find domain name for locale ").concat(t))}return path}function ft(t){var e=void 0!==t?t:this.route;return e.name?e.name.split(st.s)[0]:null}var mt=function(t){return function(){var e={getRouteBaseName:this.getRouteBaseName,i18n:this.$i18n,localePath:this.localePath,req:null,route:this.$route,router:this.$router,store:this.$store};return t.apply(e,arguments)}},gt=function(t,e){return function(){var n=t.app,r=(t.req,t.route),o=t.store,c={getRouteBaseName:n.getRouteBaseName,i18n:n.i18n,localePath:n.localePath,req:null,route:r,router:n.router,store:o};return e.apply(c,arguments)}},vt={install:function(t){t.mixin({methods:{localePath:mt(ut),localeRoute:mt(ht),switchLocalePath:mt(pt),getRouteBaseName:mt(ft)}})}},yt=function(t){c.a.use(vt);var e=t.app;e.localePath=gt(t,ut),e.localeRoute=gt(t,ht),e.switchLocalePath=gt(t,pt),e.getRouteBaseName=gt(t,ft)},xt=["style","currency","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","localeMatcher","formatMatcher","unit"];function bt(t,e){"undefined"!=typeof console&&(console.warn("[vue-i18n] "+t),e&&console.warn(e.stack))}var _t=Array.isArray;function wt(t){return null!==t&&"object"==typeof t}function Mt(t){return"string"==typeof t}var St=Object.prototype.toString;function Tt(t){return"[object Object]"===St.call(t)}function Et(t){return null==t}function At(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=null,r=null;return 1===t.length?wt(t[0])||Array.isArray(t[0])?r=t[0]:"string"==typeof t[0]&&(n=t[0]):2===t.length&&("string"==typeof t[0]&&(n=t[0]),(wt(t[1])||Array.isArray(t[1]))&&(r=t[1])),{locale:n,params:r}}function Lt(t){return JSON.parse(JSON.stringify(t))}function Ct(t,e){return!!~t.indexOf(e)}var Rt=Object.prototype.hasOwnProperty;function Pt(t,e){return Rt.call(t,e)}function Ot(t){for(var e=arguments,output=Object(t),i=1;i<arguments.length;i++){var source=e[i];if(null!=source){var n=void 0;for(n in source)Pt(source,n)&&(wt(source[n])?output[n]=Ot(output[n],source[n]):output[n]=source[n])}}return output}function It(a,b){if(a===b)return!0;var t=wt(a),e=wt(b);if(!t||!e)return!t&&!e&&String(a)===String(b);try{var n=Array.isArray(a),r=Array.isArray(b);if(n&&r)return a.length===b.length&&a.every((function(t,i){return It(t,b[i])}));if(n||r)return!1;var o=Object.keys(a),c=Object.keys(b);return o.length===c.length&&o.every((function(t){return It(a[t],b[t])}))}catch(t){return!1}}var kt={beforeCreate:function(){var t=this.$options;if(t.i18n=t.i18n||(t.__i18n?{}:null),t.i18n)if(t.i18n instanceof le){if(t.__i18n)try{var e={};t.__i18n.forEach((function(t){e=Ot(e,JSON.parse(t))})),Object.keys(e).forEach((function(n){t.i18n.mergeLocaleMessage(n,e[n])}))}catch(t){0}this._i18n=t.i18n,this._i18nWatcher=this._i18n.watchI18nData()}else if(Tt(t.i18n)){var n=this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof le?this.$root.$i18n:null;if(n&&(t.i18n.root=this.$root,t.i18n.formatter=n.formatter,t.i18n.fallbackLocale=n.fallbackLocale,t.i18n.formatFallbackMessages=n.formatFallbackMessages,t.i18n.silentTranslationWarn=n.silentTranslationWarn,t.i18n.silentFallbackWarn=n.silentFallbackWarn,t.i18n.pluralizationRules=n.pluralizationRules,t.i18n.preserveDirectiveContent=n.preserveDirectiveContent),t.__i18n)try{var r={};t.__i18n.forEach((function(t){r=Ot(r,JSON.parse(t))})),t.i18n.messages=r}catch(t){0}var o=t.i18n.sharedMessages;o&&Tt(o)&&(t.i18n.messages=Ot(t.i18n.messages,o)),this._i18n=new le(t.i18n),this._i18nWatcher=this._i18n.watchI18nData(),(void 0===t.i18n.sync||t.i18n.sync)&&(this._localeWatcher=this.$i18n.watchLocale()),n&&n.onComponentInstanceCreated(this._i18n)}else 0;else this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof le?this._i18n=this.$root.$i18n:t.parent&&t.parent.$i18n&&t.parent.$i18n instanceof le&&(this._i18n=t.parent.$i18n)},beforeMount:function(){var t=this.$options;t.i18n=t.i18n||(t.__i18n?{}:null),t.i18n?(t.i18n instanceof le||Tt(t.i18n))&&(this._i18n.subscribeDataChanging(this),this._subscribing=!0):(this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof le||t.parent&&t.parent.$i18n&&t.parent.$i18n instanceof le)&&(this._i18n.subscribeDataChanging(this),this._subscribing=!0)},beforeDestroy:function(){if(this._i18n){var t=this;this.$nextTick((function(){t._subscribing&&(t._i18n.unsubscribeDataChanging(t),delete t._subscribing),t._i18nWatcher&&(t._i18nWatcher(),t._i18n.destroyVM(),delete t._i18nWatcher),t._localeWatcher&&(t._localeWatcher(),delete t._localeWatcher)}))}}},Nt={name:"i18n",functional:!0,props:{tag:{type:[String,Boolean],default:"span"},path:{type:String,required:!0},locale:{type:String},places:{type:[Array,Object]}},render:function(t,e){var data=e.data,n=e.parent,r=e.props,o=e.slots,c=n.$i18n;if(c){var path=r.path,l=r.locale,h=r.places,d=o(),f=c.i(path,l,function(t){var e;for(e in t)if("default"!==e)return!1;return Boolean(e)}(d)||h?function(t,e){var n=e?function(t){0;return Array.isArray(t)?t.reduce(zt,{}):Object.assign({},t)}(e):{};if(!t)return n;var r=(t=t.filter((function(t){return t.tag||""!==t.text.trim()}))).every(Bt);0;return t.reduce(r?Dt:zt,n)}(d.default,h):d),m=r.tag&&!0!==r.tag||!1===r.tag?r.tag:"span";return m?t(m,data,f):f}}};function Dt(t,e){return e.data&&e.data.attrs&&e.data.attrs.place&&(t[e.data.attrs.place]=e),t}function zt(t,e,n){return t[n]=e,t}function Bt(t){return Boolean(t.data&&t.data.attrs&&t.data.attrs.place)}var Ft,jt={name:"i18n-n",functional:!0,props:{tag:{type:[String,Boolean],default:"span"},value:{type:Number,required:!0},format:{type:[String,Object]},locale:{type:String}},render:function(t,e){var n=e.props,r=e.parent,data=e.data,o=r.$i18n;if(!o)return null;var c=null,l=null;Mt(n.format)?c=n.format:wt(n.format)&&(n.format.key&&(c=n.format.key),l=Object.keys(n.format).reduce((function(t,e){var r;return Ct(xt,e)?Object.assign({},t,((r={})[e]=n.format[e],r)):t}),null));var h=n.locale||o.locale,d=o._ntp(n.value,h,c,l),f=d.map((function(t,e){var n,slot=data.scopedSlots&&data.scopedSlots[t.type];return slot?slot(((n={})[t.type]=t.value,n.index=e,n.parts=d,n)):t.value})),m=n.tag&&!0!==n.tag||!1===n.tag?n.tag:"span";return m?t(m,{attrs:data.attrs,class:data.class,staticClass:data.staticClass},f):f}};function Ut(t,e,n){Vt(t,n)&&Wt(t,e,n)}function Gt(t,e,n,r){if(Vt(t,n)){var o=n.context.$i18n;(function(t,e){var n=e.context;return t._locale===n.$i18n.locale})(t,n)&&It(e.value,e.oldValue)&&It(t._localeMessage,o.getLocaleMessage(o.locale))||Wt(t,e,n)}}function Ht(t,e,n,r){if(n.context){var o=n.context.$i18n||{};e.modifiers.preserve||o.preserveDirectiveContent||(t.textContent=""),t._vt=void 0,delete t._vt,t._locale=void 0,delete t._locale,t._localeMessage=void 0,delete t._localeMessage}else bt("Vue instance does not exists in VNode context")}function Vt(t,e){var n=e.context;return n?!!n.$i18n||(bt("VueI18n instance does not exists in Vue instance"),!1):(bt("Vue instance does not exists in VNode context"),!1)}function Wt(t,e,n){var r,o,c=function(t){var path,e,n,r;Mt(t)?path=t:Tt(t)&&(path=t.path,e=t.locale,n=t.args,r=t.choice);return{path:path,locale:e,args:n,choice:r}}(e.value),path=c.path,l=c.locale,h=c.args,d=c.choice;if(path||l||h)if(path){var f=n.context;t._vt=t.textContent=null!=d?(r=f.$i18n).tc.apply(r,[path,d].concat(qt(l,h))):(o=f.$i18n).t.apply(o,[path].concat(qt(l,h))),t._locale=f.$i18n.locale,t._localeMessage=f.$i18n.getLocaleMessage(f.$i18n.locale)}else bt("`path` is required in v-t directive");else bt("value type not supported")}function qt(t,e){var n=[];return t&&n.push(t),e&&(Array.isArray(e)||Tt(e))&&n.push(e),n}function Zt(t){Zt.installed=!0;(Ft=t).version&&Number(Ft.version.split(".")[0]);(function(t){t.prototype.hasOwnProperty("$i18n")||Object.defineProperty(t.prototype,"$i18n",{get:function(){return this._i18n}}),t.prototype.$t=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var r=this.$i18n;return r._t.apply(r,[t,r.locale,r._getMessages(),this].concat(e))},t.prototype.$tc=function(t,e){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];var o=this.$i18n;return o._tc.apply(o,[t,o.locale,o._getMessages(),this,e].concat(n))},t.prototype.$te=function(t,e){var n=this.$i18n;return n._te(t,n.locale,n._getMessages(),e)},t.prototype.$d=function(t){for(var e,n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];return(e=this.$i18n).d.apply(e,[t].concat(n))},t.prototype.$n=function(t){for(var e,n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];return(e=this.$i18n).n.apply(e,[t].concat(n))}})(Ft),Ft.mixin(kt),Ft.directive("t",{bind:Ut,update:Gt,unbind:Ht}),Ft.component(Nt.name,Nt),Ft.component(jt.name,jt),Ft.config.optionMergeStrategies.i18n=function(t,e){return void 0===e?t:e}}var $t=function(){this._caches=Object.create(null)};$t.prototype.interpolate=function(t,e){if(!e)return[t];var n=this._caches[t];return n||(n=function(t){var e=[],n=0,text="";for(;n<t.length;){var r=t[n++];if("{"===r){text&&e.push({type:"text",value:text}),text="";var sub="";for(r=t[n++];void 0!==r&&"}"!==r;)sub+=r,r=t[n++];var o="}"===r,c=Yt.test(sub)?"list":o&&Xt.test(sub)?"named":"unknown";e.push({value:sub,type:c})}else"%"===r?"{"!==t[n]&&(text+=r):text+=r}return text&&e.push({type:"text",value:text}),e}(t),this._caches[t]=n),function(t,e){var n=[],r=0,o=Array.isArray(e)?"list":wt(e)?"named":"unknown";if("unknown"===o)return n;for(;r<t.length;){var c=t[r];switch(c.type){case"text":n.push(c.value);break;case"list":n.push(e[parseInt(c.value,10)]);break;case"named":"named"===o&&n.push(e[c.value]);break;case"unknown":0}r++}return n}(n,e)};var Yt=/^(?:\d)+/,Xt=/^(?:\w)+/;var Jt=[];Jt[0]={ws:[0],ident:[3,0],"[":[4],eof:[7]},Jt[1]={ws:[1],".":[2],"[":[4],eof:[7]},Jt[2]={ws:[2],ident:[3,0],0:[3,0],number:[3,0]},Jt[3]={ident:[3,0],0:[3,0],number:[3,0],ws:[1,1],".":[2,1],"[":[4,1],eof:[7,1]},Jt[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],eof:8,else:[4,0]},Jt[5]={"'":[4,0],eof:8,else:[5,0]},Jt[6]={'"':[4,0],eof:8,else:[6,0]};var Qt=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function Kt(t){if(null==t)return"eof";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"ident";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return"ident"}function te(path){var t,a,e,n=path.trim();return("0"!==path.charAt(0)||!isNaN(path))&&(e=n,Qt.test(e)?(a=(t=n).charCodeAt(0))!==t.charCodeAt(t.length-1)||34!==a&&39!==a?t:t.slice(1,-1):"*"+n)}var ee=function(){this._cache=Object.create(null)};ee.prototype.parsePath=function(path){var t=this._cache[path];return t||(t=function(path){var t,e,n,r,o,c,l,h=[],d=-1,f=0,m=0,v=[];function y(){var t=path[d+1];if(5===f&&"'"===t||6===f&&'"'===t)return d++,n="\\"+t,v[0](),!0}for(v[1]=function(){void 0!==e&&(h.push(e),e=void 0)},v[0]=function(){void 0===e?e=n:e+=n},v[2]=function(){v[0](),m++},v[3]=function(){if(m>0)m--,f=4,v[0]();else{if(m=0,void 0===e)return!1;if(!1===(e=te(e)))return!1;v[1]()}};null!==f;)if(d++,"\\"!==(t=path[d])||!y()){if(r=Kt(t),8===(o=(l=Jt[f])[r]||l.else||8))return;if(f=o[0],(c=v[o[1]])&&(n=void 0===(n=o[2])?t:n,!1===c()))return;if(7===f)return h}}(path))&&(this._cache[path]=t),t||[]},ee.prototype.getPathValue=function(t,path){if(!wt(t))return null;var e=this.parsePath(path);if(0===e.length)return null;for(var n=e.length,r=t,i=0;i<n;){var o=r[e[i]];if(void 0===o)return null;r=o,i++}return r};var ne,re=/<\/?[\w\s="/.':;#-\/]+>/,ie=/(?:@(?:\.[a-z]+)?:(?:[\w\-_|.]+|\([\w\-_|.]+\)))/g,oe=/^@(?:\.([a-z]+))?:/,ae=/[()]/g,se={upper:function(t){return t.toLocaleUpperCase()},lower:function(t){return t.toLocaleLowerCase()},capitalize:function(t){return""+t.charAt(0).toLocaleUpperCase()+t.substr(1)}},ce=new $t,le=function(t){var e=this;void 0===t&&(t={}),!Ft&&"undefined"!=typeof window&&window.Vue&&Zt(window.Vue);var n=t.locale||"en-US",r=!1!==t.fallbackLocale&&(t.fallbackLocale||"en-US"),o=t.messages||{},c=t.dateTimeFormats||{},l=t.numberFormats||{};this._vm=null,this._formatter=t.formatter||ce,this._modifiers=t.modifiers||{},this._missing=t.missing||null,this._root=t.root||null,this._sync=void 0===t.sync||!!t.sync,this._fallbackRoot=void 0===t.fallbackRoot||!!t.fallbackRoot,this._formatFallbackMessages=void 0!==t.formatFallbackMessages&&!!t.formatFallbackMessages,this._silentTranslationWarn=void 0!==t.silentTranslationWarn&&t.silentTranslationWarn,this._silentFallbackWarn=void 0!==t.silentFallbackWarn&&!!t.silentFallbackWarn,this._dateTimeFormatters={},this._numberFormatters={},this._path=new ee,this._dataListeners=[],this._componentInstanceCreatedListener=t.componentInstanceCreatedListener||null,this._preserveDirectiveContent=void 0!==t.preserveDirectiveContent&&!!t.preserveDirectiveContent,this.pluralizationRules=t.pluralizationRules||{},this._warnHtmlInMessage=t.warnHtmlInMessage||"off",this._postTranslation=t.postTranslation||null,this.getChoiceIndex=function(t,n){var r=Object.getPrototypeOf(e);if(r&&r.getChoiceIndex)return r.getChoiceIndex.call(e,t,n);var o,c;return e.locale in e.pluralizationRules?e.pluralizationRules[e.locale].apply(e,[t,n]):(o=t,c=n,o=Math.abs(o),2===c?o?o>1?1:0:1:o?Math.min(o,2):0)},this._exist=function(t,n){return!(!t||!n)&&(!Et(e._path.getPathValue(t,n))||!!t[n])},"warn"!==this._warnHtmlInMessage&&"error"!==this._warnHtmlInMessage||Object.keys(o).forEach((function(t){e._checkLocaleMessage(t,e._warnHtmlInMessage,o[t])})),this._initVM({locale:n,fallbackLocale:r,messages:o,dateTimeFormats:c,numberFormats:l})},ue={vm:{configurable:!0},messages:{configurable:!0},dateTimeFormats:{configurable:!0},numberFormats:{configurable:!0},availableLocales:{configurable:!0},locale:{configurable:!0},fallbackLocale:{configurable:!0},formatFallbackMessages:{configurable:!0},missing:{configurable:!0},formatter:{configurable:!0},silentTranslationWarn:{configurable:!0},silentFallbackWarn:{configurable:!0},preserveDirectiveContent:{configurable:!0},warnHtmlInMessage:{configurable:!0},postTranslation:{configurable:!0}};le.prototype._checkLocaleMessage=function(t,e,n){var r=function(t,e,n,o){if(Tt(n))Object.keys(n).forEach((function(c){var l=n[c];Tt(l)?(o.push(c),o.push("."),r(t,e,l,o),o.pop(),o.pop()):(o.push(c),r(t,e,l,o),o.pop())}));else if(Array.isArray(n))n.forEach((function(n,c){Tt(n)?(o.push("["+c+"]"),o.push("."),r(t,e,n,o),o.pop(),o.pop()):(o.push("["+c+"]"),r(t,e,n,o),o.pop())}));else if(Mt(n)){if(re.test(n)){var c="Detected HTML in message '"+n+"' of keypath '"+o.join("")+"' at '"+e+"'. Consider component interpolation with '<i18n>' to avoid XSS. See https://bit.ly/2ZqJzkp";"warn"===t?bt(c):"error"===t&&function(t,e){"undefined"!=typeof console&&(console.error("[vue-i18n] "+t),e&&console.error(e.stack))}(c)}}};r(e,t,n,[])},le.prototype._initVM=function(data){var t=Ft.config.silent;Ft.config.silent=!0,this._vm=new Ft({data:data}),Ft.config.silent=t},le.prototype.destroyVM=function(){this._vm.$destroy()},le.prototype.subscribeDataChanging=function(t){this._dataListeners.push(t)},le.prototype.unsubscribeDataChanging=function(t){!function(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)t.splice(n,1)}}(this._dataListeners,t)},le.prototype.watchI18nData=function(){var t=this;return this._vm.$watch("$data",(function(){for(var i=t._dataListeners.length;i--;)Ft.nextTick((function(){t._dataListeners[i]&&t._dataListeners[i].$forceUpdate()}))}),{deep:!0})},le.prototype.watchLocale=function(){if(!this._sync||!this._root)return null;var t=this._vm;return this._root.$i18n.vm.$watch("locale",(function(e){t.$set(t,"locale",e),t.$forceUpdate()}),{immediate:!0})},le.prototype.onComponentInstanceCreated=function(t){this._componentInstanceCreatedListener&&this._componentInstanceCreatedListener(t,this)},ue.vm.get=function(){return this._vm},ue.messages.get=function(){return Lt(this._getMessages())},ue.dateTimeFormats.get=function(){return Lt(this._getDateTimeFormats())},ue.numberFormats.get=function(){return Lt(this._getNumberFormats())},ue.availableLocales.get=function(){return Object.keys(this.messages).sort()},ue.locale.get=function(){return this._vm.locale},ue.locale.set=function(t){this._vm.$set(this._vm,"locale",t)},ue.fallbackLocale.get=function(){return this._vm.fallbackLocale},ue.fallbackLocale.set=function(t){this._localeChainCache={},this._vm.$set(this._vm,"fallbackLocale",t)},ue.formatFallbackMessages.get=function(){return this._formatFallbackMessages},ue.formatFallbackMessages.set=function(t){this._formatFallbackMessages=t},ue.missing.get=function(){return this._missing},ue.missing.set=function(t){this._missing=t},ue.formatter.get=function(){return this._formatter},ue.formatter.set=function(t){this._formatter=t},ue.silentTranslationWarn.get=function(){return this._silentTranslationWarn},ue.silentTranslationWarn.set=function(t){this._silentTranslationWarn=t},ue.silentFallbackWarn.get=function(){return this._silentFallbackWarn},ue.silentFallbackWarn.set=function(t){this._silentFallbackWarn=t},ue.preserveDirectiveContent.get=function(){return this._preserveDirectiveContent},ue.preserveDirectiveContent.set=function(t){this._preserveDirectiveContent=t},ue.warnHtmlInMessage.get=function(){return this._warnHtmlInMessage},ue.warnHtmlInMessage.set=function(t){var e=this,n=this._warnHtmlInMessage;if(this._warnHtmlInMessage=t,n!==t&&("warn"===t||"error"===t)){var r=this._getMessages();Object.keys(r).forEach((function(t){e._checkLocaleMessage(t,e._warnHtmlInMessage,r[t])}))}},ue.postTranslation.get=function(){return this._postTranslation},ue.postTranslation.set=function(t){this._postTranslation=t},le.prototype._getMessages=function(){return this._vm.messages},le.prototype._getDateTimeFormats=function(){return this._vm.dateTimeFormats},le.prototype._getNumberFormats=function(){return this._vm.numberFormats},le.prototype._warnDefault=function(t,e,n,r,o,c){if(!Et(n))return n;if(this._missing){var l=this._missing.apply(null,[t,e,r,o]);if(Mt(l))return l}else 0;if(this._formatFallbackMessages){var h=At.apply(void 0,o);return this._render(e,c,h.params,e)}return e},le.prototype._isFallbackRoot=function(t){return!t&&!Et(this._root)&&this._fallbackRoot},le.prototype._isSilentFallbackWarn=function(t){return this._silentFallbackWarn instanceof RegExp?this._silentFallbackWarn.test(t):this._silentFallbackWarn},le.prototype._isSilentFallback=function(t,e){return this._isSilentFallbackWarn(e)&&(this._isFallbackRoot()||t!==this.fallbackLocale)},le.prototype._isSilentTranslationWarn=function(t){return this._silentTranslationWarn instanceof RegExp?this._silentTranslationWarn.test(t):this._silentTranslationWarn},le.prototype._interpolate=function(t,e,n,r,o,c,l){if(!e)return null;var h,d=this._path.getPathValue(e,n);if(Array.isArray(d)||Tt(d))return d;if(Et(d)){if(!Tt(e))return null;if(!Mt(h=e[n]))return null}else{if(!Mt(d))return null;h=d}return(h.indexOf("@:")>=0||h.indexOf("@.")>=0)&&(h=this._link(t,e,h,r,"raw",c,l)),this._render(h,o,c,n)},le.prototype._link=function(t,e,n,r,o,c,l){var h=n,d=h.match(ie);for(var f in d)if(d.hasOwnProperty(f)){var link=d[f],m=link.match(oe),v=m[0],y=m[1],x=link.replace(v,"").replace(ae,"");if(Ct(l,x))return h;l.push(x);var _=this._interpolate(t,e,x,r,"raw"===o?"string":o,"raw"===o?void 0:c,l);if(this._isFallbackRoot(_)){if(!this._root)throw Error("unexpected error");var w=this._root.$i18n;_=w._translate(w._getMessages(),w.locale,w.fallbackLocale,x,r,o,c)}_=this._warnDefault(t,x,_,r,Array.isArray(c)?c:[c],o),this._modifiers.hasOwnProperty(y)?_=this._modifiers[y](_):se.hasOwnProperty(y)&&(_=se[y](_)),l.pop(),h=_?h.replace(link,_):h}return h},le.prototype._render=function(t,e,n,path){var r=this._formatter.interpolate(t,n,path);return r||(r=ce.interpolate(t,n,path)),"string"!==e||Mt(r)?r:r.join("")},le.prototype._appendItemToChain=function(t,e,n){var r=!1;return Ct(t,e)||(r=!0,e&&(r="!"!==e[e.length-1],e=e.replace(/!/g,""),t.push(e),n&&n[e]&&(r=n[e]))),r},le.prototype._appendLocaleToChain=function(t,e,n){var r,o=e.split("-");do{var c=o.join("-");r=this._appendItemToChain(t,c,n),o.splice(-1,1)}while(o.length&&!0===r);return r},le.prototype._appendBlockToChain=function(t,e,n){for(var r=!0,i=0;i<e.length&&"boolean"==typeof r;i++){var o=e[i];Mt(o)&&(r=this._appendLocaleToChain(t,o,n))}return r},le.prototype._getLocaleChain=function(t,e){if(""===t)return[];this._localeChainCache||(this._localeChainCache={});var n=this._localeChainCache[t];if(!n){e||(e=this.fallbackLocale),n=[];for(var r,o=[t];_t(o);)o=this._appendBlockToChain(n,o,e);(o=Mt(r=_t(e)?e:wt(e)?e.default?e.default:null:e)?[r]:r)&&this._appendBlockToChain(n,o,null),this._localeChainCache[t]=n}return n},le.prototype._translate=function(t,e,n,r,o,c,l){for(var h,d=this._getLocaleChain(e,n),i=0;i<d.length;i++){var f=d[i];if(!Et(h=this._interpolate(f,t[f],r,o,c,l,[r])))return h}return null},le.prototype._t=function(t,e,n,r){for(var o,c=[],l=arguments.length-4;l-- >0;)c[l]=arguments[l+4];if(!t)return"";var h=At.apply(void 0,c),d=h.locale||e,f=this._translate(n,d,this.fallbackLocale,t,r,"string",h.params);if(this._isFallbackRoot(f)){if(!this._root)throw Error("unexpected error");return(o=this._root).$t.apply(o,[t].concat(c))}return f=this._warnDefault(d,t,f,r,c,"string"),this._postTranslation&&null!=f&&(f=this._postTranslation(f,t)),f},le.prototype.t=function(t){for(var e,n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];return(e=this)._t.apply(e,[t,this.locale,this._getMessages(),null].concat(n))},le.prototype._i=function(t,e,n,r,o){var c=this._translate(n,e,this.fallbackLocale,t,r,"raw",o);if(this._isFallbackRoot(c)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.i(t,e,o)}return this._warnDefault(e,t,c,r,[o],"raw")},le.prototype.i=function(t,e,n){return t?(Mt(e)||(e=this.locale),this._i(t,e,this._getMessages(),null,n)):""},le.prototype._tc=function(t,e,n,r,o){for(var c,l=[],h=arguments.length-5;h-- >0;)l[h]=arguments[h+5];if(!t)return"";void 0===o&&(o=1);var d={count:o,n:o},f=At.apply(void 0,l);return f.params=Object.assign(d,f.params),l=null===f.locale?[f.params]:[f.locale,f.params],this.fetchChoice((c=this)._t.apply(c,[t,e,n,r].concat(l)),o)},le.prototype.fetchChoice=function(t,e){if(!t&&!Mt(t))return null;var n=t.split("|");return n[e=this.getChoiceIndex(e,n.length)]?n[e].trim():t},le.prototype.tc=function(t,e){for(var n,r=[],o=arguments.length-2;o-- >0;)r[o]=arguments[o+2];return(n=this)._tc.apply(n,[t,this.locale,this._getMessages(),null,e].concat(r))},le.prototype._te=function(t,e,n){for(var r=[],o=arguments.length-3;o-- >0;)r[o]=arguments[o+3];var c=At.apply(void 0,r).locale||e;return this._exist(n[c],t)},le.prototype.te=function(t,e){return this._te(t,this.locale,this._getMessages(),e)},le.prototype.getLocaleMessage=function(t){return Lt(this._vm.messages[t]||{})},le.prototype.setLocaleMessage=function(t,e){"warn"!==this._warnHtmlInMessage&&"error"!==this._warnHtmlInMessage||this._checkLocaleMessage(t,this._warnHtmlInMessage,e),this._vm.$set(this._vm.messages,t,e)},le.prototype.mergeLocaleMessage=function(t,e){"warn"!==this._warnHtmlInMessage&&"error"!==this._warnHtmlInMessage||this._checkLocaleMessage(t,this._warnHtmlInMessage,e),this._vm.$set(this._vm.messages,t,Ot({},this._vm.messages[t]||{},e))},le.prototype.getDateTimeFormat=function(t){return Lt(this._vm.dateTimeFormats[t]||{})},le.prototype.setDateTimeFormat=function(t,e){this._vm.$set(this._vm.dateTimeFormats,t,e),this._clearDateTimeFormat(t,e)},le.prototype.mergeDateTimeFormat=function(t,e){this._vm.$set(this._vm.dateTimeFormats,t,Ot(this._vm.dateTimeFormats[t]||{},e)),this._clearDateTimeFormat(t,e)},le.prototype._clearDateTimeFormat=function(t,e){for(var n in e){var r=t+"__"+n;this._dateTimeFormatters.hasOwnProperty(r)&&delete this._dateTimeFormatters[r]}},le.prototype._localizeDateTime=function(t,e,n,r,o){for(var c=e,l=r[c],h=this._getLocaleChain(e,n),i=0;i<h.length;i++){var d=h[i];if(c=d,!Et(l=r[d])&&!Et(l[o]))break}if(Et(l)||Et(l[o]))return null;var f=l[o],m=c+"__"+o,v=this._dateTimeFormatters[m];return v||(v=this._dateTimeFormatters[m]=new Intl.DateTimeFormat(c,f)),v.format(t)},le.prototype._d=function(t,e,n){if(!n)return new Intl.DateTimeFormat(e).format(t);var r=this._localizeDateTime(t,e,this.fallbackLocale,this._getDateTimeFormats(),n);if(this._isFallbackRoot(r)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.d(t,n,e)}return r||""},le.prototype.d=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var r=this.locale,o=null;return 1===e.length?Mt(e[0])?o=e[0]:wt(e[0])&&(e[0].locale&&(r=e[0].locale),e[0].key&&(o=e[0].key)):2===e.length&&(Mt(e[0])&&(o=e[0]),Mt(e[1])&&(r=e[1])),this._d(t,r,o)},le.prototype.getNumberFormat=function(t){return Lt(this._vm.numberFormats[t]||{})},le.prototype.setNumberFormat=function(t,e){this._vm.$set(this._vm.numberFormats,t,e),this._clearNumberFormat(t,e)},le.prototype.mergeNumberFormat=function(t,e){this._vm.$set(this._vm.numberFormats,t,Ot(this._vm.numberFormats[t]||{},e)),this._clearNumberFormat(t,e)},le.prototype._clearNumberFormat=function(t,e){for(var n in e){var r=t+"__"+n;this._numberFormatters.hasOwnProperty(r)&&delete this._numberFormatters[r]}},le.prototype._getNumberFormatter=function(t,e,n,r,o,c){for(var l=e,h=r[l],d=this._getLocaleChain(e,n),i=0;i<d.length;i++){var f=d[i];if(l=f,!Et(h=r[f])&&!Et(h[o]))break}if(Et(h)||Et(h[o]))return null;var m,v=h[o];if(c)m=new Intl.NumberFormat(l,Object.assign({},v,c));else{var y=l+"__"+o;(m=this._numberFormatters[y])||(m=this._numberFormatters[y]=new Intl.NumberFormat(l,v))}return m},le.prototype._n=function(t,e,n,r){if(!le.availabilities.numberFormat)return"";if(!n)return(r?new Intl.NumberFormat(e,r):new Intl.NumberFormat(e)).format(t);var o=this._getNumberFormatter(t,e,this.fallbackLocale,this._getNumberFormats(),n,r),c=o&&o.format(t);if(this._isFallbackRoot(c)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.n(t,Object.assign({},{key:n,locale:e},r))}return c||""},le.prototype.n=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var r=this.locale,o=null,c=null;return 1===e.length?Mt(e[0])?o=e[0]:wt(e[0])&&(e[0].locale&&(r=e[0].locale),e[0].key&&(o=e[0].key),c=Object.keys(e[0]).reduce((function(t,n){var r;return Ct(xt,n)?Object.assign({},t,((r={})[n]=e[0][n],r)):t}),null)):2===e.length&&(Mt(e[0])&&(o=e[0]),Mt(e[1])&&(r=e[1])),this._n(t,r,o,c)},le.prototype._ntp=function(t,e,n,r){if(!le.availabilities.numberFormat)return[];if(!n)return(r?new Intl.NumberFormat(e,r):new Intl.NumberFormat(e)).formatToParts(t);var o=this._getNumberFormatter(t,e,this.fallbackLocale,this._getNumberFormats(),n,r),c=o&&o.formatToParts(t);if(this._isFallbackRoot(c)){if(!this._root)throw Error("unexpected error");return this._root.$i18n._ntp(t,e,n,r)}return c||[]},Object.defineProperties(le.prototype,ue),Object.defineProperty(le,"availabilities",{get:function(){if(!ne){var t="undefined"!=typeof Intl;ne={dateTimeFormat:t&&void 0!==Intl.DateTimeFormat,numberFormat:t&&void 0!==Intl.NumberFormat}}return ne}}),le.install=Zt,le.version="8.18.1";var he=le,de=(n(223),n(217));function pe(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return fe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fe(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function fe(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var me=function(){var t=this;if(!(h.a.hasMetaInfo?h.a.hasMetaInfo(this):this._hasMetaInfo)||!this.$i18n||!this.$i18n.locale||!this.$i18n.locales||!1===this.$options[st.a]||this.$options[st.a]&&!1===this.$options[st.a].seo)return{};var e={htmlAttrs:{},link:[],meta:[]},n=this.$i18n.locales.find((function(e){return we(e)===t.$i18n.locale})),r=be(n);return n&&r&&(e.htmlAttrs.lang=r),ge.bind(this)(this.$i18n.locales,this.$i18n.__baseUrl,e.link),ve.bind(this)(n,this.$i18n.__baseUrl,e.link),ye.bind(this)(n,r,e.meta),xe.bind(this)(this.$i18n.locales,r,e.meta),e};function ge(t,e,link){if(st.t!==st.g.NO_PREFIX){var n,r=new Map,o=pe(t);try{for(o.s();!(n=o.n()).done;){var c=n.value,l=be(c);if(l){var h=l.split("-"),d=Object(I.a)(h,2),f=d[0],m=d[1];f&&m&&(c.isCatchallLocale||!r.has(f))&&r.set(f,c),r.set(l,c)}else console.warn("[".concat(st.f,"] Locale ISO code is required to generate alternate link"))}}catch(t){o.e(t)}finally{o.f()}var v,y=pe(r.entries());try{for(y.s();!(v=y.n()).done;){var x=Object(I.a)(v.value,2),_=x[0],w=x[1];link.push({hid:"alternate-hreflang-".concat(_),rel:"alternate",href:e+this.switchLocalePath(w.code),hreflang:_})}}catch(t){y.e(t)}finally{y.f()}}}function ve(t,e,link){if(st.t===st.g.PREFIX_AND_DEFAULT){var n=we(t),r=this.switchLocalePath(n),o=r!==this.$route.path;r&&o&&link.push({hid:"canonical-lang-".concat(n),rel:"canonical",href:e+r})}}function ye(t,e,meta){t&&e&&meta.push({hid:"og:locale",property:"og:locale",content:_e(t)})}function xe(t,e,meta){var n=t.filter((function(t){var n=be(t);return n&&n!==e})).map((function(t){return{hid:"og:locale:alternate-".concat(be(t)),property:"og:locale:alternate",content:_e(t)}}));meta.push.apply(meta,Object(de.a)(n))}function be(t){return t[st.e]}function _e(t){return be(t).replace(/-/g,"_")}function we(t){return t[st.b]}n(163),n(220),n(193),n(185),n(35),n(319);var Me=n(159),Se=n.n(Me);function Te(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function Ee(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Te(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Te(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function Ae(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Le(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Le(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function Le(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var Ce=function(t,e){var n,r=[],o=Ae(e.entries());try{var c=function(){var o=Object(I.a)(n.value,2),c=o[0],l=o[1],h=t.find((function(t){return t.toLowerCase()===l.toLowerCase()}));if(h)return r.push({code:h,score:1-c/e.length}),"break"};for(o.s();!(n=o.n()).done;){if("break"===c())break}}catch(t){o.e(t)}finally{o.f()}var l,h=Ae(e.entries());try{for(h.s();!(l=h.n()).done;){var d=Object(I.a)(l.value,2),f=d[0],m=d[1];if(m.includes("-")){var v=m.split("-")[0].toLowerCase();if(t.includes(v)){r.push({code:v,score:.999-f/e.length});break}}}}catch(t){h.e(t)}finally{h.f()}return r.length>1&&r.sort((function(t,e){return t.score===e.score?e.code.length-t.code.length:e.score-t.score})),r.length?r[0].code:null},Re=function(t,e){return"function"==typeof t?t(e):t},Pe=function(t,e,n){var r=n.localDomainKey,o=n.localeCodeKey,c=window.location.hostname;if(c){var l=t.find((function(t){return t[r]===c}));if(l)return l[o]}return null},Oe=function(t,e){var n,r=e.useCookie,o=e.cookieKey,c=e.localeCodes;if(r&&(n=Se.a.get(o),c.includes(n)))return n},Ie=function(t,e,n){var r=n.useCookie,o=n.cookieDomain,c=n.cookieKey;if(r){var l=new Date,h={expires:new Date(l.setDate(l.getDate()+365)),path:"/",sameSite:"lax"};o&&(h.domain=o),Se.a.set(c,t,h)}},ke=function(t,e,n,r){t.registerModule(e.moduleName,{namespaced:!0,state:function(){return Ee(Ee(Ee({},e.syncLocale?{locale:""}:{}),e.syncMessages?{messages:{}}:{}),e.syncRouteParams?{routeParams:{}}:{})},actions:Ee(Ee(Ee({},e.syncLocale?{setLocale:function(t,e){(0,t.commit)("setLocale",e)}}:{}),e.syncMessages?{setMessages:function(t,e){(0,t.commit)("setMessages",e)}}:{}),e.syncRouteParams?{setRouteParams:function(t,e){(0,t.commit)("setRouteParams",e)}}:{}),mutations:Ee(Ee(Ee({},e.syncLocale?{setLocale:function(t,e){t.locale=e}}:{}),e.syncMessages?{setMessages:function(t,e){t.messages=e}}:{}),e.syncRouteParams?{setRouteParams:function(t,e){t.routeParams=e}}:{}),getters:Ee({},e.syncRouteParams?{localeRouteParams:function(t){var e=t.routeParams;return function(t){return e[t]||{}}}}:{})},{preserveState:!!t.state[e.moduleName]})},Ne=function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(e){var n,r,o,c,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:null,r=l.length>2&&void 0!==l[2]?l[2]:null,o=l.length>3?l[3]:void 0,!(c=o.vuex)||!e){t.next=10;break}if(null===n||!c.syncLocale){t.next=7;break}return t.next=7,e.dispatch(c.moduleName+"/setLocale",n);case 7:if(null===r||!c.syncMessages){t.next=10;break}return t.next=10,e.dispatch(c.moduleName+"/setMessages",r);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();c.a.use(he);var De,ze,Be,Fe,je,Ue,Ge,He,Ve=(De=st.o,ze={routesNameSeparator:st.s,defaultLocaleRouteNameSuffix:st.k},Be=ze.routesNameSeparator,Fe=ze.defaultLocaleRouteNameSuffix,je="(".concat(De.join("|"),")"),Ue="(?:".concat(Be).concat(Fe,")?"),Ge=new RegExp("".concat(Be).concat(je).concat(Ue,"$"),"i"),He=new RegExp("^/".concat(je,"/"),"i"),function(t){if(t.name){var e=t.name.match(Ge);if(e&&e.length>1)return e[1]}else if(t.path){var n=t.path.match(He);if(n&&n.length>1)return n[1]}return null}),We=function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(e){var o,l,h,d,f,m,v,y,x,_,w,M,S,T,E,A,L,C,R;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.app,l=e.route,h=e.store,d=e.req,e.res,f=e.redirect,st.v&&h&&ke(h,st.v,st.o,st.f),m=st.l.useCookie,v=st.l.cookieKey,y=st.l.cookieDomain,x=function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(r){var c,l,d,v,y,x,w,M,S=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=S.length>1&&void 0!==S[1]?S[1]:{},l=c.initialSetup,(d=void 0!==l&&l)||!o.i18n.differentDomains){t.next=3;break}return t.abrupt("return");case 3:if(r!==o.i18n.locale){t.next=5;break}return t.abrupt("return");case 5:if(v=o.i18n.locale,d||(o.i18n.beforeLanguageSwitch(v,r),m&&o.i18n.setLocaleCookie(r)),!st.n){t.next=14;break}if(y=n(320),x=y.loadLanguageAsync,!o.i18n.fallbackLocale||r===o.i18n.fallbackLocale){t.next=12;break}return t.next=12,x(e,o.i18n.fallbackLocale);case 12:return t.next=14,x(e,r);case 14:return o.i18n.locale=r,t.next=17,Ne(h,r,o.i18n.getLocaleMessage(r),{vuex:st.v});case 17:w=e.route,M=_(w,r),d?o.i18n.__redirect=M:(o.i18n.onLanguageSwitched(v,r),M&&f(M));case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_=function(t,e){if(!e||o.i18n.differentDomains||st.t===st.g.NO_PREFIX)return"";if(Ve(t)===e)return"";var n=o.switchLocalePath(e);return n||(n=o.localePath(t.fullPath,e))!==t.fullPath?n:""},w=function(){var t,e=st.l.alwaysRedirect,n=st.l.fallbackLocale;m&&(t=o.i18n.getLocaleCookie())||("undefined"!=typeof navigator&&navigator.languages?t=Ce(st.o,navigator.languages):d&&void 0!==d.headers["accept-language"]&&(t=Ce(st.o,d.headers["accept-language"].split(",").map((function(t){return t.split(";")[0]})))));var r=t||n;if(r&&(!m||e||!o.i18n.getLocaleCookie())){if(r!==o.i18n.locale)return r;m&&!o.i18n.getLocaleCookie()&&o.i18n.setLocaleCookie(r)}return!1},M=function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,path,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("/"!==(n=e.route).path||!st.r){t.next=7;break}return r=302,path=st.r,"string"!=typeof st.r&&(r=st.r.statusCode,path=st.r.path),f(r,"/".concat(path),n.query),t.abrupt("return");case 7:if(!(c=o.i18n.__redirect)){t.next=12;break}return o.i18n.__redirect=null,f(c),t.abrupt("return");case 12:return o.i18n.__baseUrl=Re(st.h,e),l=st.l&&w()||Ve(n)||o.i18n.locale||o.i18n.defaultLocale||"",t.next=16,o.i18n.setLocale(l);case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),S=function(t){t.locales=st.p,t.defaultLocale=st.j,t.differentDomains=st.m,t.beforeLanguageSwitch=st.i,t.onLanguageSwitched=st.q,t.setLocaleCookie=function(t){return Ie(t,0,{useCookie:m,cookieDomain:y,cookieKey:v})},t.getLocaleCookie=function(){return Oe(0,{useCookie:m,cookieKey:v,localeCodes:st.o})},t.setLocale=function(t){return x(t)}},(T="function"==typeof st.u?Object(st.u)(e):st.u).componentInstanceCreatedListener=S,o.i18n=new he(T),o.i18n.locale="",o.i18n.fallbackLocale=T.fallbackLocale||"",S(o.i18n),o.i18n.__baseUrl=Re(st.h,e),o.i18n.__onNavigate=M,c.a.prototype.$nuxtI18nSeo=me,h&&(h.$i18n=o.i18n,h.state.localeDomains&&o.i18n.locales.forEach((function(t){t.domain=h.state.localeDomains[t.code]}))),E=o.i18n.defaultLocale||"",st.v&&st.v.syncLocale&&h&&""!==h.state[st.v.moduleName].locale?E=h.state[st.v.moduleName].locale:o.i18n.differentDomains?(A={localDomainKey:st.c,localeCodeKey:st.b},L=Pe(st.p,0,A),E=L||E):st.t!==st.g.NO_PREFIX?(C=Ve(l),E=C||E):m&&(E=o.i18n.getLocaleCookie()||E),R=st.l&&w(),E=R||E,t.next=24,x(E,{initialSetup:!0});case 24:t.next=27;break;case 27:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),qe=n(214),Ze=n.n(qe);c.a.use(Ze.a,{});var $e=n(215),Ye=n.n($e);function Xe(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function Je(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Xe(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Xe(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var Qe=function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("function"!=typeof(r={dev:!0,debug:{enabled:!1,sendHitTask:!0},id:"UA-20639105-4"}).asyncID){t.next=5;break}return t.next=4,r.asyncID(e);case 4:r.id=t.sent;case 5:c.a.use(Ye.a,Je(Je({},{router:e.app.router}),r)),e.$ga=c.a.$ga,n("ga",c.a.$ga);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();function Ke(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function tn(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Ke(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Ke(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}c.a.component(f.a.name,f.a),c.a.component(v.a.name,tn(tn({},v.a),{},{render:function(t,e){return v.a._warned||(v.a._warned=!0,console.warn("<no-ssr> has been deprecated and will be removed in Nuxt 3, please use <client-only> instead")),v.a.render(t,e)}})),c.a.component(A.name,A),c.a.component("NChild",A),c.a.component(k.name,k),c.a.use(h.a,{keyName:"head",attribute:"data-n-head",ssrAttribute:"data-n-head-ssr",tagIDKeyName:"hid"});var en={name:"page",mode:"out-in",appear:!1,appearClass:"appear",appearActiveClass:"appear-active",appearToClass:"appear-to"},nn=l.a.Store.prototype.registerModule,rn={preserveState:!0};function on(path,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return nn.call(this,path,t,tn(tn({},rn),e))}function an(t){return sn.apply(this,arguments)}function sn(){return(sn=Object(r.a)(regeneratorRuntime.mark((function t(e){var n,r,o,l,h,d,path,f,m=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f=function(t,e){if(!t)throw new Error("inject(key, value) has no key provided");if(void 0===e)throw new Error("inject('".concat(t,"', value) has no value provided"));l[t="$"+t]=e,l.context[t]||(l.context[t]=e),o[t]=l[t];var n="__nuxt_"+t+"_installed__";c.a[n]||(c.a[n]=!0,c.a.use((function(){Object.prototype.hasOwnProperty.call(c.a.prototype,t)||Object.defineProperty(c.a.prototype,t,{get:function(){return this.$root.$options[t]}})})))},n=m.length>1&&void 0!==m[1]?m[1]:{},t.next=4,E();case 4:return r=t.sent,(o=Y(e)).$router=r,o.registerModule=on,l=tn({head:{title:"ZIZO PARTY",description:"It‚Äôs time for celebration! Every summer, on the ZIZO Island, is held an amazing party. Let‚Äôs begin the festivities by aiming the sky and even further beyond!",htmlAttrs:{lang:"en"},meta:[{charset:"utf-8"},{theme_color:"#ee644d"},{name:"url",content:"https://party.wearezizo.com"},{name:"keywords",content:"zizo, japan, web, design, digital, agency, advertising, creative, game, webgl, 3d"},{ogType:"website"},{ogSiteName:"ZIZO PARTY"},{ogTitle:"ZIZO PARTY"},{ogDescription:"It‚Äôs time for celebration! Every summer, on the ZIZO Island, is held an amazing party. Let‚Äôs begin the festivities by aiming the sky and even further beyond!"},{hid:"og:url",name:"og:url",content:"https://party.wearezizo.com"},{hid:"og:site_name",name:"og:site_name",content:"ZIZO PARTY"},{hid:"og:sitename",name:"og:sitename",content:"ZIZO PARTY"},{hid:"og:image",name:"og:image",content:"https://party.wearezizo.com/ogp.jpg"},{hid:"og:img",name:"og:img",content:"https://party.wearezizo.com/ogp.jpg"},{hid:"og:title",name:"og:title",content:"ZIZO PARTY"},{hid:"og:description",name:"og:description",content:"It‚Äôs time for celebration! Every summer, on the ZIZO Island, is held an amazing party. Let‚Äôs begin the festivities by aiming the sky and even further beyond!"},{ogUrl:"https://party.wearezizo.com"},{name:"viewport",content:"width=device-width, initial-scale=1, minimum-scale=1.0"},{hid:"description",name:"description",content:"It‚Äôs time for celebration! Every summer, on the ZIZO Island, is held an amazing party. Let‚Äôs begin the festivities by aiming the sky and even further beyond!"},{hid:"mobile-web-app-capable",name:"mobile-web-app-capable",content:"yes"},{hid:"apple-mobile-web-app-title",name:"apple-mobile-web-app-title",content:"ZIZO PARTY"},{hid:"theme-color",name:"theme-color",content:"#f0e633"},{hid:"og:type",name:"og:type",property:"og:type",content:"website"}],noscript:[{innerHTML:"This website requires JavaScript."}],link:[{rel:"alternate icon",type:"image/png",href:"https://party.wearezizo.com/favicon.png"},{rel:"icon",type:"image/svg+xml",href:"https://party.wearezizo.com/favicon.svg"},{rel:"apple-touch-icon",href:"https://party.wearezizo.com/favicon/apple-touch-icon.png"},{rel:"manifest",href:"/_nuxt/manifest.73fc4ccd.json"},{rel:"shortcut icon",href:"/_nuxt/icons/icon_64x64.de3894.png"}],script:[],style:[]},store:o,router:r,nuxt:{defaultTransition:en,transitions:[en],setTransitions:function(t){return Array.isArray(t)||(t=[t]),t=t.map((function(t){return t=t?"string"==typeof t?Object.assign({},en,{name:t}):Object.assign({},en,t):en})),this.$options.nuxt.transitions=t,t},err:null,dateErr:null,error:function(t){t=t||null,l.context._errored=Boolean(t),t=t?Object(x.p)(t):null;var n=l.nuxt;return this&&(n=this.nuxt||this.$options.nuxt),n.dateErr=Date.now(),n.err=t,e&&(e.nuxt.error=t),t}}},H),o.app=l,h=e?e.next:function(t){return l.router.push(t)},e?d=r.resolve(e.url).route:(path=Object(x.f)(r.options.base,r.options.mode),d=r.resolve(path).route),t.next=14,Object(x.t)(l,{store:o,route:d,next:h,error:l.nuxt.error.bind(l),payload:e?e.payload:void 0,req:e?e.req:void 0,res:e?e.res:void 0,beforeRenderFns:e?e.beforeRenderFns:void 0,ssrContext:e});case 14:if(f("config",n),window.__NUXT__&&window.__NUXT__.state&&o.replaceState(window.__NUXT__.state),"function"!=typeof tt.a){t.next=20;break}return t.next=20,tt()(l.context,f);case 20:return t.next=23,et(l.context,f);case 23:t.next=26;break;case 26:return t.next=29,yt(l.context);case 29:if("function"!=typeof We){t.next=32;break}return t.next=32,We(l.context,f);case 32:t.next=35;break;case 35:if("function"!=typeof Qe){t.next=38;break}return t.next=38,Qe(l.context,f);case 38:0,t.next=42;break;case 42:return t.abrupt("return",{store:o,app:l,router:r});case 43:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";n.d(e,"e",(function(){return l})),n.d(e,"c",(function(){return h})),n.d(e,"d",(function(){return d})),n.d(e,"b",(function(){return f})),n.d(e,"f",(function(){return m})),n.d(e,"a",(function(){return v})),n.d(e,"g",(function(){return y}));n(24),n(19);var r=n(37),o=n.n(r),c=n(3),l=function(t){return new Promise((function(e){o.a.get("/api/user/"+t,{timeout:5e3}).then((function(data){e(data.data[0])})).catch((function(t){e(null)}))}))},h=function(){return new Promise((function(t){o.a.get("/api/employees").then((function(data){for(var e=data.data,i=e.length-1;i>0;i--){var n=Math.floor(Math.random()*i),r=e[i];e[i]=e[n],e[n]=r}t(e)})).catch((function(e){t(e)}))}))},d=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(n){o.a.get("/api/lab1/5f4fcf310c8a030a8959cc3d").then((function(data){var pattern=data.data;e?n(pattern):(c.a.push({name:t.name,character:t.character,pattern:{level1:pattern[0].level1?JSON.parse(pattern[0].level1):{},level2:pattern[0].level2?JSON.parse(pattern[0].level2):{},level3:pattern[0].level3?JSON.parse(pattern[0].level3):{}},type:t.type,id:t._id}),n())})).catch((function(t){n(t)}))}))},f=function(){return new Promise((function(t){o.a.post("/api/user",{name:c.b.nickname,character:c.d.character,lab1:c.b.labID,ban:!1,type:"player",mail:""}).then((function(data){localStorage&&localStorage.setItem("user",JSON.stringify(data.data)),t(data)})).catch((function(e){t(!1)}))}))},m=function(t){return new Promise((function(e){o.a.post("/api/mail",{from:"contact@wearezizo.com",to:t.to,title:t.title,message:t.message}).then((function(data){e(!0)})).catch((function(t){e(!1)}))}))},v=function(){var t=Math.floor(c.d.scores.level1.max),e=Math.floor(c.d.scores.level2.max),n=Math.floor(c.d.scores.level3.max);return new Promise((function(r){o.a.post("/api/lab1",{level1:JSON.stringify(c.b.session.level1),level2:JSON.stringify(c.b.session.level2),level3:JSON.stringify(c.b.session.level3),score1:t,score2:e,score3:n,score:t+e+n}).then((function(data){localStorage&&localStorage.setItem("lab",JSON.stringify(data.data)),r(data)})).catch((function(t){r(!1)}))}))},y=function(){var t={name:c.b.nickname,character:c.d.character,lab1:c.b.labID,ban:!1,type:"player",mail:c.b.mail};return new Promise((function(e){o.a.post("/api/user/"+c.b.uid,t).then((function(data){localStorage&&localStorage.setItem("user",JSON.stringify(data.data)),e(data)})).catch((function(t){e(!1)}))}))}},function(t,e,n){"use strict";var r={name:"NoSsr",functional:!0,props:{placeholder:String,placeholderTag:{type:String,default:"div"}},render:function(t,e){var n=e.parent,r=e.slots,o=e.props,c=r(),l=c.default;void 0===l&&(l=[]);var h=c.placeholder;return n._isMounted?l:(n.$once("hook:mounted",(function(){n.$forceUpdate()})),o.placeholderTag&&(o.placeholder||h)?t(o.placeholderTag,{class:["no-ssr-placeholder"]},o.placeholder||h):l.length>0?l.map((function(){return t(!1)})):t(!1))}};t.exports=r},,,,,,,,,,,,,,,,function(t,e,n){"use strict";var r={};r.auth=n(240),r.auth=r.auth.default||r.auth,e.a=r},,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";t.exports=function(t,e){return e||(e={}),"string"!=typeof(t=t&&t.__esModule?t.default:t)?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},,function(t,e,n){var content=n(250);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(21).default)("2777bcfc",content,!0,{sourceMap:!1})},function(t,e,n){var content=n(252);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(21).default)("456c47a9",content,!0,{sourceMap:!1})},function(t,e,n){var content=n(257);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(21).default)("eb385c2c",content,!0,{sourceMap:!1})},function(t,e,n){var content=n(261);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(21).default)("acaab986",content,!0,{sourceMap:!1})},function(t,e,n){var content=n(263);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(21).default)("03f9c9b7",content,!0,{sourceMap:!1})},function(t,e,n){var content=n(265);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(21).default)("4db2b032",content,!0,{sourceMap:!1})},function(t,e,n){var content=n(267);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(21).default)("0c0aefae",content,!0,{sourceMap:!1})},function(t,e,n){var content=n(269);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(21).default)("75f11deb",content,!0,{sourceMap:!1})},function(t,e,n){var content=n(271);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(21).default)("38a44446",content,!0,{sourceMap:!1})},function(t,e,n){var content=n(275);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(21).default)("0d3c8842",content,!0,{sourceMap:!1})},function(t,e,n){var content=n(279);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(21).default)("be313e82",content,!0,{sourceMap:!1})},function(t,e,n){var content=n(281);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(21).default)("88dcfd42",content,!0,{sourceMap:!1})},function(t,e,n){var content=n(283);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(21).default)("176dedfd",content,!0,{sourceMap:!1})},function(t,e,n){var content=n(301);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(21).default)("168eecad",content,!0,{sourceMap:!1})},function(t,e,n){var content=n(303);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(21).default)("96e89bd6",content,!0,{sourceMap:!1})},function(t,e,n){var content=n(307);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(21).default)("ba2b2ee6",content,!0,{sourceMap:!1})},function(t,e,n){var content=n(310);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(21).default)("95d9f386",content,!0,{sourceMap:!1})},function(t,e,n){var content=n(312);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(21).default)("1eccb7df",content,!0,{sourceMap:!1})},,function(t,e,n){"use strict";n(41),n(60),n(61),n(56),n(38),n(62),n(58),n(59),n(53),n(24),n(19),n(45),n(71),n(40),n(39),n(46);var r=n(2);function o(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,h=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return l=t.done,t},e:function(t){h=!0,o=t},f:function(){try{l||null==n.return||n.return()}finally{if(h)throw o}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var l=window.requestIdleCallback||function(t){var e=Date.now();return setTimeout((function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})}),1)},h=window.cancelIdleCallback||function(t){clearTimeout(t)},d=window.IntersectionObserver&&new window.IntersectionObserver((function(t){t.forEach((function(t){var e=t.intersectionRatio,link=t.target;e<=0||link.__prefetch()}))}));e.a={name:"NuxtLink",extends:r.a.component("RouterLink"),props:{prefetch:{type:Boolean,default:!0},noPrefetch:{type:Boolean,default:!1}},mounted:function(){this.prefetch&&!this.noPrefetch&&(this.handleId=l(this.observe,{timeout:2e3}))},beforeDestroy:function(){h(this.handleId),this.__observed&&(d.unobserve(this.$el),delete this.$el.__prefetch)},methods:{observe:function(){d&&this.shouldPrefetch()&&(this.$el.__prefetch=this.prefetchLink.bind(this),d.observe(this.$el),this.__observed=!0)},shouldPrefetch:function(){return this.getPrefetchComponents().length>0},canPrefetch:function(){var t=navigator.connection;return!(this.$nuxt.isOffline||t&&((t.effectiveType||"").includes("2g")||t.saveData))},getPrefetchComponents:function(){return this.$router.resolve(this.to,this.$route,this.append).resolved.matched.map((function(t){return t.components.default})).filter((function(t){return"function"==typeof t&&!t.options&&!t.__prefetched}))},prefetchLink:function(){if(this.canPrefetch()){d.unobserve(this.$el);var t,e=o(this.getPrefetchComponents());try{for(e.s();!(t=e.n()).done;){var n=t.value,r=n();r instanceof Promise&&r.catch((function(){})),n.__prefetched=!0}}catch(t){e.e(t)}finally{e.f()}}}}}},,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";n.r(e);n(63);var r=n(1),o={props:{label:{type:String,required:!0,default:""},current:{type:Number,required:!1,default:0},game:{type:Boolean,required:!1,default:!1}},data:function(){return{disable:!1}},mounted:function(){this.init()},methods:{init:function(){this.scope=Object(r.a)(this)},enable:function(){this.disable=!1},play:function(){if(this.disable=!0,"play"==this.label){var g=this.current+1;g<3&&r.b.trigger({name:"stopMusic"}),r.b.trigger({name:"startGame"},{game:g}),this.$store.commit("sound/playSound","menu_start"),this.$ga.event("Interaction","start-game-"+g)}else"start"==this.label?(this.$store.commit("sound/playSound","menu_start"),this.$store.commit("sound/playSound","menu_start_party"),this.$store.commit("sound/playSound","spinning_characters_trio_out"),this.$emit("startSite"),this.$ga.event("Navigation","start-site")):(r.b.trigger({name:"pickCharacter"}),this.$store.commit("sound/playSound","menu_start"),this.$store.commit("sound/playSound","spinning_characters_trio_in"))},rollOver:function(b){this.$store.commit("sound/playSound",b?"hover_"+Math.round(.5+3.5*Math.random()):"menu_start_hover_back"),r.b.trigger({name:"contactOver"},{over:b,color:b?this.game?[.9411764706,.902,.196]:[.1411764706,.09411764706,.09019607843]:this.game?[.9411764706,.902,.196]:[1,1,1]})}}},c=(n(262),n(5)),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"play-btn",class:[{disable:t.disable||"loading"==t.label},{game:t.game}],on:{mousedown:t.play,touchstart:function(e){return e.preventDefault(),t.play(e)},mouseover:function(e){return t.rollOver(!0)},mouseleave:function(e){return t.rollOver(!1)}}},[n("div",{staticClass:"pbtn-l"},[n("span",[t._v(t._s(t.$t(t.label)))])])])}),[],!1,null,null,null);e.default=component.exports},function(t,e,n){(function(n){var r;!function(){"use strict";var o=function(){this.init()};o.prototype={init:function(){var t=this||c;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var e=this||c;if(t=parseFloat(t),e.ctx||x(),void 0!==t&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t,c.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var n=e._howls[i]._getSoundIds(),r=0;r<n.length;r++){var o=e._howls[i]._soundById(n[r]);o&&o._node&&(o._node.volume=o._volume*t)}return e}return e._volume},mute:function(t){var e=this||c;e.ctx||x(),e._muted=t,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t?0:e._volume,c.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var n=e._howls[i]._getSoundIds(),r=0;r<n.length;r++){var o=e._howls[i]._soundById(n[r]);o&&o._node&&(o._node.muted=!!t||o._muted)}return e},stop:function(){for(var t=this||c,i=0;i<t._howls.length;i++)t._howls[i].stop();return t},unload:function(){for(var t=this||c,i=t._howls.length-1;i>=0;i--)t._howls[i].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,x()),t},codecs:function(t){return(this||c)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||c;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(t){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||c,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!e||"function"!=typeof e.canPlayType)return t;var n=e.canPlayType("audio/mpeg;").replace(/^no$/,""),r=t._navigator&&t._navigator.userAgent.match(/OPR\/([0-6].)/g),o=r&&parseInt(r[0].split("/")[1],10)<33;return t._codecs={mp3:!(o||!n&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(e.canPlayType("audio/x-m4b;")||e.canPlayType("audio/m4b;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var t=this||c;if(!t._audioUnlocked&&t.ctx){t._audioUnlocked=!1,t.autoUnlock=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var e=function(n){for(;t._html5AudioPool.length<t.html5PoolSize;)try{var r=new Audio;r._unlocked=!0,t._releaseHtml5Audio(r)}catch(n){t.noAudio=!0;break}for(var i=0;i<t._howls.length;i++)if(!t._howls[i]._webAudio)for(var o=t._howls[i]._getSoundIds(),c=0;c<o.length;c++){var l=t._howls[i]._soundById(o[c]);l&&l._node&&!l._node._unlocked&&(l._node._unlocked=!0,l._node.load())}t._autoResume();var source=t.ctx.createBufferSource();source.buffer=t._scratchBuffer,source.connect(t.ctx.destination),void 0===source.start?source.noteOn(0):source.start(0),"function"==typeof t.ctx.resume&&t.ctx.resume(),source.onended=function(){source.disconnect(0),t._audioUnlocked=!0,document.removeEventListener("touchstart",e,!0),document.removeEventListener("touchend",e,!0),document.removeEventListener("click",e,!0);for(var i=0;i<t._howls.length;i++)t._howls[i]._emit("unlock")}};return document.addEventListener("touchstart",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("click",e,!0),t}},_obtainHtml5Audio:function(){var t=this||c;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var e=(new Audio).play();return e&&"undefined"!=typeof Promise&&(e instanceof Promise||"function"==typeof e.then)&&e.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(audio){var t=this||c;return audio._unlocked&&t._html5AudioPool.push(audio),t},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&c.usingWebAudio){for(var i=0;i<t._howls.length;i++)if(t._howls[i]._webAudio)for(var e=0;e<t._howls[i]._sounds.length;e++)if(!t._howls[i]._sounds[e]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout((function(){if(t.autoSuspend){t._suspendTimer=null,t.state="suspending";var e=function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())};t.ctx.suspend().then(e,e)}}),3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&c.usingWebAudio)return"running"===t.state&&"interrupted"!==t.ctx.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state||"running"===t.state&&"interrupted"===t.ctx.state?(t.ctx.resume().then((function(){t.state="running";for(var i=0;i<t._howls.length;i++)t._howls[i]._emit("resume")})),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var c=new o,l=function(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")};l.prototype={init:function(t){var e=this;return c.ctx||x(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload&&"metadata"!==t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:!(!t.xhr||!t.xhr.withCredentials)&&t.xhr.withCredentials},e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onunlock=t.onunlock?[{fn:t.onunlock}]:[],e._onresume=[],e._webAudio=c.usingWebAudio&&!e._html5,void 0!==c.ctx&&c.ctx&&c.autoUnlock&&c._unlockAudio(),c._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&"none"!==e._preload&&e.load(),e},load:function(){var t=null;if(c.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var i=0;i<this._src.length;i++){var e,n;if(this._format&&this._format[i])e=this._format[i];else{if("string"!=typeof(n=this._src[i])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(e=/^data:audio\/([^;,]+);/i.exec(n))||(e=/\.([^.]+)$/.exec(n.split("?",1)[0])),e&&(e=e[1].toLowerCase())}if(e||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),e&&c.codecs(e)){t=this._src[i];break}}if(t)return this._src=t,this._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new h(this),this._webAudio&&f(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(t,e){var n=this,r=null;if("number"==typeof t)r=t,t=null;else{if("string"==typeof t&&"loaded"===n._state&&!n._sprite[t])return null;if(void 0===t&&(t="__default",!n._playLock)){for(var o=0,i=0;i<n._sounds.length;i++)n._sounds[i]._paused&&!n._sounds[i]._ended&&(o++,r=n._sounds[i]._id);1===o?t=null:r=null}}var l=r?n._soundById(r):n._inactiveSound();if(!l)return null;if(r&&!t&&(t=l._sprite||"__default"),"loaded"!==n._state){l._sprite=t,l._ended=!1;var h=l._id;return n._queue.push({event:"play",action:function(){n.play(h)}}),h}if(r&&!l._paused)return e||n._loadQueue("play"),l._id;n._webAudio&&c._autoResume();var d=Math.max(0,l._seek>0?l._seek:n._sprite[t][0]/1e3),f=Math.max(0,(n._sprite[t][0]+n._sprite[t][1])/1e3-d),m=1e3*f/Math.abs(l._rate),v=n._sprite[t][0]/1e3,y=(n._sprite[t][0]+n._sprite[t][1])/1e3;l._sprite=t,l._ended=!1;var x=function(){l._paused=!1,l._seek=d,l._start=v,l._stop=y,l._loop=!(!l._loop&&!n._sprite[t][2])};if(!(d>=y)){var _=l._node;if(n._webAudio){var w=function(){n._playLock=!1,x(),n._refreshBuffer(l);var t=l._muted||n._muted?0:l._volume;_.gain.setValueAtTime(t,c.ctx.currentTime),l._playStart=c.ctx.currentTime,void 0===_.bufferSource.start?l._loop?_.bufferSource.noteGrainOn(0,d,86400):_.bufferSource.noteGrainOn(0,d,f):l._loop?_.bufferSource.start(0,d,86400):_.bufferSource.start(0,d,f),m!==1/0&&(n._endTimers[l._id]=setTimeout(n._ended.bind(n,l),m)),e||setTimeout((function(){n._emit("play",l._id),n._loadQueue()}),0)};"running"===c.state&&"interrupted"!==c.ctx.state?w():(n._playLock=!0,n.once("resume",w),n._clearTimer(l._id))}else{var M=function(){_.currentTime=d,_.muted=l._muted||n._muted||c._muted||_.muted,_.volume=l._volume*c.volume(),_.playbackRate=l._rate;try{var r=_.play();if(r&&"undefined"!=typeof Promise&&(r instanceof Promise||"function"==typeof r.then)?(n._playLock=!0,x(),r.then((function(){n._playLock=!1,_._unlocked=!0,e||(n._emit("play",l._id),n._loadQueue())})).catch((function(){n._playLock=!1,n._emit("playerror",l._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),l._ended=!0,l._paused=!0}))):e||(n._playLock=!1,x(),n._emit("play",l._id),n._loadQueue()),_.playbackRate=l._rate,_.paused)return void n._emit("playerror",l._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==t||l._loop?n._endTimers[l._id]=setTimeout(n._ended.bind(n,l),m):(n._endTimers[l._id]=function(){n._ended(l),_.removeEventListener("ended",n._endTimers[l._id],!1)},_.addEventListener("ended",n._endTimers[l._id],!1))}catch(t){n._emit("playerror",l._id,t)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===_.src&&(_.src=n._src,_.load());var S=window&&window.ejecta||!_.readyState&&c._navigator.isCocoonJS;if(_.readyState>=3||S)M();else{n._playLock=!0;var T=function(){M(),_.removeEventListener(c._canPlayEvent,T,!1)};_.addEventListener(c._canPlayEvent,T,!1),n._clearTimer(l._id)}}return l._id}n._ended(l)},pause:function(t){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var n=e._getSoundIds(t),i=0;i<n.length;i++){e._clearTimer(n[i]);var r=e._soundById(n[i]);if(r&&!r._paused&&(r._seek=e.seek(n[i]),r._rateSeek=0,r._paused=!0,e._stopFade(n[i]),r._node))if(e._webAudio){if(!r._node.bufferSource)continue;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),e._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||e._emit("pause",r?r._id:null)}return e},stop:function(t,e){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(t)}}),n;for(var r=n._getSoundIds(t),i=0;i<r.length;i++){n._clearTimer(r[i]);var o=n._soundById(r[i]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,n._stopFade(r[i]),o._node&&(n._webAudio?o._node.bufferSource&&(void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),n._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause(),o._node.duration===1/0&&n._clearSound(o._node))),e||n._emit("stop",o._id))}return n},mute:function(t,e){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(t,e)}}),n;if(void 0===e){if("boolean"!=typeof t)return n._muted;n._muted=t}for(var r=n._getSoundIds(e),i=0;i<r.length;i++){var o=n._soundById(r[i]);o&&(o._muted=t,o._interval&&n._stopFade(o._id),n._webAudio&&o._node?o._node.gain.setValueAtTime(t?0:o._volume,c.ctx.currentTime):o._node&&(o._node.muted=!!c._muted||t),n._emit("mute",o._id))}return n},volume:function(){var t,e,n,r=this,o=arguments;if(0===o.length)return r._volume;if(1===o.length||2===o.length&&void 0===o[1]){var l=r._getSoundIds(),h=l.indexOf(o[0]);h>=0?e=parseInt(o[0],10):t=parseFloat(o[0])}else o.length>=2&&(t=parseFloat(o[0]),e=parseInt(o[1],10));if(!(void 0!==t&&t>=0&&t<=1))return(n=e?r._soundById(e):r._sounds[0])?n._volume:0;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,o)}}),r;void 0===e&&(r._volume=t),e=r._getSoundIds(e);for(var i=0;i<e.length;i++)(n=r._soundById(e[i]))&&(n._volume=t,o[2]||r._stopFade(e[i]),r._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(t,c.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=t*c.volume()),r._emit("volume",n._id));return r},fade:function(t,e,n,r){var o=this;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"fade",action:function(){o.fade(t,e,n,r)}}),o;t=Math.min(Math.max(0,parseFloat(t)),1),e=Math.min(Math.max(0,parseFloat(e)),1),n=parseFloat(n),o.volume(t,r);for(var l=o._getSoundIds(r),i=0;i<l.length;i++){var h=o._soundById(l[i]);if(h){if(r||o._stopFade(l[i]),o._webAudio&&!h._muted){var d=c.ctx.currentTime,f=d+n/1e3;h._volume=t,h._node.gain.setValueAtTime(t,d),h._node.gain.linearRampToValueAtTime(e,f)}o._startFadeInterval(h,t,e,n,l[i],void 0===r)}}return o},_startFadeInterval:function(t,e,n,r,o,c){var l=this,h=e,d=n-e,f=Math.abs(d/.01),m=Math.max(4,f>0?r/f:r),v=Date.now();t._fadeTo=n,t._interval=setInterval((function(){var o=(Date.now()-v)/r;v=Date.now(),h+=d*o,h=d<0?Math.max(n,h):Math.min(n,h),h=Math.round(100*h)/100,l._webAudio?t._volume=h:l.volume(h,t._id,!0),c&&(l._volume=h),(n<e&&h<=n||n>e&&h>=n)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,l.volume(n,t._id),l._emit("fade",t._id))}),m)},_stopFade:function(t){var e=this._soundById(t);return e&&e._interval&&(this._webAudio&&e._node.gain.cancelScheduledValues(c.ctx.currentTime),clearInterval(e._interval),e._interval=null,this.volume(e._fadeTo,t),e._fadeTo=null,this._emit("fade",t)),this},loop:function(){var t,e,n,r=this,o=arguments;if(0===o.length)return r._loop;if(1===o.length){if("boolean"!=typeof o[0])return!!(n=r._soundById(parseInt(o[0],10)))&&n._loop;t=o[0],r._loop=t}else 2===o.length&&(t=o[0],e=parseInt(o[1],10));for(var c=r._getSoundIds(e),i=0;i<c.length;i++)(n=r._soundById(c[i]))&&(n._loop=t,r._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=t,t&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return r},rate:function(){var t,e,n,r=this,o=arguments;if(0===o.length)e=r._sounds[0]._id;else if(1===o.length){var l=r._getSoundIds(),h=l.indexOf(o[0]);h>=0?e=parseInt(o[0],10):t=parseFloat(o[0])}else 2===o.length&&(t=parseFloat(o[0]),e=parseInt(o[1],10));if("number"!=typeof t)return(n=r._soundById(e))?n._rate:r._rate;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,o)}}),r;void 0===e&&(r._rate=t),e=r._getSoundIds(e);for(var i=0;i<e.length;i++)if(n=r._soundById(e[i])){r.playing(e[i])&&(n._rateSeek=r.seek(e[i]),n._playStart=r._webAudio?c.ctx.currentTime:n._playStart),n._rate=t,r._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(t,c.ctx.currentTime):n._node&&(n._node.playbackRate=t);var d=r.seek(e[i]),f=(r._sprite[n._sprite][0]+r._sprite[n._sprite][1])/1e3-d,m=1e3*f/Math.abs(n._rate);!r._endTimers[e[i]]&&n._paused||(r._clearTimer(e[i]),r._endTimers[e[i]]=setTimeout(r._ended.bind(r,n),m)),r._emit("rate",n._id)}return r},seek:function(){var t,e,n=this,r=arguments;if(0===r.length)e=n._sounds[0]._id;else if(1===r.length){var o=n._getSoundIds(),l=o.indexOf(r[0]);l>=0?e=parseInt(r[0],10):n._sounds.length&&(e=n._sounds[0]._id,t=parseFloat(r[0]))}else 2===r.length&&(t=parseFloat(r[0]),e=parseInt(r[1],10));if(void 0===e)return n;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"seek",action:function(){n.seek.apply(n,r)}}),n;var h=n._soundById(e);if(h){if(!("number"==typeof t&&t>=0)){if(n._webAudio){var d=n.playing(e)?c.ctx.currentTime-h._playStart:0,f=h._rateSeek?h._rateSeek-h._seek:0;return h._seek+(f+d*Math.abs(h._rate))}return h._node.currentTime}var m=n.playing(e);m&&n.pause(e,!0),h._seek=t,h._ended=!1,n._clearTimer(e),n._webAudio||!h._node||isNaN(h._node.duration)||(h._node.currentTime=t);var v=function(){n._emit("seek",e),m&&n.play(e,!0)};if(m&&!n._webAudio){var y=function(){n._playLock?setTimeout(y,0):v()};setTimeout(y,0)}else v()}return n},playing:function(t){if("number"==typeof t){var e=this._soundById(t);return!!e&&!e._paused}for(var i=0;i<this._sounds.length;i++)if(!this._sounds[i]._paused)return!0;return!1},duration:function(t){var e=this._duration,n=this._soundById(t);return n&&(e=this._sprite[n._sprite][1]/1e3),e},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,i=0;i<e.length;i++)e[i]._paused||t.stop(e[i]._id),t._webAudio||(t._clearSound(e[i]._node),e[i]._node.removeEventListener("error",e[i]._errorFn,!1),e[i]._node.removeEventListener(c._canPlayEvent,e[i]._loadFn,!1),c._releaseHtml5Audio(e[i]._node)),delete e[i]._node,t._clearTimer(e[i]._id);var n=c._howls.indexOf(t);n>=0&&c._howls.splice(n,1);var r=!0;for(i=0;i<c._howls.length;i++)if(c._howls[i]._src===t._src||t._src.indexOf(c._howls[i]._src)>=0){r=!1;break}return d&&r&&delete d[t._src],c.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,n,r){var o=this["_on"+t];return"function"==typeof e&&o.push(r?{id:n,fn:e,once:r}:{id:n,fn:e}),this},off:function(t,e,n){var r=this["_on"+t],i=0;if("number"==typeof e&&(n=e,e=null),e||n)for(i=0;i<r.length;i++){var o=n===r[i].id;if(e===r[i].fn&&o||!e&&o){r.splice(i,1);break}}else if(t)this["_on"+t]=[];else{var c=Object.keys(this);for(i=0;i<c.length;i++)0===c[i].indexOf("_on")&&Array.isArray(this[c[i]])&&(this[c[i]]=[])}return this},once:function(t,e,n){return this.on(t,e,n,1),this},_emit:function(t,e,n){for(var r=this["_on"+t],i=r.length-1;i>=0;i--)r[i].id&&r[i].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,n)}.bind(this,r[i].fn),0),r[i].once&&this.off(t,r[i].fn,r[i].id));return this._loadQueue(t),this},_loadQueue:function(t){if(this._queue.length>0){var e=this._queue[0];e.event===t&&(this._queue.shift(),this._loadQueue()),t||e.action()}return this},_ended:function(t){var e=t._sprite;if(!this._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(this._ended.bind(this,t),100),this;var n=!(!t._loop&&!this._sprite[e][2]);if(this._emit("end",t._id),!this._webAudio&&n&&this.stop(t._id,!0).play(t._id),this._webAudio&&n){this._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=c.ctx.currentTime;var r=1e3*(t._stop-t._start)/Math.abs(t._rate);this._endTimers[t._id]=setTimeout(this._ended.bind(this,t),r)}return this._webAudio&&!n&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,this._clearTimer(t._id),this._cleanBuffer(t._node),c._autoSuspend()),this._webAudio||n||this.stop(t._id,!0),this},_clearTimer:function(t){if(this._endTimers[t]){if("function"!=typeof this._endTimers[t])clearTimeout(this._endTimers[t]);else{var e=this._soundById(t);e&&e._node&&e._node.removeEventListener("ended",this._endTimers[t],!1)}delete this._endTimers[t]}return this},_soundById:function(t){for(var i=0;i<this._sounds.length;i++)if(t===this._sounds[i]._id)return this._sounds[i];return null},_inactiveSound:function(){this._drain();for(var i=0;i<this._sounds.length;i++)if(this._sounds[i]._ended)return this._sounds[i].reset();return new h(this)},_drain:function(){var t=this._pool,e=0,i=0;if(!(this._sounds.length<t)){for(i=0;i<this._sounds.length;i++)this._sounds[i]._ended&&e++;for(i=this._sounds.length-1;i>=0;i--){if(e<=t)return;this._sounds[i]._ended&&(this._webAudio&&this._sounds[i]._node&&this._sounds[i]._node.disconnect(0),this._sounds.splice(i,1),e--)}}},_getSoundIds:function(t){if(void 0===t){for(var e=[],i=0;i<this._sounds.length;i++)e.push(this._sounds[i]._id);return e}return[t]},_refreshBuffer:function(t){return t._node.bufferSource=c.ctx.createBufferSource(),t._node.bufferSource.buffer=d[this._src],t._node.bufferSource.connect(t._fxInsertIn),t._node.bufferSource.connect(t._fxSend),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,c.ctx.currentTime),this},_cleanBuffer:function(t){var e=c._navigator&&c._navigator.vendor.indexOf("Apple")>=0;if(c._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),e))try{t.bufferSource.buffer=c._scratchBuffer}catch(t){}return t.bufferSource=null,this},_clearSound:function(t){/MSIE |Trident\//.test(c._navigator&&c._navigator.userAgent)||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var h=function(t){this._parent=t,this.init()};h.prototype={init:function(){var t=this._parent;return this._muted=t._muted,this._loop=t._loop,this._volume=t._volume,this._rate=t._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++c._counter,t._sounds.push(this),this.create(),this},create:function(){var t=this._parent,e=c._muted||this._muted||this._parent._muted?0:this._volume;return t._webAudio?(this._node=void 0===c.ctx.createGain?c.ctx.createGainNode():c.ctx.createGain(),this._node.gain.setValueAtTime(e,c.ctx.currentTime),this._node.paused=!0,this._node.connect(c.masterGain),this._fxSend=void 0===c.ctx.createGain?c.ctx.createGainNode():c.ctx.createGain(),this._fxInsertIn=void 0===c.ctx.createGain?c.ctx.createGainNode():c.ctx.createGain(),this._fxInsertOut=void 0===c.ctx.createGain?c.ctx.createGainNode():c.ctx.createGain(),this._panner?this._fxInsertOut.connect(this._panner):this._fxInsertOut.connect(this._node),this._fxInsertIn.connect(this._fxInsertOut)):c.noAudio||(this._node=c._obtainHtml5Audio(),console.log(this._node),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(c._canPlayEvent,this._loadFn,!1),this._node.src=t._src,this._node.preload=!0===t._preload?"auto":t._preload,this._node.volume=e*c.volume(),this._node.load()),this},reset:function(){var t=this._parent;return this._muted=t._muted,this._loop=t._loop,this._volume=t._volume,this._rate=t._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++c._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var t=this._parent;t._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),this._node.removeEventListener(c._canPlayEvent,this._loadFn,!1)}};var d={},f=function(t){var e=t._src;if(d[e])return t._duration=d[e].duration,void y(t);if(/^data:[^;]+;base64,/.test(e)){for(var data=atob(e.split(",")[1]),n=new Uint8Array(data.length),i=0;i<data.length;++i)n[i]=data.charCodeAt(i);v(n.buffer,t)}else{var r=new XMLHttpRequest;r.open(t._xhr.method,e,!0),r.withCredentials=t._xhr.withCredentials,r.responseType="arraybuffer",t._xhr.headers&&Object.keys(t._xhr.headers).forEach((function(e){r.setRequestHeader(e,t._xhr.headers[e])})),r.onload=function(){var code=(r.status+"")[0];"0"===code||"2"===code||"3"===code?v(r.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+r.status+".")},r.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete d[e],t.load())},m(r)}},m=function(t){try{t.send()}catch(e){t.onerror()}},v=function(t,e){var n=function(){e._emit("loaderror",null,"Decoding audio data failed.")},r=function(t){t&&e._sounds.length>0?(d[e._src]=t,y(e,t)):n()};"undefined"!=typeof Promise&&1===c.ctx.decodeAudioData.length?c.ctx.decodeAudioData(t).then(r).catch(n):c.ctx.decodeAudioData(t,r,n)},y=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},x=function(){if(c.usingWebAudio){try{"undefined"!=typeof AudioContext?c.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?c.ctx=new webkitAudioContext:c.usingWebAudio=!1}catch(t){c.usingWebAudio=!1}c.ctx||(c.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(c._navigator&&c._navigator.platform),e=c._navigator&&c._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=e?parseInt(e[1],10):null;if(t&&n&&n<9){var r=/safari/.test(c._navigator&&c._navigator.userAgent.toLowerCase());c._navigator&&!r&&(c.usingWebAudio=!1)}c.usingWebAudio&&(c.masterGain=void 0===c.ctx.createGain?c.ctx.createGainNode():c.ctx.createGain(),c.masterGain.gain.setValueAtTime(c._muted?0:c._volume,c.ctx.currentTime),c.masterGain.connect(c.ctx.destination)),c._setup()}};void 0===(r=function(){return{Howler:c,Howl:l}}.apply(e,[]))||(t.exports=r),e.Howler=c,e.Howl=l,void 0!==n?(n.HowlerGlobal=o,n.Howler=c,n.Howl=l,n.Sound=h):"undefined"!=typeof window&&(window.HowlerGlobal=o,window.Howler=c,window.Howl=l,window.Sound=h)}(),function(){"use strict";var t;Howl.prototype.init=(t=Howl.prototype.init,function(e){return this._q=e.qFactor||1,this._filterType=e.filterType||"lowpass",this._frequency=e.frequency||1e3,this._onqFactor=e.onqFactor?[{fn:e.onqFactor}]:[],this._onfrequency=e.onfrequency?[{fn:e.onfrequency}]:[],this._onaddFilter=e.onaddFilter?[{fn:e.onaddFilter}]:[],this._onfilterType=e.onfilterType?[{fn:e.onfilterType}]:[],t.call(this,e)}),Howl.prototype.qFactor=function(q,t){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"qFactor",action:function(){n.qFactor(q,t)}}),n;if(void 0===t){if("number"!=typeof q)return n._q;n._q=q}for(var r=n._getSoundIds(t),i=0;i<r.length;i++){var o=n._soundById(r[i]);if(o){if("number"!=typeof q)return o._q;o._node&&(n._q=q,o._filterNode||e(o),o._filterNode.Q.value=q,n._emit("qFactor",o._id))}}return n},Howl.prototype.filterType=function(t,n){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"filterType",action:function(){r.filterType(t,n)}}),r;if(void 0===n){if("lowpass"!==t&&"highpass"!==t&&"bandpass"!==t&&"notch"!==t)return r._filterType;r._filterType=t}for(var o=r._getSoundIds(n),i=0;i<o.length;i++){var c=r._soundById(o[i]);if(c){if("lowpass"!==t&&"highpass"!==t&&"bandpass"!==t&&"notch"!==t)return c._filterType;c._filterType=t,c._node&&(c._filterNode||e(c),c._filterNode.type=t,r._emit("filterType",c._id))}}return r},Howl.prototype.frequency=function(t,n){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"frequency",action:function(){r.frequency(t,n)}}),r;if(void 0===n){if("number"!=typeof t)return r._frequency;r._frequency=t}for(var o=r._getSoundIds(n),i=0;i<o.length;i++){var c=r._soundById(o[i]);if(c){if("number"!=typeof t)return c._frequency;c._frequency=t,c._node&&(c._filterNode||e(c),c._filterNode.frequency.value=t,r._emit("frequency",c._id))}}return r},Howl.prototype.addFilter=function(t,n){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"addFilter",action:function(){r.addFilter(t,n)}}),r;for(var o=r._getSoundIds(n),i=0;i<o.length;i++){var c=r._soundById(o[i]);c&&c._node&&(c._filterNode||e(c),c._filterNode.frequency.value=t.frequency||c._frequency,c._filterNode.Q.value=t.Q||c._q,c._filterNode.type=t.filterType||c._filterType,r._emit("addFilter",c._id))}return r},Sound.prototype.init=function(t){return function(){var e=this._parent;this._q=e._q,this._filterType=e._filterType,this._frequency=e._frequency,t.call(this)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this._parent;return this._q=e._q,this._filterType=e._filterType,this._frequency=e._frequency,t.call(this)}}(Sound.prototype.reset);var e=function(t){t._filterNode=Howler.ctx.createBiquadFilter(),t._filterNode.gain.value=1,t._filterNode.frequency.value=t._frequency||1e3,t._filterNode.type=t._filterType||"lowpass",t._filterNode.Q.value=t._q||1,t._fxInsertIn.disconnect(),t._fxInsertIn.connect(t._filterNode),t._filterNode.connect(t._fxInsertOut),t._paused||t._parent.pause(t._id,!0).play(t._id)}}()}).call(this,n(48))},function(t,e,n){"use strict";var r={name:"ClientOnly",functional:!0,props:{placeholder:String,placeholderTag:{type:String,default:"div"}},render:function(t,e){var n=e.parent,r=e.slots,o=e.props,c=r(),l=c.default;void 0===l&&(l=[]);var h=c.placeholder;return n._isMounted?l:(n.$once("hook:mounted",(function(){n.$forceUpdate()})),o.placeholderTag&&(o.placeholder||h)?t(o.placeholderTag,{class:["client-only-placeholder"]},o.placeholder||h):l.length>0?l.map((function(){return t(!1)})):t(!1))}};t.exports=r},function(t,e,n){n(19),n(27);var r=n(315);function o(){return(o=r(regeneratorRuntime.mark((function t(){var e,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(!1 in navigator)){t.next=2;break}throw new Error("serviceWorker is not supported in current browser!");case 2:return t.next=4,n.e(13).then(n.bind(null,381));case 4:return e=t.sent,r=e.Workbox,o=new r("/sw.js",{scope:"/"}),t.next=9,o.register();case 9:return t.abrupt("return",o);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}window.$workbox=function(){return o.apply(this,arguments)}().catch((function(t){}))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";n.r(e);n(47),n(72);var r=n(77),o=n(3),c=n(1),l=n(6),h=n(2),d={watch:{nickname:function(t){this.checkNickname()}},mounted:function(){this.init()},methods:{init:function(){var t=this;this.scope=Object(c.a)(this),this.cp=o.b,this.checkGame(),h.a.nextTick((function(){t.focusInput()}))},checkGame:function(){var p=o.d.pattern;(p&&p.level1||(p=o.b.session)&&p.level1)&&(this.gameComplete=p&&p.level1&&p.level1.length>0&&p.level2&&p.level2.length>0&&p.level3&&p.level3.length>0)},focusInput:function(){this.$refs.nickname&&this.$refs.nickname.focus()},checkNickname:function(){if(this.formError=this.errorChar=!1,!this.validNickname(this.nickname)){this.formError=!0;for(var a=this.nickname.split(""),t=null,i=0;i<a.length;i++)if(t=a[i],!this.validNickname(t)){this.errorChar=t;break}}},validNickname:function(t){return/^([a-zA-Z0-9\u00C0-\u00FF\u00C0-\u024F\.\-\s]*)$/g.test(t)},generate:function(){var t=this.validNickname(this.nickname);0==this.nickname.length&&this.nickname.length<9||!t?this.checkNickname():(o.b.nickname=this.nickname,this.loading=!0,this.$ga.event("Interaction","generate-ai-init"),this.callApi())},rollOver:function(b){b&&this.$store.commit("sound/playSound","hover_"+Math.round(.5+3.5*Math.random())),c.b.trigger({name:"contactOver"},{over:b})},callApi:function(){var t=this;Object(r.a)().then((function(data){data?(o.b.labID=data.data._id,Object(r.b)().then((function(e){e?(o.b.uid=e.data._id,t.userCreated()):t.handleApiError()}))):t.handleApiError()}))},handleApiError:function(){o.b.nickname=null,this.loading=!1,this.$ga.event("Interaction","generate-ai-error")},userCreated:function(){this.generated=!0,this.$ga.event("Interaction","generate-ai-success"),h.a.nextTick((function(){Object(l.a)({easing:"easeOutBack",targets:".share-items",scale:[0,1],translateZ:0,duration:500,delay:l.a.stagger(50)}),Object(l.a)({easing:"easeOutBack",targets:".mail-sub",translateY:[80,0],translateZ:0,opacity:[0,1],duration:500,delay:200})}))}},data:function(){return{gameComplete:!1,nickname:"",loading:!1,generated:!1,cp:null,errorChar:!1,formError:!1}}},f=(n(300),n(5)),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"challenge"},[n("div",{staticClass:"challenge-top"},[n("h2",[n("span",[t._v(t._s(t.$t("challenge.title")))])]),t._v(" "),n("p",[n("span",{domProps:{innerHTML:t._s(t.$t("challenge.desc"))}})])]),t._v(" "),t.gameComplete?t._e():n("div",{staticClass:"complete-game"},[t._m(0),t._v(" "),n("p",{domProps:{innerHTML:t._s(t.$t("challenge.uncomplete"))}})]),t._v(" "),t.gameComplete&&t.cp&&null==t.cp.uid?n("div",{staticClass:"create-player"},[n("form",{on:{submit:function(e){return e.preventDefault(),t.generate(e)}}},[n("label",{attrs:{for:"nickname"}},[t._v(t._s(t.$t("challenge.nickname")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.nickname,expression:"nickname"}],ref:"nickname",staticClass:"nknm",attrs:{type:"text",id:"nickname",disabled:t.loading,maxlength:"8"},domProps:{value:t.nickname},on:{mousedown:function(e){return t.focusInput()},touchstart:function(e){return e.preventDefault(),t.focusInput()},input:function(e){e.target.composing||(t.nickname=e.target.value)}}}),t._v(" "),t.errorChar?n("div",{staticClass:"ef-container"},[n("i18n",{staticClass:"error-field",attrs:{path:"challenge.nicknameError",tag:"span"},scopedSlots:t._u([{key:"char",fn:function(){return[t._v(t._s(t.errorChar))]},proxy:!0}],null,!1,2782722152)})],1):t._e(),t._v(" "),n("button",{staticClass:"gen-btn",class:{disable:""==t.nickname||t.formError,loading:t.loading},on:{mouseenter:function(e){return t.rollOver(!0)},mouseleave:function(e){return t.rollOver(!1)},mousedown:function(e){return t.generate()},touchstart:function(e){return e.preventDefault(),t.generate()}}},[n("span",[t._v(t._s(t.$t("challenge.generate")))]),t.loading?n("div",{staticClass:"lds-ring"},[n("div"),n("div"),n("div"),n("div")]):t._e()])])]):t._e(),t._v(" "),t.cp&&null!=t.cp.uid?n("div",{staticClass:"share-game"},[n("share-tool",{attrs:{cp:t.cp}}),t._v(" "),n("mail-subscribe",{attrs:{cp:t.cp}})],1):t._e()])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icons-challenge"},[e("i",{staticClass:"icon-1"}),this._v(" "),e("i",{staticClass:"icon-2"}),this._v(" "),e("i",{staticClass:"icon-3"})])}],!1,null,null,null);e.default=component.exports;installComponents(component,{ShareTool:n(347).default,MailSubscribe:n(339).default})},function(t,e,n){"use strict";e.a=function(t,e){return e=e||{},new Promise((function(n,r){var s=new XMLHttpRequest,o=[],u=[],i={},a=function(){return{ok:2==(s.status/100|0),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(JSON.parse(s.responseText))},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:a,headers:{keys:function(){return o},entries:function(){return u},get:function(t){return i[t.toLowerCase()]},has:function(t){return t.toLowerCase()in i}}}};for(var c in s.open(e.method||"get",t,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(t,e,n){o.push(e=e.toLowerCase()),u.push([e,n]),i[e]=i[e]?i[e]+","+n:n})),n(a())},s.onerror=r,s.withCredentials="include"==e.credentials,e.headers)s.setRequestHeader(c,e.headers[c]);s.send(e.body||null)}))}},function(t,e,n){"use strict";var r=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===o}(t)}(t)};var o="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function c(t,e){return!1!==e.clone&&e.isMergeableObject(t)?m((n=t,Array.isArray(n)?[]:{}),t,e):t;var n}function l(t,source,e){return t.concat(source).map((function(element){return c(element,e)}))}function h(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(symbol){return t.propertyIsEnumerable(symbol)})):[]}(t))}function d(object,t){try{return t in object}catch(t){return!1}}function f(t,source,e){var n={};return e.isMergeableObject(t)&&h(t).forEach((function(r){n[r]=c(t[r],e)})),h(source).forEach((function(r){(function(t,e){return d(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,r)||(d(t,r)&&e.isMergeableObject(source[r])?n[r]=function(t,e){if(!e.customMerge)return m;var n=e.customMerge(t);return"function"==typeof n?n:m}(r,e)(t[r],source[r],e):n[r]=c(source[r],e))})),n}function m(t,source,e){(e=e||{}).arrayMerge=e.arrayMerge||l,e.isMergeableObject=e.isMergeableObject||r,e.cloneUnlessOtherwiseSpecified=c;var n=Array.isArray(source);return n===Array.isArray(t)?n?e.arrayMerge(t,source,e):f(t,source,e):c(source,e)}m.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,n){return m(t,n,e)}),{})};var v=m;t.exports=v},function(t,e,n){"undefined"!=typeof self&&self,t.exports=function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){t.exports=i(1)},function(t,e,i){"use strict";i.r(e),i.d(e,"ShareNetwork",(function(){return o}));var n={baidu:"http://cang.baidu.com/do/add?iu=@u&it=@t",buffer:"https://bufferapp.com/add?text=@t&url=@u",email:"mailto:?subject=@t&body=@u%0D%0A@d",evernote:"https://www.evernote.com/clip.action?url=@u&title=@t",facebook:"https://www.facebook.com/sharer/sharer.php?u=@u&title=@t&description=@d&quote=@q&hashtag=@h",flipboard:"https://share.flipboard.com/bookmarklet/popout?v=2&url=@u&title=@t",hackernews:"https://news.ycombinator.com/submitlink?u=@u&t=@t",instapaper:"http://www.instapaper.com/edit?url=@u&title=@t&description=@d",line:"http://line.me/R/msg/text/?@t%0D%0A@u%0D%0A@d",linkedin:"https://www.linkedin.com/sharing/share-offsite/?url=@u",odnoklassniki:"https://connect.ok.ru/dk?st.cmd=WidgetSharePreview&st.shareUrl=@u&st.comments=@t",pinterest:"https://pinterest.com/pin/create/button/?url=@u&media=@m&description=@t",pocket:"https://getpocket.com/save?url=@u&title=@t",quora:"https://www.quora.com/share?url=@u&title=@t",reddit:"https://www.reddit.com/submit?url=@u&title=@t",skype:"https://web.skype.com/share?url=@t%0D%0A@u%0D%0A@d",sms:"sms:?body=@t%0D%0A@u%0D%0A@d",stumbleupon:"https://www.stumbleupon.com/submit?url=@u&title=@t",telegram:"https://t.me/share/url?url=@u&text=@t%0D%0A@d",tumblr:"https://www.tumblr.com/share/link?url=@u&name=@t&description=@d",twitter:"https://twitter.com/intent/tweet?text=@t&url=@u&hashtags=@h@tu",viber:"viber://forward?text=@t%0D%0A@u%0D%0A@d",vk:"https://vk.com/share.php?url=@u&title=@t&description=@d&image=@m&noparse=true",weibo:"http://service.weibo.com/share/share.php?url=@u&title=@t&pic=@m",whatsapp:"https://api.whatsapp.com/send?text=@t%0D%0A@u%0D%0A@d",wordpress:"https://wordpress.com/press-this.php?u=@u&t=@t&s=@d&i=@m",xing:"https://www.xing.com/app/user?op=share&url=@u&title=@t"},r="undefined"!=typeof window?window:null,o={name:"ShareNetwork",props:{network:{type:String,required:!0},url:{type:String,required:!0},title:{type:String,required:!0},description:{type:String,default:""},quote:{type:String,default:""},hashtags:{type:String,default:""},twitterUser:{type:String,default:""},media:{type:String,default:""},tag:{type:String,default:"a"}},data:function(){return{popup:{width:626,height:436,top:0,left:0,window:void 0,interval:null}}},computed:{networks:function(){return this.$SocialSharing?this.$SocialSharing.options.networks:n},key:function(){return this.network.toLowerCase()},rawLink:function(){var t=navigator.userAgent.toLowerCase();return"sms"===this.key&&(t.indexOf("iphone")>-1||t.indexOf("ipad")>-1)?this.networks[this.key].replace(":?",":&"):this.networks[this.key]},shareLink:function(){var t=this.rawLink;return"twitter"===this.key&&(this.hashtags.length||(t=t.replace("&hashtags=@h","")),this.twitterUser.length||(t=t.replace("@tu",""))),t.replace(/@tu/g,"&via="+encodeURIComponent(this.twitterUser)).replace(/@u/g,encodeURIComponent(this.url)).replace(/@t/g,encodeURIComponent(this.title)).replace(/@d/g,encodeURIComponent(this.description)).replace(/@q/g,encodeURIComponent(this.quote)).replace(/@h/g,this.encodedHashtags).replace(/@m/g,encodeURIComponent(this.media))},encodedHashtags:function(){return"facebook"===this.key&&this.hashtags.length?"%23"+this.hashtags.split(",")[0]:this.hashtags}},render:function(t){var e=this;if(!this.networks.hasOwnProperty(this.key))throw new Error("Network "+this.key+" does not exist");return t(this.tag,{class:"share-network-"+this.key,on:{click:function(){return e["http"===e.rawLink.substring(0,4)?"share":"touch"]()}}},this.$slots.default)},methods:{resizePopup:function(){var t=r.innerWidth||document.documentElement.clientWidth||r.screenX,e=r.innerHeight||document.documentElement.clientHeight||r.screenY,i=t/r.screen.availWidth;this.popup.left=(t-this.popup.width)/2/i+(void 0!==r.screenLeft?r.screenLeft:r.screenX),this.popup.top=(e-this.popup.height)/2/i+(void 0!==r.screenTop?r.screenTop:r.screenY)},share:function(){var t=this;this.resizePopup(),this.popup.window&&this.popup.interval&&(clearInterval(this.popup.interval),this.popup.window.close(),this.emit("change")),this.popup.window=r.open(this.shareLink,"sharer",",height="+this.popup.height+",width="+this.popup.width+",left="+this.popup.left+",top="+this.popup.top+",screenX="+this.popup.left+",screenY="+this.popup.top),this.popup.window.focus(),this.popup.interval=setInterval((function(){t.popup.window&&!t.popup.window.closed||(clearInterval(t.popup.interval),t.popup.window=null,t.emit("close"))}),500),this.emit("open")},touch:function(){window.open(this.shareLink,"_blank"),this.emit("open")},emit:function(t){this.$root.$emit("share_network_"+t,this.key,this.url),this.$emit(t,this.key,this.url)}}};e.default={install:function(t,e){t.component(o.name,o),t.prototype.$SocialSharing={options:{networks:e&&e.hasOwnProperty("networks")?Object.assign(n,e.networks):n}}}}}])},function(t,e,n){"undefined"!=typeof self&&self,t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.r(e);var a=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(n,!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},{$vue:null,id:null,router:null,fields:{},customIdFields:{},ignoreRoutes:[],linkers:[],commands:{},disabled:!1,customResourceURL:null,set:[],require:[],ecommerce:{enabled:!1,options:null,enhanced:!1},autoTracking:{screenview:!1,shouldRouterUpdate:null,skipSamePath:!1,exception:!1,exceptionLogs:!0,page:!0,transformQueryString:!0,pageviewOnLoad:!0,pageviewTemplate:null,untracked:!0,prependBase:!0},debug:{enabled:!1,trace:!1,sendHitTask:!0},batch:{enabled:!1,delay:500,amount:2},checkDuplicatedScript:!1,disableScriptLoader:!1,beforeFirstHit:s,ready:s,untracked:[]});function u(t){!function t(e,n){return Object.keys(n).forEach((function(r){var o=e[r]&&Object.prototype.toString.call(e[r]);"[object Object]"!==o&&"[object Array]"!==o?e[r]=n[r]:t(e[r],n[r])})),e}(a,t)}function o(){return a.id?[].concat(a.id):[]}var c=a;function s(){}var p=function(t){console.warn("[vue-analytics] ".concat(t))};function l(t,e){return new Promise((function(n,r){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("script");if(i.async=!0,i.src=t,i.charset="utf-8",e){var c=document.createElement("link");c.href=e,c.rel="preconnect",o.appendChild(c)}o.appendChild(i),i.onload=n,i.onerror=r}))}function h(t){return t.name||t.replace(/-/gi,"")}function b(t,e){if(o().length>1){var n=h(e);return"".concat(n,".").concat(t)}return t}var d,f=function(t){if(t.then)return t;if("function"==typeof t){var e=t();return e.then?e:Promise.resolve(e)}return Promise.resolve(t)};function g(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var m=[];function v(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];"undefined"!=typeof window&&o().forEach((function(e){var r,o={m:b(t,e),a:n};window.ga?c.batch.enabled?(m.push(o),d||(d=setInterval((function(){m.length?m.splice(0,c.batch.amount).forEach((function(t){var e;(e=window).ga.apply(e,[t.m].concat(g(t.a)))})):(clearInterval(d),d=null)}),c.batch.delay))):(r=window).ga.apply(r,[b(t,e)].concat(n)):c.untracked.push(o)}))}function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];"object"!==y(e[0])||e[0].constructor!==Object?v("set",e[0],e[1]):v("set",e[0])}function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var M=function(){2!=arguments.length?v("require",arguments.length<=0?void 0:arguments[0]):v("require",arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])};function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0];if(1===e.length&&"string"==typeof r)return v("send","screenview",{screenName:r});v.apply(void 0,["send","screenview"].concat(e))}function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r;e.length&&!e[0]||(e.length&&e[0].currentRoute&&(r=e[0].currentRoute),e.length&&function(t){return t.query&&t.params}(e[0])&&(r=e[0]),r?A(r):(x("page","object"===E(e[0])?e[0].page:e[0]),v.apply(void 0,["send","pageview"].concat(e))))}function A(t){if(![(e=t).name,e.path].filter(Boolean).find((function(t){return-1!==c.ignoreRoutes.indexOf(t)}))){var e,n=c.autoTracking,r=t.meta.analytics,o=(void 0===r?{}:r).pageviewTemplate||n.pageviewTemplate;if(n.screenview&&!t.name)throw new Error("[vue-analytics] Route name is mandatory when using screenview.");if(n.screenview)T(t.name);else if(o)q(o(t));else{var i=c.router,l=c.autoTracking,a=l.transformQueryString,u=l.prependBase,h=function(t){var e=Object.keys(t).reduce((function(e,n,r,o){var i=r===o.length-1,c=t[n];return null==c?e:e+="".concat(n,"=").concat(c).concat(i?"":"&")}),"");return""!==e?"?".concat(e):""}(t.query),s=i&&i.options.base,p=u&&s,d=t.path+(a?h:"");q(d=p?function(t,e){var n=e.split("/"),r=t.split("/");return""===n[0]&&"/"===t[t.length-1]&&n.shift(),r.join("/")+n.join("/")}(s,d):d)}}}var L=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];"undefined"!=typeof window&&o().forEach((function(e){window["ga-disable-".concat(e)]=t}))},C=function(){if("undefined"!=typeof document&&"undefined"!=typeof window){if(c.id){var t,e,n=[f(c.id),f(c.disabled)];if(t=c.checkDuplicatedScript,e=c.disableScriptLoader,[Boolean(window&&window.ga),t&&!(Array.prototype.slice.call(document.getElementsByTagName("script")).filter((function(t){return-1!==t.src.indexOf("analytics")||-1!==t.src.indexOf("gtag")})).length>0),!e].some(Boolean)){var r="https://www.google-analytics.com",d=c.debug.enabled?"analytics_debug":"analytics",i=c.customResourceURL?l(c.customResourceURL):l("".concat(r,"/").concat(d,".js"),r);n.push(i.catch((function(){p("An error occured! Please check your connection or disable your AD blocker")})))}return Promise.all(n).then((function(t){var e,n,r;u({id:t[0],disabled:t[1]}),L(c.disabled),function(){if(window.ga||!c.debug.enabled){if(window.ga){var t=o();c.debug.enabled&&(window.ga_debug={trace:c.debug.trace}),t.forEach((function(e){var n=h(e),r=c.customIdFields[e]||{},o=t.length>1?function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(n,!0).forEach((function(e){w(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},c.fields,{},r,{name:n}):c.fields;window.ga("create",e.id||e,"auto",o)})),c.beforeFirstHit();var e=c.ecommerce;if(e.enabled){var n=e.enhanced?"ec":"ecommerce";e.options?v("require",n,e.options):v("require",n)}c.linkers.length>0&&(v("require","linker"),v("linker:autoLink",c.linkers)),c.debug.sendHitTask||x("sendHitTask",null)}}else p("Google Analytics has probably been blocked.")}(),function(){var t;c.set.forEach((function(t){var e=t.field,n=t.value;if(void 0===e||void 0===n)throw new Error('[vue-analytics] Wrong configuration in the plugin options.\nThe "set" array requires each item to have a "field" and a "value" property.');x(e,n)})),t=["ec","ecommerce"],c.require.forEach((function(e){if(-1!==t.indexOf(e)||-1!==t.indexOf(e.name))throw new Error("[vue-analytics] The ecommerce features are built-in in the plugin. \nFollow the ecommerce instructions available in the documentation.");if("string"!=typeof e&&"object"!==S(e))throw new Error('[vue-analytics] Wrong configuration in the plugin options. \nThe "require" array requires each item to be a string or to have a "name" and an "options" property.');var n=e.name||e;e.options?M(n,e.options):M(n)}))}(),c.untracked.forEach((function(t){v.apply(void 0,[t.m].concat(function(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(t.a)))})),e=c.router,n=c.autoTracking,r=c.$vue,n.page&&e&&e.onReady((function(){n.pageviewOnLoad&&e.history.ready&&A(e.currentRoute),e.afterEach((function(t,o){var i=n.skipSamePath,c=n.shouldRouterUpdate;i&&t.path===o.path||("function"!=typeof c||c(t,o))&&r.nextTick().then((function(){A(e.currentRoute)}))}))})),c.ready()})).catch((function(t){c.debug.enabled&&p(t.message)}))}p('Missing the "id" parameter. Add at least one tracking domain ID')}},R=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];v("send","exception",{exDescription:t,exFatal:e})},P=function(t){if(c.autoTracking.exception){window.addEventListener("error",(function(t){R(t.message)}));var e=t.config.errorHandler;t.config.errorHandler=function(t,n,r){R(t.message),c.autoTracking.exceptionLogs&&console.error(t),"function"==typeof e&&e.call(void 0,t,n,r)}}},O=R;function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function k(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var N=function(t){return"".concat(c.ecommerce.enhanced?"ec":"ecommerce",":").concat(t)},D=["addItem","addTransaction","addProduct","addImpression","setAction","addPromo","send"].reduce((function(t,e){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(n,!0).forEach((function(e){k(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t,k({},e,(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];v.apply(void 0,[N(e)].concat(n))})))}),{}),z={event:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];v.apply(void 0,["send","event"].concat(e))},exception:O,page:q,query:v,require:M,set:x,social:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];v.apply(void 0,["send","social"].concat(e))},time:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];v.apply(void 0,["send","timing"].concat(e))},screenview:T,ecommerce:D,disable:function(){return L(!0)},enable:function(){return L(!1)},commands:c.commands},B={inserted:function(t,e,n){var r=Object.keys(e.modifiers);0===r.length&&r.push("click"),r.forEach((function(r){t.addEventListener(r,(function(){var t="string"==typeof e.value?c.commands[e.value]:e.value;if(!t)throw new Error("[vue-analytics] The value passed to v-ga is not defined in the commands list.");t.apply(n.context)}))}))}};function F(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function U(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G(t){u(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(n,!0).forEach((function(e){U(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{$vue:t})),t.directive("ga",B),t.prototype.$ga=t.$ga=z,P(t),C()}n.d(e,"default",(function(){return G})),n.d(e,"analyticsMiddleware",(function(){return H})),n.d(e,"onAnalyticsReady",(function(){return V})),n.d(e,"event",(function(){return W})),n.d(e,"ecommerce",(function(){return Z})),n.d(e,"set",(function(){return $})),n.d(e,"page",(function(){return Y})),n.d(e,"query",(function(){return X})),n.d(e,"screenview",(function(){return J})),n.d(e,"time",(function(){return Q})),n.d(e,"require",(function(){return K})),n.d(e,"exception",(function(){return tt})),n.d(e,"social",(function(){return et}));var H=function(t){t.subscribe((function(t){var e=t.payload;if(e&&e.meta&&e.meta.analytics){var n=e.meta.analytics;if(!Array.isArray(n))throw new Error('The "analytics" property needs to be an array');n.forEach((function(t){var e,n,r=t.shift(),o=t;if(r.includes(":")){var i=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var c,a=t[Symbol.iterator]();!(r=(c=a.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(r.split(":"),2);r=i[0],e=i[1]}if(!(r in z))throw new Error('[vue-analytics:vuex] The type "'.concat(r,"\" doesn't exist."));if(e&&!(e in z[r]))throw new Error('[vue-analytics:vuex] The type "'.concat(r,'" has not method "').concat(e,'".'));if("ecommerce"===r&&!e)throw new Error('[vue-analytics:vuex] The type "'.concat(r,'" needs to call a method. Check documentation.'));e?(n=z[r])[e].apply(n,F(o)):z[r].apply(z,F(o))}))}}))},V=function(){return new Promise((function(t,e){var n=setInterval((function(){"undefined"!=typeof window&&window.ga&&(t(),clearInterval(n))}),10)}))},W=z.event,Z=z.ecommerce,$=z.set,Y=z.page,X=z.query,J=z.screenview,Q=z.time,K=z.require,tt=z.exception,et=z.social}])},function(t,e,n){"use strict";n(19),n(27);var r=n(8),o=n(2),c=n(4),l=window.__NUXT__;function h(){if(!this._hydrated)return this.$fetch()}function d(){if((t=this).$vnode&&t.$vnode.elm&&t.$vnode.elm.dataset&&t.$vnode.elm.dataset.fetchKey){var t;this._hydrated=!0,this._fetchKey=+this.$vnode.elm.dataset.fetchKey;var data=l.fetch[this._fetchKey];if(data&&data._error)this.$fetchState.error=data._error;else for(var e in data)o.a.set(this.$data,e,data[e])}}function f(){var t=this;return this._fetchPromise||(this._fetchPromise=m.call(this).then((function(){delete t._fetchPromise}))),this._fetchPromise}function m(){return v.apply(this,arguments)}function v(){return(v=Object(r.a)(regeneratorRuntime.mark((function t(){var e,n,r,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.$nuxt.nbFetching++,this.$fetchState.pending=!0,this.$fetchState.error=null,this._hydrated=!1,e=null,n=Date.now(),t.prev=6,t.next=9,this.$options.fetch.call(this);case 9:t.next=15;break;case 11:t.prev=11,t.t0=t.catch(6),e=Object(c.p)(t.t0);case 15:if(!((r=this._fetchDelay-(Date.now()-n))>0)){t.next=19;break}return t.next=19,new Promise((function(t){return setTimeout(t,r)}));case 19:this.$fetchState.error=e,this.$fetchState.pending=!1,this.$fetchState.timestamp=Date.now(),this.$nextTick((function(){return o.$nuxt.nbFetching--}));case 23:case"end":return t.stop()}}),t,this,[[6,11]])})))).apply(this,arguments)}e.a={beforeCreate:function(){Object(c.l)(this)&&(this._fetchDelay="number"==typeof this.$options.fetchDelay?this.$options.fetchDelay:200,o.a.util.defineReactive(this,"$fetchState",{pending:!1,error:null,timestamp:Date.now()}),this.$fetch=f.bind(this),Object(c.a)(this,"created",d),Object(c.a)(this,"beforeMount",h))}}},,,,,,,,,,,function(t,e,n){n(228),t.exports=n(229)},function(t,e,n){(function(t){t.installComponents=function(component,t){const e="function"==typeof component.exports?component.exports.extendOptions:component.options;for(var i in"function"==typeof component.exports&&(e.components=component.exports.options.components),e.components=e.components||{},t)e.components[i]=e.components[i]||t[i];e.functional&&function(component,t){if(component.exports._functionalComponents)return;component.exports._functionalComponents=!0;const e=component.exports.render;component.exports.render=function(n,r){return e(n,Object.assign({},r,{_c:function(e,a,b){return r._c(t[e]||e,a,b)}}))}}(component,e.components)}}).call(this,n(48))},function(t,e,n){"use strict";n.r(e),function(t){n(41),n(60),n(61),n(75),n(56),n(38),n(62),n(58),n(59),n(53),n(181),n(24),n(70),n(19),n(47),n(45),n(71),n(40),n(185),n(39),n(46);var e=n(35),r=(n(27),n(8)),o=(n(110),n(234),n(238),n(239),n(2)),c=n(212),l=n(94),h=n(4),d=n(52),f=n(216),m=n(135);function v(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}o.a.__nuxt__fetch__mixin__||(o.a.mixin(f.a),o.a.__nuxt__fetch__mixin__=!0),o.a.component(m.a.name,m.a),o.a.component("NLink",m.a),t.fetch||(t.fetch=c.a);var x,_,w=[],M=window.__NUXT__||{};Object.assign(o.a.config,{silent:!0,performance:!1});var S=o.a.config.errorHandler||console.error;function T(t,e,n){for(var r=function(component){var t=function(component,t){if(!component||!component.options||!component.options[t])return{};var option=component.options[t];if("function"==typeof option){for(var e=arguments.length,n=new Array(e>2?e-2:0),r=2;r<e;r++)n[r-2]=arguments[r];return option.apply(void 0,n)}return option}(component,"transition",e,n)||{};return"string"==typeof t?{name:t}:t},o=n?Object(h.g)(n):[],c=Math.max(t.length,o.length),l=[],d=function(i){var e=Object.assign({},r(t[i])),n=Object.assign({},r(o[i]));Object.keys(e).filter((function(t){return void 0!==e[t]&&!t.toLowerCase().includes("leave")})).forEach((function(t){n[t]=e[t]})),l.push(n)},i=0;i<c;i++)d(i);return l}function E(t,e,n){return A.apply(this,arguments)}function A(){return(A=Object(r.a)(regeneratorRuntime.mark((function t(e,n,r){var o,c,l,d,f=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._routeChanged=Boolean(x.nuxt.err)||n.name!==e.name,this._paramChanged=!this._routeChanged&&n.path!==e.path,this._queryChanged=!this._paramChanged&&n.fullPath!==e.fullPath,this._diffQuery=this._queryChanged?Object(h.i)(e.query,n.query):[],t.prev=4,!this._queryChanged){t.next=10;break}return t.next=8,Object(h.r)(e,(function(t,e){return{Component:t,instance:e}}));case 8:o=t.sent,o.some((function(t){var r=t.Component,o=t.instance,c=r.options.watchQuery;return!0===c||(Array.isArray(c)?c.some((function(t){return f._diffQuery[t]})):"function"==typeof c&&c.apply(o,[e.query,n.query]))}));case 10:r(),t.next=24;break;case 13:if(t.prev=13,t.t0=t.catch(4),c=t.t0||{},l=c.statusCode||c.status||c.response&&c.response.status||500,d=c.message||"",!/^Loading( CSS)? chunk (\d)+ failed\./.test(d)){t.next=21;break}return window.location.reload(!0),t.abrupt("return");case 21:this.error({statusCode:l,message:d}),this.$nuxt.$emit("routeChanged",e,n,c),r();case 24:case"end":return t.stop()}}),t,this,[[4,13]])})))).apply(this,arguments)}function L(t,e){return M.serverRendered&&e&&Object(h.b)(t,e),t._Ctor=t,t}function C(t){var path=Object(h.f)(t.options.base,t.options.mode);return Object(h.d)(t.match(path),function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(e,n,r,o,c){var l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("function"!=typeof e||e.options){t.next=4;break}return t.next=3,e();case 3:e=t.sent;case 4:return l=L(Object(h.s)(e),M.data?M.data[c]:null),r.components[o]=l,t.abrupt("return",l);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r,o,c){return t.apply(this,arguments)}}())}function R(t,e,n){var r=this,o=["nuxti18n"],c=!1;if(void 0!==n&&(o=[],(n=Object(h.s)(n)).options.middleware&&(o=o.concat(n.options.middleware)),t.forEach((function(t){t.options.middleware&&(o=o.concat(t.options.middleware))}))),o=o.map((function(t){return"function"==typeof t?t:("function"!=typeof l.a[t]&&(c=!0,r.error({statusCode:500,message:"Unknown middleware "+t})),l.a[t])})),!c)return Object(h.o)(o,e)}function P(t,e,n){return O.apply(this,arguments)}function O(){return(O=Object(r.a)(regeneratorRuntime.mark((function t(e,n,o){var c,l,f,m,y,_,M,S,E,A,L,C,P,O,I,k=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==this._routeChanged||!1!==this._paramChanged||!1!==this._queryChanged){t.next=2;break}return t.abrupt("return",o());case 2:return!1,e===n?(w=[],!0):(c=[],w=Object(h.g)(n,c).map((function(t,i){return Object(h.c)(n.matched[c[i]].path)(n.params)}))),l=!1,f=function(path){l||(l=!0,o(path))},t.next=8,Object(h.t)(x,{route:e,from:n,next:f.bind(this)});case 8:if(this._dateLastError=x.nuxt.dateErr,this._hadError=Boolean(x.nuxt.err),m=[],(y=Object(h.g)(e,m)).length){t.next=27;break}return t.next=15,R.call(this,y,x.context);case 15:if(!l){t.next=17;break}return t.abrupt("return");case 17:return _=(d.a.options||d.a).layout,t.next=20,this.loadLayout("function"==typeof _?_.call(d.a,x.context):_);case 20:return M=t.sent,t.next=23,R.call(this,y,x.context,M);case 23:if(!l){t.next=25;break}return t.abrupt("return");case 25:return x.context.error({statusCode:404,message:"This page could not be found"}),t.abrupt("return",o());case 27:return y.forEach((function(t){t._Ctor&&t._Ctor.options&&(t.options.asyncData=t._Ctor.options.asyncData,t.options.fetch=t._Ctor.options.fetch)})),this.setTransitions(T(y,e,n)),t.prev=29,t.next=32,R.call(this,y,x.context);case 32:if(!l){t.next=34;break}return t.abrupt("return");case 34:if(!x.context._errored){t.next=36;break}return t.abrupt("return",o());case 36:return"function"==typeof(S=y[0].options.layout)&&(S=S(x.context)),t.next=40,this.loadLayout(S);case 40:return S=t.sent,t.next=43,R.call(this,y,x.context,S);case 43:if(!l){t.next=45;break}return t.abrupt("return");case 45:if(!x.context._errored){t.next=47;break}return t.abrupt("return",o());case 47:E=!0,t.prev=48,A=v(y),t.prev=50,A.s();case 52:if((L=A.n()).done){t.next=63;break}if("function"==typeof(C=L.value).options.validate){t.next=56;break}return t.abrupt("continue",61);case 56:return t.next=58,C.options.validate(x.context);case 58:if(E=t.sent){t.next=61;break}return t.abrupt("break",63);case 61:t.next=52;break;case 63:t.next=68;break;case 65:t.prev=65,t.t0=t.catch(50),A.e(t.t0);case 68:return t.prev=68,A.f(),t.finish(68);case 71:t.next=77;break;case 73:return t.prev=73,t.t1=t.catch(48),this.error({statusCode:t.t1.statusCode||"500",message:t.t1.message}),t.abrupt("return",o());case 77:if(E){t.next=80;break}return this.error({statusCode:404,message:"This page could not be found"}),t.abrupt("return",o());case 80:return t.next=82,Promise.all(y.map(function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(r,i){var o,c,l,d,f,v,y,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r._path=Object(h.c)(e.matched[m[i]].path)(e.params),r._dataRefresh=!1,o=r._path!==w[i],k._routeChanged&&o?r._dataRefresh=!0:k._paramChanged&&o?(c=r.options.watchParam,r._dataRefresh=!1!==c):k._queryChanged&&(!0===(l=r.options.watchQuery)?r._dataRefresh=!0:Array.isArray(l)?r._dataRefresh=l.some((function(t){return k._diffQuery[t]})):"function"==typeof l&&(P||(P=Object(h.h)(e)),r._dataRefresh=l.apply(P[i],[e.query,n.query]))),k._hadError||!k._isMounted||r._dataRefresh){t.next=6;break}return t.abrupt("return");case 6:return d=[],f=r.options.asyncData&&"function"==typeof r.options.asyncData,v=Boolean(r.options.fetch)&&r.options.fetch.length,f&&((y=Object(h.q)(r.options.asyncData,x.context)).then((function(t){Object(h.b)(r,t)})),d.push(y)),k.$loading.manual=!1===r.options.loading,v&&((p=r.options.fetch(x.context))&&(p instanceof Promise||"function"==typeof p.then)||(p=Promise.resolve(p)),p.then((function(t){})),d.push(p)),t.abrupt("return",Promise.all(d));case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 82:l||o(),t.next=99;break;case 85:if(t.prev=85,t.t2=t.catch(29),"ERR_REDIRECT"!==(O=t.t2||{}).message){t.next=90;break}return t.abrupt("return",this.$nuxt.$emit("routeChanged",e,n,O));case 90:return w=[],Object(h.k)(O),"function"==typeof(I=(d.a.options||d.a).layout)&&(I=I(x.context)),t.next=96,this.loadLayout(I);case 96:this.error(O),this.$nuxt.$emit("routeChanged",e,n,O),o();case 99:case"end":return t.stop()}}),t,this,[[29,85],[48,73],[50,65,68,71]])})))).apply(this,arguments)}function I(t,n){Object(h.d)(t,(function(t,n,r,c){return"object"!==Object(e.a)(t)||t.options||((t=o.a.extend(t))._Ctor=t,r.components[c]=t),t}))}function k(t){var e=Boolean(this.$options.nuxt.err);this._hadError&&this._dateLastError===this.$options.nuxt.dateErr&&(e=!1);var n=e?(d.a.options||d.a).layout:t.matched[0].components.default.options.layout;"function"==typeof n&&(n=n(x.context)),this.setLayout(n)}function N(t){t._hadError&&t._dateLastError===t.$options.nuxt.dateErr&&t.error()}function D(t,e){var n=this;if(!1!==this._routeChanged||!1!==this._paramChanged||!1!==this._queryChanged){var r=Object(h.h)(t),c=Object(h.g)(t);o.a.nextTick((function(){r.forEach((function(t,i){if(t&&!t._isDestroyed&&t.constructor._dataRefresh&&c[i]===t.constructor&&!0!==t.$vnode.data.keepAlive&&"function"==typeof t.constructor.options.data){var e=t.constructor.options.data.call(t);for(var n in e)o.a.set(t.$data,n,e[n]);window.$nuxt.$nextTick((function(){window.$nuxt.$emit("triggerScroll")}))}})),N(n)}))}}function z(t){window.onNuxtReadyCbs.forEach((function(e){"function"==typeof e&&e(t)})),"function"==typeof window._onNuxtLoaded&&window._onNuxtLoaded(t),_.afterEach((function(e,n){o.a.nextTick((function(){return t.$nuxt.$emit("routeChanged",e,n)}))}))}function B(){return(B=Object(r.a)(regeneratorRuntime.mark((function t(e){var n,r,c,l,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x=e.app,_=e.router,e.store,n=new o.a(x),r=M.layout||"default",t.next=7,n.loadLayout(r);case 7:return n.setLayout(r),c=function(){n.$mount("#__nuxt"),_.afterEach(I),_.afterEach(k.bind(n)),_.afterEach(D.bind(n)),o.a.nextTick((function(){z(n)}))},t.next=11,Promise.all(C(_));case 11:if(l=t.sent,n.setTransitions=n.$options.nuxt.setTransitions.bind(n),l.length&&(n.setTransitions(T(l,_.currentRoute)),w=_.currentRoute.matched.map((function(t){return Object(h.c)(t.path)(_.currentRoute.params)}))),n.$loading={},M.error&&n.error(M.error),_.beforeEach(E.bind(n)),_.beforeEach(P.bind(n)),!M.serverRendered||!Object(h.n)(M.routePath,n.context.route.path)){t.next=20;break}return t.abrupt("return",c());case 20:return d=function(){I(_.currentRoute,_.currentRoute),k.call(n,_.currentRoute),N(n),c()},t.next=23,new Promise((function(t){return setTimeout(t,0)}));case 23:P.call(n,_.currentRoute,_.currentRoute,(function(path){if(path){var t=_.afterEach((function(e,n){t(),d()}));_.push(path,void 0,(function(t){t&&S(t)}))}else d()}));case 24:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(d.b)(null,M.config).then((function(t){return B.apply(this,arguments)})).catch(S)}.call(this,n(48))},,,,,,,,,,,function(t,e,n){"use strict";n.r(e),e.default=function(t){var e=t.store,n=t.redirect;if(!e.state.authUser)return n("/admin")}},,,,,,,,,function(t,e,n){"use strict";var r=n(116);n.n(r).a},function(t,e,n){(e=n(20)(!1)).push([t.i,".__nuxt-error-page{padding:1rem;background:#f7f8fb;color:#47494e;text-align:center;display:flex;justify-content:center;align-items:center;flex-direction:column;font-family:sans-serif;font-weight:100!important;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-webkit-font-smoothing:antialiased;position:absolute;top:0;left:0;right:0;bottom:0}.__nuxt-error-page .error{max-width:450px}.__nuxt-error-page .title{font-size:1.5rem;margin-top:15px;color:#47494e;margin-bottom:8px}.__nuxt-error-page .description{color:#7f828b;line-height:21px;margin-bottom:10px}.__nuxt-error-page a{color:#7f828b!important;text-decoration:none}.__nuxt-error-page .logo{position:fixed;left:12px;bottom:12px}",""]),t.exports=e},function(t,e,n){"use strict";var r=n(117);n.n(r).a},function(t,e,n){(e=n(20)(!1)).push([t.i,'*,:after,:before{margin:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}*,:after,:before,html{box-sizing:border-box;-webkit-touch-callout:none}html{font-family:Ambit,"Helvetica Neue","Noto Sans JP",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,"Noto Sans CJK JP","Yu Gothic Medium","Ê∏∏„Ç¥„Ç∑„ÉÉ„ÇØ Medium","YuGothic","Ê∏∏„Ç¥„Ç∑„ÉÉ„ÇØ‰Ωì","„Éí„É©„ÇÆ„ÉéËßí„Ç¥ Pro W3","„É°„Ç§„É™„Ç™",sans-serif;word-spacing:1px;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-ms-font-feature-settings:"lnum";-o-font-feature-settings:"lnum";font-feature-settings:"lnum";background:#f0e633;color:#241817;font-size:22px}#__layout,#__layout>div,#__nuxt,.ldct,body,html{position:fixed;left:0;top:0;right:0;bottom:0;overflow:hidden;margin:0;padding:0}.container,body{overflow:hidden}.container{position:relative}canvas{width:100%;height:100%;position:fixed;top:0;left:0;z-index:-1}h1{font-weight:900}input,input:after,input:before{-webkit-user-select:all;-moz-user-select:all;-ms-user-select:all;user-select:all}p,p a,p span{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}a{-webkit-tap-highlight-color:rgba(0,0,0,0)}body,html{background:#f0e633}@font-face{font-family:Ambit;font-weight:400;src:url(/fonts/Ambit-Regular.woff2) format("woff2"),url(/fonts/Ambit-Regular.woff) format("woff")}@font-face{font-family:Ambit;font-weight:600;src:url(/fonts/Ambit-SemiBold.woff2) format("woff2"),url(/fonts/Ambit-SemiBold.woff) format("woff")}@font-face{font-family:Ambit;font-weight:700;src:url(/fonts/Ambit-Bold.woff) format("woff")}@font-face{font-family:Ambit;font-weight:900;src:url(/fonts/Ambit-Black.woff) format("woff")}:focus{outline:none}li,ul{padding:0}li,ul{list-style:none}a{display:block;text-decoration:none;color:#241817}button{border:none;margin:0;padding:0;width:auto;overflow:visible;background:transparent;color:inherit;font:inherit;line-height:normal;-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;-webkit-appearance:none}input:-webkit-autofill,input:-webkit-autofill:focus textarea:-webkit-autofill,input:-webkit-autofill:hover,select:-webkit-autofill,select:-webkit-autofill:focus,select:-webkit-autofill:hover,textarea:-webkit-autofill:hover textarea:-webkit-autofill:focus{-webkit-box-shadow:0 0 0 1000px #fff inset!important}@font-face{font-family:"icomoon";src:url(/fonts/icomoon.woff) format("woff");font-weight:400;font-style:normal;font-display:block}[class*=" icon-"],[class^=icon-]{font-family:"icomoon"!important;speak:never;font-style:normal;font-weight:400;font-feature-settings:normal;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-1:before{content:"\\e902"}.icon-2:before{content:"\\e905"}.icon-3:before{content:"\\e906"}.icon-4:before{content:"\\e907"}.icon-close:before{content:"\\e901"}.icon-replay:before{content:"\\e903"}.icon-sound:before{content:"\\e904"}.icon-line:before{content:"\\e900"}.icon-facebook:before{content:"\\ea90"}.icon-instagram:before{content:"\\ea92"}.icon-twitter:before{content:"\\ea96"}',""]),t.exports=e},,,,function(t,e,n){"use strict";var r=n(118);n.n(r).a},function(t,e,n){(e=n(20)(!1)).push([t.i,".simple-logo{transform-origin:center center;transform:scale(1) translateZ(0);transition:transform .4s cubic-bezier(.34,1.56,.64,1);transition-delay:.4s}.simple-logo.hide{transform:scale(0) translateZ(0)}.ldlg{position:absolute;text-align:center;transform-origin:center;left:50%;top:50%;width:100%;max-width:80vh;transform:translate(-50%,-62.195%) translateZ(0);display:block;padding:0 30px}.ldlg svg{width:100%;overflow:visible}.ldlg.hide{visibility:hidden}.ldlg.smallLogo{transform:none;padding:0!important;left:20px;top:15px;max-width:90px}.loading-bomb{position:fixed;left:50%;top:50%;width:14vh;transform:translate(-50%,-50%);z-index:0}.lb-content,.lbb{transform-origin:bottom center}.lb-content{display:block;position:relative;-webkit-animation:spin 6s linear infinite;animation:spin 6s linear infinite}@-webkit-keyframes spin{0%{transform:rotate(0deg)}25%{transform:rotate(-20deg)}50%{transform:rotate(0deg)}75%{transform:rotate(20deg)}to{transform:rotate(0deg)}}@keyframes spin{0%{transform:rotate(0deg)}25%{transform:rotate(-20deg)}50%{transform:rotate(0deg)}75%{transform:rotate(20deg)}to{transform:rotate(0deg)}}.pick{position:fixed;left:0;width:100%;top:50%;text-align:center;font-weight:900;font-size:40px;overflow:hidden;padding:20px 0;transform:translateY(calc(-50% - 17vw)) translateZ(0)}.pick.welcome{top:60px;transform:translate(0) translateZ(0)}.pick span{display:block}.ldbn{position:fixed;left:50%;top:50%;transform:translate(-50%,calc(-50% + 60vh)) translateZ(0);transition:transform .6s cubic-bezier(.34,1.56,.64,1);transition-delay:.8s}.ldbn.tap{transition:transform .6s cubic-bezier(.34,1.56,.64,1);transform:translate(-50%,calc(-50% + 20vw)) translateZ(0);transition-delay:0s}.ldbn.end{transition:transform .6s cubic-bezier(.36,0,.66,-.56);transition-delay:0s;transform:translate(-50%,calc(-50% + 60vh)) translateZ(0)}.vs{position:fixed;z-index:0;font-size:44vw;white-space:nowrap;opacity:0;font-weight:900;top:50%;pointer-events:none}.vs.vsl{text-align:right;left:calc(50% - 8vw);transform:translate(-100%,-50%)}.vs.vsr{text-align:left;left:calc(50% + 8vw);transform:translateY(-50%)}.characters{position:fixed;background:rgba(255,0,255,0);top:50%;pointer-events:none}.characters.chmain{width:19vw;height:27vw;left:50%;transform:translate(-50%,-50%)}.characters.chleft,.characters.chright{width:14vw;height:21vw;transform:translateY(-50%)}.characters.chleft{left:25%}.characters.chright{right:25%}.charname{position:fixed;top:50%;left:50%;text-align:center}.charname.hide{display:none}.charname.clname{transform:translate(calc(-50% - 280px),calc(-50% - 150px)) translateZ(0)}.charname.crname{transform:translate(calc(-50% + 280px),calc(-50% - 150px)) translateZ(0)}.chartxt{display:block;position:relative;font-size:18px;font-weight:700}.chartxt span{display:block;font-size:13px;font-weight:400;color:#666}@media (min-width:1600px){.ldbn{transform:translate(-50%,calc(-50% + 60vh)) translateZ(0)}.vs{font-size:700px}.ldbn.tap{transition-delay:0s;transform:translate(-50%,calc(-50% + 300px)) translateZ(0)}.ldbn.end{transition-delay:0s;transform:translate(-50%,calc(-50% + 53vh)) translateZ(0)}.pick{transform:translateY(calc(-50% - 290px)) translateZ(0)}.charname.clname{transform:translate(calc(-50% - 280px),calc(-50% - 150px)) translateZ(0)}.charname.crname{transform:translate(calc(-50% + 280px),calc(-50% - 150px)) translateZ(0)}}@media (min-width:820px) and (min-height:1100px){.pick{top:140px;transform:translate(0) translateZ(0)}.ldbn{bottom:140px;top:auto;transform:translate(-50%,220px) translateZ(0)}.ldbn.tap{transform:translate(-50%) translateZ(0)}.ldbn.end{transform:translate(-50%,120px) translateZ(0)}}@media (max-width:1280px),(min-width:769px) and (max-height:680px){.pick{top:90px;transform:translate(0) translateZ(0)}.ldbn{bottom:90px;top:auto;transform:translate(-50%,170px) translateZ(0)}.ldbn.tap{transform:translate(-50%) translateZ(0)}.ldbn.end{transform:translate(-50%,120px) translateZ(0)}}@media (min-width:769px) and (max-height:540px){.pick{top:45px}.ldbn{bottom:45px}}@media only screen and (min-device-width:1024px) and (max-device-width:1024px) and (orientation:portrait) and (-webkit-min-device-pixel-ratio:2){.pick{font-size:42px;transform:translateY(calc(-50% - 28vh)) translateZ(0)}.charname.clname{transform:translate(calc(-50% - 410px),calc(-50% - 210px)) translateZ(0)}.charname.crname{transform:translate(calc(-50% + 410px),calc(-50% - 210px)) translateZ(0)}}@media (max-width:768px){.ldlg.smallLogo{max-width:80px;top:10px;left:20px}.play-btn.wtbg{font-size:18px;padding:0 20px;min-width:165px!important}}@media (max-width:700px){.ldlg.smallLogo{top:5px;left:10px}.charname.clname{transform:translate(calc(-50% - 140px),calc(-50% - 80px)) translateZ(0)}.charname.crname{transform:translate(calc(-50% + 140px),calc(-50% - 80px)) translateZ(0)}.chartxt{font-size:16px}.chartxt span{font-size:12px}.vs{font-size:100vw}.ldbn{bottom:75px}.pick{font-size:28px}}@media (max-width:400px){.charname.clname{transform:translate(calc(-50% - 130px),calc(-50% - 80px)) translateZ(0)}.charname.crname{transform:translate(calc(-50% + 130px),calc(-50% - 80px)) translateZ(0)}}@media (max-width:370px){.ldlg.smallLogo{max-width:70px}.ldlg{padding:0 15px}.charname.clname{transform:translate(calc(-50% - 110px),calc(-50% - 70px)) translateZ(0)}.charname.crname{transform:translate(calc(-50% + 110px),calc(-50% - 70px)) translateZ(0)}}",""]),t.exports=e},,,function(t,e,n){"use strict";var r=n(119);n.n(r).a},function(t,e,n){(e=n(20)(!1)).push([t.i,".progress-ldlg{position:absolute;font-weight:900;font-size:170%;bottom:12%;right:14.4%;transform-origin:center;text-align:center;width:11%;transform:rotate(64deg) scale(0);transition:transform .2s cubic-bezier(.36,0,.66,-.56)}.progress-ldlg.show{transition:transform .3s cubic-bezier(.34,1.56,.64,1);transform:rotate(64deg) scale(1)}@media only screen and (min-device-width:1024px) and (max-device-width:1024px) and (orientation:portrait) and (-webkit-min-device-pixel-ratio:2){.progress-ldlg{font-size:198%;bottom:12.5%;right:13.4%}}@media (min-height:920px){.progress-ldlg{font-size:4vh;right:13.4%}}@media (max-width:580px){.progress-ldlg{bottom:11.8%;right:14.5%}}@media (max-width:570px){.progress-ldlg{font-size:7vw;width:10.25vw;bottom:6.25vw;right:15.8vw}}@media (max-width:420px){.progress-ldlg{right:16.46vw}}@media (max-width:380px){.progress-ldlg{bottom:6vw;right:16.8vw}}@media (max-width:370px){.progress-ldlg{font-size:9vw;bottom:5.5vw;right:14.8vw}}.eyeBombHide{opacity:0!important}#boat,#dragon{transform-origin:bottom right;transform-box:fill-box}#eyebrow,#pil{transform-origin:bottom left;transform-box:fill-box}#i,#o,#party,#z1,#z2{transform-origin:bottom center;transform-box:fill-box}#bomb-container{transform-origin:top center}#bomb,#bomb-container{transform-box:fill-box}#bomb{transform-origin:36.51685393% 50%}#flower{transform-origin:54.953271% 46.19469%;transform-box:fill-box}#kanji,#Layer_2,#natsu,#party-bg,#pil-01,#pil-02,#pil-03,#pil-04,#zizo-bg{transform-origin:center center;transform-box:fill-box}",""]),t.exports=e},function(t,e,n){"use strict";var r=n(120);n.n(r).a},function(t,e,n){(e=n(20)(!1)).push([t.i,'.pbtn-l{left:0;top:0;width:100%;height:100%;overflow:hidden;position:absolute;z-index:1}.play-btn{font-weight:700;font-size:22px;letter-spacing:.5px;text-align:center;padding:0 40px;display:inline-block;line-height:60px;margin:0 auto;transform-origin:center center;cursor:pointer;min-height:60px}.play-btn.game{font-size:24px;background:#241817;color:#fff;font-weight:900;position:relative;z-index:2;letter-spacing:1px;border-radius:30px;min-width:160px}.play-btn.wtbg{min-width:190px;background:#fff;border-radius:30px}.play-btn span{display:block;position:relative}.play-btn.disable{pointer-events:none}.winFix .play-btn span{padding-top:1px}@media (hover:hover) and (pointer:fine){.play-btn.wtbg:before{background-color:#241817}.play-btn.wtbg span{color:#241817}.play-btn:before{content:" ";display:block;position:absolute;left:-1px;top:-1px;width:calc(100% + 2px);height:calc(100% + 2px);z-index:0;border-radius:30px;background-color:#fff;transform-origin:center center;transition:transform .4s cubic-bezier(.36,0,.66,-.56);transform:scale(0) translateZ(0);pointer-events:none}.play-btn span{position:relative;z-index:1;transition:color .3s cubic-bezier(.36,0,.66,-.56)}.play-btn:hover.wtbg span{color:#fff}.play-btn:hover span{color:#241817;transition:color .3s cubic-bezier(.34,1.56,.64,1)}.play-btn:hover:before{transition:transform .4s cubic-bezier(.34,1.56,.64,1);transform:scale(1) translateZ(0)}}@media (max-width:600px){.play-btn.game{min-width:150px;font-size:20px;line-height:54px;min-height:54px}}',""]),t.exports=e},function(t,e,n){"use strict";var r=n(121);n.n(r).a},function(t,e,n){(e=n(20)(!1)).push([t.i,'.select-btn{position:fixed;width:60px;height:60px;background:#fff;border-radius:100%;transform-origin:center;cursor:pointer;transform:translate(calc(-50% - 150px),calc(-50% + 20vw)) scale(1) translateZ(0);transition:transform .4s cubic-bezier(.34,1.56,.64,1);transition-delay:.7s}.select-btn,.select-btn span{top:50%;left:50%;display:block}.select-btn span{font-weight:400;position:absolute;font-size:30px;transform:translate(-50%,-50%) translateZ(0);pointer-events:none;z-index:1}.select-btn.isRight{transform:translate(calc(-50% + 150px),calc(-50% + 20vw)) scale(1) translateZ(0)}.select-btn.isRight.hide{transform:translate(calc(-50% + 150px),calc(-50% + 20vw)) scale(0) translateZ(0)}.select-btn.hide{transition:transform .4s cubic-bezier(.36,0,.66,-.56);transition-delay:0s;transform:translate(calc(-50% - 150px),calc(-50% + 20vw)) scale(0) translateZ(0)}.select-btn.disable,.select-btn.hide{pointer-events:none}.winFix .select-btn span{padding-top:4px}@media (min-width:1600px){.select-btn{transform:translate(calc(-50% - 150px),calc(-50% + 300px)) scale(1) translateZ(0)}.select-btn.isRight{transform:translate(calc(-50% + 150px),calc(-50% + 300px)) scale(1) translateZ(0)}.select-btn.isRight.hide{transform:translate(calc(-50% + 150px),calc(-50% + 300px)) scale(0) translateZ(0)}.select-btn.hide{transform:translate(calc(-50% - 150px),calc(-50% + 300px)) scale(0) translateZ(0)}}@media (min-width:820px) and (min-height:1100px){.select-btn{bottom:140px;top:auto;transform:translate(calc(-50% - 150px)) scale(1) translateZ(0)}.select-btn.isRight{transform:translate(calc(-50% + 150px)) scale(1) translateZ(0)}.select-btn.isRight.hide{transform:translate(calc(-50% + 150px)) scale(0) translateZ(0)}.select-btn.hide{transform:translate(calc(-50% - 150px)) scale(0) translateZ(0)}}@media (max-width:1280px),(min-width:769px) and (max-height:680px){.select-btn{bottom:90px;top:auto;transform:translate(calc(-50% - 150px)) scale(1) translateZ(0)}.select-btn.isRight{transform:translate(calc(-50% + 150px)) scale(1) translateZ(0)}.select-btn.isRight.hide{transform:translate(calc(-50% + 150px)) scale(0) translateZ(0)}.select-btn.hide{transform:translate(calc(-50% - 150px)) scale(0) translateZ(0)}}@media (min-width:769px) and (max-height:540px){.select-btn{bottom:45px}}@media (max-width:768px){.select-btn{transform:translate(calc(-50% - 125px)) scale(1) translateZ(0)}.select-btn.isRight{transform:translate(calc(-50% + 125px)) scale(1) translateZ(0)}.select-btn.isRight.hide{transform:translate(calc(-50% + 125px)) scale(0) translateZ(0)}.select-btn.hide{transform:translate(calc(-50% - 125px)) scale(0) translateZ(0)}}@media (max-width:700px){.select-btn{bottom:75px}}@media (max-width:370px){.select-btn{transform:translate(calc(-50% - 120px)) scale(1) translateZ(0)}.select-btn.isRight{transform:translate(calc(-50% + 120px)) scale(1) translateZ(0)}.select-btn.isRight.hide{transform:translate(calc(-50% + 120px)) scale(0) translateZ(0)}.select-btn.hide{transform:translate(calc(-50% - 120px)) scale(0) translateZ(0)}}@media (hover:hover) and (pointer:fine){.select-btn:before{content:" ";position:absolute;top:-1px;left:-1px;width:62px;height:62px;background:#241817;border-radius:100%;transform-origin:center;transform:scale(0) translateZ(0);z-index:0;transition:transform .4s cubic-bezier(.36,0,.66,-.56);pointer-events:none}.select-btn span{transition:color .3s cubic-bezier(.36,0,.66,-.56)}.select-btn:hover span{transition:color .4s cubic-bezier(.34,1.56,.64,1);color:#fff}.select-btn:hover:before{transition:transform .4s cubic-bezier(.34,1.56,.64,1);transform:scale(1) translateZ(0)}}',""]),t.exports=e},function(t,e,n){"use strict";var r=n(122);n.n(r).a},function(t,e,n){(e=n(20)(!1)).push([t.i,'.new-player-btn{position:fixed;left:30px;bottom:26px;font-weight:600;font-size:14px;letter-spacing:.5px;text-align:center;padding:12px 20px;display:inline-block;margin:0 auto;background:#241817;color:#fff;transform-origin:center center;cursor:pointer;border-radius:30px}.winFix .new-player-btn{padding:13px 20px 11px}@media (hover:hover) and (pointer:fine){.new-player-btn:before{content:" ";display:block;position:absolute;left:-1px;top:-1px;width:calc(100% + 2px);height:calc(100% + 2px);z-index:0;border-radius:30px;background-color:#fff;transform-origin:center center;transition:transform .4s cubic-bezier(.36,0,.66,-.56);transform:scale(0) translateZ(0);pointer-events:none}.new-player-btn span{position:relative;z-index:1;transition:color .3s cubic-bezier(.36,0,.66,-.56)}.new-player-btn:hover span{color:#241817;transition:color .3s cubic-bezier(.34,1.56,.64,1)}.new-player-btn:hover:before{transition:transform .4s cubic-bezier(.34,1.56,.64,1);transform:scale(1) translateZ(0)}}@media (max-width:768px){.new-player-btn{left:20px}}@media (max-width:720px){.new-player-btn{bottom:17px}}',""]),t.exports=e},function(t,e,n){"use strict";var r=n(123);n.n(r).a},function(t,e,n){(e=n(20)(!1)).push([t.i,'.logo,.simple-logo{position:fixed;left:30px;top:34px;z-index:12}.logo-zizo,.simple-logo{width:80px;fill:#241817;z-index:1}.contact-link{position:fixed;display:inline-block;padding:20px;right:12px;top:8px;font-weight:700;font-size:16px;z-index:6;transform:translate(0) translateZ(0);transition:transform .4s cubic-bezier(.34,1.56,.64,1)}.contact-link .cl-span{display:inline-block;padding:8px 18px;background:#241817;color:#fff;border-radius:60px}.contact-link.disable{pointer-events:none;transform:translateY(-100px) translateZ(0)}.winFix .contact-link .cl-span{padding:9px 18px 7px}@media (hover:hover) and (pointer:fine){.contact-link .cl-span{position:relative;z-index:1;transition:color .3s cubic-bezier(.36,0,.66,-.56)}.contact-link .cl-span:before{content:" ";display:block;position:absolute;left:-1px;top:-1px;width:calc(100% + 2px);height:calc(100% + 2px);z-index:0;border-radius:30px;background-color:#fff;transform-origin:center center;transition:transform .4s cubic-bezier(.36,0,.66,-.56);transform:scale(0) translateZ(0);pointer-events:none}.contact-link .cl-span span{position:relative;z-index:1}.contact-link:hover .cl-span{color:#241817;transition:color .3s cubic-bezier(.34,1.56,.64,1)}.contact-link:hover .cl-span:before{transition:transform .4s cubic-bezier(.34,1.56,.64,1);transform:scale(1) translateZ(0)}}@media (max-width:768px){.logo,.simple-logo{top:29px;left:18px}.logo-zizo,.simple-logo{width:64px}.contact-link{top:11px;right:14px;font-weight:600;font-size:14px;line-height:16px;padding:14px 6px}.contact-link .cl-span{padding:6px 14px;border-radius:30px}}.winFix .contact-link .cl-span{padding:7px 14px 5px}@media (max-width:374px){.contact-link{top:6px}.logo,.simple-logo{top:26px;left:18px}.logo-zizo,.simple-logo{width:60px}}',""]),t.exports=e},function(t,e,n){"use strict";var r=n(124);n.n(r).a},function(t,e,n){var r=n(20),o=n(114),c=n(272),l=n(273);e=r(!1);var h=o(c),d=o(l);e.push([t.i,'.game-time-bg{position:fixed;width:62px;height:62px;bottom:29px;left:59px;pointer-events:none;opacity:0}.gn-container{visibility:hidden}.gn-container.disable{pointer-events:none}.gn-container.active{visibility:visible}img.test{position:fixed;height:66%;bottom:-4%;right:-100px}.chall-icon-c{position:absolute;left:0;top:0;width:100%;height:100%;z-index:0}.chall-icon-c.complete{-webkit-animation:pulse 2s ease-in-out infinite;animation:pulse 2s ease-in-out infinite}.chall-icon-c:after,.chall-icon-c:before{content:" ";display:block;position:absolute;left:50%;top:50%;width:28px;height:34px;transform:translate(-50%,-50%) scale(1) rotate(0deg) translateZ(0);transition:transform .4s cubic-bezier(.36,0,.66,-.56),opacity .4s cubic-bezier(.36,0,.66,-.56);transition-delay:.1s}.chall-icon-c:before{opacity:1;background:url('+h+") no-repeat;background-size:100%;background-position:50%}.chall-icon-c:after{opacity:0;z-index:1;background:url("+d+') no-repeat;background-size:100%;background-position:50%}.chall-icon-c.chall-icon-end:after,.chall-icon-c.chall-icon-end:before{width:30px;height:36px}.chall-icon{display:block;width:50px;height:50px;background:#241817;border-radius:100%;position:absolute;left:-5px;top:50%;transform-origin:center center;transform:translateY(-50%) scale(0) translateZ(0);transition:transform .4s cubic-bezier(.34,1.56,.64,1);transition-delay:1s}.chall-icon.active{transform:translateY(-50%) scale(1) translateZ(0)}.chall-icon:after,.chall-icon:before{content:" ";position:absolute;display:block;border-radius:100%}.chall-icon:before{left:50%;top:50%;width:calc(100% + 2px);height:calc(100% + 2px);background:#fff;z-index:0;transform-origin:center center;transition:transform .4s cubic-bezier(.36,0,.66,-.56);transform:translate(-50%,-50%) scale(0) translateZ(0);transition-delay:.1s;pointer-events:none}@-webkit-keyframes pulse{0%{transform:scale3d(.95,.95,.95)}50%{transform:scale3d(1.1,1.1,1.1)}to{transform:scale3d(.95,.95,.95)}}@keyframes pulse{0%{transform:scale3d(.95,.95,.95)}50%{transform:scale3d(1.1,1.1,1.1)}to{transform:scale3d(.95,.95,.95)}}.challenge-btn-content{position:relative;font-weight:600;padding:0 22px;line-height:40px;font-size:15px}.challenge-btn-content .cgbt{position:relative;overflow:hidden;display:block;z-index:1;min-width:105px;padding:0 0 0 25px}.challenge-btn-content .cgbt.cgbtfr{min-width:90px}.challenge-btn-content:before{content:"";position:absolute;left:-1px;top:-1px;border-radius:100%;width:calc(100% + 2px);height:calc(100% + 2px);background:#fff;border-radius:40px;z-index:0;transform-origin:left center;transition:transform .4s cubic-bezier(.36,0,.66,-.56);transform:scale(0) translateZ(0);pointer-events:none}.challenge-btn-content span{display:block;position:relative;z-index:1;color:#fff;transition:color .3s ease;transition-delay:.2s}.winFix .challenge-btn-content span{padding-top:1px}.challenge-btn{position:fixed;left:22px;bottom:18px;padding:10px;z-index:11;cursor:pointer}.challenge-btn.selected{pointer-events:none}.challenge-btn.selected .challenge-btn-content .chall-icon-c:after,.challenge-btn.selected .challenge-btn-content .chall-icon-c:before{transition:transform .3s cubic-bezier(.34,1.56,.64,1),opacity .3s cubic-bezier(.34,1.56,.64,1);transform:translate(-50%,-50%) scale(1.2) rotate(8deg) translateZ(0);transition-delay:0s}.challenge-btn.selected .challenge-btn-content .chall-icon-c:before{opacity:0}.challenge-btn.selected .challenge-btn-content .chall-icon-c:after{opacity:1}.challenge-btn.selected .challenge-btn-content .chall-icon:before{transition:transform .3s cubic-bezier(.34,1.56,.64,1);transform:translate(-50%,-50%) scale(1) translateZ(0);transition-delay:0s}.challenge-btn.selected .challenge-btn-content:before{transform:scale(1) translateZ(0);transition:transform .4s cubic-bezier(.34,1.56,.64,1)}.challenge-btn.selected .challenge-btn-content span{color:#241817;transition-delay:0s}.challenge-btn.disable{pointer-events:none}.challenge-btn .bg-hlt{bottom:0}.game-nav{position:fixed;z-index:10;bottom:10px;left:0;right:0;display:flex;justify-content:center}.game-nav ul{position:relative;z-index:2;font-size:0;padding:0}.game-nav ul li{position:relative;display:inline-block;padding:0 5px}.game-nav.disable{pointer-events:none}.game-nav.disable .gn-bg{transform:scaleX(0) translateZ(0)}.gni{position:relative;cursor:pointer;padding:10px;transform-origin:center}.gni,.gni i{display:block}.gni i{color:#fff;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);transition:transform .4s cubic-bezier(.36,0,.66,-.56),color .4s cubic-bezier(.36,0,.66,-.56)}.gni.selected{pointer-events:none}.gni.selected i{color:#241817;transform:translate(-50%,-50%) scale(1.2) rotate(-8deg) translateZ(0);transition:transform .4s cubic-bezier(.34,1.56,.64,1),color .4s cubic-bezier(.34,1.56,.64,1)}.gni.selected i.icon-2{transform:translate(-50%,-50%) scale(1.2) rotate(8deg) translateZ(0)}.gni.selected .gnic:before{transform:scale(1) translateZ(0);transition:transform .4s cubic-bezier(.34,1.56,.64,1)}.gnic{position:relative;z-index:1;display:block;width:56px;height:56px;background:#241817;font-size:30px;border-radius:100%;transform-origin:center}.gnic:before{content:"";position:absolute;left:-1px;top:-1px;border-radius:100%;width:58px;height:58px;background:#fff;z-index:0;transition:transform .4s cubic-bezier(.36,0,.66,-.56);transform:scale(0) translateZ(0);pointer-events:none}.bg-hlt{position:absolute;left:50%;transform:translate(-3px);width:8px;bottom:-6px;height:8px}.game-two{position:fixed;bottom:30px;left:0;width:100%;height:64px;display:flex;align-items:center;justify-content:center;pointer-events:none;visibility:hidden}.game-two.enable{visibility:visible}.game-two.gtlmob{padding:0 30px 0 0;justify-content:flex-end}.game-two-life{width:20px;height:64px;display:block;border-radius:10px;position:relative}.game-two-progress{width:18px;height:62px;left:1px;top:1px;position:absolute;border-radius:10px}.gtsc{display:block;padding:0 6px 0 13px}@media (hover:hover) and (pointer:fine){.gni:hover .gnic:before{transform:scale(1) translateZ(0);transition:transform .4s cubic-bezier(.34,1.56,.64,1)}.gni:hover i{color:#241817;transform:translate(-50%,-50%) scale(1.2) rotate(-8deg) translateZ(0);transition:transform .4s cubic-bezier(.34,1.56,.64,1),color .4s cubic-bezier(.34,1.56,.64,1)}.gni:hover i.icon-2{transform:translate(-50%,-50%) scale(1.2) rotate(8deg) translateZ(0)}.challenge-btn:hover .chall-icon-c:after,.challenge-btn:hover .chall-icon-c:before{transition:transform .3s cubic-bezier(.34,1.56,.64,1),opacity .3s cubic-bezier(.34,1.56,.64,1);transform:translate(-50%,-50%) scale(1.2) rotate(8deg) translateZ(0);transition-delay:0s}.challenge-btn:hover .chall-icon-c:before{opacity:0}.challenge-btn:hover .chall-icon-c:after{opacity:1}.challenge-btn:hover .chall-icon:before{transition:transform .3s cubic-bezier(.34,1.56,.64,1);transform:translate(-50%,-50%) scale(1) translateZ(0);transition-delay:0s}.challenge-btn:hover .challenge-btn-content:before{transform:scale(1) translateZ(0);transition:transform .4s cubic-bezier(.34,1.56,.64,1);transition-delay:.1s}.challenge-btn:hover .challenge-btn-content span{color:#241817;transition-delay:0s}}@media (max-width:1080px){.challenge-btn{left:20px}.game-nav ul li{padding:0}}@media (max-width:980px){.challenge-btn{bottom:18px}.chall-icon{width:48px;height:48px}.chall-icon-c:after,.chall-icon-c:before{width:26px}.challenge-btn-content{font-size:14px;line-height:40px;height:40px;padding:0 18px}.gni{padding:6px}.game-nav{bottom:14px}.bg-hlt{bottom:-8px}}@media (max-width:768px){.game-time-bg{width:56px;height:56px;left:29px}.challenge-btn{left:10px}}@media (max-width:720px){.gni{padding:6px 8px}.game-nav{bottom:85px}.challenge-btn{bottom:9px}.challenge-btn-content{padding:0 20px;background:#241817;border-radius:40px}.game-two{height:188px}.game-two.gtlmob{padding:0 20px 0 0}.game-two-life{width:24px;height:188px}.game-two-progress{width:22px;height:186px}}@media (max-width:380px){.game-time-bg{left:19px;bottom:19px}.game-two{bottom:23px}}@media (max-width:374px){.game-time-bg{left:14px;bottom:14px}}',""]),t.exports=e},function(t,e,n){t.exports=n.p+"img/challenge-2.82d137e.svg"},function(t,e,n){t.exports=n.p+"img/challenge.9a37811.svg"},function(t,e,n){"use strict";var r=n(125);n.n(r).a},function(t,e,n){var r=n(20),o=n(114),c=n(276),l=n(277);e=r(!1);var h=o(c),d=o(l);e.push([t.i,'.players-portraits{position:fixed;top:30px;right:30px;pointer-events:none;visibility:hidden}.players-portraits.visible{visibility:visible}.cpl-infos{position:absolute;right:0;top:0}.apl-infos,.bpl-infos{position:absolute;right:15px}.apl-infos{top:100px}.bpl-infos{top:164px}.player-portrait{position:relative;width:84px;height:84px;background:hsla(0,0%,100%,.1);border-radius:100%;overflow:hidden}.player-portrait:before{content:" ";position:absolute;left:0;top:0;width:100%;height:100%;border:2px solid #fff;border-radius:100%}.player-portrait img{border-radius:100%;width:100%}.player-portrait.a-player,.player-portrait.b-player{width:54px;height:54px}.katicon{position:absolute;left:0;top:0;width:100%;height:100%;background:url('+h+") no-repeat;background-size:100%;background-position:50%;z-index:1;transform-origin:left center}.jump-score,.watermelons{position:absolute;right:96px;top:0;height:84px;display:none}.jump-score.visible,.watermelons.visible{display:flex}.jump-score.watermelons-small .watermelon,.watermelons.watermelons-small .watermelon{width:30px;height:30px;margin-left:-10px}.jump-score.js-small,.watermelons.watermelons-small{right:64px;height:54px}.watermelons.watermelons-small .watermelon{width:30px;height:30px;margin-left:-10px}.watermelon{position:relative;background:url("+d+") no-repeat;background-size:100%;width:46px;height:46px;margin-left:-15px;align-self:center;opacity:.95}.jump-score{text-align:right}.jump-score span{font-weight:900;color:#251918;align-self:center;background:#fff;font-size:26px;padding:6px 18px;min-width:80px;border-radius:40px;text-align:center}.jump-score.js-small span{font-size:18px;padding:5px 12px;min-width:54px}.winFix .jump-score span{padding:8px 18px 4px}.winFix .jump-score.js-small span{padding:7px 12px 3px}@media (max-width:768px){.players-portraits{top:15px;right:20px}}@media (max-width:700px){.players-portraits{top:10px;right:10px}.player-portrait{width:74px;height:74px}.player-portrait.a-player,.player-portrait.b-player{width:46px;height:46px}.watermelon{width:36px;height:36px;margin-left:-12px}.jump-score,.watermelons{right:86px;height:70px}.jump-score.watermelons-small .watermelon,.watermelons.watermelons-small .watermelon{width:20px;height:20px;margin-left:-8px}.jump-score.js-small,.watermelons.watermelons-small{right:56px;height:46px}.apl-infos,.bpl-infos{right:14px}.apl-infos{top:84px}.bpl-infos{top:140px}.jump-score span{font-size:23px;padding:5px 15px;min-width:70px}.jump-score.js-small span{font-size:15px;padding:4px 10px;min-width:46px}}@media (max-width:374px){.players-portraits{top:5px}}",""]),t.exports=e},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCA2MC4zIDE0LjgiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnIGlkPSJMYXllcl8yXzFfIj48cGF0aCBkPSJNMCA3LjRjMCAxLjggMS40IDMuMiAzLjIgMy4yaDEwYy44IDIuMyAyLjQgNC4yIDQuOCA0LjIgMi4xIDAgMy45LTEuNyA0LjgtNC4yaDI5LjZjMy4zIDAgNi4zLTEuOSA3LjgtNC44LjItLjMuMi0uNyAwLTEtLjItLjMtLjUtLjUtLjktLjVIMjIuOEMyMS45IDEuNyAyMC4xIDAgMTggMGMtMi40IDAtNCAyLTQuOCA0LjJoLTEwQzEuNSA0LjIgMCA1LjYgMCA3LjR6bTMuMi0xLjFoMXYyLjFoLTFjLS42LjEtMS4xLS40LTEuMS0xcy41LTEgMS4xLTEuMWMwIC4xIDAgLjEgMCAwem0zLjEgMi4yVjYuM2gyLjF2Mi4xSDYuM3ptMTIuOCAwVjYuM2gzOC4yYTYuMyA2LjMgMCAwMS00LjggMi4xbC0zMy40LjF6bS0zLjIgMi44Yy0uNy0xLjItMS4xLTIuNS0xLjEtMy45IDAtMi44IDEuNC01LjMgMy4yLTUuMyAxLjIuMiAyLjEgMSAyLjUgMi4xSDE4Yy0uNiAwLTEuMS41LTEuMSAxLjF2NC4yYzAgLjYuNSAxLjEgMS4xIDEuMWgyLjVjLS40IDEuMS0xLjMgMS45LTIuNSAyLjEtLjktLjEtMS43LS42LTIuMS0xLjR6bS0zLjEtMi44aC0yLjJWNi4zaDIuMmMtLjEuOC0uMSAxLjUgMCAyLjJ6IiBmaWxsPSIjMjQxODE3IiBpZD0i5ZyW5bGkXzEiLz48L2c+PC9zdmc+"},function(t,e,n){t.exports=n.p+"img/watermelon.577c8fe.svg"},function(t,e,n){"use strict";var r=n(126);n.n(r).a},function(t,e,n){(e=n(20)(!1)).push([t.i,".tutorial{position:fixed;z-index:1;bottom:32px;left:94px;pointer-events:none;opacity:0;transition:opacity .5s ease}.tutorial.enable{opacity:1}.tutorial-01{position:relative;width:219px;height:319px}.tutorial-02{width:198px}.tutorial-02,.tutorial-03{position:relative;height:340px}.tutorial-03{width:176px}.animStep .tutorial-01-wave{transform:scale(1) translateZ(0)}.animStep .tutorial-01-people{transform:translateY(-180%) translateZ(0)}.animStep .tutorial-02-bomb{transform:scale(1) translateZ(0)}.animStep .tutorial-03-dragon{left:29%;bottom:19%}.animStep .tutorial-03-target{transform:scale(0) translateZ(0)}.animStep .tutorial-03-player{right:48.2%;top:29%}.animStep .tutorial-02-bomb-b{transform:scale(0) translateZ(0)}.tutorial-01-bg{position:relative;width:71.67%;height:100%;background:url(/tutorial/tutorial-01.png) no-repeat;background-size:100%}.tutorial-01-wave{position:absolute;background:url(/tutorial/tutorial-01-wave.png) no-repeat;background-size:100%;width:29.27%;height:35.359%;bottom:14.5%;left:32%;transform:scale(0) translateZ(0);transform-origin:bottom center}.tutorial-01-txt{position:absolute;background:url(/tutorial/tutorial-01-text.png) no-repeat;background-size:100%;width:41.4%;height:27.226%;right:0;bottom:30.2%}.tutorial-01-people{position:absolute;background:url(/tutorial/tutorial-01-people.png) no-repeat;background-size:100%;width:16%;height:21.86%;z-index:3;bottom:15.779%;left:38.6%;transform:translateY(0) translateZ(0)}.tutorial-02-boat{position:absolute;background:url(/tutorial/tutorial-02.png) no-repeat;background-size:100%;width:70.26%;height:37.35%;left:0;top:0}.tutorial-02-people{position:absolute;background:url(/tutorial/tutorial-02-people.png) no-repeat;background-size:100%;width:77.0536%;height:53.269%;top:37.4%;left:7.4%}.tutorial-02-bomb{position:absolute;background:url(/tutorial/tutorial-02-bomb.png) no-repeat;background-size:100%;width:52.134%;height:24.866%;z-index:2;top:38.8%;left:21.8%;transform:scale(0) translateZ(0);transform-origin:center}.tutorial-02-bomb-b{position:absolute;background:url(/tutorial/tutorial-02-bomb-b.png) no-repeat;background-size:100%;width:72.51%;height:36.388%;z-index:2;top:36.2%;left:2.4%;transform:scale(1) translateZ(0);transform-origin:center}.tutorial-02-txt{position:absolute;background:url(/tutorial/tutorial-02-txt.png) no-repeat;background-size:100%;width:58.46%;height:24.97%;z-index:3;bottom:0;left:42%}.tutorial-03-dragon{position:absolute;background:url(/tutorial/tutorial-03-dragon.png) no-repeat;background-size:100%;width:74.5%;height:42.558%;left:0;bottom:10%}.tutorial-03-target{position:absolute;background:url(/tutorial/tutorial-03-target.png) no-repeat;background-size:100%;width:46.193%;height:7.733%;top:35%;left:29%;transform:scale(1) translateZ(0);transform-origin:center}.tutorial-03-bot{position:absolute;background:url(/tutorial/tutorial-03-bot.png) no-repeat;background-size:100%;width:56.515%;height:34.82%;bottom:0;right:4%}.tutorial-03-player{position:absolute;background:url(/tutorial/tutorial-03-player.png) no-repeat;background-size:100%;width:24.527%;height:15.598%;top:36%;right:0}.tutorial-03-txt{position:absolute;background:url(/tutorial/tutorial-03-txt.png) no-repeat;background-size:100%;width:70.924%;height:31.514%;top:0;right:9%}@media (max-width:1280px){.tutorial-01{position:relative;width:187px;height:274px}.tutorial-02{width:170px}.tutorial-02,.tutorial-03{position:relative;height:292px}.tutorial-03{width:151px}}@media (max-width:768px){.tutorial{left:54px}.tutorial-01{width:27vw;height:39.33vw}.tutorial-02{width:27vw;height:46.2852vw}.tutorial-03{width:27vw;height:52.0713vw}}@media (max-width:380px){.tutorial{bottom:26px}.tutorial-01{width:33vw;height:48.07vw}.tutorial-02{width:33vw;height:56.57vw}.tutorial-03{width:29.7vw;height:57.27843vw}}@media (max-width:374px){.tutorial{bottom:20px}}",""]),t.exports=e},function(t,e,n){"use strict";var r=n(127);n.n(r).a},function(t,e,n){(e=n(20)(!1)).push([t.i,'.game-time{position:fixed;z-index:1;width:54px;height:54px;bottom:33px;left:63px;pointer-events:none}.game-time.enable{pointer-events:all;cursor:pointer}.game-time.enable:after{background:#241817;transform:scale(1) translateZ(0);transition:transform .3s cubic-bezier(.34,1.56,.64,1)}.game-time.enable i{transition:transform .5s cubic-bezier(.34,1.56,.64,1);transform:translate(-50%,-50%) scale(1) rotate(0) translateZ(0)}.game-time:after{content:" ";display:block;position:absolute;width:56px;height:56px;left:-1px;top:-1px;border-radius:100%;z-index:0;transform-origin:center;transition:transform .2s cubic-bezier(.36,0,.66,-.56);transform:scale(.8) translateZ(0)}.game-time i{position:absolute;color:#fff;font-size:22px;transform-origin:center center;transform:translate(-50%,-50%) scale(0) rotate(0) translateZ(0);transition:transform .3s cubic-bezier(.36,0,.66,-.56);left:50%;top:50%;z-index:1}@media (hover:hover) and (pointer:fine){.game-time.enable:hover i{transform:translate(-50%,-50%) scale(1.1) rotate(180deg) translateZ(0)}}@media (max-width:768px){.game-time{width:48px;height:48px;left:33px}.game-time:after{width:50px;height:50px}.game-time i{font-size:20px}}@media (max-width:380px){.game-time{left:23px;bottom:23px}}@media (max-width:374px){.game-time{left:18px;bottom:18px}}',""]),t.exports=e},function(t,e,n){"use strict";var r=n(128);n.n(r).a},function(t,e,n){(e=n(20)(!1)).push([t.i,".sound-btn{position:fixed;right:20px;bottom:16px;width:64px;height:64px;z-index:12;padding:10px;pointer-events:auto;transform-origin:center center;transition:transform .5s cubic-bezier(.34,1.56,.64,1);transform:scale(1) translateZ(0);cursor:pointer}.sound-btn.disable{transform:scale(0) translateZ(0)}.sound-btn.isActive .icon-sound{transform:translate(-50%,-50%) scale(1) rotate(0deg) translateZ(0)}.sound-btn.isActive .sound-on-i{-webkit-animation:soundOn 2s linear infinite;animation:soundOn 2s linear infinite}.sound-btn.isActive .icsclose{transform:translate(-50%) scale(0) translateZ(0);transition:transform .3s cubic-bezier(.36,0,.66,-.56)}.sb-content{margin:2px;display:block;background:#241817;border-radius:100%;width:40px;height:40px;position:relative;overflow:hidden;-webkit-backface-visibility:hidden;backface-visibility:hidden;transform:translateZ(0)}.icon-sound{top:50%;transform:translate(-50%,calc(-50% - 5px)) scale(1) rotate(0deg) translateZ(0);font-size:18px;z-index:1}.icon-sound,.icsclose{position:absolute;left:50%;color:#fff;transition:transform .3s cubic-bezier(.34,1.56,.64,1)}.icsclose{font-size:8px;bottom:4px;transform-origin:center;transform:translate(-50%) scale(.8) translateZ(0)}.sound-on{z-index:0;width:8px;height:8px;transform:translate(-50%,-50%)}.sound-on,.sound-on-i{position:absolute;left:50%;top:50%}.sound-on-i{width:800%;height:800%;border:8px solid #999;border-radius:100%;transform-origin:center center;transform:translate(-50%,-50%);opacity:0}.soi-m{border:1px solid #ccc;z-index:0;-webkit-animation-delay:.4s;animation-delay:.4s}@-webkit-keyframes soundOn{0%{transform:translate3d(-50%,-50%,0) scale(0);opacity:0}50%{transform:translate3d(-50%,-50%,0) scale(.25);opacity:.4}to{transform:translate3d(-50%,-50%,0) scale(1);opacity:0}}@keyframes soundOn{0%{transform:translate3d(-50%,-50%,0) scale(0);opacity:0}50%{transform:translate3d(-50%,-50%,0) scale(.25);opacity:.4}to{transform:translate3d(-50%,-50%,0) scale(1);opacity:0}}@media (hover:hover) and (pointer:fine){.sound-btn:hover .icsclose{transform:translate(-50%) scale(0) translateZ(0)}.sound-btn:hover .icon-sound{transform:translate(-50%,-50%) scale(1.2) rotate(-8deg) translateZ(0)}.sound-btn:hover:before{transform:translateY(-29px) translateZ(0)}.sound-btn:hover:after{transform:translate(-50%,-50%) scale(1) translateZ(0)}}@media (max-width:768px){.sound-btn{right:9px}}@media (max-width:720px){.sound-btn{bottom:7px}}",""]),t.exports=e},,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var r=n(129);n.n(r).a},function(t,e,n){(e=n(20)(!1)).push([t.i,'.complete-game{padding:30px 40px;background:#fff;border-radius:30px;display:flex;align-items:center}.complete-game p{padding:0 0 0 40px;font-size:20px}.icons-challenge{display:block;min-width:90px;font-size:35px;height:80px;position:relative}.icons-challenge i{position:absolute}.icons-challenge i.icon-1{left:50%;top:0;transform:translate(-50%)}.icons-challenge i.icon-2{bottom:0;left:0}.icons-challenge i.icon-3{bottom:0;right:0}.challenge{text-align:left}.challenge-top{padding:0 0 20px}.challenge-top h2{font-weight:900;padding:0 0 6px}.challenge-top h2,.challenge-top p{overflow:hidden}.challenge-top h2 span,.challenge-top p span,form{display:block}form{position:relative}form label{font-size:15px;color:#111;font-weight:600;padding:10px 0 15px;display:block}form input{border:0;height:44px;border-radius:30px;padding:0 16px}form input.nknm{font-size:24px;text-align:center;max-width:200px;border-radius:35px;height:60px;line-height:24px!important}.gen-btn{position:relative;margin:0 0 0 10px;background:#241817;letter-spacing:.5px;line-height:60px;padding:0 40px;border-radius:30px;font-size:22px;color:#fff;font-weight:700;min-width:200px;cursor:pointer}.gen-btn.loading{pointer-events:none}.gen-btn.disable{display:none}.ef-container{display:block;padding:12px 0 0}.error-field{display:inline-block;font-size:15px;padding:6px 12px;font-weight:400;color:#fff;border-radius:30px;background:#ba0845}.lds-ring{display:inline-block;position:absolute;width:36px;height:36px;right:8px;top:50%;opacity:.5;transform:translateY(-50%)}.lds-ring div{box-sizing:border-box;display:block;position:absolute;width:20px;height:20px;margin:8px;border-radius:50%;-webkit-animation:lds-ring 1s cubic-bezier(.5,0,.5,1) infinite;animation:lds-ring 1s cubic-bezier(.5,0,.5,1) infinite;border:3px solid transparent;border-top-color:#fff}.lds-ring div:first-child{-webkit-animation-delay:-.45s;animation-delay:-.45s}.lds-ring div:nth-child(2){-webkit-animation-delay:-.3s;animation-delay:-.3s}.lds-ring div:nth-child(3){-webkit-animation-delay:-.15s;animation-delay:-.15s}@-webkit-keyframes lds-ring{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes lds-ring{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@media (hover:hover) and (pointer:fine){.gen-btn:before{content:" ";display:block;position:absolute;left:-1px;top:-1px;width:calc(100% + 2px);height:calc(100% + 2px);z-index:0;border-radius:30px;background-color:#fff;transform-origin:center center;transition:transform .4s cubic-bezier(.36,0,.66,-.56);transform:scale(0) translateZ(0);pointer-events:none}.gen-btn span{position:relative;z-index:1;transition:color .3s cubic-bezier(.36,0,.66,-.56)}.gen-btn:hover span{color:#241817;transition:color .3s cubic-bezier(.34,1.56,.64,1)}.gen-btn:hover:before{transition:transform .4s cubic-bezier(.34,1.56,.64,1);transform:scale(1) translateZ(0)}}@media (max-width:768px){.challenge-top{padding:0 0 15px}.share-items{padding:10px 8px 20px}}@media (min-width:720px) and (max-height:700px){.challenge{margin-top:-70px}}@media (max-width:720px){.challenge{padding:0 30px}.challenge h2{font-size:26px}.challenge p{font-size:18px}.challenge p.mslabel{font-size:16px}.challenge p.mlc{font-size:11px}}@media (max-width:520px){.challenge{margin-top:-65px}.complete-game{padding:30px}.complete-game p{font-size:18px}}@media (max-width:480px){form input.nknm{max-width:none;width:100%}.gen-btn{width:100%;margin:10px 0 0;font-size:18px}}@media (max-width:420px){.challenge{padding:0 20px}.icons-challenge{font-size:30px;min-width:78px;height:70px}.complete-game{padding:20px}.complete-game p{font-size:16px;padding:0 0 0 30px}}@media (max-width:370px){.challenge{padding:0 15px;margin-top:-10px}.challenge h2{font-size:24px;padding:6px 0 3px}.challenge p{font-size:16px}.complete-game{padding:20px}.complete-game p{font-size:14px;padding:0 0 0 20px}.icons-challenge{width:50px}}',""]),t.exports=e},function(t,e,n){"use strict";var r=n(130);n.n(r).a},function(t,e,n){var r=n(20),o=n(114),c=n(304),l=n(305);e=r(!1);var h=o(c),d=o(l);e.push([t.i,".share{display:flex;flex-wrap:wrap}.share .share-items:first-child{padding-left:0}.share .share-items:last-child{padding-right:0}.share-items{padding:10px 8px 30px}.share-items .share-network{display:block;border-radius:100%;width:60px;height:60px;background:#fff;position:relative}.share-items .share-network i{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) translateZ(0);font-size:28px;background-repeat:no-repeat!important;background-position:50%!important}.cpy-link{position:relative;line-height:60px;background:#fff;border-radius:60px;font-size:16px;padding:0 25px;font-weight:600}.cpy-link.play-yourself{color:#fff;background:#241817}.cpy-link.shareja{font-size:15px}.cpy-link.copied .cpy-def,.cpy-link .cpy-bot{opacity:0}.cpy-link.copied .cpy-bot{opacity:1}.cpy-bot{position:absolute;width:100%;left:0;top:50%;transform:translateY(-50%);transition:opacity .5s ease}.icon-facebook{color:#0071f9;font-size:26px!important}.icon-twitter{color:#1ca1f2}.icon-line{color:#00c300}.copy-link-icon{position:absolute;left:50%;top:50%;width:24px;height:24px;background:url("+h+') no-repeat;background-size:100%;transform:translate(-50%,-50%) scale(1) rotate(0deg) translateZ(0)}.copylinknet:after,.copylinknet:before{content:" ";display:block;position:absolute;right:-4px;top:0;width:22px;height:22px;transform-origin:center center;transition:transform .3s cubic-bezier(.34,1.56,.64,1);transform:scale(0) translateZ(0)}.copylinknet:before{z-index:0;background:#241817;border-radius:100%}.copylinknet:after{background:url('+d+') no-repeat;background-size:100%;z-index:1}.copylinknet.copied:after,.copylinknet.copied:before{transform:scale(1) translateZ(0)}@media (hover:hover) and (pointer:fine){.cpy-link{cursor:pointer}.cpy-link span{display:block;transition:transform .3s cubic-bezier(.34,1.56,.64,1);transform-origin:center center}.cpy-link:hover .cpy-bot{transform:translateY(-50%) scale(1.08) rotate(-2deg) translateZ(0)}.cpy-link:hover .cpy-def{transform:scale(1.08) rotate(-2deg) translateZ(0)}.share-items .share-network{cursor:pointer}.share-items .share-network .copy-link-icon,.share-items .share-network i{transition:transform .3s cubic-bezier(.34,1.56,.64,1)}.share-items .share-network.share-network-twitter:hover i{transform:translate(-50%,-50%) scale(1.2) rotate(8deg) translateZ(0)}.share-items .share-network:hover .copy-link-icon,.share-items .share-network:hover i{transform:translate(-50%,-50%) scale(1.2) rotate(-8deg) translateZ(0)}.play-yourself:before{content:" ";display:block;position:absolute;left:-1px;top:-1px;width:calc(100% + 2px);height:calc(100% + 2px);z-index:0;border-radius:30px;background-color:#fff;transform-origin:center center;transition:transform .4s cubic-bezier(.36,0,.66,-.56);transform:scale(0) translateZ(0);pointer-events:none}.play-yourself .cpy-def{position:relative;z-index:1;transition:color .3s cubic-bezier(.36,0,.66,-.56)}.play-yourself:hover .cpy-def{color:#241817;transform:none;transition:color .3s cubic-bezier(.34,1.56,.64,1)}.play-yourself:hover:before{transition:transform .4s cubic-bezier(.34,1.56,.64,1);transform:scale(1) translateZ(0)}}@media (max-width:540px){.play-yourself.shareja{font-size:14px}}@media (max-width:480px){.share-items{padding:0 4px 20px}.share-items .share-network{width:50px;height:50px}.share-items .share-network i{font-size:24px}.copy-link-icon{width:22px;height:22px}.icon-facebook{font-size:22px!important}.cpy-link{line-height:50px;font-size:15px;padding:0 15px}.cpy-link.shareja{font-size:13px}.copylinknet:after,.copylinknet:before{right:-4px;top:-2px;width:18px;height:18px}}@media (max-width:370px){.copy-link-icon{width:20px;height:20px}.share-items .share-network{width:44px;height:44px}.share-items .share-network i{font-size:20px}.icon-facebook{font-size:19px!important}.cpy-link{line-height:44px;padding:0 12px}.cpy-link span{font-size:13px}}',""]),t.exports=e},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMDAwIDEwMDAiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwYXRoIGQ9Ik02MTUuMSA2NS45TDQwNC43IDI3Ni40YzQ3LjgtMjEuOSAxMDMuNS0yMSAxNTAuNiAybDEzNi41LTEzNmM0Ni00NiAxMjAuMy00NiAxNjYuMyAwczQ2IDEyMC4zIDAgMTY2LjNMNjMxLjcgNTM0LjljLTQ2IDQ2LTExOS45IDQ1LjYtMTY1LjktLjQtNy43LTcuNS0yMS43LTIxLjYtMjMuMi0yMC4xLTIwLjUtMTEuMi00Ni43LTgtNjQgOS4zLTE3LjMgMTcuMS0yMC41IDQyLjktOS42IDYzLjRsLS4yLjJjLjQuNC41LjcuOSAxLjEgMi41IDQuMSA1LjMgOCA4LjkgMTEuNiAxLjEgMS4xIDIuNSAyLjMgMy43IDMuNCAyLjMgMi41IDQuNiA1IDYuOSA3LjMgODggODcuOSAyMzEuMSA4Ny45IDMxOSAwbDIyNS44LTIyNmM4OC04Ny45IDg4LTIzMSAwLTMxOC44cy0yMzEtODcuOS0zMTguOSAweiIvPjxwYXRoIGQ9Ik00NDQuNCA3MjEuNUwzMDguMyA4NTcuN2MtNDYgNDYtMTIwLjMgNDYtMTY2LjMgMHMtNDYtMTIwLjMgMC0xNjYuM2wyMjYuMy0yMjYuM2M0Ni00NiAxMTkuOS00NS42IDE2NS45LjQgNy43IDcuNSAyMS43IDIxLjYgMjMuMiAyMC4xIDIwLjUgMTEuMiA0Ni43IDggNjQtOS4zIDE3LjMtMTcuMSAyMC41LTQyLjkgOS42LTYzLjRsLjItLjJjLS40LS40LS41LS43LS45LTEuMS0yLjUtNC4xLTUuMy04LTguOS0xMS42LTEuMS0xLjEtMi41LTIuMy0zLjctMy40LTIuMy0yLjUtNC42LTUtNy03LjMtODgtODcuOS0yMzEuMS04Ny45LTMxOSAwbC0yMjYgMjI2Yy04Ny45IDg3LjktODcuOSAyMzEgMCAzMTguOCA4OCA4Ny45IDIzMS4xIDg3LjkgMzE5IDBMNTk1IDcyMy41Yy00Ny44IDIxLjktMTAzLjQgMjEuMi0xNTAuNi0yeiIvPjwvc3ZnPg=="},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI0LjIuMywgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkNhcGFfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiCgkgdmlld0JveD0iMCAwIDMzMCAzMzAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMzMCAzMzA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDojRkZGRkZGO30KPC9zdHlsZT4KPGc+Cgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjI5LjMsMTA0LjRsLTg4LjIsODguMmwtNDAuNC00MC40Yy02LjEtNi4xLTE2LTYuMS0yMiwwYy02LjEsNi4xLTYuMSwxNiwwLDIybDUxLjQsNTEuNAoJCWMyLjksMi45LDYuOSw0LjYsMTEsNC42YzAsMCwwLDAsMCwwYzQuMSwwLDguMS0xLjYsMTEtNC42bDk5LjItOTkuMmM2LjEtNi4xLDYuMS0xNiwwLTIyQzI0NS4yLDk4LjMsMjM1LjQsOTguMywyMjkuMywxMDQuNHoiLz4KPC9nPgo8L3N2Zz4K"},function(t,e,n){"use strict";var r=n(131);n.n(r).a},function(t,e,n){var r=n(20),o=n(114),c=n(308);e=r(!1);var l=o(c);e.push([t.i,".mail-sub{display:block;background:#fff;border-radius:20px;padding:30px}.mail-sub.sent{background-image:url("+l+');background-size:contain;background-position:100% 100%;background-repeat:no-repeat}.mail-sub input{min-width:240px;display:inline-block;vertical-align:middle;border:1px solid #241817;margin:0 10px 0 0}.mslabel{font-weight:700;padding:0 0 10px;font-size:16px}.mailed{font-weight:700;font-size:22px;padding:20px 0;text-align:center}.mlc{font-size:12px;padding:20px 0 0;color:#666}.mail-send{position:relative;display:inline-block;width:44px;height:44px;border:1px solid #333;border-radius:100%;opacity:.1;pointer-events:none;vertical-align:middle}.mail-send span{display:block;position:absolute;left:50%;top:50%;z-index:1;transform:translate(-50%,-50%)}.mail-send.active{opacity:1;pointer-events:all;cursor:pointer}.mail-send.loading{pointer-events:none;background:#241817;border-color:#241817}.mail-send.loading:after,.mail-send.loading span{opacity:0}.mail-send.loading .lds-ring{right:auto;left:50%;transform:translate(-50%,-50%)}.mail-send.loading .lds-ring div{border-color:#fff transparent transparent}.win-fix .mail-send span{padding:3px 0 0}@media (hover:hover) and (pointer:fine){.mail-send:before{content:" ";position:absolute;top:-1px;left:-1px;width:46px;height:46px;background:#241817;border-radius:100%;transform-origin:center;transform:scale(0) translateZ(0);z-index:0;transition:transform .4s cubic-bezier(.36,0,.66,-.56)}.mail-send span{transition:color .3s cubic-bezier(.36,0,.66,-.56)}.mail-send:hover span{transition:color .4s cubic-bezier(.34,1.56,.64,1);color:#fff}.mail-send:hover:before{transition:transform .4s cubic-bezier(.34,1.56,.64,1);transform:scale(1) translateZ(0)}}@media (max-width:420px){.mail-sub{padding:20px}.mailed{font-size:18px;padding:0 0 8px}.mlc{padding:8px 0 0}.mlabelin{padding:10px 0}}@media (max-width:380px){.mail-sub input{min-width:220px}}@media (max-width:360px){.mail-sub{padding:15px}.mail-sub input{min-width:190px;margin:0 6px 0 0}}',""]),t.exports=e},function(t,e,n){t.exports=n.p+"img/cycle.8f4d2b4.png"},function(t,e,n){"use strict";var r=n(132);n.n(r).a},function(t,e,n){(e=n(20)(!1)).push([t.i,".gd-ttl,.pbcon{display:block}.gd-ttl{font-size:120px;color:#fff;font-weight:900;margin-bottom:-34px;text-align:center;text-transform:capitalize;pointer-events:none}.game-desc{position:absolute;z-index:0;top:190px;left:50%;transform:translate(-50%);text-align:center;color:#241817;width:100%;padding:0 60px;max-width:800px}.game-desc.hide{visibility:hidden}.game-desc.disable{overflow:hidden;opacity:0}.challenge.hide,.game-desc-content.hide{display:none}.game-desc-content{position:relative}.gd-icon{display:block;width:250px;height:250px;position:absolute;right:-60px;top:-80px;z-index:0}.content-gd{padding:40px 50px 70px;font-size:16px;color:#0c0808;font-weight:600;line-height:22px;margin:-10px 0 -34px;border-radius:90px;display:inline-block;transform-origin:center;min-width:560px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}@media (min-width:720px) and (max-height:700px){.game-desc{top:150px}}@media (max-width:720px){.game-desc{padding:0}.game-desc br.sp{display:none}.content-gd{font-size:16px;line-height:26px;padding:40px 30px 70px;min-width:auto;max-width:600px}}@media (max-width:520px){.game-desc{top:140px}.content-gd{padding:20px 15px 70px}}@media (max-width:410px){.content-gd{font-size:14px;line-height:24px;padding:20px 15px 50px}}@media (max-width:370px){.content-gd{padding:20px 10px 60px}.content-gd br{display:none}.game-desc{top:65px}}",""]),t.exports=e},function(t,e,n){"use strict";var r=n(133);n.n(r).a},function(t,e,n){(e=n(20)(!1)).push([t.i,'.end-game-content{position:relative;transform-origin:center center;text-align:center}.new-record{font-size:16px;display:none;border-radius:100%;width:100px;height:100px;font-weight:700;position:absolute;right:-20px;top:-20px;background:#f0e633;color:#241817;transform:rotate(20deg)}.new-record span{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}.new-record.visible{display:inline-block}.score-eg{display:block;font-size:90px;font-weight:700;line-height:90px;padding-top:6px;color:#241817}.icn-eg{position:relative;display:block;width:58px;height:58px;margin:0 auto;background:#241817;border-radius:100%}.icn-eg>i{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(1) rotate(0) translateZ(0);z-index:1}.lb-eg-btn{display:block;padding:12px 0 0;font-size:16px}.btn-eg{cursor:pointer;padding:10px 24px}.btn-eg i{color:#fff;font-size:30px}.btn-eg i.icon-close{font-size:28px}.btn-eg i.icon-replay{font-size:34px}.end-game-container{position:relative;width:100%;height:100%;overflow:hidden;min-width:600px;padding:60px}.end-game{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);border-radius:20px;text-align:center}.end-game h2{padding:30px 0}.end-game p{font-size:14px;color:#666}.end-game ul{display:flex;width:100%}.end-game ul li{flex:1;display:block;text-align:center}.end-game.disable{pointer-events:none}.end-game.hide{visibility:hidden}@media (hover:hover) and (pointer:fine){.btn-eg .icn-eg:before{content:"";position:absolute;left:-1px;top:-1px;border-radius:100%;width:60px;height:60px;background:#f1e632;z-index:0;transition:transform .4s cubic-bezier(.36,0,.66,-.56);transform:scale(0) translateZ(0)}.btn-eg .icn-eg>i{transition:transform .4s cubic-bezier(.36,0,.66,-.56),color .4s cubic-bezier(.36,0,.66,-.56)}.btn-eg:hover .chall-icon-c:after,.btn-eg:hover .chall-icon-c:before{transition:transform .3s cubic-bezier(.34,1.56,.64,1),opacity .3s cubic-bezier(.34,1.56,.64,1);transform:translate(-50%,-50%) scale(1.2) rotate(8deg) translateZ(0);transition-delay:0s}.btn-eg:hover .chall-icon-c:before{opacity:0}.btn-eg:hover .chall-icon-c:after{opacity:1}.btn-eg:hover .icn-eg:before{transform:scale(1) translateZ(0);transition:transform .4s cubic-bezier(.34,1.56,.64,1)}.btn-eg:hover .icn-eg>i{color:#241817;transform:translate(-50%,-50%) scale(1.2) rotate(-8deg) translateZ(0);transition:transform .4s cubic-bezier(.34,1.56,.64,1),color .4s cubic-bezier(.34,1.56,.64,1)}.btn-eg:hover .icn-eg>i.icon-replay{transform:translate(-50%,-50%) scale(1.2) rotate(8deg) translateZ(0)}}@media (max-width:768px){.end-game p{font-size:13px}.end-game h2{padding:20px 0 30px;font-size:28px}.score-eg{font-size:78px;line-height:78px}.btn-eg{padding:10px 18px}}@media (max-width:600px){.end-game{min-width:490px}.end-game-container{min-width:490px;padding:30px}.new-record{right:0}}@media (max-width:490px){.end-game{width:100%}.end-game,.end-game-container{min-width:auto}}@media (max-width:420px){.new-record{top:-10px;font-size:14px;width:90px;height:90px}.end-game-container{padding:20px}.end-game ul{display:block}.btn-eg{display:flex;width:100%;align-items:center;padding:8px 5px}.icn-eg{margin:0}.lb-eg-btn{padding:0 0 0 12px;font-size:16px}}@media (max-width:360px){.icn-eg{width:48px;height:48px}.end-game-container{padding:10px}.end-game h2{padding:20px 0 30px}.score-eg{font-size:62px;line-height:62px}}',""]),t.exports=e},function(t,e,n){"use strict";n.r(e),n.d(e,"strict",(function(){return l})),n.d(e,"state",(function(){return h})),n.d(e,"mutations",(function(){return d})),n.d(e,"actions",(function(){return f}));n(27);var r=n(8),o=n(37),c=n.n(o),l=!1,h=function(){return{authUser:null,currentIllustration:null}},d={SET_USER:function(t,e){t.authUser=e},SET_ILLU:function(t,e){t.currentIllustration=e}},f={nuxtServerInit:function(t,e){var n=t.commit,r=e.req;r&&r.session&&r.session.authUser&&n("SET_USER",r.session.authUser)},setIllustration:function(t,data){(0,t.commit)("SET_ILLU",data)},login:function(t,e){return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o,l,h,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.commit,o=e.username,l=e.password,n.prev=2,n.next=5,c.a.post("/api/login",{username:o,password:l});case 5:h=n.sent,data=h.data,r("SET_USER",data),n.next=15;break;case 10:if(n.prev=10,n.t0=n.catch(2),!n.t0.response||401!==n.t0.response.status){n.next=14;break}throw new Error("Bad credentials");case 14:throw n.t0;case 15:case"end":return n.stop()}}),n,null,[[2,10]])})))()},logout:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,c.a.post("/api/logout");case 3:n("SET_USER",null);case 4:case"end":return e.stop()}}),e)})))()}}},function(t,e,n){"use strict";n.r(e),n.d(e,"strict",(function(){return c})),n.d(e,"state",(function(){return l})),n.d(e,"mutations",(function(){return h}));n(38),n(39);var r=n(35),o=n(156),c=!1,l=function(){return{sound:null,mute:!1,soundPlaying:!1,arrMusic:{}}},h={initSounds:function(t){this.audioArr=["fleche_droite","fleche_gauche","hover_1","hover_2","hover_3","hover_4","hover_little","menu_start_hover_back","spinning_characters_trio_in","menu_start_party","menu_start","spinning_characters_trio_out","text_bulb_in_design_1","text_bulb_in_design_2","text_bulb_in_design_3","text_bulb_in","text_bulb_out","nani"],this.audioArr.forEach((function(audio){var e=new o.Howl({src:["/sounds/opus/".concat(audio,".opus"),"/sounds/mp3/".concat(audio,".mp3")],loop:!1,volume:.7,preload:!0,onplay:function(){t.soundPlaying=!0},onplayerror:function(){},onload:function(){},onend:function(){t.soundPlaying=!1},onpause:function(){t.soundPlaying=!1},onstop:function(){t.soundPlaying=!1}});t.arrMusic[audio]=e}))},initPostSounds:function(t){this.audioPostArr=["generic_woosh_1","generic_woosh_2","generic_woosh_3","generic_woosh_4","generic_woosh_5","generic_woosh_6","grab","boss_motor_loop","move_1","move_2","move_3","move_4","boss_beginning_motor","boulet","coup_canon","decompte","jump","sifflet","sword_move_1","sword_move_2","sword_move_3","sword_move_4","sword_move_5","sword_move_6","sword_move_7","sword_cut","hit_normal","hit_chat_1","hit_chat_2","hit_normal","decompte","jeux_1_coin_max","jeux_1_coin","transition_1","transition_2"];for(var e=1;e<8;e++)this.audioPostArr.push("boss_motor_dash_"+e);for(var n=1;n<17;n++)this.audioPostArr.push("boss_voix_"+n);this.audioPostArr.forEach((function(audio){var e=new o.Howl({src:["/sounds/opus/".concat(audio,".opus"),"/sounds/mp3/".concat(audio,".mp3")],loop:!1,volume:.7,preload:!0,onplay:function(){t.soundPlaying=!0},onplayerror:function(){},onload:function(){},onend:function(){t.soundPlaying=!1},onpause:function(){t.soundPlaying=!1},onstop:function(){t.soundPlaying=!1}});t.arrMusic[audio]=e}))},playSound:function(t,e){var n=e,o=1;"object"===Object(r.a)(e)&&(n=e.fileName,o=e.volume||1),t.arrMusic[n]&&(t.arrMusic[n].volume(o),t.arrMusic[n].play())},stopSound:function(t,e){t.arrMusic[e]&&t.arrMusic[e].stop()},mute:function(t){t.mute=!t.mute,this.$ga.event("Interaction",t.mute?"mute-sound":"unmunte-sound")}}},,,,,,function(t,e,n){"use strict";n.r(e),n.d(e,"loadLanguageAsync",(function(){return c}));n(75),n(79),n(58),n(19),n(71),n(27);var r=n(8),o=n(0);function c(t,e){return l.apply(this,arguments)}function l(){return(l=Object(r.a)(regeneratorRuntime.mark((function t(e,r){var c,l,h,d,f,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((c=e.app).i18n.loadedLanguages||(c.i18n.loadedLanguages=[]),c.i18n.loadedLanguages.includes(r)){t.next=30;break}if(!(l=c.i18n.locales.find((function(t){return t[o.b]===r})))){t.next=30;break}if(!(h=l[o.d])){t.next=29;break}return t.prev=7,t.next=10,n(321)("./"+h);case 10:if(d=t.sent,"function"!=typeof(f=d.default?d.default:d)){t.next=18;break}return t.next=15,Promise.resolve(f(e));case 15:t.t0=t.sent,t.next=19;break;case 18:t.t0=f;case 19:m=t.t0,c.i18n.setLocaleMessage(r,m),c.i18n.loadedLanguages.push(r),t.next=27;break;case 24:t.prev=24,t.t1=t.catch(7),console.error(t.t1);case 27:t.next=30;break;case 29:console.warn("[".concat(o.f,"] Could not find lang file for locale ").concat(r));case 30:case"end":return t.stop()}}),t,null,[[7,24]])})))).apply(this,arguments)}},function(t,e,n){var map={"./en-US":[224,0],"./en-US.js":[224,0],"./fr-FR":[225,1],"./fr-FR.js":[225,1],"./ja-JP":[226,2],"./ja-JP.js":[226,2]};function r(t){if(!n.o(map,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=map[t],r=e[0];return n.e(e[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(map)},r.id=321,t.exports=r},,,,,,,,,,,function(t,e,n){"use strict";n.r(e);n(24);var r=n(1),o=n(33),c={watch:{$route:function(t,e){this.disableAll="about___en"==t.name||"about___fr"==t.name||"about___ja"==t.name}},mounted:function(){this.onResize(),this.init(),this.isMobile=o.a.isMobile()},methods:{init:function(){this.scope=Object(r.a)(this),this.onStart()},openItem:function(t){var e=this;this.preventClickSpam||(this.preventClickSpam=!0,setTimeout((function(){e.preventClickSpam=!1}),2e3),this.currentSelected=t,r.b.trigger({name:"navigation"},{cat:t}),this.$ga.event("Navigation","section-"+t),this.allGameComplete&&3==t&&(this.hideNotif=!0))},onStart:function(){var t=this;setTimeout((function(){t.active=!0}),400)},rollOver:function(b){b&&this.$store.commit("sound/playSound","hover_"+Math.round(.5+3.5*Math.random())),r.b.trigger({name:"contactOver"},{over:b,color:b||3!=this.currentSelected?[.9411764706,.902,.196]:[.1411764706,.09411764706,.09019607843]})},onResize:function(){var t=window.innerWidth;this.sp=t<769,this.isMobileSmall=t<760},onGameBegin:function(){var t=this;setTimeout((function(){t.showTutorial=!1}),500)},onNextGame:function(t){var nav=t.nav;this.currentSelected=nav},onStartGame:function(t){var e=this,n=t.game;clearTimeout(this.gtShow),this.gameStart=0!=n,this.gameStart?(this.currentGame=n,this.gameTime=!0,this.showTutorial=!0):this.gtShow=setTimeout((function(){e.gameTime=!1,e.showTutorial=!1}),300)},onChallengeFromEnd:function(){this.currentSelected=3,this.hideNotif=!0},onCheckAllGameComplete:function(){this.allGameComplete=!0}},data:function(){return{hideNotif:!1,disableAll:!1,gtShow:null,gameTime:!1,allGameComplete:!1,gameOneComplete:!1,gameTwoComplete:!1,gameThreeComplete:!1,gameStart:!1,showTutorial:!1,currentGame:0,currentSelected:0,active:!1,sp:!1,isMobile:!1,isMobileSmall:!1,content:[{id:0},{id:1},{id:2}]}}},l=(n(270),n(5)),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"gn-container",class:{active:t.active,disable:t.disableAll}},[n("div",{staticClass:"game-time-bg"}),t._v(" "),n("players-portrait",{attrs:{current:t.currentSelected+1}}),t._v(" "),t.showTutorial&&!t.isMobileSmall?n("tutorial",{attrs:{current:t.currentGame}}):t._e(),t._v(" "),t.gameTime?n("game-time",{attrs:{current:t.currentGame}}):t._e(),t._v(" "),n("div",{staticClass:"game-two",class:[{enable:2==t.currentGame},{gtlmob:t.isMobile}]},[t._m(0)]),t._v(" "),n("div",{staticClass:"game-nav",class:{disable:t.gameStart}},[n("ul",t._l(t.content,(function(e){return n("li",{key:e.index},[n("button",{staticClass:"gni",class:{selected:t.currentSelected==e.id},on:{mouseenter:function(e){return t.rollOver(!0)},mouseleave:function(e){return t.rollOver(!1)},mousedown:function(n){return t.openItem(e.id)},touchstart:function(n){return n.preventDefault(),t.openItem(e.id)}}},[n("div",{staticClass:"gnic"},[3!=e.id?n("i",{staticClass:"icon-game",class:"icon-"+(e.id+1)}):t._e()])]),t._v(" "),n("div",{staticClass:"bg-hlt",class:"bg-hlt-"+e.id})])})),0)]),t._v(" "),n("button",{staticClass:"challenge-btn",class:[{selected:3==t.currentSelected},{disable:t.gameStart}],on:{mousedown:function(e){return t.openItem(3)},mouseenter:function(e){return t.rollOver(!0)},mouseleave:function(e){return t.rollOver(!1)},touchstart:function(e){return e.preventDefault(),t.openItem(3)}}},[n("div",{staticClass:"cbc-target"},[n("div",{staticClass:"challenge-btn-content"},[n("div",{staticClass:"chall-icon",class:{active:t.active}},[n("div",{staticClass:"chall-icon-c",class:{complete:t.allGameComplete&&!t.hideNotif}})]),t._v(" "),n("div",{staticClass:"cgbt",class:{cgbtfr:"fr"==t.$i18n.locale}},[n("span",[t._v(t._s(t.$t("navigation.challengeLabel")))])]),t._v(" "),n("div",{staticClass:"bg-hlt bg-hlt-3"})])])])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"game-two-life"},[e("div",{staticClass:"game-two-progress"})])}],!1,null,null,null);e.default=component.exports;installComponents(component,{PlayersPortrait:n(342).default,Tutorial:n(341).default,GameTime:n(340).default})},function(t,e,n){"use strict";n.r(e);var r=n(1),o={props:{gameStart:{type:Boolean,required:!0,default:!1}},mounted:function(){this.init()},methods:{init:function(){this.scope=Object(r.a)(this)},rollOver:function(b){b&&this.$store.commit("sound/playSound","hover_"+Math.round(.5+3.5*Math.random())),r.b.trigger({name:"contactOver"},{over:b})}}},c=(n(268),n(5)),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",[n("svg",{staticClass:"simple-logo",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 96 27.85"}},[n("g",{attrs:{id:"svg-logo-zizo"}},[n("path",{attrs:{d:"M20.3 21.6h-5.21a1.4 1.4 0 01-1.37-2.16l8-17.29A1.4 1.4 0 0020.3 0H2.37A2.37 2.37 0 000 2.36v2.49a2.38 2.38 0 002.37 2.34h5a1.39 1.39 0 011.39 2.14L1 25.71a1.39 1.39 0 001.37 2.14H20.3a2.37 2.37 0 002.36-2.37v-1.52a2.36 2.36 0 00-2.36-2.36zM63.08 21.6h-5.22a1.4 1.4 0 01-1.37-2.16l8-17.29A1.4 1.4 0 0063.08 0H45.14a2.36 2.36 0 00-2.36 2.36v2.49a2.37 2.37 0 002.36 2.37h5a1.38 1.38 0 011.35 2.14l-7.7 16.35a1.38 1.38 0 001.35 2.14h17.94a2.37 2.37 0 002.36-2.37v-1.52a2.36 2.36 0 00-2.36-2.36zM34.73 0h-4a2.37 2.37 0 00-2.37 2.36v23.12a2.38 2.38 0 002.35 2.37h4a2.38 2.38 0 002.37-2.37V2.36A2.37 2.37 0 0034.73 0zM82.09 0A13.93 13.93 0 1096 13.92 13.92 13.92 0 0082.09 0zm0 19.84A5.92 5.92 0 1188 13.92a5.92 5.92 0 01-5.91 5.93z"}})])]),t._v(" "),n("n-link",{staticClass:"contact-link",class:{disable:t.gameStart},attrs:{to:t.localePath("about")},nativeOn:{mouseenter:function(e){return t.rollOver(!0)},mouseleave:function(e){return t.rollOver(!1)}}},[n("span",{staticClass:"cl-span"},[n("span",[t._v(t._s(t.$t("aboutUs")))])])])],1)}),[],!1,null,null,null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(63);var r=n(1),o={props:{current:{type:Number,required:!1,default:0}},mounted:function(){this.init()},beforeDestroy:function(){this.scope.unregister(this)},methods:{init:function(){this.scope=Object(r.a)(this)},onStartGame:function(){this.end=!1},onEndGame:function(){this.end=!0}},data:function(){return{end:!1}}},c=n(5),component=Object(c.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"game-ui"},[this.end?e("end-game",{attrs:{current:this.current}}):this._e()],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{EndGame:n(343).default})},function(t,e,n){"use strict";n.r(e);n(24),n(19),n(40),n(46),n(164);var data=n(3),r=n(1),o=n(6),c=n(2),l=n(33),h={mounted:function(){this.init()},methods:{init:function(){var t=this;this.scope=Object(r.a)(this),this.$store.commit("sound/initSounds"),data.g.sound=this.$store,this.hideLogo=!1,c.a.nextTick((function(){t.animateLogo()}))},animateLogo:function(){var t=this;this.animLogo=o.a.timeline({autoplay:!1,complete:function(){t.logoAnimationInComplete=!0,t.animLogo=null,t.showLoadingBomb=!1,r.b.trigger({name:"logoIntroComplete"}),t.charLoaded?(t.onFinishedLoaded(),t.showProgressBomb=t.progress<100):t.showProgressBomb=t.progress<100}}).add({targets:".lbb",duration:500,easing:"easeInBack",scale:0,translateZ:0},0).add({targets:["#z1","#i","#z2","#o"],duration:500,easing:"easeOutBack",scaleY:[0,1],translateZ:0,delay:o.a.stagger(80)},250).add({targets:"#party",duration:450,easing:"easeOutBack",scaleY:[0,1],translateZ:0},500).add({targets:["#zizo-bg","#party-bg"],duration:600,easing:"easeOutBack",scale:[0,1],translateZ:0},450).add({targets:"#flower",duration:600,easing:"easeOutBack",scale:[0,1],translateZ:0},550).add({targets:"#pil",duration:800,easing:"easeOutBack",scale:[0,1],translateZ:0},630).add({targets:["#pil-01","#pil-02","#pil-03","#pil-04"],duration:800,easing:"easeOutBack",scale:[0,1],translateZ:0,delay:o.a.stagger(60,{direction:"reverse"})},630).add({targets:"#boat",duration:600,easing:"easeOutQuint",scale:{value:[0,1],duration:200},rotate:{value:[-30,0],easing:"easeOutBack"},translateX:[60,0],translateY:[60,0],translateZ:0},700).add({targets:"#dragon",duration:700,easing:"easeOutQuint",scale:{value:[0,1],duration:200},rotate:{value:[30,0],easing:"easeOutBack",delay:200},translateX:[100,0],translateY:[-20,0],translateZ:0},850).add({targets:"#eyebrow",duration:700,easing:"easeOutBack",rotate:[30,0],translateZ:0},1100).add({targets:"#bomb",duration:1200,rotate:[360,0],easing:"easeOutBack",translateZ:0},700).add({targets:"#wink",duration:1,opacity:0},650).add({targets:"#bomb-container",duration:1200,easing:"easeOutBack",scale:{value:[0,1],duration:600,easing:"easeOutQuint"},translateY:{value:[30,0],duration:600,easing:"easeOutQuint"},translateX:[300,0],translateZ:0},700).add({targets:"#natsu",duration:500,easing:"easeOutBack",scale:[4,1],opacity:{easing:"easeOutQuint",value:[0,1],duration:100},translateZ:0},1300).add({targets:"#kanji",duration:600,easing:"easeOutBack",scale:[5,1],opacity:{easing:"easeOutQuint",value:[0,1],duration:100},translateZ:0},1450).add({targets:"#eye_bomb",duration:1,scale:0,translateZ:0},2050).add({targets:"#wink",duration:1,opacity:1,translateZ:0},2050).add({targets:"#eye_bomb",duration:1,scale:1,translateZ:0},2200).add({targets:"#wink",duration:1,opacity:0,translateZ:0},2200).add({targets:"#eye_bomb",duration:1,scale:1,translateZ:0},2700).add({targets:"#eye_bomb",duration:1,scale:1,translateZ:0},2850)},animateLogoOut:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.hideCountdown=!0;var n=0;this.showProgressBomb&&(n=250),this.animLogo=o.a.timeline({autoplay:!1,easing:e?"easeOutBack":"easeInBack",complete:function(){t.animLogo=null,e||(t.showProgressBomb=!1,t.showSmallLogo=!0,t.hideLogo=!0)}}).add({targets:"#flower",duration:600,scale:e?1:0,translateZ:0},n).add({targets:"#bomb",duration:600,rotate:e?0:-30,translateZ:0},n).add({targets:"#bomb-container",duration:600,scale:{value:e?1:0,duration:100,delay:500},translateX:e?0:-50,translateY:e?0:-50,translateZ:0},n).add({targets:"#dragon",duration:800,translateZ:0,scale:{value:e?1:0,duration:500,delay:300},rotate:{value:e?0:30},translateX:e?0:100,translateY:e?0:-20},n).add({targets:"#boat",duration:600,easing:"easeInQuint",scale:{value:e?1:0,duration:300,delay:300},rotate:{value:e?0:-30},translateX:e?0:60,translateY:e?0:60,translateZ:0},n).add({targets:".ldlg #Layer_2",duration:500,scale:e?1:[1,0],translateZ:0,delay:o.a.stagger(80)},350+n)},onCharLoaded:function(){console.log("okkk"),this.$store.commit("sound/initPostSounds")},onFinishedLoaded:function(){var t=this;if(this.charLoaded=!0,this.logoAnimationInComplete){if(this.animateLogoOut(),null!=data.b.uid){this.playerName=data.b.nickname;var e=new URL(window.location.href).searchParams.get("moreFun");this.$ga.event("Navigation",e?"back-more-fun":"back-local-storage"),e||(this.showNewPlayer=!0)}l.a.skipIntro||c.a.nextTick((function(){t.animIntro=o.a.timeline({translateZ:0,duration:600,easing:"easeInBack",autoplay:!1}).add({targets:".new-player-btn",translateY:[120,0],translateZ:0,delay:0,easing:"easeOutBack"},0).add({targets:".zltg",translateY:"-100%",delay:o.a.stagger(70)},0).add({targets:".pltg",translateY:"-200%",delay:o.a.stagger(70,{start:200,direction:"reverse"})},0).add({targets:".play-btn span",translateY:"-100%",delay:480,complete:function(){t.playerName.length>0&&(t.feedFinalSlide(),r.b.trigger({name:"pickCharacter"})),t.displayCharSelection()}},0)}))}},displayCharSelection:function(){var t=this;null!=data.b.uid&&(this.playerName=data.b.nickname),this.labelBtn=""==this.playerName?"tap":"start",this.$refs.sbl&&(this.$refs.sbl.show(!0),this.$refs.sbr.show(!0)),c.a.nextTick((function(){t.animIntro=o.a.timeline({translateZ:0,duration:600,easing:"easeOutBack",autoplay:!1}).add({targets:".play-btn span",translateY:["100%",0]},0).add({targets:".pick span",translateY:[60,0]},0).add({targets:".zltg",translateY:["200%",0],delay:o.a.stagger(70)},0).add({targets:".pltg",translateY:["100%",0],delay:o.a.stagger(70,{start:200,direction:"reverse"}),complete:t.playerName.length>0?null:function(){t.animIntro=null}},0),t.playerName.length>0&&t.animIntro.add({targets:".chartxt",easing:"easeOutElastic(1, .5)",translateY:["100%",0],opacity:[0,1],delay:1500,complete:function(){t.animIntro=null}},0)}))},onLoading:function(t){var content=t.content,progress=t.progress,e=t.variable;progress&&(this.progress=progress),this.variable=e||"",this.content=content||""},onPickCharacter:function(){var t=this;null==data.b.uid&&(this.$refs.sbl&&(this.$refs.sbl.show(!1),this.$refs.sbr.show(!1)),this.animIntro=o.a.timeline({duration:600,easing:"easeInBack",autoplay:!1,translateZ:0}).add({targets:".pick span",translateY:-60,delay:120},0).add({targets:".new-player-btn",translateY:120,translateZ:0,delay:120},0).add({targets:".play-btn span",translateY:"-100%",delay:120,complete:function(){t.completeVsAnim()}},0))},feedFinalSlide:function(){var t="<br><span>ZIZO TEAM</span>",e="<br><span>CHALLENGER</span>";this.botNameL=data.a[0].name+("employee"==data.a[0].type?t:e),this.botNameR=data.a[1].name+("employee"==data.a[1].type?t:e),this.labelBtn="start"},completeVsAnim:function(){var t=this;this.$refs.playB&&(this.feedFinalSlide(),c.a.nextTick((function(){t.animIntro=o.a.timeline({duration:600,easing:"easeOutBack",autoplay:!1}),t.animIntro.add({targets:".play-btn span",translateY:["100%",0],translateZ:0,complete:function(){t.$refs.playB.disable=!1}},0).add({targets:".chartxt",easing:"easeOutElastic(1, .5)",translateY:["100%",0],opacity:[0,1],delay:1200,complete:function(){t.animIntro=null}},0)})))},startSite:function(){var t=this;this.$ga.event("Interaction","pick-character-"+data.d.character),r.b.trigger({name:"introOut"}),this.endClick=!0,this.animIntro=o.a.timeline({duration:600,easing:"easeInBack",autoplay:!1,complete:this.playerName.length>0?null:function(){r.b.trigger({name:"startSite"}),r.b.trigger({name:"go"}),t.scope.unregister(t),t.animIntro=null}}).add({targets:".play-btn span",translateY:"-100%",translateZ:0},0).add({targets:".new-player-btn",translateY:120,translateZ:0},0).add({targets:".chartxt",easing:"easeInElastic(1, .5)",translateY:"-100%",opacity:0},0),this.playerName.length>0&&this.animIntro.add({targets:".pick span",translateY:-60,delay:120,complete:function(){r.b.trigger({name:"startSite"}),r.b.trigger({name:"go"}),t.scope.unregister(t),t.animIntro=null}},0)},onRaf:function(t){t.delta;var e=t.now;this.animIntro&&this.animIntro.tick(e),this.animLogo&&this.animLogo.tick(e)}},data:function(){return{playerName:"",endClick:!1,labelBtn:"loading",charLoaded:!1,botNameL:"",botNameR:"",progress:0,content:"",variable:"",hideLogo:!0,showSmallLogo:!1,showLoadingBomb:!0,logoAnimationInComplete:!1,showProgressBomb:!1,hideCountdown:!1,showNewPlayer:!1}}},d=(n(256),n(5)),component=Object(d.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"ldct"},[n("div",[t.showLoadingBomb?n("div",{staticClass:"loading-bomb"},[n("div",{staticClass:"lbb"},[n("div",{staticClass:"lb-content"},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64.53 93.38"}},[n("g",{attrs:{id:"bomb_layer",fill:"#231916"}},[n("g",[n("path",{attrs:{d:"M35.23.58l-.06,0a3,3,0,0,0-.59-.34L34.37.14,33.93,0a.72.72,0,0,1-.25,0h-.43c-.07,0-.15,0-.23,0a2.11,2.11,0,0,0-.43.12.53.53,0,0,1-.16,0l0,0a2.46,2.46,0,0,0-.83.55,2.63,2.63,0,0,0-.54.79,24.58,24.58,0,0,0-2,11.87c-3.32.42-6,1.47-7.4,2.84a2.91,2.91,0,0,0-1,2.05V31c-.85.32-1.66.67-2.46,1.06-.1,0-.18.09-.28.14-.5.24-1,.51-1.51.78a.35.35,0,0,1-.12.07,32.28,32.28,0,0,0-7.8,50c.28.33.58.63.89.94a31.4,31.4,0,0,0,4.19,3.52,32.29,32.29,0,0,0,41.46-3.55,31.88,31.88,0,0,0,6.12-8.57A32.28,32.28,0,0,0,48.13,33a.64.64,0,0,1-.14-.08c-.48-.26-1-.53-1.49-.77L46.22,32c-.8-.39-1.62-.73-2.46-1.05V18.32c0-2.46-4-4.49-9.2-5A19.86,19.86,0,0,1,36,3.84a2.77,2.77,0,0,0,.24-1.34A2.75,2.75,0,0,0,35.23.58ZM51.76,59c0,4.29-1.38,7.08-3.72,8.89a9,9,0,0,1-1.48,1c-2.91,1.9-2,7.5-2,8.9v.73a3.13,3.13,0,0,1-3,3.14,3.08,3.08,0,0,1-3.16-3.07,3.07,3.07,0,1,1-6.14,0,3.07,3.07,0,0,1-6.14,0A3.08,3.08,0,0,1,23,81.62a3,3,0,0,1-2.3-1.19,2.94,2.94,0,0,1-.67-1.8.5.5,0,0,1,0-.17v-.72c0-1.38.63-7.16-2-8.89-3.22-1.73-5.2-4.73-5.21-9.85A19.5,19.5,0,0,1,32.25,39.5c.39,0,.79,0,1.18,0A19.49,19.49,0,0,1,51.76,59Z"}}),t._v(" "),n("path",{attrs:{d:"M40.5 61.4c-1 1-1 2.7.1 3.7s2.7 1 3.7-.1c1-1 1-2.7-.1-3.7s-2.7-.9-3.7.1zm-20.2.5c-1 1.1-1 2.7.1 3.7s2.7 1 3.7-.1c1-1 .9-2.7-.1-3.7-1.1-1-2.7-1-3.7.1zm20.2-.5c-1 1-1 2.7.1 3.7s2.7 1 3.7-.1c1-1 1-2.7-.1-3.7s-2.7-.9-3.7.1zm-20.2.5c-1 1.1-1 2.7.1 3.7s2.7 1 3.7-.1c1-1 .9-2.7-.1-3.7-1.1-1-2.7-1-3.7.1zm0 0c-1 1.1-1 2.7.1 3.7s2.7 1 3.7-.1c1-1 .9-2.7-.1-3.7-1.1-1-2.7-1-3.7.1zm20.2-.5c-1 1-1 2.7.1 3.7s2.7 1 3.7-.1c1-1 1-2.7-.1-3.7s-2.7-.9-3.7.1zm-20.2.5c-1 1.1-1 2.7.1 3.7s2.7 1 3.7-.1c1-1 .9-2.7-.1-3.7-1.1-1-2.7-1-3.7.1zm20.2-.5c-1 1-1 2.7.1 3.7s2.7 1 3.7-.1c1-1 1-2.7-.1-3.7s-2.7-.9-3.7.1zm0 0c-1 1-1 2.7.1 3.7s2.7 1 3.7-.1c1-1 1-2.7-.1-3.7s-2.7-.9-3.7.1zm-20.2.5c-1 1.1-1 2.7.1 3.7s2.7 1 3.7-.1c1-1 .9-2.7-.1-3.7-1.1-1-2.7-1-3.7.1z"}})])])])])])]):t._e(),t._v(" "),n("svg",{staticClass:"simple-logo",class:{hide:!t.showSmallLogo},attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 96 27.85"}},[n("g",{attrs:{id:"svg-logo-zizo"}},[n("path",{attrs:{d:"M20.3 21.6h-5.21a1.4 1.4 0 01-1.37-2.16l8-17.29A1.4 1.4 0 0020.3 0H2.37A2.37 2.37 0 000 2.36v2.49a2.38 2.38 0 002.37 2.34h5a1.39 1.39 0 011.39 2.14L1 25.71a1.39 1.39 0 001.37 2.14H20.3a2.37 2.37 0 002.36-2.37v-1.52a2.36 2.36 0 00-2.36-2.36zM63.08 21.6h-5.22a1.4 1.4 0 01-1.37-2.16l8-17.29A1.4 1.4 0 0063.08 0H45.14a2.36 2.36 0 00-2.36 2.36v2.49a2.37 2.37 0 002.36 2.37h5a1.38 1.38 0 011.35 2.14l-7.7 16.35a1.38 1.38 0 001.35 2.14h17.94a2.37 2.37 0 002.36-2.37v-1.52a2.36 2.36 0 00-2.36-2.36zM34.73 0h-4a2.37 2.37 0 00-2.37 2.36v23.12a2.38 2.38 0 002.35 2.37h4a2.38 2.38 0 002.37-2.37V2.36A2.37 2.37 0 0034.73 0zM82.09 0A13.93 13.93 0 1096 13.92 13.92 13.92 0 0082.09 0zm0 19.84A5.92 5.92 0 1188 13.92a5.92 5.92 0 01-5.91 5.93z"}})])]),t._v(" "),"tap"==t.labelBtn&&""==this.playerName?n("p",{staticClass:"pick"},[n("span",{domProps:{innerHTML:t._s(t.$t("pick"))}})]):t._e(),t._v(" "),"start"==t.labelBtn&&this.playerName.length>0?n("p",{staticClass:"pick",class:{welcome:this.playerName.length>0}},[n("i18n",{attrs:{path:"welcome",tag:"span"},scopedSlots:t._u([{key:"name",fn:function(){return[t._v(t._s(t.playerName))]},proxy:!0}],null,!1,3096915715)})],1):t._e(),t._v(" "),n("logo",{directives:[{name:"show",rawName:"v-show",value:!t.hideLogo,expression:"!hideLogo"}],class:{hide:t.hideLogo,smallLogo:t.showSmallLogo},attrs:{progress:t.progress,hideCountdown:t.hideCountdown,showProgress:t.showProgressBomb}}),t._v(" "),n("play-btn",{ref:"playB",staticClass:"wtbg ldbn",class:{tap:"tap"==t.labelBtn||"start"==t.labelBtn,end:t.endClick},attrs:{label:t.labelBtn},on:{startSite:t.startSite}}),t._v(" "),""==this.playerName?n("select-btn",{ref:"sbl",attrs:{isRight:!1}}):t._e(),t._v(" "),""==this.playerName?n("select-btn",{ref:"sbr"}):t._e(),t._v(" "),n("span",{staticClass:"vs vsl"},[t._v("VS")]),t._v(" "),n("span",{staticClass:"vs vsr"},[t._v("VS")]),t._v(" "),n("div",{staticClass:"charname clname",class:{hide:""==t.botNameL}},[n("span",{staticClass:"chartxt",domProps:{innerHTML:t._s(t.botNameL)}})]),t._v(" "),n("div",{staticClass:"charname crname",class:{hide:""==t.botNameR}},[n("span",{staticClass:"chartxt",domProps:{innerHTML:t._s(t.botNameR)}})]),t._v(" "),n("div",{staticClass:"characters chmain"}),t._v(" "),n("div",{staticClass:"characters chleft"}),t._v(" "),n("div",{staticClass:"characters chright"}),t._v(" "),t.showNewPlayer?n("new-player"):t._e()],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Logo:n(346).default,PlayBtn:n(155).default,SelectBtn:n(345).default,NewPlayer:n(344).default})},function(t,e,n){"use strict";n.r(e);n(19),n(40),n(46),n(164);var data=n(3),r={data:function(){return{items:[]}},mounted:function(){var t=new URL(window.location.href),e=t.searchParams.get("challengeMe");if(e)data.c.id=e,this.$ga.event("Navigation","from-challenge-me");else{var r=t.searchParams.get("moreFun");r&&(data.b.uid=r)}Promise.all([n.e(3),n.e(8),n.e(10)]).then(n.bind(null,399))}},o=n(5),component=Object(o.a)(r,(function(){var t=this.$createElement;return(this._self._c||t)("div")}),[],!1,null,null,null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var r=n(1),o=(n(6),n(155),n(211),{mounted:function(){this.init()},methods:{init:function(){var t=this;this.scope=Object(r.a)(this),setTimeout((function(){t.hide=!1}),1200)},onNavigation:function(t){var e=this,n=t.cat;t.isNext?this.currentCat=n:(clearInterval(this.intervalSwitch),3==n||3==this.currentCat?this.intervalSwitch=setTimeout((function(){e.currentCat=n}),500-(3==this.currentCat?100:0)):this.currentCat=n)},onEndGame:function(t){t.cancel||this.$refs.challenge.checkGame()},onStartGame:function(t){var e=this,n=t.game;t.isNext||(clearInterval(this.intervalSwitch),clearTimeout(this.intervalGame),0!=n?this.intervalGame=setTimeout((function(){e.disable=!0}),400):(this.$refs.pb.enable(),this.disable=!1))},onChallengeFromEnd:function(){this.$refs.pb.enable(),this.disable=!1}},data:function(){return{intervalSwitch:null,intervalGame:null,hide:!0,currentCat:0,disable:!1,content:["waku","niko","doki","waku"]}}}),c=(n(309),n(5)),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"game-desc",class:{disable:t.disable,hide:t.hide}},[n("div",{staticClass:"game-desc-content",class:{hide:3==t.currentCat}},[n("div",{staticClass:"gd-icon"}),t._v(" "),n("p",{staticClass:"content-gd",domProps:{innerHTML:t._s(t.$t("content."+t.content[t.currentCat]))}}),t._v(" "),n("div",{staticClass:"pbcon"},[n("play-btn",{ref:"pb",attrs:{label:"play",game:!0,current:t.currentCat}})],1)]),t._v(" "),n("challenge",{ref:"challenge",class:{hide:3!=t.currentCat}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{PlayBtn:n(155).default,Challenge:n(211).default})},function(t,e,n){"use strict";n.r(e);var r=n(1),o={computed:{muteStatus:function(){var t=this.$store.state.sound.mute;return r.b.trigger({name:"mute"},t),t}},mounted:function(){this.init()},methods:{init:function(){this.scope=Object(r.a)(this)},swithSoundState:function(t){t&&t.preventDefault(),this.$store.state.sound.mute||this.$store.commit("sound/playSound","nani"),this.$store.commit("sound/mute")},rollOver:function(b){b&&this.$store.commit("sound/playSound","hover_little"),r.b.trigger({name:"contactOver"},{over:b})}}},c=(n(282),n(5)),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("button",{staticClass:"sound-btn",class:{isActive:!t.muteStatus},attrs:{type:"button","aria-label":"Sound"},on:{mouseenter:function(e){return t.rollOver(!0)},mouseleave:function(e){return t.rollOver(!1)},mousedown:function(e){return t.swithSoundState(e)},touchstart:function(e){return e.preventDefault(),t.swithSoundState()}}},[t._m(0)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sb-content"},[e("i",{staticClass:"icon-sound"}),this._v(" "),e("i",{staticClass:"icsclose icon-close"}),this._v(" "),e("div",{staticClass:"sound-on"},[e("div",{staticClass:"sound-on-i"}),this._v(" "),e("div",{staticClass:"sound-on-i soi-m"})])])}],!1,null,null,null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var r=n(77),o=n(33),c=n(6),l={props:{cp:{type:Object,required:!0,default:{}}},data:function(){return{mail:"",loading:!1,active:!1}},methods:{rollOver:function(b){b&&this.$store.commit("sound/playSound","hover_"+Math.round(.5+3.5*Math.random()))},focusInput:function(){this.$refs.email&&this.$refs.email.focus()},validEmail:function(){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(this.mail)},sendSesMail:function(){var t=this;this.$ga.event("Interaction","send-mail-init");var e=o.a.url+"?challengeMe="+this.cp.uid,n=o.a.url+"?moreFun="+this.cp.uid,title="ZIZO PARTY - "+this.$t("contact.title")+" üèùÔ∏è",c='Continue your game <a href="'+n+'">here</a> <br>Let your friends challenge your score with this link <a href="'+e+'">'+e+"</a><br>We will let you know when we release our next games!‚ù§Ô∏è";"ja"==this.$i18n.locale?c='„Ç≤„Éº„É†„ÇíÁ∂ö„Åë„Çã„ÄÄ‚Üí <a href="'+n+'">„Åì„Å°„Çâ</a> <br>Âèã„Å†„Å°„Å´„Åä„Åô„Åô„ÇÅ„Åô„ÇãÔºà„Åì„ÅÆURL„Åß„ÅÇ„Å™„Åü„Å®ÂØæÊà¶„Åß„Åç„Åæ„ÅôÔºâ„ÄÄ‚Üí <a href="'+e+'">'+e+"</a><br>Êñ∞„Åó„ÅÑ„Ç≤„Éº„É†„Çí„É™„É™„Éº„Çπ„Åô„ÇãÈöõ„Å´„ÅØ„ÅäÁü•„Çâ„Åõ„Åó„Åæ„Åô„Å≠ÔºÅ‚ù§Ô∏è":"fr"==this.$i18n.locale&&(c='Continuez votre partie <a href="'+n+'">ici</a> <br>D√©fiez vos amis avec ce lien <a href="'+e+'">'+e+"</a><br>Nous vous informerons de la sortie de nos prochains jeux !‚ù§Ô∏è"),Object(r.f)({to:this.mail,title:title,message:c}).then((function(data){t.$ga.event("Interaction","send-mail-"+(data?"success":"error"))}))},sendMail:function(){var t=this;this.validEmail()&&(this.$ga.event("Interaction","share-mail-init"),this.loading=!0,this.cp.mail=this.mail,Object(r.g)().then((function(data){data?(t.cp.mailed=!0,t.$ga.event("Interaction","share-mail-success"),Object(c.a)({easing:"easeOutBack",targets:".mail-sub",translateY:[80,0],translateZ:0,opacity:[0,1],duration:500})):t.handleApiError()})),this.sendSesMail())},handleApiError:function(){this.loading=!1,this.$ga.event("Interaction","share-mail-error")}}},h=(n(306),n(5)),component=Object(h.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mail-sub",class:{sent:t.cp&&t.cp.mailed}},[t.cp&&!t.cp.mailed?n("p",{staticClass:"mslabel",domProps:{innerHTML:t._s(t.$t("challenge.emailTitle"))}}):t._e(),t._v(" "),t.cp&&!t.cp.mailed?n("form",{on:{submit:function(e){return e.preventDefault(),t.sendMail(e)}}},[n("label",{staticClass:"mlabelin",attrs:{for:"email"}},[t._v(t._s(t.$t("challenge.email")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.mail,expression:"mail"}],ref:"email",attrs:{type:"email",id:"email",disabled:t.loading},domProps:{value:t.mail},on:{mousedown:function(e){return t.focusInput()},touchstart:function(e){return e.preventDefault(),t.focusInput()},input:function(e){e.target.composing||(t.mail=e.target.value)}}}),t._v(" "),n("button",{staticClass:"mail-send",class:{active:t.validEmail(),loading:t.loading},on:{mouseenter:function(e){return t.rollOver(!0)},mousedown:function(e){return t.sendMail()},touchstart:function(e){return e.preventDefault(),t.sendMail()}}},[n("span",[t._v("‚Üí")]),t._v(" "),t.loading?n("div",{staticClass:"lds-ring"},[n("div"),n("div"),n("div"),n("div")]):t._e()])]):t._e(),t._v(" "),t.cp&&t.cp.mailed?n("div",{staticClass:"mailed",domProps:{innerHTML:t._s(t.$t("challenge.emailed"))}}):t._e(),t._v(" "),n("p",{staticClass:"mlc",domProps:{innerHTML:t._s(t.$t("challenge.emailCredits"))}})])}),[],!1,null,null,null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(63);var r=n(1),o={props:{current:{type:Number,required:!1,default:0}},mounted:function(){this.init()},beforeDestroy:function(){this.scope.unregister(this)},methods:{init:function(){var t=this;this.scope=Object(r.a)(this),this.tof=setTimeout((function(){t.enable=!0}),1100)},onStartGame:function(t){var e=t.game;this.enable=0!=e},onEndGame:function(){this.tof&&(clearTimeout(this.tof),this.tof=null),this.enable=!1},onEndGameKeyboard:function(){this.stopGame()},stopGame:function(){this.$ga.event("Interaction","cancel-game"),this.onEndGame(),r.b.trigger({name:"startGame"},{game:0}),r.b.trigger({name:"changeMusic"},{name:"menu_loop"})}},data:function(){return{tof:null,enable:!1}}},c=(n(280),n(5)),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"game-time",class:{enable:t.enable},on:{mousedown:function(e){return t.stopGame()},touchstart:function(e){return e.preventDefault(),t.stopGame()}}},[n("i",{staticClass:"icon-close"})])}),[],!1,null,null,null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(63);var r=n(1),o={props:{current:{type:Number,required:!1,default:0}},mounted:function(){this.init()},beforeDestroy:function(){this.scope.unregister(this)},methods:{init:function(){var t=this;this.scope=Object(r.a)(this),setTimeout((function(){t.enable=!0,t.animStep=!1,t.interval=setInterval((function(){t.animStep=!t.animStep}),1e3)}),100)},onGameBegin:function(){this.enable=!1,this.interval&&clearInterval(this.interval)},onStartGame:function(t){var e=t.game;this.enable=0!=e,this.enable||this.interval&&clearInterval(this.interval)}},data:function(){return{enable:!1,interval:null,animStep:!0}}},c=(n(278),n(5)),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tutorial",class:[{enable:t.enable},{animStep:t.animStep}]},[1==t.current?n("div",{staticClass:"tutorial-01"},[n("div",{staticClass:"tutorial-01-bg"}),t._v(" "),n("div",{staticClass:"tutorial-01-wave"}),t._v(" "),n("div",{staticClass:"tutorial-01-txt"}),t._v(" "),n("div",{staticClass:"tutorial-01-people"})]):t._e(),t._v(" "),2==t.current?n("div",{staticClass:"tutorial-02"},[n("div",{staticClass:"tutorial-02-boat"}),t._v(" "),n("div",{staticClass:"tutorial-02-people"}),t._v(" "),n("div",{staticClass:"tutorial-02-bomb"}),t._v(" "),n("div",{staticClass:"tutorial-02-bomb-b"}),t._v(" "),n("div",{staticClass:"tutorial-02-txt"})]):t._e(),t._v(" "),3==t.current?n("div",{staticClass:"tutorial-03"},[n("div",{staticClass:"tutorial-03-dragon"}),t._v(" "),n("div",{staticClass:"tutorial-03-target"}),t._v(" "),n("div",{staticClass:"tutorial-03-bot"}),t._v(" "),n("div",{staticClass:"tutorial-03-player"}),t._v(" "),n("div",{staticClass:"tutorial-03-txt"})]):t._e()])}),[],!1,null,null,null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(24),n(63);var r=n(1),data=n(3),o=n(6),c=n(2),l={props:{current:{type:Number,required:!1,default:0}},mounted:function(){this.init()},methods:{init:function(){this.scope=Object(r.a)(this),this.getAvatars()},getAvatars:function(){this.currentPlayer=data.d.character,0==this.currentPlayer.length&&(this.currentPlayer="sushi"),this.playerA=data.a[0].character,this.playerAName=data.a[0].name,this.playerB=data.a[1].character,this.playerBName=data.a[1].name},onStartGame:function(t){var e=t.game,n=t.isNext;if(0!=e)this.visible=!0,this.scorePlayer=this.scoreA=this.scoreB=this.watermelonCp=this.watermelonA=this.watermelonB=0,this.animateIn();else{if(n)return;this.animateOut()}},onScoreUpdate:function(t){var e=t.character,n=t.score,r="."+(1==e?"c":0==e?"a":"b")+"pl-infos";1==this.current&&0!=n&&Object(o.a)({targets:r+" .jump-score",easing:"easeOutElastic(1, .5)",duration:500,scale:[0,1],translateZ:0}),1==e?1==this.current||2==this.current?this.scorePlayer=Math.floor(n):3==this.current&&0!=n&&(this.watermelonCp=n):0==e?1==this.current||2==this.current?this.scoreA=Math.floor(n):3==this.current&&0!=n&&(this.watermelonA=n):1==this.current||2==this.current?this.scoreB=Math.floor(n):3==this.current&&0!=n&&(this.watermelonB=n),3==this.current&&c.a.nextTick((function(){Object(o.a)({targets:r+" .watermelon"+(0==n?"":":first-child"),easing:0==n?"easeInBack":"easeOutBack",duration:300,scale:0==n?0:[0,1],translateZ:0,delay:o.a.stagger(50,{from:0!=n?"last":"first"})})}))},animateIn:function(){var t=this;this.anime=o.a.timeline({autoplay:!1,easing:"easeOutBack",duration:700,complete:function(){t.anime=null}}).add({targets:".player-portrait",scale:[0,1],translateZ:0,delay:o.a.stagger(100,{from:"first"})},500).add({targets:".jump-score",scale:[0,1],translateZ:0,delay:o.a.stagger(100,{from:"first"})},500)},onEndGame:function(t){t.cancel;this.animateOut()},animateOut:function(){var t=this;this.anime=o.a.timeline({autoplay:!1,easing:"easeInBack",duration:500,complete:function(){t.scorePlayer=t.scoreA=t.scoreB=t.watermelonCp=t.watermelonA=t.watermelonB=0,t.visible=!1,t.anime=null}}).add({targets:".player-portrait",scale:0,translateZ:0,delay:o.a.stagger(60,{from:"first"})},0).add({targets:".jump-score",scale:0,translateZ:0,delay:o.a.stagger(60,{from:"first"})},0).add({targets:".cpl-infos .watermelon",scale:0,translateZ:0,delay:o.a.stagger(40,{from:"last"})},0).add({targets:".apl-infos .watermelon",scale:0,translateZ:0,delay:o.a.stagger(40,{from:"last"})},0).add({targets:".bpl-infos .watermelon",scale:0,translateZ:0,delay:o.a.stagger(40,{from:"last"})},0)},onRaf:function(t){var e=t.now;this.anime&&this.anime.tick(e)}},data:function(){return{visible:!1,currentPlayer:"",watermelonCp:0,scorePlayer:0,playerA:"",playerAName:"",watermelonA:0,scoreA:0,playerB:"",playerBName:"",watermelonB:0,scoreB:0}}},h=(n(274),n(5)),component=Object(h.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"players-portraits",class:{visible:t.visible}},[n("div",{staticClass:"cpl-infos"},[n("div",{staticClass:"player-portrait current-player"},[t.currentPlayer.length>0?n("picture",[n("source",{attrs:{type:"image/webp",srcset:"/portraits/"+t.currentPlayer+".webp"}}),t._v(" "),n("img",{attrs:{src:"/portraits/"+t.currentPlayer+".png"}})]):t._e()]),t._v(" "),n("div",{staticClass:"jump-score",class:{visible:1==t.current||2==t.current}},[n("span",[t._v(t._s(t.scorePlayer))])]),t._v(" "),n("div",{staticClass:"watermelons",class:{visible:3==t.current}},t._l(t.watermelonCp,(function(t,e){return n("div",{key:"cp"+e,staticClass:"watermelon"})})),0)]),t._v(" "),n("div",{staticClass:"apl-infos"},[n("div",{staticClass:"player-portrait a-player"},[t.playerA.length>0?n("picture",[n("source",{attrs:{type:"image/webp",srcset:"/portraits/"+t.playerA+".webp"}}),t._v(" "),n("img",{attrs:{src:"/portraits/"+t.playerA+".png"}})]):t._e()]),t._v(" "),n("div",{staticClass:"jump-score js-small",class:{visible:1==t.current||2==t.current}},[n("span",[t._v(t._s(t.scoreA))])]),t._v(" "),n("div",{staticClass:"watermelons watermelons-small",class:{visible:3==t.current}},t._l(t.watermelonA,(function(t,e){return n("div",{key:"cp"+e,staticClass:"watermelon"})})),0)]),t._v(" "),n("div",{staticClass:"bpl-infos"},[n("div",{staticClass:"player-portrait b-player"},[t.playerB.length>0?n("picture",[n("source",{attrs:{type:"image/webp",srcset:"/portraits/"+t.playerB+".webp"}}),t._v(" "),n("img",{attrs:{src:"/portraits/"+t.playerB+".png"}})]):t._e()]),t._v(" "),n("div",{staticClass:"jump-score js-small",class:{visible:1==t.current||2==t.current}},[n("span",[t._v(t._s(t.scoreB))])]),t._v(" "),n("div",{staticClass:"watermelons watermelons-small",class:{visible:3==t.current}},t._l(t.watermelonB,(function(t,e){return n("div",{key:"cp"+e,staticClass:"watermelon"})})),0)])])}),[],!1,null,null,null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(63);var data=n(3),r=n(1),o=n(6),c={props:{current:{type:Number,required:!1,default:0}},mounted:function(){this.init()},beforeDestroy:function(){this.scope.unregister(this)},methods:{init:function(){this.scope=Object(r.a)(this)},rollOver:function(b){this.$store.commit("sound/playSound","hover_"+Math.round(.5+3.5*Math.random()))},action:function(t){var e=this;r.b.trigger({name:"stopMusic"}),r.b.trigger({name:"hideEndScreen"}),this.disable=!0,this.animateOut(),r.b.trigger({name:"lowPass"},!1),setTimeout((function(){if(e.hide=!0,"challenge"!=t){e.$ga.event("Interaction","home"==t?"back-home":"replay"==t?t:"next-game-"+e.current+1);var n=3!=e.current?e.current+1:1;"home"!=t&&"replay"!=t?(r.b.trigger({name:"startGame"},{game:0,isNext:!0}),r.b.trigger({name:"navigation"},{cat:n-1,isNext:!0}),r.b.trigger({name:"nextGame"},{nav:n-1}),setTimeout((function(){r.b.trigger({name:"startGame"},{game:n})}),2500+(3==n?500:0))):("home"==t&&r.b.trigger({name:"changeMusic"},{name:"menu_loop"}),r.b.trigger({name:"startGame"},{game:"home"==t?0:e.current}))}else r.b.trigger({name:"startGame"},{game:0,isNext:!0}),r.b.trigger({name:"navigation"},{cat:3}),r.b.trigger({name:"changeMusic"},{name:"menu_loop"}),e.$ga.event("Interaction","challenge-from-end-screen"),setTimeout((function(){r.b.trigger({name:"challengeFromEnd"})}),1e3)}),720)},onShowEndScreen:function(){var t=this,e=1==this.current?data.d.scores.level1.current:2==this.current?data.d.scores.level2.current:data.d.scores.level3.current,n=1==this.current?data.d.scores.level1.max:2==this.current?data.d.scores.level2.max:data.d.scores.level3.max;this.congratulation=e<50?"wellTried":e>100?"amazing":"congratulation",e==n&&0!=n&&(this.newRecord=!0,1==this.current?data.d.scores.level1.max=e:2==this.current?data.d.scores.level2.max=e:data.d.scores.level3.max=e),this.$ga.event("Interaction","complete-game-"+this.current);var p=data.b.session;if(p){var c=p.level1.length>0,l=p.level2.length>0,h=p.level3.length>0;this.showChallenge=c&&l&&h,this.showChallenge&&r.b.trigger({name:"checkAllGameComplete"})}this.disable=this.hide=!1,this.timeline=o.a.timeline({easing:"easeOutBack",autoPlay:!1}).add({targets:".end-game p",translateY:[200,0],translateZ:0,opacity:[0,1],duration:500},0).add({targets:this.score,value:[0,e],round:!0,easing:"easeOutSine",duration:800,delay:100},0).add({targets:".end-game h2",translateY:[200,0],translateZ:0,opacity:[0,1],duration:500,delay:800},0).add({targets:".new-record",scale:[0,1],rotate:[0,20],translateZ:0,duration:600,easing:"easeOutElastic(1, .5)",delay:800},0).add({targets:".end-game .btn-eg",translateY:[230,0],translateZ:0,duration:500,delay:o.a.stagger(80,{start:900}),complete:function(){t.timeline=null}},0)},onRaf:function(t){var e=t.now;this.timeline&&this.timeline.tick(e)},animateOut:function(){var t=this;data.g.sound.commit("sound/playSound",{fileName:"generic_woosh_"+Math.round(.5+5.5*Math.random()),volume:1}),this.timeline=o.a.timeline({easing:"easeInBack",autoPlay:!1}).add({targets:".new-record",scale:0,rotate:0,translateZ:0,duration:600},0).add({targets:".end-game-content",translateY:[0,-200],translateZ:0,opacity:{value:[1,0],duration:200,delay:300},duration:500,complete:function(){t.timeline=null}},0)}},data:function(){return{score:{value:0},showChallenge:!0,newRecord:!1,congratulation:"congratulation",timeline:null,disable:!0,hide:!0}}},l=(n(311),n(5)),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"end-game",class:{disable:t.disable,hide:t.hide}},[n("div",{staticClass:"new-record",class:{visible:t.newRecord}},[n("span",{domProps:{innerHTML:t._s(t.$t("end.record"))}})]),t._v(" "),n("div",{staticClass:"end-game-container"},[n("div",{staticClass:"end-game-content"},[n("p",[t._v("\n        "+t._s(t.$t("end.score"))),n("span",{staticClass:"score-eg"},[t._v(t._s(t.score.value))])]),t._v(" "),n("h2",{domProps:{innerHTML:t._s(t.$t("end."+t.congratulation))}}),t._v(" "),n("ul",[n("li",[n("button",{staticClass:"btn-eg",on:{mouseenter:function(e){return t.rollOver()},mousedown:function(e){return t.action(t.showChallenge?"challenge":"next")},touchstart:function(e){return e.preventDefault(),t.action(t.showChallenge?"challenge":"next")}}},[n("div",{staticClass:"icn-eg"},[t.showChallenge?t._e():n("i",{class:"icon-"+(3!=t.current?t.current+1:1)}),t._v(" "),t.showChallenge?n("div",{staticClass:"chall-icon-c chall-icon-end"}):t._e()]),t._v(" "),n("span",{staticClass:"lb-eg-btn",domProps:{innerHTML:t._s(t.$t(t.showChallenge?"navigation.challengeLabel":"end.nextGame"))}})])]),t._v(" "),n("li",[n("button",{staticClass:"btn-eg",on:{mouseenter:function(e){return t.rollOver()},mousedown:function(e){return t.action("replay")},touchstart:function(e){return e.preventDefault(),t.action("replay")}}},[t._m(0),t._v(" "),n("span",{staticClass:"lb-eg-btn",domProps:{innerHTML:t._s(t.$t("end.replay"))}})])]),t._v(" "),n("li",[n("button",{staticClass:"btn-eg",on:{mouseenter:function(e){return t.rollOver()},mousedown:function(e){return t.action("home")},touchstart:function(e){return e.preventDefault(),t.action("home")}}},[t._m(1),t._v(" "),n("span",{staticClass:"lb-eg-btn",domProps:{innerHTML:t._s(t.$t("end.close"))}})])])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icn-eg"},[e("i",{staticClass:"icon-replay"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icn-eg"},[e("i",{staticClass:"icon-close"})])}],!1,null,null,null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var r=n(1),o={mounted:function(){this.init()},methods:{init:function(){this.scope=Object(r.a)(this)},reload:function(){localStorage.clear(),location.reload()},rollOver:function(b){this.$store.commit("sound/playSound",b?"hover_"+Math.round(.5+3.5*Math.random()):"menu_start_hover_back"),r.b.trigger({name:"contactOver"},{over:b,color:b?[.1411764706,.09411764706,.09019607843]:[1,1,1]})}}},c=(n(266),n(5)),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"new-player-btn",on:{mousedown:t.reload,touchstart:function(e){return e.preventDefault(),t.reload(e)},mouseover:function(e){return t.rollOver(!0)},mouseleave:function(e){return t.rollOver(!1)}}},[n("span",[t._v(t._s(t.$t("newPlayer")))])])}),[],!1,null,null,null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var r=n(1),o={props:{isRight:{type:Boolean,required:!1,default:!0}},data:function(){return{disTo:null,disable:!1,hide:!0,wait:!1}},mounted:function(){this.init()},methods:{init:function(){this.scope=Object(r.a)(this)},onPickCharacter:function(){this.charSelected=!0},enable:function(){this.disable=!1},show:function(b){this.hide=!b},select:function(){var t=this;if(!this.wait){this.wait=!0,this.disTo=setTimeout((function(){t.wait=!1}),400);var e=this.isRight?"right":"left";this.$store.commit("sound/playSound",this.isRight?"fleche_droite":"fleche_gauche"),this.$ga.event("Interaction","pick-character-carousel-"+e),r.b.trigger({name:"pickChange"},{direction:e})}},rollOver:function(b){this.$store.commit("sound/playSound",b?"hover_"+Math.round(.5+3.5*Math.random()):"menu_start_hover_back"),r.b.trigger({name:"contactOver"},{over:b,color:b?[.1411764706,.09411764706,.09019607843]:[1,1,1]})}}},c=(n(264),n(5)),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"select-btn",class:[{disable:t.disable},{hide:t.hide},{isRight:t.isRight}],on:{mousedown:t.select,touchstart:function(e){return e.preventDefault(),t.select(e)},mouseenter:function(e){return t.rollOver(!0)},mouseleave:function(e){return t.rollOver(!1)}}},[n("span",{domProps:{innerHTML:t._s(t.isRight?"‚Üí":"‚Üê")}})])}),[],!1,null,null,null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);n(63);var r={props:{progress:{type:Number,required:!1,default:99},showProgress:{type:Boolean,required:!1,default:!1},hideCountdown:{type:Boolean,required:!1,default:!1}},methods:{}},o=(n(260),n(5)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ldlg"},[n("span",{staticClass:"progress-ldlg",class:{show:t.showProgress&&!t.hideCountdown}},[t._v(t._s(10-Math.ceil(t.progress/10)))]),t._v(" "),n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 343.46 235.98"}},[n("g",{attrs:{id:"Layer_2"}},[n("g",[n("g",{attrs:{id:"bomb-container"}},[n("g",{attrs:{id:"bomb"}},[n("path",{attrs:{d:"M343.37,179.57v-.07a3.35,3.35,0,0,0,.09-.68,1.8,1.8,0,0,1,0-.22c0-.15,0-.31-.07-.45a.84.84,0,0,1-.07-.24c-.05-.12-.13-.26-.18-.39a1.67,1.67,0,0,0-.13-.2,3,3,0,0,0-.28-.34s-.07-.1-.1-.13v0a2.71,2.71,0,0,0-.84-.55,2.62,2.62,0,0,0-.93-.19,24.6,24.6,0,0,0-11.72,2.77c-1.67-2.9-3.69-5-5.48-5.73a2.93,2.93,0,0,0-2.26-.09L309.72,178c-.62-.65-1.25-1.27-1.92-1.86l-.24-.2c-.42-.36-.86-.73-1.31-1.09,0,0-.06,0-.11-.08a32.25,32.25,0,0,0-49.09,12.17,12.49,12.49,0,0,0-.53,1.18,30.89,30.89,0,0,0-1.62,5.23,32.26,32.26,0,0,0,19.33,36.84,31.71,31.71,0,0,0,10.27,2.33,32.28,32.28,0,0,0,34-28.48.44.44,0,0,1,0-.16c.06-.55.1-1.12.14-1.67,0-.11,0-.21,0-.31,0-.89.05-1.78,0-2.68l11.66-4.91c2.27-.95,2.61-5.37,1-10.4a19.75,19.75,0,0,1,9.35-2.32,2.83,2.83,0,0,0,1.33-.3A2.79,2.79,0,0,0,343.37,179.57Zm-47.44,37.85c-3.95,1.67-7.07,1.48-9.64,0a8.79,8.79,0,0,1-1.46-1c-2.88-1.95-7.68,1.07-9,1.6l-.68.3a3.12,3.12,0,0,1-4.05-1.55,3.08,3.08,0,0,1,1.6-4.1,3.07,3.07,0,1,1-2.38-5.66,3.07,3.07,0,1,1-2.38-5.66,3.09,3.09,0,0,1-4.06-1.72,3,3,0,0,1,.21-2.57,2.8,2.8,0,0,1,1.4-1.31.31.31,0,0,1,.14-.09l.66-.28c1.28-.54,6.86-2.2,7.42-5.3.35-3.64,2.35-6.63,7.06-8.62a19.5,19.5,0,0,1,25.53,10.41c.15.35.3.73.42,1.1A19.48,19.48,0,0,1,295.93,217.42Z",fill:"#231916"}}),t._v(" "),n("path",{class:{eyeBombHide:t.showProgress},attrs:{d:"M280.9,189.77a2.6,2.6,0,1,0,1.41,3.38A2.6,2.6,0,0,0,280.9,189.77Zm0,0a2.6,2.6,0,1,0,1.41,3.38A2.6,2.6,0,0,0,280.9,189.77Zm0,0a2.6,2.6,0,1,0,1.41,3.38A2.6,2.6,0,0,0,280.9,189.77Zm0,0a2.6,2.6,0,1,0,1.41,3.38A2.6,2.6,0,0,0,280.9,189.77Zm0,0a2.6,2.6,0,1,0,1.41,3.38A2.6,2.6,0,0,0,280.9,189.77Z",fill:"#231916"}}),t._v(" "),n("path",{class:{eyeBombHide:t.showProgress},attrs:{id:"eye_bomb",d:"M288.64,208.2a2.59,2.59,0,1,0,1.43,3.37A2.61,2.61,0,0,0,288.64,208.2Z",fill:"#231916"}}),t._v(" "),n("path",{attrs:{id:"wink",d:"M288.94,212.41a3.07,3.07,0,0,0,2.23-1.84,3.12,3.12,0,0,0-1.7-4,3.87,3.87,0,0,0-3,.22c-.48.2,2.78.73,3.19,2.3C290.05,210.46,288.67,212.46,288.94,212.41Z",fill:"#231916"}})])]),t._v(" "),n("g",{attrs:{id:"dragon"}},[n("path",{attrs:{d:"M16.27,152.17h0c3.69,3.05,6.71,6.07,6.19,10.32a13.73,13.73,0,0,1-8.18,11.4,7.8,7.8,0,0,0-4.67,5.9,16.84,16.84,0,0,0-.08,1.9,19.32,19.32,0,0,1,2.18.16c5.66,1.05,8.25,6,5.67,11.34-1.84,3.83-8.59,6.61-13.11,4.17-5.9-3.17-4.92-9.5-1.68-12.41a2.06,2.06,0,0,0,.72-1.85,13.86,13.86,0,0,1,8-14.9c4.08-1.86,5.81-6.28,5.77-10.76A19.37,19.37,0,0,0,16.27,152.17Z",fill:"#231916"}}),t._v(" "),n("g",{attrs:{id:"eyebrow"}},[n("path",{attrs:{d:"M24.13,171.25a4,4,0,0,0,5.43.09l.17-.16.66-.7L45.7,154.31l3.6-3.81a4,4,0,0,0-5.64-5.72l-.19.18L23.92,165.62A4,4,0,0,0,24.13,171.25Z",fill:"#231916"}})]),t._v(" "),n("path",{attrs:{d:"M39.93,235.6l-2.54-5.68,17-.35-2.6-5.84c5.72-.13,11.33-.25,17.1-.36l-2.61-5.85,4.43-.1c5.33-.09,10.61-.1,15.76-1.71a22,22,0,0,0,13.74-30.21l-11.21,4.8a2.43,2.43,0,0,0-.28-.2,4,4,0,0,0,.4-.52c4.9-9.92,6-16.78.76-27.08a71.17,71.17,0,0,1-3.35-7.65,10.9,10.9,0,0,0-.57-1.13c-1.31,1.47-1.41,1.35-4.12,6.79a6.21,6.21,0,0,1-3.33,3.18l-1.71.75c-2.14,1-4.3,1.87-6.64,2.88.12-.65.19-1.12.3-1.57q1.51-6.85,3-13.72l8.49-6a3.09,3.09,0,0,0,.47-4.55,3.22,3.22,0,0,0-4.24-.41L75.58,143c.29-1.33.6-2.65.88-4a3.42,3.42,0,0,0-.21-2.16c-1.54-3.56-3.17-7.1-4.78-10.64-.15-.35-.3-.68-.46-1a3.15,3.15,0,0,0-4.07-1.64l-.24.11a3,3,0,0,0-1.54,4l3.24,7.24a1.48,1.48,0,0,0-.25.25L63.05,133a3,3,0,0,0-4,1.67l-.09.24a3.17,3.17,0,0,0,1.83,4l8.43,3.3c-1.4,6.22-2.79,12.35-4.13,18.48-.67,3.06-1.62,6.09-1.82,9.18a18.48,18.48,0,0,1-18.43,17.19,19.27,19.27,0,0,1-13.54-5.43c-.31-.27-.84-.7-1.08-.59-2.19.85-4.33,1.8-6.47,2.71,2.81,7.69-.49,17.72-11.46,20.34A2.75,2.75,0,0,0,10.41,208c.31.69.61,1.38.93,2.08l1.38-.6L16.08,208a6.36,6.36,0,0,0,6.26,2.55l-1.91-4.4q9.09-3.93,18.22-7.81c4.17-1.77,7.5-1.07,9.3,3.07s-.14,6.54-4.22,8.31L17.58,220.94l-1.18.49C20.72,231.48,31.56,236.71,39.93,235.6Z",fill:"#231916"}}),t._v(" "),n("path",{attrs:{d:"M56.15,160.71a14.58,14.58,0,0,0-6.9-5.51l-17.2,18.17c-.09.11-.21.21-.31.31a2.51,2.51,0,0,1-.31.26,12.5,12.5,0,0,0,.66,1.32,14.56,14.56,0,0,0,17,6.74A14,14,0,0,0,56.15,160.71Zm-13.72,14A3.53,3.53,0,1,1,46,171.19,3.53,3.53,0,0,1,42.43,174.72Z",fill:"#231916"}})]),t._v(" "),n("g",{attrs:{id:"party-bg",fill:"#231916"}},[n("path",{attrs:{d:"M81.55 229.92a2 2 0 01-2-2L79.27 174a2 2 0 01.58-1.42 2 2 0 011.41-.59l25.47-.13a26.24 26.24 0 0114.32 4l.89-2.64a2 2 0 011.89-1.37l22.91-.11a2 2 0 011.9 1.34l1.65 4.78v-4.14a2 2 0 012-2l26.41-.13a29.07 29.07 0 017.91 1 2 2 0 011.78-1.1l55.51-.28a2 2 0 011.78 1.07l4 7.62 3.69-7.62a2 2 0 011.79-1.13l24.29-.12a2 2 0 011.75 3L262.34 208l.09 19.14a2 2 0 01-.58 1.42 2 2 0 01-1.41.59l-21.26.11a2 2 0 01-2-2l-.09-19.13-7.22-12.7h-5.1l.16 31.87a2 2 0 01-.57 1.42 2 2 0 01-1.42.59l-21.26.11a2 2 0 01-1.41-.58 2.05 2.05 0 01-.2-.23l-1.15.36a19.83 19.83 0 01-5.66.82H193c-5.26 0-11.67-.76-17.18-5.81v3.56a2 2 0 01-2 2l-30.82.16a2 2 0 01-1.9-1.38l-2.62-8.09h-6l-2.41 8.08a2 2 0 01-1.91 1.43l-22.43.11a2 2 0 01-1.49-.66 2.07 2.07 0 01-1.41.59zm23.24-5.58l2.84-8.46h-2.89zm94.41-19.47l.35-.05v-.47z"}}),n("path",{attrs:{d:"M279.4 173.11l-19.07 34.33.1 19.67-21.25.1-.1-19.66-8.08-14.17-8.27.05.17 33.87-21.25.1-.17-33.87h-.9c0 5.87-2.34 10.64-6.56 13.77a8.92 8.92 0 00.91 0 12.07 12.07 0 001.56-.11l4.54-.58.1 19.5-2.86.89a17.87 17.87 0 01-5.07.74h-.2c-6.55 0-13.73-1.25-19.21-9.22v9l-30.79.18-3-9.48-9 .05-2.84 9.5-22.42.12 4.79-14.27a28.14 28.14 0 01-3.7.27h-4.07l.07 13.9-21.25.11-.31-53.9 25.47-.13a23.25 23.25 0 0115.33 5.28l1.77-5.28 22.9-.11 5.62 16.24-.08-16.21 26.41-.13a26.16 26.16 0 019.7 1.77v-1.82l55.5-.28 5.82 11.15 5.43-11.21 24.27-.12m0-4l-24.27.12a4 4 0 00-3.59 2.26l-2 4-2.13-4.08a4 4 0 00-3.56-2.16l-55.5.28a4.05 4.05 0 00-2.46.86 31.43 31.43 0 00-7.21-.81l-26.43.13a4 4 0 00-2.77 1.13 4 4 0 00-2.75-1.1l-22.9.12a4 4 0 00-3.78 2.73l-.11.32a28.91 28.91 0 00-13.19-3.05l-25.51.1a4 4 0 00-4 4l.27 53.9a4 4 0 004 4l21.25-.11a3.83 3.83 0 001.34-.24 4 4 0 001.55.31l22.42-.11a4 4 0 003.82-2.86l2-6.66h3.09l2.17 6.69a4 4 0 003.81 2.78l30.77-.16a4 4 0 004-3.53c5.1 3.21 10.56 3.76 15.19 3.76h.27a21.87 21.87 0 006.27-.91h.09a4 4 0 002.07.57l21.25-.11a4 4 0 004-4l-.15-29.86h1.92l6.38 11.22.09 18.61a4 4 0 004 4l21.25-.11a4 4 0 004-4l-.1-18.62 18.57-33.41a4 4 0 00-3.51-5.95z"}})]),t._v(" "),n("g",{attrs:{id:"flower"}},[n("path",{attrs:{d:"M325.43 67.65c-13.71 25.68-34.59 43.87-35.95 45.75-.92 1.27.44 3.77 2.93 4.7 1.62-.26 22.61-25.33 34.36-48.75a6.69 6.69 0 001.05-.36h.06a4.16 4.16 0 10-2.45-1.35z",fill:"#231916",id:"pil"}}),n("circle",{attrs:{cx:"330.98",cy:"75.84",r:"2.6",fill:"#231916",id:"pil-02"}}),n("circle",{attrs:{cx:"324.5",cy:"83.23",r:"2.6",fill:"#231916",id:"pil-04"}}),n("circle",{attrs:{cx:"314.54",cy:"76.32",r:"2.6",fill:"#231916",id:"pil-03"}}),n("circle",{attrs:{cx:"318.03",cy:"67.92",r:"2.6",fill:"#231916",id:"pil-01"}}),n("path",{attrs:{d:"M287.51 100.38a1.07 1.07 0 001.94-.48c.94-8.17.74-14.73-.62-20a2.15 2.15 0 011.35-2.59 2.08 2.08 0 012.66 1.45c1.56 6 1.77 13.33.64 22.46a1.07 1.07 0 001.81.9c4.89-4.91 12.08-14.22 12.77-18.43 1-6.17-2.25-5.65-5.6-7.78s-5.42-8.8-13.22-9.55-9.15 4.31-11.29 4.49-11.82-1.93-14.79 6.56a32.94 32.94 0 0115.62 11c4.02 5.24 6.76 9.11 8.73 11.97z",fill:"#231916",id:"flo-05"}}),n("path",{attrs:{d:"M341 124.46c-.62-5.91 2.36-11.23.89-15.16s-5.5-5.12-8.33-7.17-2.78-12.07-15.44-8.86c-1.34 1.85-7.89 9.57-12.7 15.39a1.27 1.27 0 001.28 2 71.08 71.08 0 0119.79-1.8 2.09 2.09 0 011.87 2.47 2.14 2.14 0 01-2.29 1.67 68.67 68.67 0 00-20.55 2.28 1.27 1.27 0 000 2.45 44.2 44.2 0 019.53 4c10.64 6 15.8 13.14 16.75 17 5.29-.13 9.81-8.36 9.2-14.27z",fill:"#231916",id:"flo-04"}}),n("path",{attrs:{d:"M320.11 129.49A46.78 46.78 0 00302.5 121a1.86 1.86 0 00-1.8 3.09A43.92 43.92 0 01312 145.9a2.08 2.08 0 01-2.38 2.47 2.14 2.14 0 01-1.71-1.68 41.4 41.4 0 00-12.84-22A1.87 1.87 0 00292 126c-.08 7.14 1.33 22.84-9.21 34.84 1.73 5.56 6.29 13.17 12.71 12.64s6.25-2.68 14.39-.82 13.18-3.12 14.27-9.81 4.18-6.18 5.11-8.66 2.08-16-9.16-24.7z",fill:"#231916",id:"flo-03"}}),n("path",{attrs:{d:"M289.43 125.51a1.63 1.63 0 00-2.34-1.06 101.74 101.74 0 00-20.69 14.45 2.1 2.1 0 01-3-.12 2.21 2.21 0 01.21-3 105.77 105.77 0 0117.13-12.59 1.64 1.64 0 00-.54-3c-11.51-2-30.27-.46-35.77 3.84-4.94 3.87-3.72 13.12-4.13 18.86s.62 9.08 5.18 13.51 10.54 3.31 14 8.1 14.4 3.27 23.27-9.93c6.46-9.64 7.99-23.41 6.68-29.06z",fill:"#231916",id:"flo-02"}}),n("path",{attrs:{d:"M271.67 115.77a105.26 105.26 0 0112.7.58 1.17 1.17 0 001.07-1.86c-6.05-8-20.42-13-23.49-13.51a2.08 2.08 0 01-1.68-2.58 2.15 2.15 0 012.47-1.51c7.89 1.32 15.93 5.54 22.46 11.64a1.17 1.17 0 001.88-1.3 52.36 52.36 0 00-15-19.9c-11.4-8.93-22.21-6.26-23.65-3.86s-6.68 2.08-10 6.28-1.76 10.8-2.43 14.91 3.29 12.16 7.58 15c5.74-2.79 20.63-3.79 28.09-3.89z",fill:"#231916",id:"flo-01"}})]),t._v(" "),n("g",{attrs:{id:"boat"}},[n("path",{attrs:{d:"M156 104.4l-16.56-3.35-1 4.73-20.11-4.06 1.68-8.28L139 97.27a100 100 0 011.94-21.77 66.26 66.26 0 015.15-16.19l5.29 1.07 1-4.73-23.65-4.79 1.43-7.09 14.19 2.87s-1.88-2.85-.45-9.94a20.6 20.6 0 012.52-6.88l8.38 1.69 1-4.73-21.28-4.3 2-9.76L138.66.91a11 11 0 01-2.46-.22L134 .23l-4.31 21.29-21.28-4.3-1 4.73 5.81 1.17a20.72 20.72 0 00-2.5 6.88c-1.44 7.1.45 9.94.45 9.94l14.19 2.87-1.43 7.1-23.66-4.79-1 4.73 6.54 1.32a66.48 66.48 0 00-5.15 16.2 98.74 98.74 0 00-1.94 21.76l16.56 3.35-1.68 8.28-44.9-9.09L70.86 81l14.2 2.87a31.38 31.38 0 013.42-21.47l8 1.62 1-4.73L76.13 55l2-9.73 2.17-11.81a9.84 9.84 0 01-2.2-.23l-2.36-.47L71.39 54l-18.92-3.83-.95 4.73 6.21 1.26a31.36 31.36 0 00-3.42 21.46L66.13 80 64 90.72l-7.26-1.47L30.86 73l-1.43 7.09 14.89 16.5.51 2.84 1.82 9.94a18.74 18.74 0 00.87 5.1 18 18 0 0012.82 12.45l59.14 12a24 24 0 0018.12-3.55 21.88 21.88 0 002.71-2.08 23 23 0 003.7-4.18 23.69 23.69 0 003.9-9.06 7.24 7.24 0 008.53-5.66zm-41.1-26.16l.67-1.5a1.85 1.85 0 00-.28-2.2 8.54 8.54 0 01-2.29-7.15c.8-3.92 5.67-6.24 10.9-5.18s8.82 5.09 8 9a8.54 8.54 0 01-4.88 5.7 1.84 1.84 0 00-1.11 1.92l.25 1.6a1.86 1.86 0 01-2.21 2L116.13 81a1.85 1.85 0 01-1.24-2.76z",fill:"#231916"}}),t._v(" "),n("path",{attrs:{d:"M126.23 70.21a1.17 1.17 0 101.62.33 1.17 1.17 0 00-1.62-.33zm-8.8-1.8a1.17 1.17 0 101.61.34 1.16 1.16 0 00-1.61-.34zm8.8 1.8a1.17 1.17 0 101.62.33 1.17 1.17 0 00-1.62-.33zm-8.8-1.8a1.17 1.17 0 101.61.34 1.16 1.16 0 00-1.61-.34zm0 0a1.17 1.17 0 101.61.34 1.16 1.16 0 00-1.61-.34zm8.8 1.8a1.17 1.17 0 101.62.33 1.17 1.17 0 00-1.62-.33zm-8.8-1.8a1.17 1.17 0 101.61.34 1.16 1.16 0 00-1.61-.34zm8.8 1.8a1.17 1.17 0 101.62.33 1.17 1.17 0 00-1.62-.33zm0 0a1.17 1.17 0 101.62.33 1.17 1.17 0 00-1.62-.33zm-8.8-1.8a1.17 1.17 0 101.61.34 1.16 1.16 0 00-1.61-.34z",fill:"#231916",id:"eyes-2"}}),t._v(" "),n("path",{attrs:{fill:"#231916",id:"flag-r",d:"M143.75 12.06c4.73 1 4.26 3.32 9 4.28l2.39-11.83c-4.73-.95-4.25-3.32-9-4.28-3.75-.76-4.83.57-7.48.68l-2.29 11.81c2.56-.14 3.69-1.41 7.38-.66z"}}),t._v(" "),n("path",{attrs:{fill:"#231916",id:"flag-l",d:"M85.61 44.56c4.73 1 4.26 3.32 9 4.28L97 37c-4.73-1-4.25-3.32-9-4.28-3.87-.78-4.9.66-7.74.68l-2.17 11.82c2.66-.11 3.76-1.42 7.52-.66z"}})]),t._v(" "),n("path",{attrs:{d:"M257.44 91.46a41.39 41.39 0 00-27.39 10.34 14.16 14.16 0 00-13.65-10.39h-39.79a16.24 16.24 0 00-11.43 4.7 16.39 16.39 0 00-11.36-4.7h-8.75a16.24 16.24 0 00-11.57 4.85 14.09 14.09 0 00-10.71-4.9H83a16.33 16.33 0 00-16.3 16.28v5.63a16.43 16.43 0 0015 16l-11.53 24.35a14.17 14.17 0 004.52 18.71 14.18 14.18 0 007.84 2.36h39.76a16.27 16.27 0 0011.38-4.73 16.26 16.26 0 0011.21 4.72h9a16.24 16.24 0 0011.57-4.92 14.15 14.15 0 0010.75 5h39.78a16.33 16.33 0 0014.77-9.76 41.41 41.41 0 0026.63 9.72h.07a41.61 41.61 0 100-83.21z",fill:"#231916",id:"zizo-bg"}}),t._v(" "),n("g",{attrs:{id:"party"}},[n("path",{attrs:{d:"M83.41 176.53l23.27-.12c6.94 0 12.8 2.63 16.33 7.08l2.38-7.09 20-.09 9.18 26.45-.13-26.5 24.21-.12a23 23 0 0111.91 3v-3.09l52.21-.27 7.12 13.66 6.65-13.73 19.5-.09-17.63 31.74.09 18.15-17.16.08-.09-18.15-8.92-15.67-11.51.06.17 33.87-17.16.08-.17-33.87h-5.08c.06.62.1 1.25.1 1.88 0 6.49-3 11.34-8.48 13.91a5.54 5.54 0 004.88 2.1 14.71 14.71 0 001.82-.13l2.25-.29.08 15.67-1.41.45a15.58 15.58 0 01-4.48.64h-.25c-7.79 0-15.71-1.79-20.88-14.74v-.05h-.41l.08 14.56-27.23.14-3.06-9.47-12 .06-2.83 9.5-18 .09 5-14.95a24.34 24.34 0 01-6.8 1h-6.11l.07 13.9-17.16.09zm50.19 26.32h3.4l-1.79-5.56zm-32.93-5.58h4.17a5.23 5.23 0 003.24-.82 2.36 2.36 0 00.78-2.07c0-.85 0-2.85-4.19-2.85v-2l-.06 2h-4zm71-.87h5.18a5.54 5.54 0 003.27-.8 2.08 2.08 0 00.75-1.83c0-.76 0-2.53-4.19-2.53v-2l-.06 2h-5z",fill:"#fff"}}),n("path",{attrs:{d:"M272.57 177.67l-16.22 29.2.08 16.67-13.15.07-.08-16.67-9.76-17.14-14.69.06.17 33.87-13.15.07-.17-33.87h-9.44a17.11 17.11 0 01.47 3.88c0 6.86-3.64 11.16-9.67 13 2.93 4.59 5.45 5 8.08 5h.13a14.16 14.16 0 002-.14l.06 11.92a13.4 13.4 0 01-3.89.55H193c-7.94 0-14.44-2-19-13.48l-.54-1.31h-3.76l.1 14.65-13.15.07h-10.6l-3.05-9.44-15 .07-2.84 9.51-13.75.07 5.54-16.5a20.6 20.6 0 01-10.12 2.53h-8.12l.07 13.9-13.15.07-.23-45.8 21.27-.11h.13c7.75 0 14.19 3.6 16.68 9.91l3.33-9.92 17.11-.08 12.67 36.5-.19-36.57 22.21-.11h.13c5.62 0 10.54 1.81 13.79 5.17v-5.24l39.18-.2 9.8-.05 8.4 16.1 7.84-16.18 14.82-.07m-102.9 20.74h7.18c4 0 6-1.68 6-4.64s-2.08-4.52-6.19-4.52h-7.07v9.15m-71 .87h6.17c4 0 6-1.75 6-4.91s-2.08-4.85-6.19-4.85H98.5l.05 9.75m32.24 5.59l8.86-.05-4.64-14.34-4.22 14.39m148.61-31.18h-6.85l-14.82.08h-2.5l-1.09 2.29-4.36 9-4.72-9-1.13-2.17h-2.44l-9.8.05-39.18.19h-4v1.85a26 26 0 00-9.75-1.8h-.15l-22.21.12h-4v4l.06 12.44-4.74-13.68-.94-2.71h-2.86l-17.11.09h-2.87l-.91 2.72-.87 2.58a23.18 23.18 0 00-15.34-5.3h-.15l-21.27.11h-4v4l.23 45.8v4h4l13.15-.06h4v-13.9h4.11a27.53 27.53 0 003.77-.27l-3 9-1.78 5.31h5.6l13.75-.07h3l.85-2.85 2-6.66h9.06l2.17 6.69.9 2.78h2.93l10.6-.06 13.15-.06h4v-9.07c5.48 8.05 12.68 9.31 19.26 9.31h.27a17.41 17.41 0 005.06-.73l2.83-.89v-3l-.06-11.92v-4.54l-4.5.58a9.75 9.75 0 01-1.45.11h-.3a9 9 0 01-1 0c4.28-3.12 6.64-7.93 6.64-13.85h1l.15 29.86v4h4l13.15-.07h4v-4l-.15-29.86h8.34L239.2 208l.08 15.62v4h4l13.15-.07h4v-4l-.08-15.62 15.72-28.29 3.32-6zm-105.75 19.61h3a5 5 0 012.22.34.87.87 0 010 .18 1.52 1.52 0 010 .28 4.11 4.11 0 01-2 .34h-3.18v-1.15zm-71 .27h2a4.12 4.12 0 012.19.39 2.18 2.18 0 010 .47 1.43 1.43 0 01-.07.54 4 4 0 01-2 .34h-2.17v-1.74z",fill:"#231916"}})]),t._v(" "),n("g",{attrs:{id:"zizo"}},[n("g",{attrs:{id:"z1"}},[n("path",{attrs:{d:"M82.53 166.09a5.56 5.56 0 01-5.45-4.46 5.48 5.48 0 01.71-4l17-35.88.1-.15a.56.56 0 00.08-.38.55.55 0 00-.52-.45H83a7.78 7.78 0 01-7.7-7.6v-5.49A7.72 7.72 0 0183 100h39a6.3 6.3 0 01.75 0 5.57 5.57 0 014.77 8.47L110 146.36l-.1.16a.53.53 0 00-.09.39.55.55 0 00.54.47h11.86a7.69 7.69 0 017.68 7.68v3.32a7.72 7.72 0 01-7.67 7.7H83.15a4.4 4.4 0 01-.62.01z",fill:"#231916"}}),n("path",{attrs:{d:"M122.79 102.52a3.07 3.07 0 012.56 4.76l-17.52 37.85a3.06 3.06 0 002.55 4.76 2.28 2.28 0 00.45 0h11.41a5.16 5.16 0 015.16 5.11v3.32a5.19 5.19 0 01-5.16 5.19H83a2.38 2.38 0 01-.46 0 3.08 3.08 0 01-1.69-.51 3 3 0 01-.85-4.22L97 123a3 3 0 00-2.53-4.73 3.12 3.12 0 00-.52 0H83a5.21 5.21 0 01-5.19-5.12v-5.45a5.19 5.19 0 015.19-5.13h39.25a3.41 3.41 0 01.55 0m0-5H83a10.23 10.23 0 00-10.21 10.17v5.55A10.29 10.29 0 0083 123.34h8.29l-15.72 33.11a8.06 8.06 0 007 12.15h39.75a10.24 10.24 0 0010.19-10.21V155a10.21 10.21 0 00-10.19-10.2h-8.73l16.27-35.17a8.08 8.08 0 00-7-12.16z",fill:"#fff"}})]),n("g",{attrs:{id:"z2"}},[n("path",{attrs:{d:"M176.15 166.1a5.53 5.53 0 01-4.69-8.47l16.87-35.81.11-.17a.52.52 0 00.08-.36.51.51 0 00-.49-.43h-11.42a7.72 7.72 0 01-7.68-7.7v-5.45a7.69 7.69 0 017.68-7.68h39.08a5.58 5.58 0 015.48 8.42l-17.52 37.88-.11.16a.53.53 0 00-.09.39.55.55 0 00.54.46H215.88a7.69 7.69 0 017.68 7.68v3.33a7.72 7.72 0 01-7.67 7.7h-39.11c-.21.03-.42.05-.63.05z",fill:"#231916"}}),n("path",{attrs:{d:"M216.4 102.53a3.12 3.12 0 011.69.5 3.08 3.08 0 01.87 4.25l-17.51 37.85a3 3 0 00-.48 2.14 3.06 3.06 0 003 2.62 2.28 2.28 0 00.45 0h11.44a5.16 5.16 0 015.17 5.16v3.33a5.19 5.19 0 01-5.17 5.19h-39.25a3.44 3.44 0 01-.46 0 3 3 0 01-2.49-4.72l16.86-35.79a3.07 3.07 0 00.49-2.17 3 3 0 00-3-2.56 2.49 2.49 0 00-.47 0h-10.93a5.19 5.19 0 01-5.17-5.19v-5.45a5.18 5.18 0 015.17-5.17h39.26a3.15 3.15 0 01.53 0m0-5a8.11 8.11 0 00-.86 0h-38.93a10.2 10.2 0 00-10.19 10.19v5.45a10.23 10.23 0 0010.17 10.21h8.21l-15.56 33a8 8 0 006.91 12.17 6.45 6.45 0 00.76 0h39a10.23 10.23 0 0010.19-10.21V155a10.2 10.2 0 00-10.19-10.19h-8.76l16.28-35.18a8.1 8.1 0 00-2.55-10.81 8.07 8.07 0 00-4.45-1.34z",fill:"#fff"}})]),n("g",{attrs:{id:"i"}},[n("path",{attrs:{d:"M145 166.05a7.76 7.76 0 01-7.65-7.69v-50.62a7.71 7.71 0 017.7-7.68h8.75a7.74 7.74 0 017.66 7.67v50.62a7.75 7.75 0 01-7.69 7.7H145z",fill:"#231916"}}),n("path",{attrs:{d:"M153.82 102.57a5.2 5.2 0 015.15 5.17v50.61a5.22 5.22 0 01-5.19 5.19H145a5.21 5.21 0 01-5.14-5.19v-50.61a5.19 5.19 0 015.19-5.17h8.75m0-5h-8.77a10.24 10.24 0 00-10.22 10.17v50.63A10.29 10.29 0 00145 168.56h8.82A10.26 10.26 0 00164 158.37v-50.63a10.25 10.25 0 00-10.13-10.19z",fill:"#fff"}})]),n("g",{attrs:{id:"o"}},[n("path",{attrs:{d:"M257.4 166.07a33 33 0 11.05 0zm.07-43.47A10.45 10.45 0 00247 133.06a10.47 10.47 0 0010.45 10.43h.68a10.46 10.46 0 00-.68-20.89z",fill:"#231916"}}),n("path",{attrs:{d:"M257.45 102.57a30.48 30.48 0 0130.45 30.48v.06a30.49 30.49 0 01-30.49 30.45h-.05a30.5 30.5 0 01.05-61m0 43.43a13 13 0 0012.94-13 13 13 0 00-13-12.94 13 13 0 000 25.92m0-48.45a35.52 35.52 0 00-.06 71h.06a35.56 35.56 0 0035.65-35.4v-.07a35.54 35.54 0 00-35.47-35.5zm0 48.45v-5a7.93 7.93 0 01-5.62-13.54 7.84 7.84 0 015.6-2.33 7.95 7.95 0 01.6 15.87h-.57v5z",fill:"#fff"}})])]),t._v(" "),n("g",{attrs:{id:"natsu"}},[n("path",{attrs:{d:"M257 81.38a24.05 24.05 0 01-28.83 27 23.78 23.78 0 01-12-6.48c.24.42.47.86.74 1.27A22.86 22.86 0 00257 81.38z",fill:"#231916"}}),t._v(" "),n("path",{attrs:{d:"M228.57 106.25a22.49 22.49 0 004.58.48 21.93 21.93 0 10-4.58-.48z",fill:"#231916"}}),t._v(" "),n("path",{attrs:{d:"M228.13 108.34a24.07 24.07 0 10-18.55-28.54 24 24 0 003.36 18.11 24.68 24.68 0 003.22 4 23.78 23.78 0 0011.97 6.43zm-16.45-28.1a21.93 21.93 0 1121.47 26.49 22.49 22.49 0 01-4.58-.48 21.93 21.93 0 01-16.89-26.01z",fill:"#fff"}}),t._v(" "),n("path",{attrs:{d:"M242.82 93.3a9.23 9.23 0 01-2.17.64c-1.47.42-1.82.51-3.37.86a45.67 45.67 0 005.37 1.54c.53.11 1.42.27 2.81.5a26.38 26.38 0 00-3.11 4.77c-5.26-1.36-8.15-3.62-11.12-5.45-4 .75-7.17 2-12.74 1.88a32.52 32.52 0 00-.9-6.53c.46.13.76.19 1 .25a54.23 54.23 0 008.2 1 14.31 14.31 0 01-1.79-2.2 31.52 31.52 0 01-5.09.74 26.72 26.72 0 00-2.4-5.39c2.38.25 2.92.35 5.43.54a7.36 7.36 0 003.49-.45l-.8-.17c-1.09-.23-2-.4-2.93-.53a25.54 25.54 0 00.75-3l1.25-5.89c.23-1.12.35-1.81.51-3 .69.21 1.45.41 2.92.72l3.72.79a9.3 9.3 0 00.84-.81l-6.83-1.45a33.25 33.25 0 00-3.57-.6l1.11-5.21a33.14 33.14 0 003.64 1l18.05 4.66c1.65.35 3.3 1 4.3 1.06l-.87 4.1a31.83 31.83 0 00-3.45-.89l-7.6-1.61a8.66 8.66 0 01-.76.82l5.89 1.25a21.61 21.61 0 002.79.5c-.3 1-.49 1.74-.76 3l-1.17 5.54a23.07 23.07 0 00-.58 3.3c-.93-.26-1.69-.45-2.87-.7l-7.84-1.67c-.67.41-.78.48-1.23.72l8.4 1.79A13.58 13.58 0 00241 90zm-13.94-15.38l11.32 2.41.16-.8-11.31-2.4zm-.59 2.8l11.31 2.41.16-.77L228.45 80zm-.62 2.89L239 86l.17-.82-11.31-2.4zm2 7a14.73 14.73 0 002.53 1.89 15.36 15.36 0 003-.71z",fill:"#fff",id:"kanji"}})])])])])])}),[],!1,null,null,null);e.default=component.exports},function(t,e,n){"use strict";n.r(e);var r=n(1),o=n(33),c={props:{cp:{type:Object,required:!0,default:{}}},data:function(){return{linkCopied:!1,shareUrl:"",isMobile:!1,smallMobile:!1}},mounted:function(){this.shareUrl=o.a.url+"?challengeMe="+this.cp.uid,this.init()},methods:{init:function(){this.scope=Object(r.a)(this),this.onResize({width:window.innerWidth})},rollOver:function(b){b&&this.$store.commit("sound/playSound","hover_"+Math.round(.5+3.5*Math.random())),r.b.trigger({name:"contactOver"},{over:b})},onResize:function(t){var e=t.width;this.isMobile=e<370,this.smallMobile=e<541},copyToClipboard:function(){this.$ga.event("Interaction","share-copy-clipboard");var t=document.createElement("input");t.value=this.shareUrl,document.body.appendChild(t),t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(t),this.linkCopied=!0}}},l=(n(302),n(5)),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"share"},[n("div",{staticClass:"share-items"},[n("ShareNetwork",{staticClass:"share-network",attrs:{network:"facebook",url:t.shareUrl,title:t.$t("share.title"),description:"$t('share.desc')"},nativeOn:{mouseenter:function(e){return t.rollOver(!0)},mouseleave:function(e){return t.rollOver(!1)}}},[n("i",{staticClass:"icon-facebook"})])],1),t._v(" "),n("div",{staticClass:"share-items"},[n("ShareNetwork",{staticClass:"share-network",attrs:{network:"twitter",url:t.shareUrl,title:t.$t("share.title"),hashtags:"ZIZOParty"},nativeOn:{mouseenter:function(e){return t.rollOver(!0)},mouseleave:function(e){return t.rollOver(!1)}}},[n("i",{staticClass:"icon-twitter"})])],1),t._v(" "),"ja"!=t.$i18n.locale||t.isMobile?t._e():n("div",{staticClass:"share-items"},[n("ShareNetwork",{staticClass:"share-network",attrs:{network:"line",url:t.shareUrl,title:t.$t("share.title"),description:"$t('share.desc')"},nativeOn:{mouseenter:function(e){return t.rollOver(!0)},mouseleave:function(e){return t.rollOver(!1)}}},[n("i",{staticClass:"icon-line"})])],1),t._v(" "),n("div",{staticClass:"share-items"},[n("button",{staticClass:"share-network copylinknet",class:{copied:t.linkCopied},on:{mouseenter:function(e){return t.rollOver(!0)},mouseleave:function(e){return t.rollOver(!1)},mousedown:function(e){return t.copyToClipboard()},touchstart:function(e){return e.preventDefault(),t.copyToClipboard()}}},[n("div",{staticClass:"copy-link-icon"})])]),t._v(" "),n("div",{staticClass:"share-items"},[n("a",{staticClass:"cpy-link play-yourself",class:{shareja:"ja"==t.$i18n.locale},attrs:{href:t.shareUrl},on:{mouseenter:function(e){return t.rollOver(!0)},mouseleave:function(e){return t.rollOver(!1)}}},[n("span",{staticClass:"cpy-def"},[t._v(t._s(t.$t("challenge.playYourself"+(t.smallMobile?"Small":""))))])])])])}),[],!1,null,null,null);e.default=component.exports}],[[227,7,3]]]);