(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7561:function(a,c,b){var d=b(7990),e=/^\s+/;a.exports=function(a){return a?a.slice(0,d(a)+1).replace(e,""):a}},7990:function(a){var b=/\s/;a.exports=function(c){for(var a=c.length;a-- &&b.test(c.charAt(a)););return a}},3279:function(b,c,a){var d=a(3218),e=a(7771),f=a(4841),g=Math.max,h=Math.min;b.exports=function(l,b,a){var n,o,i,p,q,r,s=0,m=!1,j=!1,k=!0;if("function"!=typeof l)throw TypeError("Expected a function");function t(a){var b=n,c=o;return n=o=void 0,s=a,p=l.apply(c,b)}function u(a){var c=a-r,d=a-s;return void 0===r||c>=b||c<0||j&&d>=i}function v(){var d,f,g,a,c=e();if(u(c))return w(c);q=setTimeout(v,(f=(d=c)-r,g=d-s,a=b-f,j?h(a,i-g):a))}function w(a){return(q=void 0,k&&n)?t(a):(n=o=void 0,p)}function c(){var a,c=e(),d=u(c);if(n=arguments,o=this,r=c,d){if(void 0===q)return s=a=r,q=setTimeout(v,b),m?t(a):p;if(j)return clearTimeout(q),q=setTimeout(v,b),t(r)}return void 0===q&&(q=setTimeout(v,b)),p}return b=f(b)||0,d(a)&&(m=!!a.leading,j="maxWait"in a,i=j?g(f(a.maxWait)||0,b):i,k="trailing"in a?!!a.trailing:k),c.cancel=function(){void 0!==q&&clearTimeout(q),s=0,n=r=o=q=void 0},c.flush=function(){return void 0===q?p:w(e())},c}},3448:function(b,c,a){var d=a(4239),e=a(7005);b.exports=function(a){return"symbol"==typeof a||e(a)&&"[object Symbol]"==d(a)}},7771:function(a,c,b){var d=b(5639);a.exports=function(){return d.Date.now()}},4841:function(b,c,a){var d=a(7561),e=a(3218),f=a(3448),g=0/0,h=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,j=/^0o[0-7]+$/i,k=parseInt;b.exports=function(a){if("number"==typeof a)return a;if(f(a))return g;if(e(a)){var b="function"==typeof a.valueOf?a.valueOf():a;a=e(b)?b+"":b}if("string"!=typeof a)return 0===a?a:+a;a=d(a);var c=i.test(a);return c||j.test(a)?k(a.slice(2),c?2:8):h.test(a)?g:+a}},8312:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return c(3574)}])},3574:function(m,b,a){"use strict";a.r(b),a.d(b,{default:function(){return ar}});var n=a(6042),o=a(5893),p=a(9435),q=a(5157),r=a(4924),d=a(4184),s=a.n(d),t=a(7294),e=a(3580),u=a.n(e),v=a(3630),w=function(b,c,a){return(1-a)*b+a*c},x=function(y){var a,c=(0,t.useState)(!1),b=c[0],z=c[1],d=(0,t.useState)(!1),i=d[0],A=d[1],e=(0,t.useState)(!1),j=e[0],B=e[1],f=(0,t.useState)(!1),k=f[0],C=f[1],g=(0,t.useState)(""),l=g[0],D=g[1],m=(0,t.useRef)(null),n=(0,t.useRef)(null),x=(0,t.useRef)(null),E=(0,t.useRef)([0,0]),F=(0,t.useRef)([0,0]),G=(0,t.useRef)(),h=(0,t.useContext)(q.I).appState;return(0,t.useEffect)(function(){var a,b,c=function(a){if(h<p.yf.READY)return!1;z(!0),A(!1);var b=a.target;b.getAttribute&&D(b.getAttribute("data-cursor")||"");var c=n.current;c&&(E.current=[a.clientX,a.clientY],c.style.setProperty("transform","translate(".concat(a.clientX,"px, ").concat(a.clientY,"px)")))},d=function(a){return A(!0)},e=function(a){return B(!0)},f=function(a){return B(!1)},g=function(){return C(!1)},i=function(){return C(!0)};return h===p.yf.READY&&(E.current=[.5*window.innerWidth,.75*window.innerHeight],F.current=E.current,null===(a=n.current)|| void 0===a||a.style.setProperty("transform","translate(".concat(E.current[0],"px, ").concat(E.current[1],"px)")),null===(b=x.current)|| void 0===b||b.style.setProperty("transform","translate(".concat(E.current[0],"px, ").concat(E.current[1],"px)"))),(0,v.Z)().any||(document.addEventListener("mousemove",c),document.addEventListener("mouseout",d),document.addEventListener("mousedown",e),document.addEventListener("mouseup",f),window.addEventListener("blur",i),window.addEventListener("focus",g)),function(){document.removeEventListener("mousemove",c),document.removeEventListener("mouseout",d),document.removeEventListener("mousedown",e),document.removeEventListener("mouseup",f),window.removeEventListener("blur",i),window.removeEventListener("focus",g)}},[h]),(0,t.useEffect)(function(){var a=function(){var b,c=w(F.current[0],E.current[0],.1),d=w(F.current[1],E.current[1],.1);null===(b=x.current)|| void 0===b||b.style.setProperty("transform","translate(".concat(c.toFixed(5),"px, ").concat(d.toFixed(5),"px)")),F.current=[c,d],G.current=requestAnimationFrame(a)};return b&&document.documentElement.style.setProperty("cursor","none"),b&&(G.current=requestAnimationFrame(a)),function(){cancelAnimationFrame(G.current)}},[b]),(0,o.jsxs)("div",{className:s()(u().cursor,u()["state"+h],u()[l],(a={},(0,r.Z)(a,u().init,b),(0,r.Z)(a,u().hidden,i&&b),(0,r.Z)(a,u().press,j),(0,r.Z)(a,u().blur,k&&b),a)),ref:m,children:[(0,o.jsx)("div",{className:u().outer,ref:x,children:(0,o.jsx)("div",{className:u().outerContainer})}),(0,o.jsx)("div",{className:u().inner,ref:n,children:(0,o.jsxs)("div",{className:u().innerContainer,children:[(0,o.jsx)("div",{className:u().innerCircle}),(0,o.jsx)("div",{className:u().innerLabel,children:"ENTER"})]})})]})},f=a(5233),y=a.n(f),z=function(a){return(0,o.jsx)("div",{className:s()(y().footerAudio,(0,r.Z)({},y().visible,a.visible)),onClick:a.onClick,"data-cursor":"audio",children:(0,o.jsxs)("div",{className:y().inner,children:[(0,o.jsx)("span",{}),(0,o.jsx)("span",{}),(0,o.jsx)("span",{}),(0,o.jsx)("span",{}),(0,o.jsx)("span",{})]})})},g=a(7930),A=a.n(g),B=function(b){var a=(0,t.useContext)(q.I).appState;return(0,o.jsxs)("footer",{className:s()(A().footer,(0,r.Z)({},A().arena,a>=p.yf.ARENA)),children:[(0,o.jsx)("img",{src:"/assets/ui/berlin-moves.svg",className:A().logo}),(0,o.jsx)(z,{onClick:b.onSoundClick,visible:a>=p.yf.ARENA})]})},C=a(5310),D=a(4232),h=a(7793),E=a.n(h),F=function(g){var a=(0,t.useState)(0),e=a[0],h=a[1],i=(0,t.useRef)(0),j=(0,t.useRef)(!1),k=(0,t.useRef)(0),l=(0,t.useRef)(),b=(0,t.useState)(),c=b[0],m=b[1],d=(0,t.useContext)(q.I),f=d.appState,n=d.setAppState;return(0,t.useEffect)(function(){f===p.yf.ARENA_PLAYING&&(l.current?n(p.yf.ARENA_SHOW_VARIANTS):h(1)),f===p.yf.ARENA_INSTR_COMPLETE&&h(4)},[f]),(0,t.useEffect)(function(){m((0,v.Z)().any?D.w2:D.dZ)},[]),(0,t.useEffect)(function(){var a=function(a){i.current=a.clientX,j.current=!0},b=function(a){Math.abs(a.clientX-i.current)>50&&j.current&&h(2)},c=function(a){j.current=!1},d=function(){3!==e&&h(3)},f=function(a){i.current=a.touches[0].clientX,j.current=!0},g=function(a){Math.abs(a.touches[0].clientX-i.current)>50&&j.current&&(1===e&&h(2),2===e&&h(3),j.current=!1)},m=function(a){j.current=!1};return l.current||(3===e&&(setTimeout(function(){n(p.yf.ARENA_SHOW_VARIANTS)},500),l.current=!0),clearTimeout(k.current),e>=1&&e<=D.dZ.length&&(k.current=setTimeout(function(){h(e+1)},5e3)),(0,v.Z)().any?((1===e||2===e)&&document.addEventListener("touchstart",f),(1===e||2===e)&&document.addEventListener("touchmove",g),(1===e||2===e)&&document.addEventListener("touchend",m)):(1===e&&document.addEventListener("mousedown",a),1===e&&document.addEventListener("mousemove",b),1===e&&document.addEventListener("mouseup",c),2===e&&document.addEventListener("wheel",d))),function(){document.removeEventListener("mousedown",a),document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",c),document.removeEventListener("wheel",d),document.removeEventListener("touchstart",f),document.removeEventListener("touchmove",g),document.removeEventListener("touchend",m)}},[e]),(0,o.jsx)("div",{className:E().instructions,children:!!c&&c.map(function(b,a){return(0,o.jsxs)("div",{className:s()(E().item,(0,r.Z)({},E().visible,a===e-1)),children:[(0,o.jsxs)("div",{className:E().overline,children:["Instruction ",a+1,"/3"]}),(0,o.jsx)("div",{className:E().copy,children:b})]},a)})})},G=a(4293),i=a(206),H=a.n(i),I=function(a){var b=(0,t.useContext)(q.I).appState;return(0,o.jsx)("div",{className:H().variants,children:D.gX.map(function(c,d){return(0,o.jsx)("div",{className:s()(H().bar,(0,r.Z)({},H().visible,a.choreoCurrent===c.id&&(b===p.yf.ARENA_SHOW_VARIANTS||b===p.yf.ARENA_INSTR_COMPLETE))),children:c.buttons.map(function(c,b){return(0,o.jsx)("button",{className:s()(H().item,(0,r.Z)({},H().active,a.variantCurrent===b)),onClick:function(){return a.onSetChoreoVariant(b)},children:c.label},b)})},d)})})},J=a(1163),K=a(4111),L=a(1438),M=a(2662);function N(a,b,c){return(N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(b,c,e){var d=function(a,b){for(;!Object.prototype.hasOwnProperty.call(a,b)&&null!==(a=(0,M.Z)(a)););return a}(b,c);if(d){var a=Object.getOwnPropertyDescriptor(d,c);return a.get?a.get.call(e||b):a.value}})(a,b,c)}var O=a(8029),P=a(797),Q=a(6626),R=a(9477),j=a(3661);let c=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],S=[...c,...c];function T(a){return a*a*a*(a*(6*a-15)+10)}function U(f,b,c,g){let a=15&f,d=a<8?b:c,e=a<4?c:12===a||14===a?b:g;return(1&a?-d:d)+(2&a?-e:e)}function V(a,b,c){var p,i,q,r,j,s,t,k,u,v,l,w,x,m,y,z,n,A,B,o,C;let D=Math.floor(a),E=Math.floor(b),F=Math.floor(c),G=255&D,H=255&E,d=255&F,I=S[G]+H,J=S[G+1]+H,K=S[I]+d,L=S[J]+d,M=S[I+1]+d,N=S[J+1]+d;a-=D,b-=E,c-=F;let e=T(a),O=T(b),f=a-1,g=b-1,h=c-1;return B=T(c),o=(t=O,k=(p=e,i=U(S[K],a,b,c),q=U(S[L],f,b,c),i+p*(q-i)),u=(r=e,j=U(S[M],a,g,c),s=U(S[N],f,g,c),j+r*(s-j)),k+t*(u-k)),C=(z=O,n=(v=e,l=U(S[K+1],a,b,h),w=U(S[L+1],f,b,h),l+v*(w-l)),A=(x=e,m=U(S[M+1],a,g,h),y=U(S[N+1],f,g,h),m+x*(y-m)),n+z*(A-n)),o+B*(C-o)}var W=a(2645),X=function b(c){var d=!(arguments.length>1)|| void 0===arguments[1]||arguments[1],e=this;(0,L.Z)(this,b),this.stage=c,this.plateau=d,this.addFloor=function(){var g,h,i,a=new R.BKK(W.j8.floorSize,W.j8.floorSize,1e3,1e3),b=new R.EJi({color:W.DM.floorDark,metalness:1,displacementMap:e.stage.assets.textures[1],aoMap:e.stage.assets.textures[0],normalMap:e.stage.assets.textures[2],normalScale:new R.FM8(.15,.15),roughness:.8});null===(g=b.normalMap)|| void 0===g||g.repeat.set(15,15),null===(h=b.aoMap)|| void 0===h||h.repeat.set(15,15),null===(i=b.displacementMap)|| void 0===i||i.repeat.set(15,15);var f=e.stage.gui.addFolder("Floor");f.close(),f.add(b,"metalness",0,1,.1),f.add(b,"roughness",0,1,.1),f.addColor(b,"color");var c=new R.Kj0(a,b);e.mesh=c,c.rotation.x=-0.5*Math.PI,c.receiveShadow=!0,c.castShadow=!1,c.position.y=0,e.stage.scene.add(c);for(var k=W.j8.floorSize/W.j8.floorNoise,n=a.attributes.position.count,o=e.plateau?W.j8.floorNormal:0,d=0;d<n;d++){var l=a.attributes.position.getX(d),m=a.attributes.position.getY(d),p=Math.sqrt(Math.pow(l,2)+Math.pow(m,2)),j=Math.max(Math.abs(p)-o,0);j=Math.min(j/200,1);var q=Math.sin(j*Math.PI/2),r=V(l/k,m/k,0),s=r*q;a.attributes.position.setZ(d,100*s)}a.computeVertexNormals(),a.attributes.position.needsUpdate=!0},this.addFloor(),this.stage.scene.fog=new R.yo9(W.DM.background,45e-5);var a=this.stage.gui.addFolder("Fog");a.close(),a.add(this.stage.scene.fog,"density",1e-4,.001,1e-4)},Y=a(3109),Z=function c(d,a,e){var f=arguments.length>3&& void 0!==arguments[3]?arguments[3]:null,b=arguments.length>4&& void 0!==arguments[4]&&arguments[4],g=arguments.length>5&& void 0!==arguments[5]?arguments[5]:function(a){},h=this;(0,L.Z)(this,c),this.stage=d,this.data=a,this.onFinished=e,this.lightSpots=f,this.paused=b,this.onSetVariant=g,this.cleos=[],this.variantIndex=0,this.initCleos=function(){var a=h;h.cleos=[],h.data.choreo.map(function(e,c){var g=a,d=e.split("|"),f={position:d[0],random:!1,rotation:parseInt(d[2]),choreo:d[3]},b=new Y.Z(a.stage,a.root,f,c,!1,a.paused);b.name="cleo"+c,0===c&&(b.onComplete=a.handleCleoComplete),b.onSetVariant=function(a){g.setVariant(a),g.onSetVariant(a)},a.cleos.push(b)})},this.setVariant=function(){var b=arguments.length>0&& void 0!==arguments[0]?arguments[0]:0;switch(h.variantIndex=b,h.data.id){case"start":h.cleos.forEach(function(a,b){b<3&&a.setVisible(!0)});break;case"double":var c=h;h.cleos.forEach(function(a,d){var b=d-2*c.variantIndex;b>=0&&b<=1?a.setVisible(!0):a.setVisible(!1)});break;case"soloGroup":var d=h;h.cleos.forEach(function(b,a){a<9?d.data.positions&&b.setPosition(d.data.positions[d.variantIndex][a],.6/9*a):a-9===d.variantIndex?b.setVisible(!0,!1):b.setVisible(!1,!1)});break;case"finale":var e=h;h.cleos.forEach(function(b,a){e.data.positions&&b.setPosition(e.data.positions[e.variantIndex][a],.6/9*a)});break;case"show":h.cleos.forEach(function(a,b){a.setVisible(!0)})}if(h.data.camera&&!h.paused){var a=h.data.camera[b];h.stage.cameraController.startTransition(a[0],a[1],a[2]+((0,v.Z)().any?W.Nn:0),a[3])}h.paused||h.stage.soundManager.playChoreo(h.data.soundIndex,h.variantIndex)},this.handleCleoComplete=function(){if(h.onFinished(),"finale"===h.data.id){var a=h;setTimeout(function(){a.cleos.forEach(function(a){return a.destroy()})},15e3)}else h.destroy()},this.render=function(a){h.cleos.forEach(function(a){return a.render()})},this.pause=function(a){h.paused=a,h.cleos.forEach(function(b){return b.pause(a)}),a||h.stage.soundManager.playChoreo(h.data.soundIndex,h.variantIndex)},this.destroy=function(){h.cleos.forEach(function(a){return a.destroy()})},this.root=new R.ZAu,a.rotation&&(this.root.rotation.y=a.rotation),this.stage.scene.add(this.root),this.initCleos(),this.firstPlay=!b,this.setVariant()},$=a(5018),_=a(990),aa=function a(b){var c=arguments.length>1&& void 0!==arguments[1]?arguments[1]:null,d=arguments.length>2&& void 0!==arguments[2]?arguments[2]:null,e=this;(0,L.Z)(this,a),this.stage=b,this.soundManager=c,this.scenery=d,this.spotLights=[],this.spotLightTargets=[],this.fogOpacity=.01,this.audioReactiveFactorLow=1.75,this.audioReactiveFactorHigh=1.75,this.audioReactiveFogFactor=.0275,this.audioReactiveFactorLerp=.135,this.addBacklights=function(){var c=Math.PI/3,g=[-c,2*Math.PI/6*1-c,2*Math.PI/6*2-c,2*Math.PI/6*3-c,2*Math.PI/6*4-c,2*Math.PI/6*5-c,],h=[660,550,700,900,800,930],i=[W.DM.spotPink,W.DM.spotBlue,W.DM.spotPink2,W.DM.spotPink,W.DM.spotBlue,W.DM.spotPink2,];e.intensity=[1.4,1.2,1.6,1.4,1.4,1.4],e.lightGroup=new R.ZAu,e.stage.scene.add(e.lightGroup);for(var b=0;b<6;b++){var d=g[b],f=2e3,j=f*Math.sin(d),k=h[b],l=f*Math.cos(d),a=new R.PMe(i[b],e.intensity[b]);a.lookAt(new R.Pa4(0,0,0)),a.angle=1,a.penumbra=1,a.position.set(j,k,l),e.lightGroup.add(a),e.spotLights.push(a),0!==b&&1!==b||(0,v.Z)().any||(a.castShadow=!0,a.shadow.mapSize=new R.FM8(4096,4096),a.shadow.bias=1e-6,a.shadow.camera.near=.1,a.shadow.camera.far=3e3)}e.stage.gui.add(e,"audioReactiveFactorLow",0,20,.02),e.stage.gui.add(e,"audioReactiveFactorHigh",0,20,.02),e.stage.gui.add(e,"audioReactiveFogFactor",0,1,.001),e.stage.gui.add(e,"audioReactiveFactorLerp",0,1,.002)},this.addSpotlights=function(){for(var b=0;b<3;b++){var c=2*Math.PI/3*b,d=100,g=d*Math.sin(c),h=500,i=d*Math.cos(c),a=new R.PMe(W.DM.spotPinkLight,1);a.lookAt(new R.Pa4(0,0,0)),a.angle=.1,a.penumbra=.2,a.position.set(g,h,i),e.stage.scene.add(a),e.spotLights.push(a);var f=new R.Tme;e.stage.scene.add(f),e.spotLightTargets.push(f),a.castShadow=!0,a.shadow.mapSize=new R.FM8(1024,1024),a.shadow.camera.near=.1,a.shadow.camera.far=1200,e.stage.gui.addColor(a,"color")}},this.startSpotlightAnimation=function(){e.spotLightTargets[0].position.set(0,0,-30),e.spotLights[0].angle=.1,e.spotLights[0].target=e.spotLightTargets[0],_.ZP.timeline().to(e.spotLights[0],{intensity:.6,angle:.3,duration:5,ease:"Sine.easeInOut"});var a=_.ZP.timeline();a.to(e.spotLightTargets[0].position,{x:25,z:-20,duration:.8,delay:6.7,ease:"Back.easeInOut"}),a.to(e.spotLightTargets[0].position,{x:-42,z:-30,duration:1,delay:1,ease:"Sine.easeInOut"}),e.spotLightTargets[1].position.set(50,0,120),e.spotLights[1].angle=.2,e.spotLights[1].target=e.spotLightTargets[1];var b=_.ZP.timeline();b.to(e.spotLights[1],{intensity:.7,angle:.25,duration:.5,delay:11}),b.to(e.spotLights[1],{intensity:.6,angle:.2,duration:8,delay:3});var b=_.ZP.timeline();a.to(e.spotLightTargets[1].position,{x:50,z:120,duration:6,delay:11,ease:"Back.easeInOut"})},this.applyAudioChoreoData=function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:0,b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&& void 0!==arguments[2]?arguments[2]:0,d=arguments.length>3&& void 0!==arguments[3]?arguments[3]:0;e.audioReactiveFactorHigh=a,e.audioReactiveFactorLow=b,e.audioReactiveFogFactor=c,e.audioReactiveFactorLerp=d},this.focus=function(a,b){},this.render=function(a){e.analyseAudio()},this.analyseAudio=function(){if(e.soundManager&&e.soundManager.analyser){var j=e.soundManager.analyser.frequencyBinCount;e.audioDataArray=new Uint8Array(j),e.soundManager.analyser.getByteFrequencyData(e.audioDataArray);var c=e.audioDataArray.map(function(a,b){return b<8?a:0}).reduce(function(a,b){return a+b})/8;c=Math.min(c,255);var d=e.audioDataArray.map(function(a,b){return b>8?a:0}).reduce(function(a,b){return a+b})/8;d=Math.min(d,255);for(var a=0;a<e.spotLights.length;a++){var k,f=0,g=0,b=0,h=0;a%2==0?(f=e.audioReactiveFactorLow,h=.8,b=.9,g=c):(f=e.audioReactiveFactorHigh,h=.5,b=.8,g=d),e.spotLights[a].intensity=R.M8C.lerp(e.spotLights[a].intensity,e.intensity[a]*(1-b)+e.intensity[a]*b*(g/255)*f*2,h)}var i=e.audioDataArray.map(function(a,b){return b<8?a:0}).reduce(function(a,b){return a+b})/8;i=Math.min(i,255),e.scenery&&(e.scenery.fogMaterial.opacity=e.fogOpacity+i/255*e.audioReactiveFogFactor*2)}},this.addBacklights()},ab=function d(b){var c=arguments.length>1&& void 0!==arguments[1]&&arguments[1],e=this;(0,L.Z)(this,d),this.stage=b,this.withTubes=c,this.billboardsArray=[],this.tempObject=new R.Tme,this.addCylinders=function(){for(var f=new R.EJi({color:W.DM.floor,transmission:1,roughness:.1,metalness:.1}),a=0;a<40;a++){var b=2*Math.PI/40*a,c=4e3,g=c*Math.sin(b),h=-50,i=c*Math.cos(b),d=new R.Kj0(new R.fHI(100,100,2e3,10,1),f);d.position.set(g,h,i),e.stage.scene.add(d)}},this.addMoon=function(){var a=new R.Kj0(new R.xo$(450,100,100),new R.EJi({metalness:.85,roughness:.8,fog:!1,map:e.stage.assets.textures[8]}));a.position.set(0,557,-3400),e.stage.scene.add(a);var b=e.stage.gui.addFolder("moon");b.close(),b.add(a.material,"roughness",0,1,.05),b.add(a.material,"metalness",0,1,.05),b.add(a.position,"x",-1e3,1e3,1),b.add(a.position,"y",-1e3,1e3,1),b.add(a.position,"z",0,-6e3,1)},this.addBillboards=function(){var i=new R.dpR().load("/assets/textures/particles/cloud.png");e.billboardsCount=30;var b=new R.vBJ({transparent:!0,depthWrite:!1,depthTest:!1,opacity:.033,blending:R.WMw,color:W.DM.fogStage,side:R.ehD,map:i});e.fogMaterial=b;var j=new R.BKK(800,800,2,2),c=e.stage.gui.addFolder("Stage Fog");c.close(),c.add(b,"opacity",0,1,.005),c.addColor(b,"color");for(var d=new R.SPe(j,b,e.billboardsCount),h=new R.yGw,a=new R.Pa4(0,0,0),f=0;f<e.billboardsCount;f++){var k=10*Math.random(),l=10*Math.random(),m=.5+1.5*Math.random(),g=1e3+(Math.random()-.5)*100;a.x=(Math.cos(k)+.1)*g,a.z=(Math.sin(l)+.1)*g,a.y=50+50*Math.random(),h.setPosition(a),d.setMatrixAt(f,h),e.billboardsArray.push({x:a.x,y:a.y,z:a.z,radius:g,scale:m})}e.stage.scene.add(d),e.billboards=d},this.render=function(c){if(e.billboards){for(var b=0;b<e.billboardsCount;b++){var a=e.billboardsArray[b];e.tempObject.position.set(Math.cos(a.x+3e-5*c)*a.radius,a.y,Math.sin(a.z+3e-5*c)*a.radius),e.tempObject.quaternion.copy(e.stage.camera.quaternion),e.tempObject.scale.set(a.scale,a.scale,a.scale),e.tempObject.updateMatrix(),e.billboards.setMatrixAt(b,e.tempObject.matrix)}e.billboards.instanceMatrix.needsUpdate=!0}};var a=b.assets.models[2].scene;a.position.set(0,0,0),a.scale.setScalar(50),b.scene.add(a);var f=new R.EJi({color:W.DM.scenery,roughness:.3});a.traverse(function(a){a.isMesh&&(a.receiveShadow=!1,a.castShadow=!1,a.material=f)}),this.addMoon(),c&&this.addCylinders(),this.addBillboards()},ac=function i(c){(0,L.Z)(this,i);for(var j=new R.UY4({map:c.assets.textures[7],size:12,transparent:!0,opacity:.8,fog:!1}),d=new R.u9r,b=new Float32Array(2400),a=0;a<800;a++){var e=Math.random()*Math.PI*2,f=W.j8.particleOffset,g=W.j8.particleArea,k=Math.sin(e)*(f+Math.random()*g),l=Math.random()*W.j8.particlesHeight,m=Math.cos(e)*(f+Math.random()*g);b[3*a]=k,b[3*a+1]=l,b[3*a+2]=m}d.setAttribute("position",new R.TlE(b,3));var h=new R.woe(d,j);h.position.z=0,c.scene.add(h)},ad=function(a,c){var b=c.position.y;a<b?a-=b:a+=b;var d=c.fov*Math.PI/180;return 2*Math.tan(d/2)*Math.abs(a)},ae=function(a,b){var c=b.fov*Math.PI/180;return 2*Math.tan(c/2)*Math.abs(a)},af=function(b,a){return ae(b,a)*a.aspect},ag=a(8021),k=a(3279),ah=a.n(k),ai=Math.PI/2,aj=[-350,-150,380],ak=[330,-156,705],al=[150,312,484],am=function b(a){var c=this;(0,L.Z)(this,b),this.stage=a,this.particles=[],this.lights=[],this.timeRender=0,this.destroy=function(){window.removeEventListener("resize",c.handleResize),window.removeEventListener("mousemove",c.handleMouseMove),cancelAnimationFrame(c.aframe)},this.createLogo=function(){c.logoContainer=new R.ZAu,c.logoContainer.position.set(0,0,0),c.root.add(c.logoContainer),c.logo=c.stage.assets.models[3].scene.children[0],c.logo.frustumCulled=!1,c.logo.scale.setScalar(1),c.logo.position.set(0,0,-500);var a=new R.Pa4,b=new R.ZzF().setFromObject(c.logo),d=b.getSize(a);c.logoSize=d,new R.vBJ({color:16777215});var e=new R.EJi({color:16777215,metalness:0,roughness:1,envMap:c.stage.assets.hdri[0],envMapIntensity:.25});c.logo.material=e,c.logoContainer.add(c.logo)},this.createCleo=function(){var f=c;c.cleo=c.stage.assets.models[1].scene.children[0],c.cleo.frustumCulled=!1,c.cleo.scale.setScalar(1),c.cleo.rotation.z=.45*Math.PI,c.cleo.position.set(0,0,0);var a=new R.Pa4,b=new R.ZzF().setFromObject(c.cleo),d=b.getSize(a);c.cleoSize=d;var e=c.stage.assets.hdri[0],g=(0,ag.Xm)(e);c.cleo.traverse(function(a){"Mesh001"===a.name&&(a.material=(0,ag.be)(e,f.stage)),"Mesh001_1"===a.name&&(a.material=(0,ag.tU)(e,f.stage)),"Mesh001_2"===a.name&&(a.material=g)}),c.root.add(c.cleo)},this.createParticles=function(){for(var m=c.stage.assets.textures[7],a=new Float32Array(600),b=new Float32Array(2250),d=0;d<200;d++){var e=3*d;a[e+0]=(2*Math.random()-1)*1e3,a[e+1]=(2*Math.random()-1)*1e3,a[e+2]=(2*Math.random()-1)*1e3}var h=new R.u9r;h.setAttribute("position",new R.TlE(a,3));for(var f=0;f<750;f++){var g=3*f;b[g+0]=(2*Math.random()-1)*1500,b[g+1]=(2*Math.random()-1)*1500,b[g+2]=(2*Math.random()-1)*1500}var i=new R.u9r;i.setAttribute("position",new R.TlE(b,3));var j=new R.UY4({color:"white",size:2.5,sizeAttenuation:!1,map:m,transparent:!0}),k=new R.woe(h,j),l=new R.woe(i,j);c.root.add(k),c.root.add(l),c.particles.push(k),c.particles.push(l)},this.addLights=function(){c.spotNeutral=new R.PMe(W.DM.spotNeutral,1.6),c.spotNeutral.position.set(aj[0],aj[1],aj[2]),c.spotNeutral.distance=2e3,c.spotNeutral.penumbra=1,c.spotNeutral.angle=Math.PI/2,c.root.add(c.spotNeutral),c.lights.push(c.spotNeutral),c.spotPink=new R.PMe(W.DM.spotPink,1.8),c.spotPink.position.set(ak[0],ak[1],ak[2]),c.spotPink.distance=2e3,c.spotPink.penumbra=1,c.spotPink.angle=Math.PI/6,c.root.add(c.spotPink),c.lights.push(c.spotPink),c.spotBlue=new R.PMe(W.DM.spotBlue,1.1),c.spotBlue.position.set(al[0],al[1],al[2]),c.spotBlue.penumbra=1,c.spotBlue.distance=2e3,c.spotBlue.angle=Math.PI/6,c.root.add(c.spotBlue),c.lights.push(c.spotBlue)},this.handleResize=function(){var g,b,h=(g=3500+c.logo.position.z,b=c.stage.camera,ad(g,b)*b.aspect),d=ad(3500+c.logo.position.z,c.stage.camera);c.logo.scale.setScalar(1/c.logoSize.x*(h-50)),h>d?c.logo.position.y=(d-50)/2-c.logoSize.y*c.logo.scale.y*.5:c.logo.position.y=(d-50)/2-c.logoSize.y*c.logo.scale.y*.9;var e=ae(-500,c.stage.camera),a=af(-500,c.stage.camera),f=1;a>e?(f=4/c.cleoSize.y*e,c.cleo.position.y=-(.005*e),c.cleo.position.x=-(.05*a)):(f=1.4/c.cleoSize.x*a,c.cleo.position.y=0,c.cleo.position.x=-(.05*a)),c.cleo.scale.setScalar(f)},this.handleMouseMove=function(a){c.inFocus&&(c.mouseX=a.clientX/window.innerWidth-.5,c.aframe||(c.aframe=requestAnimationFrame(c.renderCleoMovement)))},this.renderCleoMovement=function(){if(!c.inFocus){cancelAnimationFrame(c.aframe),c.aframe=null;return}var b,d,a,e=(b=c.cleo.rotation.z,d=.45*Math.PI+c.mouseX*Math.PI*.2,a=.05,(1-a)*b+a*d);c.cleo.rotation.z=e,c.aframe=requestAnimationFrame(c.renderCleoMovement)},this.render=function(a){c.inFocus&&(c.timeRender+=20,c.particles[0].rotation.y=9e-6*c.timeRender,c.particles[1].rotation.y=5e-6*c.timeRender,c.spotNeutral.position.x=aj[0]+50*Math.cos(5e-4*c.timeRender),c.spotNeutral.position.y=aj[1]+200+200*Math.sin(5e-4*c.timeRender),c.spotPink.position.x=ak[0]+50*Math.cos(3e-4*c.timeRender+.5*Math.PI),c.spotPink.position.y=ak[1]+200+300*Math.sin(3e-4*c.timeRender+.5*Math.PI),c.spotBlue.position.x=al[0]-20*Math.cos(5e-4*c.timeRender+Math.PI),c.spotBlue.position.y=al[1]-50+50*Math.sin(5e-4*c.timeRender+Math.PI))},this.flyToArena=function(a){c.inFocus=!1;var b=c,d=af(-500,c.stage.camera);_.ZP.timeline().to(c.stage.camera.position,{y:60,z:400+((0,v.Z)().any?W.Nn:0),duration:11,ease:"Cubic.easeInOut",onUpdate:function(){var a=this.progress();b.root.rotation.y=2*Math.PI*a,b.cleo.position.z=1.5*d*a},onComplete:a})},this.flyOutOfArena=function(d){var a=c,e=c.root.rotation.y,f=c.cleo.position.z;a.root.rotation.y=0,a.cleo.position.z=0;var b=_.ZP.timeline();c.stage.controls.enabled=!1,b.to(c.stage.camera.position,{x:0,z:400,duration:6,ease:"Cubic.easeInOut",onComplete:function(){window.soundManager.playAmbient()}},0),b.to(c.stage.camera.position,{y:c.cameraStart.y,z:c.cameraStart.z,x:c.cameraStart.x,duration:8,ease:"Cubic.easeInOut",onUpdate:function(){var b=this.progress();a.root.rotation.y=e*(1-b),a.cleo.position.z=f*(1-b)},onComplete:function(){a.inFocus=!0,a.stage.controls.reset(),d()}})},this.root=new R.ZAu,a.scene.add(this.root),!a.isDebugStage()&&(this.root.position.set(0,3500*Math.sin(ai),5250*Math.cos(ai)),this.root.rotation.x=-ai,this.stage.camera.position.set(0,4e3*Math.sin(ai),6e3*Math.cos(ai)),this.stage.camera.updateProjectionMatrix(),this.cameraStart=this.stage.camera.position.clone(),this.cameraStartRotation=this.stage.camera.rotation.clone(),this.stage.controls.saveState(),this.createLogo(),this.createCleo(),this.createParticles(),this.addLights(),this.handleResize(),window.addEventListener("resize",ah()(this.handleResize,p.m$)),(0,v.Z)().any||window.addEventListener("mousemove",this.handleMouseMove))},an=function(){function b(a){var c=this;(0,L.Z)(this,b),this.startTransition=function(d,e,f,g,h,a){var i=c.getPoint(d,e,f),b=c.getDirection(i,g,h);a?c.decorateWithLookAt(b,a):b()},this.getDirection=function(a,b,d){var e=c;return function(){var c=_.ZP.timeline();e.tl=c,c.to(e.camera.position,{x:a.x,y:a.y,z:a.z,duration:b,onComplete:function(){d&&d()}})}},this.tl=_.ZP.timeline({defaults:{ease:"cubic.easeInOut"}}),this.camera=a.camera}var a=b.prototype;return a.getHorizontalPointFromAngle=function(a,b){return[Math.cos(a)*b,Math.sin(a)*b]},a.rotatePointVertically=function(a,c){var b=a.clone(),d=new R.Pa4().crossVectors(a,new R.Pa4(0,1,0)).normalize();return b.applyAxisAngle(d,c),b},a.getPoint=function(c,d,e){var a=new R.Pa4,b=this.getHorizontalPointFromAngle(c,e);return a.set(b[0],0,b[1]),this.rotatePointVertically(a,d)},a.decorateWithLookAt=function(b,a){this.tl.set(this.controls.target,{x:a.x,y:a.y,z:a.z}),b(),this.tl.set(this.controls.target,{x:this.oldLookAt.x,y:this.oldLookAt.y,z:this.oldLookAt.z})},b}(),ao=function(c){(0,O.Z)(a,c);var d=(0,Q.Z)(a);function a(e,c,f){var b;return(0,L.Z)(this,a),(b=d.call(this,e,600,c)).assets=c,b.soundManager=f,b.renderChildren=[],b.choreos=[],b.sequenceIndex=0,b.tLast=0,b.tLastCleos=0,b.tRender=1e3/15,b.tCleos=1e3/30,b.createElements=function(){b.scenery=new ab((0,K.Z)(b),!0),b.renderChildren.push(b.scenery),new X((0,K.Z)(b)),new ac((0,K.Z)(b)),b.lightSpots=new aa((0,K.Z)(b),b.soundManager,b.scenery),(0,v.Z)().any||b.renderChildren.push(b.lightSpots),b.intro=new am((0,K.Z)(b)),b.renderChildren.push(b.intro)},b.initSequence=function(){var c,d=arguments.length>0&& void 0!==arguments[0]&&arguments[0],a=$.lG[b.sequenceIndex],e=new Z((0,K.Z)(b),a,b.onSequenceFinished,b.lightSpots,d,b.onSetVariant);b.choreos.push(e),document.documentElement.setAttribute("data-sequence",a.id),b.onChoreoChange(a.id),b.onSetVariant(0),a.soundEffect&&(c=b.lightSpots).applyAudioChoreoData.apply(c,(0,P.Z)(a.soundEffect))},b.onSequenceFinished=function(){b.sequenceIndex++,b.sequenceIndex<$.lG.length?b.sequenceTransition():(b.soundManager.playTransition(),b.onChoreoChange(""),b.flyOutOfArena(),document.documentElement.setAttribute("data-sequence",""))},b.sequenceTransition=function(){b.soundManager.playTransition();var a=$.lG[b.sequenceIndex].camera[0],c=(0,K.Z)(b);b.cameraController.startTransition(a[0],a[1],a[2],2),document.body.classList.add("scene-transition"),setTimeout(function(){c.initSequence(),document.body.classList.remove("scene-transition")},2e3)},b.renderStage=function(a,c){b.stats.begin(),a-b.tLast>b.tRender&&(b.tLast=a-a%b.tRender,b.renderChildren.forEach(function(b){return b.render(a)})),a-b.tLastCleos>b.tCleos&&(b.tLastCleos=a-a%b.tCleos,b.choreos.forEach(function(b){return b.render(a)})),b.render(a,c),b.stats.end()},b.startArena=function(){b.isDebugStage()||b.intro.flyToArena(b.onArenaFlightComplete)},b.onArenaFlightComplete=function(){b.pause(!1),b.controls.enabled=!0,b.controls.maxDistance=2e3,b.onFlyToStageComplete&&b.onFlyToStageComplete()},b.flyOutOfArena=function(){b.controls.maxDistance=4e3,b.controls.enabled=!1,b.intro.flyOutOfArena(b.reset)},b.reset=function(){b.sequenceIndex=0,b.initSequence(!0),b.onResetComplete(),b.choreos=b.choreos.slice(-1)},b.setChoreoVariant=function(a){b.choreos[b.choreos.length-1].setVariant(a),b.onSetVariant(a)},b.pause=function(){var a=!(arguments.length>0)|| void 0===arguments[0]||arguments[0];b.paused=a,b.choreos.forEach(function(b){return b.pause(a)})},b.destroy=function(){var c,d,e;return b.choreos.forEach(function(a){return a.destroy()}),b.intro.destroy(),(c=((0,K.Z)(b),(0,M.Z)(a.prototype)),d="destroy",N(c,d,e=b)).call(b)},b.init(),b}var b=a.prototype;return b.init=function(){var a=this;this.cameraController=new an(this),this.scene.background=new R.Ilk(W.DM.background),(0,v.Z)().any&&(this.tRender=100,this.tCleos=40),this.addOrbitControls(),this.controls.enablePan=!1,this.controls.target=new R.Pa4(0,50,0),this.controls.addEventListener("start",function(){a.cameraController.tl.pause()}),this.paused=!0,this.createElements(),this.renderer.setAnimationLoop(this.renderStage)},b.start=function(){if(this.isDebugStage()){this.camera.position.set(0,60,300),this.camera.updateProjectionMatrix(),this.onArenaFlightComplete(),this.paused=!1;var a=window.location.hash.replace("#debugStage","");a.length&&(this.sequenceIndex=parseInt(a)-1)}else this.intro.inFocus=!0;this.initSequence(this.paused)},a}(j.H),ap=a(8035),l=a(6004),aq=a.n(l),ar=function(){var k=(0,t.useRef)(),l=(0,t.useRef)(),a=(0,t.useContext)(q.I),b=a.appState,m=a.setAppState,f=a.stageAssets;a.loadComplete;var c=(0,t.useState)(""),g=c[0],r=c[1],d=(0,t.useState)(0),h=d[0],s=d[1],e=(0,t.useState)(!1),i=e[0],u=e[1],j=(0,t.useRef)(null),v=(0,t.useRef)();(0,t.useEffect)(function(){u(b>=p.yf.LOAD_COMPLETE)},[b]),(0,t.useEffect)(function(){var a=j.current;return a&&!k.current&&i&&(l.current=new ap.Z,k.current=new ao(a,f,l.current),k.current.onChoreoChange=function(a){return r(a)},k.current.onPerformanceComplete=function(){m(p.yf.READY)},k.current.onFlyToStageComplete=function(){m(p.yf.ARENA_PLAYING)},k.current.onResetComplete=function(){m(p.yf.READY)},k.current.onSetVariant=function(a){s(a)},k.current.start()),function(){var a;null===(a=l.current)|| void 0===a||a.destroy()}},[i,f]),(0,t.useEffect)(function(){var a,c,d,e=function(){clearTimeout(v.current),b===p.yf.READY&&m(p.yf.ARENA)};switch(clearTimeout(v.current),b){case p.yf.READY:(0,p.Dw)()&&(v.current=setTimeout(function(){m(p.yf.ARENA)},p.PA));break;case p.yf.ARENA:null===(c=k.current)|| void 0===c||c.startArena(),null===(d=l.current)|| void 0===d||d.playIntro()}return null===(a=j.current)|| void 0===a||a.addEventListener("click",e),function(){var a;return null===(a=j.current)|| void 0===a?void 0:a.removeEventListener("click",e)}},[b]),(0,t.useEffect)(function(){return function(){}},[]);var w=(0,J.useRouter)();return(0,t.useEffect)(function(){(0,p._M)()&&w.replace("/composer/")},[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(C.Z,{}),(0,o.jsx)("canvas",{className:aq().stage,id:"main-stage",ref:j}),(0,o.jsx)(x,{}),(0,o.jsx)(F,{}),(0,o.jsx)(I,(0,n.Z)({},{choreoCurrent:g,variantCurrent:h,onSetChoreoVariant:function(c){var a;null===(a=k.current)|| void 0===a||a.setChoreoVariant(c),b===p.yf.ARENA_SHOW_VARIANTS&&m(p.yf.ARENA_INSTR_COMPLETE)}})),(0,o.jsx)(B,{onSoundClick:function(){var a;null===(a=l.current)|| void 0===a||a.toggleMute()}}),(0,o.jsx)(G.Z,{}),(0,o.jsx)(x,{})]})}},3580:function(a){a.exports={cursor:"cursor_cursor__Sx3je",state2:"cursor_state2__jtlDh",state3:"cursor_state3__RFV0G",init:"cursor_init___d0iR",state4:"cursor_state4__EfnWB",state5:"cursor_state5__s_N75",state6:"cursor_state6__jESZD",state7:"cursor_state7__GlBUK",hidden:"cursor_hidden__gF8I0",blur:"cursor_blur__G3Lm9",outer:"cursor_outer__PP66h",inner:"cursor_inner__BIcx7",outerContainer:"cursor_outerContainer__wOe7a",burger:"cursor_burger__K_YXS",audio:"cursor_audio__z0s6c",innerContainer:"cursor_innerContainer__wDEaG",innerCircle:"cursor_innerCircle__1Mfo4",press:"cursor_press__2DYUu",innerLabel:"cursor_innerLabel__b0Q4_",overlay:"cursor_overlay__1pTN2"}},5233:function(a){a.exports={footerAudio:"footerAudio_footerAudio__ciK63",inner:"footerAudio_inner__Kbdzp",audioUpDown1:"footerAudio_audioUpDown1__dyBps"}},7930:function(a){a.exports={footer:"footer_footer__eO3Mo",inner:"footer_inner__vefxX",logo:"footer_logo__7PXa7",arena:"footer_arena__h9Ul7"}},7793:function(a){a.exports={instructions:"instructions_instructions__7oXlY",item:"instructions_item__7328w",overline:"instructions_overline__BNj3N",copy:"instructions_copy__k_o3Y",visible:"instructions_visible__81E9s"}},206:function(a){a.exports={variants:"variants_variants__kboQu",bar:"variants_bar__JogL1",item:"variants_item___Pgy4",active:"variants_active__iknxI",visible:"variants_visible__KA__K"}},6004:function(a){a.exports={stage:"home_stage__n0Jwe"}}},function(a){a.O(0,[802,630,96,774,888,179],function(){var b;return a(a.s=8312)}),_N_E=a.O()}])